var t,e,n,i,a,r,s,u,o,l,h,c,d,f,v,p,g,D,m,y,A,b,k,E,w,C,F,_,x,S,M,B,P,L,T,I,R,N,O,W,j,H,z,V,U,G,q,X,K,Y,Q,J,Z,$,tt,et,nt,it,at,rt,st,ut,ot,lt,ht,ct,dt,ft,vt,pt,gt,Dt,mt,yt,At,bt,kt,Et,wt,Ct,Ft,_t,xt,St,Mt,Bt,Pt,Lt,Tt,It,Rt,Nt,Ot,Wt,jt,Ht,zt,Vt,Ut,Gt,qt,Xt,Kt,Yt,Qt,Jt,Zt,$t,te,ee,ne,ie,ae,re,se,ue,oe,le,he,ce,de,fe,ve,pe,ge,De,me,ye,Ae,be;function ke(t){var e="function"==typeof Map?new Map:void 0;return ke=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Ze())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var a=new(t.bind.apply(t,i));return n&&en(a,n.prototype),a}(t,arguments,$e(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),en(n,t)},ke(t)}function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach((function(e){Pe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ce(t,e,n){e||(e=[]);var i=e.length++;return Object.defineProperty({},"_",{set:function(a){e[i]=a,t.apply(n,e)}})}function Fe(t,e,n,i){var a=_e($e(1&i?t.prototype:t),e,n);return 2&i&&"function"==typeof a?function(t){return a.apply(n,t)}:a}function _e(){return _e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=$e(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},_e.apply(null,arguments)}function xe(t){return function(t){if(Array.isArray(t))return qe(t)}(t)||Se(t)||Ge(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Me(t,e){Ne(t,e),e.add(t)}function Be(t,e,n){return n(je(t,e))}function Pe(t,e,n){return(e=Ye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Le(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Le=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",u=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var r=e&&e.prototype instanceof D?e:D,s=Object.create(r.prototype),u=new M(i||[]);return a(s,"_invoke",{value:F(t,n,u)}),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",f="suspendedYield",v="executing",p="completed",g={};function D(){}function m(){}function y(){}var A={};l(A,s,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(B([])));k&&k!==n&&i.call(k,s)&&(A=k);var E=y.prototype=D.prototype=Object.create(A);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(a,r,s,u){var o=c(t[a],t,r);if("throw"!==o.type){var l=o.arg,h=l.value;return h&&"object"==nn(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,u)}))}u(o.arg)}var r;a(this,"_invoke",{value:function(t,i){function a(){return new e((function(e,a){n(t,i,e,a)}))}return r=r?r.then(a,a):a()}})}function F(e,n,i){var a=d;return function(r,s){if(a===v)throw Error("Generator is already running");if(a===p){if("throw"===r)throw s;return{value:t,done:!0}}for(i.method=r,i.arg=s;;){var u=i.delegate;if(u){var o=_(u,i);if(o){if(o===g)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===d)throw a=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=v;var l=c(e,n,i);if("normal"===l.type){if(a=i.done?p:f,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(a=p,i.method="throw",i.arg=l.arg)}}}function _(e,n){var i=n.method,a=e.iterator[i];if(a===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=c(a,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var s=r.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function B(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function n(){for(;++a<e.length;)if(i.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(nn(e)+" is not iterable")}return m.prototype=y,a(E,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:m,configurable:!0}),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,o,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},w(C.prototype),l(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,i,a,r){void 0===r&&(r=Promise);var s=new C(h(t,n,i,a),r);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(E),l(E,o,"Generator"),l(E,s,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=B,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(i,a){return u.type="throw",u.arg=e,n.next=i,a&&(n.method="next",n.arg=t),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],u=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;S(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:B(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}function Te(t,e,n,i,a,r,s){try{var u=t[r](s),o=u.value}catch(t){return void n(t)}u.done?e(o):Promise.resolve(o).then(i,a)}function Ie(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function s(t){Te(r,i,a,s,u,"next",t)}function u(t){Te(r,i,a,s,u,"throw",t)}s(void 0)}))}}function Re(t,e,n){Ne(t,e),e.set(t,n)}function Ne(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oe(t,e){return t.get(je(t,e))}function We(t,e,n){return t.set(je(t,e),n),n}function je(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function He(t,e){return Ve(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,a,r,s,u=[],o=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=r.call(n)).done)&&(u.push(i.value),u.length!==e);o=!0);}catch(t){l=!0,a=t}finally{try{if(!o&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return u}}(t,e)||Ge(t,e)||ze()}function ze(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ve(t){if(Array.isArray(t))return t}function Ue(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ge(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw r}}}}function Ge(t,e){if(t){if("string"==typeof t)return qe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qe(t,e):void 0}}function qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ye(i.key),i)}}function Ke(t,e,n){return e&&Xe(t.prototype,e),n&&Xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ye(t){var e=function(t,e){if("object"!=nn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=nn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nn(e)?e:e+""}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Je(t,e,n){return e=$e(e),function(t,e){if(e&&("object"==nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ze()?Reflect.construct(e,n||[],$e(t).constructor):e.apply(t,n))}function Ze(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ze=function(){return!!t})()}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$e(t)}function tn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&en(t,e)}function en(t,e){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},en(t,e)}function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function an(t){return new un(t,0)}function rn(t){return function(){return new sn(t.apply(this,arguments))}}function sn(t){var e,n;function i(e,n){try{var r=t[e](n),s=r.value,u=s instanceof un;Promise.resolve(u?s.v:s).then((function(n){if(u){var o="return"===e?"return":"next";if(!s.k||n.done)return i(o,n);n=t[o](n).value}a(r.done?"return":"normal",n)}),(function(t){i("throw",t)}))}catch(t){a("throw",t)}}function a(t,a){switch(t){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,a){return new Promise((function(r,s){var u={key:t,arg:a,resolve:r,reject:s,next:null};n?n=n.next=u:(e=n=u,i(t,a))}))},"function"!=typeof t.return&&(this.return=void 0)}function un(t,e){this.v=t,this.k=e}function on(t){var e,n,i,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);a--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new ln(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function ln(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return ln=function(t){this.s=t,this.n=t.next},ln.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new ln(t)}sn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},sn.prototype.next=function(t){return this._invoke("next",t)},sn.prototype.throw=function(t){return this._invoke("throw",t)},sn.prototype.return=function(t){return this._invoke("return",t)};import"./promise-with-resolvers-D6YDqdna.js";
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2024 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */var hn={d:function(t,e){for(var n in e)hn.o(e,n)&&!hn.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},cn=globalThis.pdfjsLib={};hn.d(cn,{AbortException:function(){return wi},AnnotationEditorLayer:function(){return Gv},AnnotationEditorParamsType:function(){return Fn},AnnotationEditorType:function(){return Cn},AnnotationEditorUIManager:function(){return xr},AnnotationLayer:function(){return Fc},AnnotationMode:function(){return wn},CMapCompressionType:function(){return ri},ColorPicker:function(){return Hd},DOMSVGFactory:function(){return Fa},DrawLayer:function(){return Jv},FeatureTest:function(){return xi},GlobalWorkerOptions:function(){return Ku},ImageKind:function(){return Tn},InvalidPDFException:function(){return Ai},MissingPDFException:function(){return bi},OPS:function(){return si},PDFDataRangeTransport:function(){return yl},PDFDateString:function(){return Na},PDFWorker:function(){return Bl},PasswordResponses:function(){return ui},PermissionFlag:function(){return _n},PixelsPerInch:function(){return $i},RenderingCancelledException:function(){return xa},TextLayer:function(){return nl},UnexpectedResponseException:function(){return ki},Util:function(){return Mi},VerbosityLevel:function(){return ai},XfaLayer:function(){return ih},build:function(){return $l},createValidAbsoluteUrl:function(){return pi},fetchData:function(){return ka},getDocument:function(){return pl},getFilenameFromUrl:function(){return Ba},getPdfFilenameFromUrl:function(){return Pa},getXfaPageViewport:function(){return Oa},isDataScheme:function(){return Sa},isPdfFile:function(){return Ma},noContextMenu:function(){return Ra},normalizeUnicode:function(){return Ii},setLayerDimensions:function(){return za},shadow:function(){return gi},version:function(){return Zl}});var dn=!("object"!==("undefined"==typeof process?"undefined":nn(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),fn=[1,0,0,1,0,0],vn=[.001,0,0,.001,0,0],pn=1.35,gn=1,Dn=2,mn=4,yn=16,An=32,bn=64,kn=128,En=256,wn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Cn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Fn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},_n={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},xn=0,Sn=1,Mn=2,Bn=3,Pn=3,Ln=4,Tn={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},In=1,Rn=2,Nn=3,On=4,Wn=5,jn=6,Hn=7,zn=8,Vn=9,Un=10,Gn=11,qn=12,Xn=13,Kn=14,Yn=15,Qn=16,Jn=17,Zn=20,$n=1,ti=2,ei=3,ni=4,ii=5,ai={ERRORS:0,WARNINGS:1,INFOS:5},ri={NONE:0,BINARY:1},si={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ui={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},oi=ai.WARNINGS;function li(t){Number.isInteger(t)&&(oi=t)}function hi(){return oi}function ci(t){oi>=ai.INFOS&&console.log("Info: ".concat(t))}function di(t){oi>=ai.WARNINGS&&console.log("Warning: ".concat(t))}function fi(t){throw new Error(t)}function vi(t,e){t||fi(e)}function pi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){var i=t.match(/\./g);(null==i?void 0:i.length)>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch(t){}}var a=e?new URL(t,e):new URL(t);if(function(t){switch(null==t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch(t){}return null}function gi(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}var Di=function(){function t(e,n){this.constructor===t&&fi("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}(),mi=function(){function t(e,n){var i;return Qe(this,t),(i=Je(this,t,[e,"PasswordException"])).code=n,i}return tn(t,Di),Ke(t)}(),yi=function(){function t(e,n){var i;return Qe(this,t),(i=Je(this,t,[e,"UnknownErrorException"])).details=n,i}return tn(t,Di),Ke(t)}(),Ai=function(){function t(e){return Qe(this,t),Je(this,t,[e,"InvalidPDFException"])}return tn(t,Di),Ke(t)}(),bi=function(){function t(e){return Qe(this,t),Je(this,t,[e,"MissingPDFException"])}return tn(t,Di),Ke(t)}(),ki=function(){function t(e,n){var i;return Qe(this,t),(i=Je(this,t,[e,"UnexpectedResponseException"])).status=n,i}return tn(t,Di),Ke(t)}(),Ei=function(){function t(e){return Qe(this,t),Je(this,t,[e,"FormatError"])}return tn(t,Di),Ke(t)}(),wi=function(){function t(e){return Qe(this,t),Je(this,t,[e,"AbortException"])}return tn(t,Di),Ke(t)}();function Ci(t){"object"===nn(t)&&void 0!==(null==t?void 0:t.length)||fi("Invalid argument for bytesToString");var e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);for(var i=[],a=0;a<e;a+=n){var r=Math.min(a+n,e),s=t.subarray(a,r);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function Fi(t){"string"!=typeof t&&fi("Invalid argument for stringToBytes");for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}function _i(t){var e,n=Object.create(null),i=Ue(t);try{for(i.s();!(e=i.n()).done;){var a=He(e.value,2),r=a[0],s=a[1];n[r]=s}}catch(t){i.e(t)}finally{i.f()}return n}var xi=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"isLittleEndian",get:function(){return gi(this,"isLittleEndian",((t=new Uint8Array(4))[0]=1,1===new Uint32Array(t.buffer,0,1)[0]));var t}},{key:"isEvalSupported",get:function(){return gi(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return gi(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}},{key:"platform",get:function(){var t;return"undefined"!=typeof navigator&&"string"==typeof(null===(t=navigator)||void 0===t?void 0:t.platform)?gi(this,"platform",{isMac:navigator.platform.includes("Mac")}):gi(this,"platform",{isMac:!1})}},{key:"isCSSRoundSupported",get:function(){var t,e;return gi(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}])}(),Si=Array.from(Array(256).keys(),(function(t){return t.toString(16).padStart(2,"0")})),Mi=t=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"makeHexColor",value:function(t,e,n){return"#".concat(Si[t]).concat(Si[e]).concat(Si[n])}},{key:"scaleMinMax",value:function(t,e){var n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}},{key:"transform",value:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}},{key:"applyTransform",value:function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}},{key:"applyInverseTransform",value:function(t,e){var n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}},{key:"getAxialAlignedBoundingBox",value:function(t,e){var n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],a[0],r[0]),Math.min(n[1],i[1],a[1],r[1]),Math.max(n[0],i[0],a[0],r[0]),Math.max(n[1],i[1],a[1],r[1])]}},{key:"inverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}},{key:"singularValueDecompose2dScale",value:function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],s=(n+r)/2,u=Math.sqrt(Math.pow(n+r,2)-4*(n*r-a*i))/2,o=s+u||1,l=s-u||1;return[Math.sqrt(o),Math.sqrt(l)]}},{key:"normalizeRect",value:function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}},{key:"intersect",value:function(t,e){var n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;var a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>r?null:[n,a,i,r]}},{key:"bezierBoundingBox",value:function(e,n,i,a,r,s,u,o,l){return l?(l[0]=Math.min(l[0],e,u),l[1]=Math.min(l[1],n,o),l[2]=Math.max(l[2],e,u),l[3]=Math.max(l[3],n,o)):l=[Math.min(e,u),Math.min(n,o),Math.max(e,u),Math.max(n,o)],je(t,this,Pi).call(this,e,i,r,u,n,a,s,o,3*(3*(i-r)-e+u),6*(e-2*i+r),3*(i-e),l),je(t,this,Pi).call(this,e,i,r,u,n,a,s,o,3*(3*(a-s)-n+o),6*(n-2*a+s),3*(a-n),l),l}}])}();function Bi(t,e,n,i,a,r,s,u,o,l){if(!(o<=0||o>=1)){var h=1-o,c=o*o,d=c*o,f=h*(h*(h*t+3*o*e)+3*c*n)+d*i,v=h*(h*(h*a+3*o*r)+3*c*s)+d*u;l[0]=Math.min(l[0],f),l[1]=Math.min(l[1],v),l[2]=Math.max(l[2],f),l[3]=Math.max(l[3],v)}}function Pi(e,n,i,a,r,s,u,o,l,h,c,d){if(Math.abs(l)<1e-12)Math.abs(h)>=1e-12&&je(t,this,Bi).call(this,e,n,i,a,r,s,u,o,-c/h,d);else{var f=Math.pow(h,2)-4*c*l;if(!(f<0)){var v=Math.sqrt(f),p=2*l;je(t,this,Bi).call(this,e,n,i,a,r,s,u,o,(-h+v)/p,d),je(t,this,Bi).call(this,e,n,i,a,r,s,u,o,(-h-v)/p,d)}}}var Li=null,Ti=null;function Ii(t){return Li||(Li=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Ti=new Map([["ﬅ","ſt"]])),t.replaceAll(Li,(function(t,e,n){return e?e.normalize("NFKC"):Ti.get(n)}))}var Ri="pdfjs_internal_id_",Ni=0,Oi=1,Wi=2,ji=3,Hi=4,zi=5,Vi=6,Ui=7,Gi=8,qi=function(){return Ke((function t(){Qe(this,t),this.constructor===t&&fi("Cannot initialize BaseFilterFactory.")}),[{key:"addFilter",value:function(t){return"none"}},{key:"addHCMFilter",value:function(t,e){return"none"}},{key:"addAlphaFilter",value:function(t){return"none"}},{key:"addLuminosityFilter",value:function(t){return"none"}},{key:"addHighlightHCMFilter",value:function(t,e,n,i,a){return"none"}},{key:"destroy",value:function(){}}])}(),Xi=new WeakMap,Ki=function(){return Ke((function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).enableHWA,n=void 0!==e&&e;Qe(this,t),Re(this,Xi,!1),this.constructor===t&&fi("Cannot initialize BaseCanvasFactory."),We(Xi,this,n)}),[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");var n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!Oe(Xi,this)})}}},{key:"reset",value:function(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},{key:"_createCanvas",value:function(t,e){fi("Abstract method `_createCanvas` called.")}}])}(),Yi=function(){return Ke((function t(e){var n=e.baseUrl,i=void 0===n?null:n,a=e.isCompressed,r=void 0===a||a;Qe(this,t),this.constructor===t&&fi("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=i,this.isCompressed=r}),[{key:"fetch",value:(t=Ie(Le().mark((function t(e){var n,i,a,r=this;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name,this.baseUrl){t.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(n){t.next=5;break}throw new Error("CMap name must be specified.");case 5:return i=this.baseUrl+n+(this.isCompressed?".bcmap":""),a=this.isCompressed?ri.BINARY:ri.NONE,t.abrupt("return",this._fetchData(i,a).catch((function(t){throw new Error("Unable to load ".concat(r.isCompressed?"binary ":"","CMap at: ").concat(i))})));case 8:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"_fetchData",value:function(t,e){fi("Abstract method `_fetchData` called.")}}]);var t}(),Qi=function(){return Ke((function t(e){var n=e.baseUrl,i=void 0===n?null:n;Qe(this,t),this.constructor===t&&fi("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=i}),[{key:"fetch",value:(t=Ie(Le().mark((function t(e){var n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.filename,this.baseUrl){t.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(n){t.next=5;break}throw new Error("Font filename must be specified.");case 5:return i="".concat(this.baseUrl).concat(n),t.abrupt("return",this._fetchData(i).catch((function(t){throw new Error("Unable to load font data at: ".concat(i))})));case 7:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"_fetchData",value:function(t){fi("Abstract method `_fetchData` called.")}}]);var t}(),Ji=function(){return Ke((function t(){Qe(this,t),this.constructor===t&&fi("Cannot initialize BaseSVGFactory.")}),[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");var i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(e,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),i}},{key:"createElement",value:function(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function(t){fi("Abstract method `_createSVG` called.")}}])}(),Zi="http://www.w3.org/2000/svg",$i=(e=Ke((function t(){Qe(this,t)})),Pe(e,"CSS",96),Pe(e,"PDF",72),Pe(e,"PDF_TO_CSS_UNITS",e.CSS/e.PDF),e),ta=new WeakMap,ea=new WeakMap,na=new WeakMap,ia=new WeakMap,aa=new WeakMap,ra=new WeakMap,sa=new WeakMap,ua=new WeakSet,oa=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.docId,a=n.ownerDocument,r=void 0===a?globalThis.document:a;return Qe(this,t),Me(e=Je(this,t),ua),Re(e,ta,void 0),Re(e,ea,void 0),Re(e,na,void 0),Re(e,ia,void 0),Re(e,aa,void 0),Re(e,ra,void 0),Re(e,sa,0),We(ia,e,i),We(aa,e,r),e}return tn(t,qi),Ke(t,[{key:"addFilter",value:function(t){var e,n;if(!t)return"none";var i=Be(ua,this,la).get(t);if(i)return i;var a=He(je(ua,this,da).call(this,t),3),r=a[0],s=a[1],u=a[2],o=1===t.length?r:"".concat(r).concat(s).concat(u);if(i=Be(ua,this,la).get(o))return Be(ua,this,la).set(t,i),i;var l="g_".concat(Oe(ia,this),"_transfer_map_").concat((We(sa,this,(e=Oe(sa,this),n=e++,e)),n)),h=je(ua,this,fa).call(this,l);Be(ua,this,la).set(t,h),Be(ua,this,la).set(o,h);var c=je(ua,this,ga).call(this,l);return je(ua,this,ma).call(this,r,s,u,c),h}},{key:"addHCMFilter",value:function(t,e){var n,i,a="".concat(t,"-").concat(e),r="base",s=Be(ua,this,ha).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===a)return s.url;s?(null===(i=s.filter)||void 0===i||i.remove(),s.key=a,s.url="none",s.filter=null):(s={key:a,url:"none",filter:null},Be(ua,this,ha).set(r,s));if(!t||!e)return s.url;var u=je(ua,this,Aa).call(this,t);t=Mi.makeHexColor.apply(Mi,xe(u));var o=je(ua,this,Aa).call(this,e);if(e=Mi.makeHexColor.apply(Mi,xe(o)),Be(ua,this,ca).style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;for(var l=new Array(256),h=0;h<=255;h++){var c=h/255;l[h]=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4)}var d=l.join(","),f="g_".concat(Oe(ia,this),"_hcm_filter"),v=s.filter=je(ua,this,ga).call(this,f);je(ua,this,ma).call(this,d,d,d,v),je(ua,this,pa).call(this,v);var p=function(t,e){for(var n=u[t]/255,i=o[t]/255,a=new Array(e+1),r=0;r<=e;r++)a[r]=n+r/e*(i-n);return a.join(",")};return je(ua,this,ma).call(this,p(0,5),p(1,5),p(2,5),v),s.url=je(ua,this,fa).call(this,f),s.url}},{key:"addAlphaFilter",value:function(t){var e,n,i=Be(ua,this,la).get(t);if(i)return i;var a=He(je(ua,this,da).call(this,[t]),1)[0],r="alpha_".concat(a);if(i=Be(ua,this,la).get(r))return Be(ua,this,la).set(t,i),i;var s="g_".concat(Oe(ia,this),"_alpha_map_").concat((We(sa,this,(e=Oe(sa,this),n=e++,e)),n)),u=je(ua,this,fa).call(this,s);Be(ua,this,la).set(t,u),Be(ua,this,la).set(r,u);var o=je(ua,this,ga).call(this,s);return je(ua,this,ya).call(this,a,o),u}},{key:"addLuminosityFilter",value:function(t){var e,n,i,a,r=Be(ua,this,la).get(t||"luminosity");if(r)return r;t?(i=He(je(ua,this,da).call(this,[t]),1)[0],a="luminosity_".concat(i)):a="luminosity";if(r=Be(ua,this,la).get(a))return Be(ua,this,la).set(t,r),r;var s="g_".concat(Oe(ia,this),"_luminosity_map_").concat((We(sa,this,(e=Oe(sa,this),n=e++,e)),n)),u=je(ua,this,fa).call(this,s);Be(ua,this,la).set(t,u),Be(ua,this,la).set(a,u);var o=je(ua,this,ga).call(this,s);return je(ua,this,va).call(this,o),t&&je(ua,this,ya).call(this,i,o),u}},{key:"addHighlightHCMFilter",value:function(t,e,n,i,a){var r,s,u="".concat(e,"-").concat(n,"-").concat(i,"-").concat(a),o=Be(ua,this,ha).get(t);if((null===(r=o)||void 0===r?void 0:r.key)===u)return o.url;o?(null===(s=o.filter)||void 0===s||s.remove(),o.key=u,o.url="none",o.filter=null):(o={key:u,url:"none",filter:null},Be(ua,this,ha).set(t,o));if(!e||!n)return o.url;var l=He([e,n].map(je(ua,this,Aa).bind(this)),2),h=l[0],c=l[1],d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),v=He([i,a].map(je(ua,this,Aa).bind(this)),2),p=v[0],g=v[1];if(f<d){var D=[f,d,g,p];d=D[0],f=D[1],p=D[2],g=D[3]}Be(ua,this,ca).style.color="";var m=function(t,e,n){for(var i=new Array(256),a=(f-d)/n,r=t/255,s=(e-t)/(255*n),u=0,o=0;o<=n;o++){for(var l=Math.round(d+o*a),h=r+o*s,c=u;c<=l;c++)i[c]=h;u=l+1}for(var v=u;v<256;v++)i[v]=i[u-1];return i.join(",")},y="g_".concat(Oe(ia,this),"_hcm_").concat(t,"_filter"),A=o.filter=je(ua,this,ga).call(this,y);return je(ua,this,pa).call(this,A),je(ua,this,ma).call(this,m(p[0],g[0],5),m(p[1],g[1],5),m(p[2],g[2],5),A),o.url=je(ua,this,fa).call(this,y),o.url}},{key:"destroy",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==Be(ua,this,ha).size||(Oe(na,this)&&(Oe(na,this).parentNode.parentNode.remove(),We(na,this,null)),Oe(ea,this)&&(Oe(ea,this).clear(),We(ea,this,null)),We(sa,this,0))}}])}();function la(t){return Oe(ea,t)||We(ea,t,new Map)}function ha(t){return Oe(ra,t)||We(ra,t,new Map)}function ca(t){if(!Oe(na,t)){var e=Oe(aa,t).createElement("div"),n=e.style;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;var i=Oe(aa,t).createElementNS(Zi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),We(na,t,Oe(aa,t).createElementNS(Zi,"defs")),e.append(i),i.append(Oe(na,t)),Oe(aa,t).body.append(e)}return Oe(na,t)}function da(t){if(1===t.length){for(var e=t[0],n=new Array(256),i=0;i<256;i++)n[i]=e[i]/255;var a=n.join(",");return[a,a,a]}for(var r=He(t,3),s=r[0],u=r[1],o=r[2],l=new Array(256),h=new Array(256),c=new Array(256),d=0;d<256;d++)l[d]=s[d]/255,h[d]=u[d]/255,c[d]=o[d]/255;return[l.join(","),h.join(","),c.join(",")]}function fa(t){if(void 0===Oe(ta,this)){We(ta,this,"");var e=Oe(aa,this).URL;e!==Oe(aa,this).baseURI&&(Sa(e)?di('#createUrl: ignore "data:"-URL for performance reasons.'):We(ta,this,e.split("#",1)[0]))}return"url(".concat(Oe(ta,this),"#").concat(t,")")}function va(t){var e=Oe(aa,this).createElementNS(Zi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}function pa(t){var e=Oe(aa,this).createElementNS(Zi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}function ga(t){var e=Oe(aa,this).createElementNS(Zi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),Be(ua,this,ca).append(e),e}function Da(t,e,n){var i=Oe(aa,this).createElementNS(Zi,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}function ma(t,e,n,i){var a=Oe(aa,this).createElementNS(Zi,"feComponentTransfer");i.append(a),je(ua,this,Da).call(this,a,"feFuncR",t),je(ua,this,Da).call(this,a,"feFuncG",e),je(ua,this,Da).call(this,a,"feFuncB",n)}function ya(t,e){var n=Oe(aa,this).createElementNS(Zi,"feComponentTransfer");e.append(n),je(ua,this,Da).call(this,n,"feFuncA",t)}function Aa(t){return Be(ua,this,ca).style.color=t,Wa(getComputedStyle(Be(ua,this,ca)).getPropertyValue("color"))}var ba=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.ownerDocument,a=void 0===i?globalThis.document:i,r=n.enableHWA,s=void 0!==r&&r;return Qe(this,t),(e=Je(this,t,[{enableHWA:s}]))._document=a,e}return tn(t,Ki),Ke(t,[{key:"_createCanvas",value:function(t,e){var n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}])}();function ka(t){return Ea.apply(this,arguments)}function Ea(){return Ea=Ie(Le().mark((function t(e){var n,i,a=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:"text",!Ia(e,document.baseURI)){t.next=14;break}return t.next=4,fetch(e);case 4:if((i=t.sent).ok){t.next=7;break}throw new Error(i.statusText);case 7:t.t0=n,t.next="arraybuffer"===t.t0?10:"blob"===t.t0?11:"json"===t.t0?12:13;break;case 10:return t.abrupt("return",i.arrayBuffer());case 11:return t.abrupt("return",i.blob());case 12:return t.abrupt("return",i.json());case 13:return t.abrupt("return",i.text());case 14:return t.abrupt("return",new Promise((function(t,i){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=n,a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200!==a.status&&0!==a.status)i(new Error(a.statusText));else{switch(n){case"arraybuffer":case"blob":case"json":return void t(a.response)}t(a.responseText)}},a.send(null)})));case 15:case"end":return t.stop()}}),t)}))),Ea.apply(this,arguments)}var wa=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Yi),Ke(t,[{key:"_fetchData",value:function(t,e){return ka(t,this.isCompressed?"arraybuffer":"text").then((function(t){return{cMapData:t instanceof ArrayBuffer?new Uint8Array(t):Fi(t),compressionType:e}}))}}])}(),Ca=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Qi),Ke(t,[{key:"_fetchData",value:function(t){return ka(t,"arraybuffer").then((function(t){return new Uint8Array(t)}))}}])}(),Fa=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Ji),Ke(t,[{key:"_createSVG",value:function(t){return document.createElementNS(Zi,t)}}])}(),_a=function(){function t(e){var n=e.viewBox,i=e.scale,a=e.rotation,r=e.offsetX,s=void 0===r?0:r,u=e.offsetY,o=void 0===u?0:u,l=e.dontFlip,h=void 0!==l&&l;Qe(this,t),this.viewBox=n,this.scale=i,this.rotation=a,this.offsetX=s,this.offsetY=o;var c,d,f,v,p,g,D,m,y=(n[2]+n[0])/2,A=(n[3]+n[1])/2;switch((a%=360)<0&&(a+=360),a){case 180:c=-1,d=0,f=0,v=1;break;case 90:c=0,d=1,f=1,v=0;break;case 270:c=0,d=-1,f=-1,v=0;break;case 0:c=1,d=0,f=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(f=-f,v=-v),0===c?(p=Math.abs(A-n[1])*i+s,g=Math.abs(y-n[0])*i+o,D=(n[3]-n[1])*i,m=(n[2]-n[0])*i):(p=Math.abs(y-n[0])*i+s,g=Math.abs(A-n[1])*i+o,D=(n[2]-n[0])*i,m=(n[3]-n[1])*i),this.transform=[c*i,d*i,f*i,v*i,p-c*i*y-f*i*A,g-d*i*y-v*i*A],this.width=D,this.height=m}return Ke(t,[{key:"rawDims",get:function(){var t=this.viewBox;return gi(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.scale,i=void 0===n?this.scale:n,a=e.rotation,r=void 0===a?this.rotation:a,s=e.offsetX,u=void 0===s?this.offsetX:s,o=e.offsetY,l=void 0===o?this.offsetY:o,h=e.dontFlip,c=void 0!==h&&h;return new t({viewBox:this.viewBox.slice(),scale:i,rotation:r,offsetX:u,offsetY:l,dontFlip:c})}},{key:"convertToViewportPoint",value:function(t,e){return Mi.applyTransform([t,e],this.transform)}},{key:"convertToViewportRectangle",value:function(t){var e=Mi.applyTransform([t[0],t[1]],this.transform),n=Mi.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(t,e){return Mi.applyInverseTransform([t,e],this.transform)}}])}(),xa=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Qe(this,t),(n=Je(this,t,[e,"RenderingCancelledException"])).extraDelay=i,n}return tn(t,Di),Ke(t)}();function Sa(t){for(var e=t.length,n=0;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function Ma(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function Ba(t){var e=t.split(/[#?]/,1);return(t=He(e,1)[0]).substring(t.lastIndexOf("/")+1)}function Pa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return e;if(Sa(t))return di('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;var n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0]).includes("%"))try{a=n.exec(decodeURIComponent(a))[0]}catch(t){}return a||e}var La,Ta=function(){return Ke((function t(){Qe(this,t),Pe(this,"started",Object.create(null)),Pe(this,"times",[])}),[{key:"time",value:function(t){t in this.started&&di("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function(t){t in this.started||di("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function(){var t,e=[],n=0,i=Ue(this.times);try{for(i.s();!(t=i.n()).done;){var a=t.value.name;n=Math.max(a.length,n)}}catch(t){i.e(t)}finally{i.f()}var r,s=Ue(this.times);try{for(s.s();!(r=s.n()).done;){var u=r.value,o=u.name,l=u.start,h=u.end;e.push("".concat(o.padEnd(n)," ").concat(h-l,"ms\n"))}}catch(t){s.e(t)}finally{s.f()}return e.join("")}}])}();function Ia(t,e){try{var n=(e?new URL(t,e):new URL(t)).protocol;return"http:"===n||"https:"===n}catch(t){return!1}}function Ra(t){t.preventDefault()}var Na=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"toDateObject",value:function(t){if(!t||"string"!=typeof t)return null;La||(La=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var e=La.exec(t);if(!e)return null;var n=parseInt(e[1],10),i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;var a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;var r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;var s=parseInt(e[5],10);s=s>=0&&s<=59?s:0;var u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;var o=e[7]||"Z",l=parseInt(e[8],10);l=l>=0&&l<=23?l:0;var h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===o?(r+=l,s+=h):"+"===o&&(r-=l,s-=h),new Date(Date.UTC(n,i,a,r,s,u))}}])}();function Oa(t,e){var n=e.scale,i=void 0===n?1:n,a=e.rotation,r=void 0===a?0:a,s=t.attributes.style,u=s.width,o=s.height,l=[0,0,parseInt(u),parseInt(o)];return new _a({viewBox:l,scale:i,rotation:r})}function Wa(t){if(t.startsWith("#")){var e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((function(t){return parseInt(t)})):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((function(t){return parseInt(t)})).slice(0,3):(di('Not a valid color format: "'.concat(t,'"')),[0,0,0])}function ja(t){var e=t.getTransform();return[e.a,e.b,e.c,e.d,e.e,e.f]}function Ha(t){var e=t.getTransform().invertSelf();return[e.a,e.b,e.c,e.d,e.e,e.f]}function za(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof _a){var a=e.rawDims,r=a.pageWidth,s=a.pageHeight,u=t.style,o=xi.isCSSRoundSupported,l="var(--scale-factor) * ".concat(r,"px"),h="var(--scale-factor) * ".concat(s,"px"),c=o?"round(".concat(l,", 1px)"):"calc(".concat(l,")"),d=o?"round(".concat(h,", 1px)"):"calc(".concat(h,")");n&&e.rotation%180!=0?(u.width=d,u.height=c):(u.width=c,u.height=d)}i&&t.setAttribute("data-main-rotation",e.rotation)}var Va=new WeakMap,Ua=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Xa=new WeakSet,Ka=function(){return Ke((function t(e){Qe(this,t),Me(this,Xa),Re(this,Va,null),Re(this,Ua,null),Re(this,Ga,void 0),Re(this,qa,null),We(Ga,this,e)}),[{key:"render",value:function(){var t=We(Va,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");var e=Oe(Ga,this)._uiManager._signal;t.addEventListener("contextmenu",Ra,{signal:e}),t.addEventListener("pointerdown",Ya,{signal:e});var n=We(qa,this,document.createElement("div"));n.className="buttons",t.append(n);var i=Oe(Ga,this).toolbarPosition;if(i){var a=t.style,r="ltr"===Oe(Ga,this)._uiManager.direction?1-i[0]:i[0];a.insetInlineEnd="".concat(100*r,"%"),a.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return je(Xa,this,$a).call(this),t}},{key:"hide",value:function(){var t;Oe(Va,this).classList.add("hidden"),null===(t=Oe(Ua,this))||void 0===t||t.hideDropdown()}},{key:"show",value:function(){Oe(Va,this).classList.remove("hidden")}},{key:"addAltTextButton",value:function(t){je(Xa,this,Za).call(this,t),Oe(qa,this).prepend(t,Be(Xa,this,tr))}},{key:"addColorPicker",value:function(t){We(Ua,this,t);var e=t.renderButton();je(Xa,this,Za).call(this,e),Oe(qa,this).prepend(e,Be(Xa,this,tr))}},{key:"remove",value:function(){var t;Oe(Va,this).remove(),null===(t=Oe(Ua,this))||void 0===t||t.destroy(),We(Ua,this,null)}}])}();function Ya(t){t.stopPropagation()}function Qa(t){Oe(Ga,this)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}function Ja(t){Oe(Ga,this)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}function Za(t){var e=Oe(Ga,this)._uiManager._signal;t.addEventListener("focusin",je(Xa,this,Qa).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",je(Xa,this,Ja).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ra,{signal:e})}function $a(){var t=this,e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-editor-remove-".concat(Oe(Ga,this).editorType,"-button")),je(Xa,this,Za).call(this,e),e.addEventListener("click",(function(e){Oe(Ga,t)._uiManager.delete()}),{signal:Oe(Ga,this)._uiManager._signal}),Oe(qa,this).append(e)}function tr(t){var e=document.createElement("div");return e.className="divider",e}var er=new WeakMap,nr=new WeakMap,ir=new WeakMap,ar=new WeakSet,rr=function(){return Ke((function t(e){Qe(this,t),Me(this,ar),Re(this,er,null),Re(this,nr,null),Re(this,ir,void 0),We(ir,this,e)}),[{key:"show",value:function(t,e,n){var i=He(je(ar,this,ur).call(this,e,n),2),a=i[0],r=i[1],s=(Oe(nr,this)||We(nr,this,je(ar,this,sr).call(this))).style;t.append(Oe(nr,this)),s.insetInlineEnd="".concat(100*a,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}},{key:"hide",value:function(){Oe(nr,this).remove()}}])}();function sr(){var t=We(nr,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ra,{signal:Oe(ir,this)._signal});var e=We(er,this,document.createElement("div"));return e.className="buttons",t.append(e),je(ar,this,or).call(this),t}function ur(t,e){var n,i=0,a=0,r=Ue(t);try{for(r.s();!(n=r.n()).done;){var s=n.value,u=s.y+s.height;if(!(u<i)){var o=s.x+(e?s.width:0);u>i?(a=o,i=u):e?o>a&&(a=o):o<a&&(a=o)}}}catch(t){r.e(t)}finally{r.f()}return[e?1-a:a,i]}function or(){var t=this,e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");var n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");var i=Oe(ir,this)._signal;e.addEventListener("contextmenu",Ra,{signal:i}),e.addEventListener("click",(function(){Oe(ir,t).highlightSelection("floating_button")}),{signal:i}),Oe(er,this).append(e)}function lr(t,e,n){var i,a=Ue(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;e.addEventListener(r,t[r].bind(t))}}catch(t){a.e(t)}finally{a.f()}}var hr=new WeakMap,cr=function(){return Ke((function t(){Qe(this,t),Re(this,hr,0)}),[{key:"id",get:function(){var t,e;return"".concat("pdfjs_internal_editor_").concat((We(hr,this,(t=Oe(hr,this),e=t++,t)),e))}}])}(),dr=new WeakMap,fr=new WeakMap,vr=new WeakMap,pr=new WeakSet,gr=function(){return Ke((function t(){Qe(this,t),Me(this,pr),Re(this,dr,function(){var t,e;if("undefined"!=typeof crypto&&"function"==typeof(null===(t=crypto)||void 0===t?void 0:t.randomUUID))return crypto.randomUUID();var n=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof(null===(e=crypto)||void 0===e?void 0:e.getRandomValues))crypto.getRandomValues(n);else for(var i=0;i<32;i++)n[i]=Math.floor(255*Math.random());return Ci(n)}()),Re(this,fr,0),Re(this,vr,null)}),[{key:"getFromFile",value:(n=Ie(Le().mark((function t(e){var n,i,a,r;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.lastModified,i=e.name,a=e.size,r=e.type,t.abrupt("return",je(pr,this,Dr).call(this,"".concat(n,"_").concat(i,"_").concat(a,"_").concat(r),e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getFromUrl",value:(e=Ie(Le().mark((function t(e){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",je(pr,this,Dr).call(this,e,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getFromId",value:(t=Ie(Le().mark((function t(e){var n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Oe(vr,this)||We(vr,this,new Map),n=Oe(vr,this).get(e)){t.next=4;break}return t.abrupt("return",null);case 4:if(!n.bitmap){t.next=7;break}return n.refCounter+=1,t.abrupt("return",n);case 7:if(!n.file){t.next=9;break}return t.abrupt("return",this.getFromFile(n.file));case 9:return t.abrupt("return",this.getFromUrl(n.url));case 10:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"getSvgUrl",value:function(t){var e=Oe(vr,this).get(t);return null!=e&&e.isSvg?e.svgUrl:null}},{key:"deleteId",value:function(t){Oe(vr,this)||We(vr,this,new Map);var e=Oe(vr,this).get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}},{key:"isValidId",value:function(t){return t.startsWith("image_".concat(Oe(dr,this),"_"))}}],[{key:"_isSVGFittingCanvas",get:function(){var t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',gi(this,"_isSVGFittingCanvas",e.decode().then((function(){return t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]})))}}]);var t,e,n}();function Dr(t,e){return mr.apply(this,arguments)}function mr(){return(mr=Ie(Le().mark((function t(e,i){var a,r,s,u,o,l,h,c,d;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Oe(vr,this)||We(vr,this,new Map),null!==(r=Oe(vr,this).get(e))){t.next=4;break}return t.abrupt("return",null);case 4:if(null===(a=r)||void 0===a||!a.bitmap){t.next=7;break}return r.refCounter+=1,t.abrupt("return",r);case 7:if(t.prev=7,r||(r={bitmap:null,id:"image_".concat(Oe(dr,this),"_").concat((We(fr,this,(s=Oe(fr,this),u=s++,s)),u)),refCounter:0,isSvg:!1}),"string"!=typeof i){t.next=16;break}return r.url=i,t.next=13,ka(i,"blob");case 13:o=t.sent,t.next=17;break;case 16:o=r.file=i;case 17:if("image/svg+xml"!==o.type){t.next=27;break}return l=n._isSVGFittingCanvas,h=new FileReader,c=new Image,d=new Promise((function(t,e){c.onload=function(){r.bitmap=c,r.isSvg=!0,t()},h.onload=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.svgUrl=h.result,t.next=3,l;case 3:if(!t.sent){t.next=7;break}t.t0="".concat(e,"#svgView(preserveAspectRatio(none))"),t.next=8;break;case 7:t.t0=e;case 8:c.src=t.t0;case 9:case"end":return t.stop()}}),t)}))),c.onerror=h.onerror=e})),h.readAsDataURL(o),t.next=25,d;case 25:t.next=30;break;case 27:return t.next=29,createImageBitmap(o);case 29:r.bitmap=t.sent;case 30:r.refCounter=1,t.next=37;break;case 33:t.prev=33,t.t0=t.catch(7),console.error(t.t0),r=null;case 37:return Oe(vr,this).set(e,r),r&&Oe(vr,this).set(r.id,r),t.abrupt("return",r);case 40:case"end":return t.stop()}}),t,this,[[7,33]])})))).apply(this,arguments)}n=gr;var yr=new WeakMap,Ar=new WeakMap,br=new WeakMap,kr=new WeakMap,Er=function(){return Ke((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;Qe(this,t),Re(this,yr,[]),Re(this,Ar,!1),Re(this,br,void 0),Re(this,kr,-1),We(br,this,e)}),[{key:"add",value:function(t){var e=t.cmd,n=t.undo,i=t.post,a=t.mustExec,r=t.type,s=void 0===r?NaN:r,u=t.overwriteIfSameType,o=void 0!==u&&u,l=t.keepUndo,h=void 0!==l&&l;if(a&&e(),!Oe(Ar,this)){var c={cmd:e,undo:n,post:i,type:s};if(-1===Oe(kr,this))return Oe(yr,this).length>0&&(Oe(yr,this).length=0),We(kr,this,0),void Oe(yr,this).push(c);if(o&&Oe(yr,this)[Oe(kr,this)].type===s)return h&&(c.undo=Oe(yr,this)[Oe(kr,this)].undo),void(Oe(yr,this)[Oe(kr,this)]=c);var d=Oe(kr,this)+1;d===Oe(br,this)?Oe(yr,this).splice(0,1):(We(kr,this,d),d<Oe(yr,this).length&&Oe(yr,this).splice(d)),Oe(yr,this).push(c)}}},{key:"undo",value:function(){if(-1!==Oe(kr,this)){We(Ar,this,!0);var t=Oe(yr,this)[Oe(kr,this)],e=t.undo,n=t.post;e(),null==n||n(),We(Ar,this,!1),We(kr,this,Oe(kr,this)-1)}}},{key:"redo",value:function(){if(Oe(kr,this)<Oe(yr,this).length-1){We(kr,this,Oe(kr,this)+1),We(Ar,this,!0);var t=Oe(yr,this)[Oe(kr,this)],e=t.cmd,n=t.post;e(),null==n||n(),We(Ar,this,!1)}}},{key:"hasSomethingToUndo",value:function(){return-1!==Oe(kr,this)}},{key:"hasSomethingToRedo",value:function(){return Oe(kr,this)<Oe(yr,this).length-1}},{key:"destroy",value:function(){We(yr,this,null)}}])}(),wr=new WeakSet,Cr=function(){return Ke((function t(e){Qe(this,t),Me(this,wr),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var n,i=xi.platform.isMac,a=Ue(e);try{for(a.s();!(n=a.n()).done;){var r,s=He(n.value,3),u=s[0],o=s[1],l=s[2],h=void 0===l?{}:l,c=Ue(u);try{for(c.s();!(r=c.n()).done;){var d=r.value,f=d.startsWith("mac+");i&&f?(this.callbacks.set(d.slice(4),{callback:o,options:h}),this.allKeys.add(d.split("+").at(-1))):i||f||(this.callbacks.set(d,{callback:o,options:h}),this.allKeys.add(d.split("+").at(-1)))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}}),[{key:"exec",value:function(t,e){if(this.allKeys.has(e.key)){var n=this.callbacks.get(je(wr,this,Fr).call(this,e));if(n){var i=n.callback,a=n.options,r=a.bubbles,s=void 0!==r&&r,u=a.args,o=void 0===u?[]:u,l=a.checker,h=void 0===l?null:l;h&&!h(t,e)||(i.bind.apply(i,[t].concat(xe(o),[e]))(),s||(e.stopPropagation(),e.preventDefault()))}}}}])}();function Fr(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);var e=this.buffer.join("+");return this.buffer.length=0,e}var _r=function(){function t(){Qe(this,t)}return Ke(t,[{key:"_colors",get:function(){var t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){var e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);var n,i=Ue(t.keys());try{for(i.s();!(n=i.n()).done;){var a=n.value;e.style.color=a;var r=window.getComputedStyle(e).color;t.set(a,Wa(r))}}catch(t){i.e(t)}finally{i.f()}e.remove()}(t),gi(this,"_colors",t)}},{key:"convert",value:function(e){var n=Wa(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;var i,a=Ue(this._colors);try{for(a.s();!(i=a.n()).done;){var r=He(i.value,2),s=r[0];if(r[1].every((function(t,e){return t===n[e]})))return t._colorsMapping.get(s)}}catch(t){a.e(t)}finally{a.f()}return n}},{key:"getHexCode",value:function(t){var e=this._colors.get(t);return e?Mi.makeHexColor.apply(Mi,xe(e)):t}}])}();Pe(_r,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var xr=(a=new WeakMap,r=new WeakMap,s=new WeakMap,u=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,d=new WeakMap,f=new WeakMap,v=new WeakMap,p=new WeakMap,g=new WeakMap,D=new WeakMap,m=new WeakMap,y=new WeakMap,A=new WeakMap,b=new WeakMap,k=new WeakMap,E=new WeakMap,w=new WeakMap,C=new WeakMap,F=new WeakMap,_=new WeakMap,x=new WeakMap,S=new WeakMap,M=new WeakMap,B=new WeakMap,P=new WeakMap,L=new WeakMap,T=new WeakMap,I=new WeakMap,R=new WeakMap,N=new WeakMap,O=new WeakMap,W=new WeakMap,j=new WeakMap,H=new WeakMap,z=new WeakMap,V=new WeakMap,U=new WeakMap,G=new WeakMap,q=new WeakMap,X=new WeakMap,K=new WeakMap,Y=new WeakMap,Q=new WeakMap,J=new WeakSet,i=function(){function t(e,n,i,Z,$,tt,et,nt,it,at){Qe(this,t),Me(this,J),Re(this,a,new AbortController),Re(this,r,null),Re(this,s,new Map),Re(this,u,new Map),Re(this,o,null),Re(this,l,null),Re(this,h,null),Re(this,c,new Er),Re(this,d,0),Re(this,f,new Set),Re(this,v,null),Re(this,p,null),Re(this,g,new Set),Re(this,D,!1),Re(this,m,!1),Re(this,y,null),Re(this,A,null),Re(this,b,null),Re(this,k,!1),Re(this,E,null),Re(this,w,new cr),Re(this,C,!1),Re(this,F,!1),Re(this,_,null),Re(this,x,null),Re(this,S,null),Re(this,M,Cn.NONE),Re(this,B,new Set),Re(this,P,null),Re(this,L,null),Re(this,T,null),Re(this,I,this.blur.bind(this)),Re(this,R,this.focus.bind(this)),Re(this,N,this.copy.bind(this)),Re(this,O,this.cut.bind(this)),Re(this,W,this.paste.bind(this)),Re(this,j,this.keydown.bind(this)),Re(this,H,this.keyup.bind(this)),Re(this,z,this.onEditingAction.bind(this)),Re(this,V,this.onPageChanging.bind(this)),Re(this,U,this.onScaleChanging.bind(this)),Re(this,G,this.onRotationChanging.bind(this)),Re(this,q,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Re(this,X,[0,0]),Re(this,K,null),Re(this,Y,null),Re(this,Q,null),this._signal=Oe(a,this).signal,We(Y,this,e),We(Q,this,n),We(o,this,i),this._eventBus=Z,this._eventBus._on("editingaction",Oe(z,this)),this._eventBus._on("pagechanging",Oe(V,this)),this._eventBus._on("scalechanging",Oe(U,this)),this._eventBus._on("rotationchanging",Oe(G,this)),je(J,this,Tr).call(this),je(J,this,Hr).call(this),je(J,this,Nr).call(this),We(l,this,$.annotationStorage),We(y,this,$.filterFactory),We(L,this,tt),We(b,this,et||null),We(D,this,nt),We(m,this,it),We(S,this,at||null),this.viewParameters={realScale:$i.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}return Ke(t,[{key:"destroy",value:function(){var t,e,n;null===(t=Oe(a,this))||void 0===t||t.abort(),We(a,this,null),this._signal=null,this._eventBus._off("editingaction",Oe(z,this)),this._eventBus._off("pagechanging",Oe(V,this)),this._eventBus._off("scalechanging",Oe(U,this)),this._eventBus._off("rotationchanging",Oe(G,this));var i,l=Ue(Oe(u,this).values());try{for(l.s();!(i=l.n()).done;){i.value.destroy()}}catch(t){l.e(t)}finally{l.f()}Oe(u,this).clear(),Oe(s,this).clear(),Oe(g,this).clear(),We(r,this,null),Oe(B,this).clear(),Oe(c,this).destroy(),null===(e=Oe(o,this))||void 0===e||e.destroy(),null===(n=Oe(E,this))||void 0===n||n.hide(),We(E,this,null),Oe(A,this)&&(clearTimeout(Oe(A,this)),We(A,this,null)),Oe(K,this)&&(clearTimeout(Oe(K,this)),We(K,this,null))}},{key:"mlGuess",value:(n=Ie(Le().mark((function t(e){var n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(null===(n=Oe(S,this))||void 0===n?void 0:n.guess(e))||null);case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"isMLEnabledFor",value:(e=Ie(Le().mark((function t(e){var n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=Oe(S,this))||void 0===n?void 0:n.isEnabledFor(e);case 2:return t.abrupt("return",!!t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"useNewAltTextFlow",get:function(){return Oe(m,this)}},{key:"hcmFilter",get:function(){return gi(this,"hcmFilter",Oe(L,this)?Oe(y,this).addHCMFilter(Oe(L,this).foreground,Oe(L,this).background):"none")}},{key:"direction",get:function(){return gi(this,"direction",getComputedStyle(Oe(Y,this)).direction)}},{key:"highlightColors",get:function(){return gi(this,"highlightColors",Oe(b,this)?new Map(Oe(b,this).split(",").map((function(t){return t.split("=").map((function(t){return t.trim()}))}))):null)}},{key:"highlightColorNames",get:function(){return gi(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(function(t){return t.reverse()}))):null)}},{key:"setMainHighlightColorPicker",value:function(t){We(x,this,t)}},{key:"editAltText",value:function(t){var e;null===(e=Oe(o,this))||void 0===e||e.editAltText(this,t)}},{key:"switchToMode",value:function(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}},{key:"setPreference",value:function(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}},{key:"onPageChanging",value:function(t){var e=t.pageNumber;We(d,this,e-1)}},{key:"focusMainContainer",value:function(){Oe(Y,this).focus()}},{key:"findParent",value:function(t,e){var n,i=Ue(Oe(u,this).values());try{for(i.s();!(n=i.n()).done;){var a=n.value,r=a.div.getBoundingClientRect(),s=r.x,o=r.y,l=r.width,h=r.height;if(t>=s&&t<=s+l&&e>=o&&e<=o+h)return a}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"disableUserSelect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Oe(Q,this).classList.toggle("noUserSelect",t)}},{key:"addShouldRescale",value:function(t){Oe(g,this).add(t)}},{key:"removeShouldRescale",value:function(t){Oe(g,this).delete(t)}},{key:"onScaleChanging",value:function(t){var e=t.scale;this.commitOrRemove(),this.viewParameters.realScale=e*$i.PDF_TO_CSS_UNITS;var n,i=Ue(Oe(g,this));try{for(i.s();!(n=i.n()).done;){n.value.onScaleChanging()}}catch(t){i.e(t)}finally{i.f()}}},{key:"onRotationChanging",value:function(t){var e=t.pagesRotation;this.commitOrRemove(),this.viewParameters.rotation=e}},{key:"highlightSelection",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=document.getSelection();if(n&&!n.isCollapsed){var i=n.anchorNode,a=n.anchorOffset,r=n.focusNode,s=n.focusOffset,u=n.toString(),o=je(J,this,Sr).call(this,n).closest(".textLayer"),l=this.getSelectionBoxes(o);if(l){n.empty();var h=je(J,this,Mr).call(this,o),c=Oe(M,this)===Cn.NONE,d=function(){null==h||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:i,anchorOffset:a,focusNode:r,focusOffset:s,text:u}),c&&t.showAllEditors("highlight",!0,!0)};c?this.switchToMode(Cn.HIGHLIGHT,d):d()}}}},{key:"addToAnnotationStorage",value:function(t){t.isEmpty()||!Oe(l,this)||Oe(l,this).has(t.id)||Oe(l,this).setValue(t.id,t)}},{key:"blur",value:function(){if(this.isShiftKeyDown=!1,Oe(k,this)&&(We(k,this,!1),je(J,this,Lr).call(this,"main_toolbar")),this.hasSelection){var t,e=document.activeElement,n=Ue(Oe(B,this));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.div.contains(e)){We(_,this,[i,e]),i._focusEventsAllowed=!1;break}}}catch(t){n.e(t)}finally{n.f()}}}},{key:"focus",value:function(){if(Oe(_,this)){var t=He(Oe(_,this),2),e=t[0],n=t[1];We(_,this,null),n.addEventListener("focusin",(function(){e._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),n.focus()}}},{key:"addEditListeners",value:function(){je(J,this,Nr).call(this),je(J,this,Wr).call(this)}},{key:"removeEditListeners",value:function(){je(J,this,Or).call(this),je(J,this,jr).call(this)}},{key:"dragOver",value:function(t){var e,n=Ue(t.dataTransfer.items);try{for(n.s();!(e=n.n()).done;){var i,a=e.value.type,r=Ue(Oe(p,this));try{for(r.s();!(i=r.n()).done;){if(i.value.isHandlingMimeForPasting(a))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}}catch(t){r.e(t)}finally{r.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"drop",value:function(t){var e,n=Ue(t.dataTransfer.items);try{for(n.s();!(e=n.n()).done;){var i,a=e.value,r=Ue(Oe(p,this));try{for(r.s();!(i=r.n()).done;){var s=i.value;if(s.isHandlingMimeForPasting(a.type))return s.paste(a,this.currentLayer),void t.preventDefault()}}catch(t){r.e(t)}finally{r.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"copy",value:function(t){var e;if(t.preventDefault(),null===(e=Oe(r,this))||void 0===e||e.commitOrRemove(),this.hasSelection){var n,i=[],a=Ue(Oe(B,this));try{for(a.s();!(n=a.n()).done;){var s=n.value.serialize(!0);s&&i.push(s)}}catch(t){a.e(t)}finally{a.f()}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}}},{key:"cut",value:function(t){this.copy(t),this.delete()}},{key:"paste",value:function(t){var e=this;t.preventDefault();var n,i=t.clipboardData,a=Ue(i.items);try{for(a.s();!(n=a.n()).done;){var r,s=n.value,u=Ue(Oe(p,this));try{for(u.s();!(r=u.n()).done;){var o=r.value;if(o.isHandlingMimeForPasting(s.type))return void o.paste(s,this.currentLayer)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){a.e(t)}finally{a.f()}var l=i.getData("application/pdfjs");if(l){try{l=JSON.parse(l)}catch(t){return void di('paste: "'.concat(t.message,'".'))}if(Array.isArray(l)){this.unselectAll();var h=this.currentLayer;try{var c,d=[],f=Ue(l);try{for(f.s();!(c=f.n()).done;){var v=c.value,g=h.deserialize(v);if(!g)return;d.push(g)}}catch(t){f.e(t)}finally{f.f()}this.addCommands({cmd:function(){for(var t=0,n=d;t<n.length;t++){var i=n[t];je(J,e,qr).call(e,i)}je(J,e,Yr).call(e,d)},undo:function(){for(var t=0,e=d;t<e.length;t++){e[t].remove()}},mustExec:!0})}catch(t){di('paste: "'.concat(t.message,'".'))}}}}},{key:"keydown",value:function(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),Oe(M,this)===Cn.NONE||this.isEditorHandlingKeyboard||t._keyboardManager.exec(this,e)}},{key:"keyup",value:function(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,Oe(k,this)&&(We(k,this,!1),je(J,this,Lr).call(this,"main_toolbar")))}},{key:"onEditingAction",value:function(t){var e=t.name;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}},{key:"setEditingState",value:function(t){t?(je(J,this,Ir).call(this),je(J,this,Wr).call(this),je(J,this,zr).call(this,{isEditing:Oe(M,this)!==Cn.NONE,isEmpty:je(J,this,Kr).call(this),hasSomethingToUndo:Oe(c,this).hasSomethingToUndo(),hasSomethingToRedo:Oe(c,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(je(J,this,Rr).call(this),je(J,this,jr).call(this),je(J,this,zr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}},{key:"registerEditorTypes",value:function(t){if(!Oe(p,this)){We(p,this,t);var e,n=Ue(Oe(p,this));try{for(n.s();!(e=n.n()).done;){var i=e.value;je(J,this,Vr).call(this,i.defaultPropertiesToUpdate)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getId",value:function(){return Oe(w,this).id}},{key:"currentLayer",get:function(){return Oe(u,this).get(Oe(d,this))}},{key:"getLayer",value:function(t){return Oe(u,this).get(t)}},{key:"currentPageIndex",get:function(){return Oe(d,this)}},{key:"addLayer",value:function(t){Oe(u,this).set(t.pageIndex,t),Oe(C,this)?t.enable():t.disable()}},{key:"removeLayer",value:function(t){Oe(u,this).delete(t.pageIndex)}},{key:"updateMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oe(M,this)!==t){if(We(M,this,t),t===Cn.NONE)return this.setEditingState(!1),void je(J,this,Gr).call(this);this.setEditingState(!0),je(J,this,Ur).call(this),this.unselectAll();var i,a=Ue(Oe(u,this).values());try{for(a.s();!(i=a.n()).done;){i.value.updateMode(t)}}catch(t){a.e(t)}finally{a.f()}if(e||!n){if(e){var r,o=Ue(Oe(s,this).values());try{for(o.s();!(r=o.n()).done;){var l=r.value;if(l.annotationElementId===e){this.setSelected(l),l.enterInEditMode();break}}}catch(t){o.e(t)}finally{o.f()}}}else this.addNewEditorFromKeyboard()}}},{key:"addNewEditorFromKeyboard",value:function(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}},{key:"updateToolbar",value:function(t){t!==Oe(M,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function(t,e){var n;if(Oe(p,this)){switch(t){case Fn.CREATE:return void this.currentLayer.addNewEditor();case Fn.HIGHLIGHT_DEFAULT_COLOR:null===(n=Oe(x,this))||void 0===n||n.updateColor(e);break;case Fn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Oe(T,this)||We(T,this,new Map)).set(t,e),this.showAllEditors("highlight",e)}var i,a=Ue(Oe(B,this));try{for(a.s();!(i=a.n()).done;){i.value.updateParams(t,e)}}catch(t){a.e(t)}finally{a.f()}var r,s=Ue(Oe(p,this));try{for(s.s();!(r=s.n()).done;){r.value.updateDefaultParams(t,e)}}catch(t){s.e(t)}finally{s.f()}}}},{key:"showAllEditors",value:function(t,e){var n,i,a,r=Ue(Oe(s,this).values());try{for(r.s();!(a=r.n()).done;){var u=a.value;u.editorType===t&&u.show(e)}}catch(t){r.e(t)}finally{r.f()}(null===(n=null===(i=Oe(T,this))||void 0===i?void 0:i.get(Fn.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==e&&je(J,this,Vr).call(this,[[Fn.HIGHLIGHT_SHOW_ALL,e]])}},{key:"enableWaiting",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe(F,this)!==t){We(F,this,t);var e,n=Ue(Oe(u,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getEditors",value:function(t){var e,n=[],i=Ue(Oe(s,this).values());try{for(i.s();!(e=i.n()).done;){var a=e.value;a.pageIndex===t&&n.push(a)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"getEditor",value:function(t){return Oe(s,this).get(t)}},{key:"addEditor",value:function(t){Oe(s,this).set(t.id,t)}},{key:"removeEditor",value:function(t){var e,n=this;(t.div.contains(document.activeElement)&&(Oe(A,this)&&clearTimeout(Oe(A,this)),We(A,this,setTimeout((function(){n.focusMainContainer(),We(A,n,null)}),0))),Oe(s,this).delete(t.id),this.unselect(t),t.annotationElementId&&Oe(f,this).has(t.annotationElementId))||(null===(e=Oe(l,this))||void 0===e||e.remove(t.id))}},{key:"addDeletedAnnotationElement",value:function(t){Oe(f,this).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}},{key:"isDeletedAnnotationElement",value:function(t){return Oe(f,this).has(t)}},{key:"removeDeletedAnnotationElement",value:function(t){Oe(f,this).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}},{key:"setActiveEditor",value:function(t){Oe(r,this)!==t&&(We(r,this,t),t&&je(J,this,Vr).call(this,t.propertiesToUpdate))}},{key:"updateUI",value:function(t){Be(J,this,Xr)===t&&je(J,this,Vr).call(this,t.propertiesToUpdate)}},{key:"toggleSelected",value:function(t){if(Oe(B,this).has(t))return Oe(B,this).delete(t),t.unselect(),void je(J,this,zr).call(this,{hasSelectedEditor:this.hasSelection});Oe(B,this).add(t),t.select(),je(J,this,Vr).call(this,t.propertiesToUpdate),je(J,this,zr).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(t){var e,n=Ue(Oe(B,this));try{for(n.s();!(e=n.n()).done;){var i=e.value;i!==t&&i.unselect()}}catch(t){n.e(t)}finally{n.f()}Oe(B,this).clear(),Oe(B,this).add(t),t.select(),je(J,this,Vr).call(this,t.propertiesToUpdate),je(J,this,zr).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(t){return Oe(B,this).has(t)}},{key:"firstSelectedEditor",get:function(){return Oe(B,this).values().next().value}},{key:"unselect",value:function(t){t.unselect(),Oe(B,this).delete(t),je(J,this,zr).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return 0!==Oe(B,this).size}},{key:"isEnterHandled",get:function(){return 1===Oe(B,this).size&&this.firstSelectedEditor.isEnterHandled}},{key:"undo",value:function(){Oe(c,this).undo(),je(J,this,zr).call(this,{hasSomethingToUndo:Oe(c,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:je(J,this,Kr).call(this)})}},{key:"redo",value:function(){Oe(c,this).redo(),je(J,this,zr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Oe(c,this).hasSomethingToRedo(),isEmpty:je(J,this,Kr).call(this)})}},{key:"addCommands",value:function(t){Oe(c,this).add(t),je(J,this,zr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:je(J,this,Kr).call(this)})}},{key:"delete",value:function(){var t=this;if(this.commitOrRemove(),this.hasSelection){var e=xe(Oe(B,this));this.addCommands({cmd:function(){var t,n=Ue(e);try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(t){n.e(t)}finally{n.f()}},undo:function(){var n,i=Ue(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;je(J,t,qr).call(t,a)}}catch(t){i.e(t)}finally{i.f()}},mustExec:!0})}}},{key:"commitOrRemove",value:function(){var t;null===(t=Oe(r,this))||void 0===t||t.commitOrRemove()}},{key:"hasSomethingToControl",value:function(){return Oe(r,this)||this.hasSelection}},{key:"selectAll",value:function(){var t,e=Ue(Oe(B,this));try{for(e.s();!(t=e.n()).done;){t.value.commit()}}catch(t){e.e(t)}finally{e.f()}je(J,this,Yr).call(this,Oe(s,this).values())}},{key:"unselectAll",value:function(){if((!Oe(r,this)||(Oe(r,this).commitOrRemove(),Oe(M,this)===Cn.NONE))&&this.hasSelection){var t,e=Ue(Oe(B,this));try{for(e.s();!(t=e.n()).done;){t.value.unselect()}}catch(t){e.e(t)}finally{e.f()}Oe(B,this).clear(),je(J,this,zr).call(this,{hasSelectedEditor:!1})}}},{key:"translateSelectedEditors",value:function(t,e){var n=this;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),this.hasSelection){Oe(X,this)[0]+=t,Oe(X,this)[1]+=e;var i=He(Oe(X,this),2),a=i[0],r=i[1],u=xe(Oe(B,this));Oe(K,this)&&clearTimeout(Oe(K,this)),We(K,this,setTimeout((function(){We(K,n,null),Oe(X,n)[0]=Oe(X,n)[1]=0,n.addCommands({cmd:function(){var t,e=Ue(u);try{for(e.s();!(t=e.n()).done;){var i=t.value;Oe(s,n).has(i.id)&&i.translateInPage(a,r)}}catch(t){e.e(t)}finally{e.f()}},undo:function(){var t,e=Ue(u);try{for(e.s();!(t=e.n()).done;){var i=t.value;Oe(s,n).has(i.id)&&i.translateInPage(-a,-r)}}catch(t){e.e(t)}finally{e.f()}},mustExec:!1})}),1e3));var o,l=Ue(u);try{for(l.s();!(o=l.n()).done;){o.value.translateInPage(t,e)}}catch(t){l.e(t)}finally{l.f()}}}},{key:"setUpDragSession",value:function(){if(this.hasSelection){this.disableUserSelect(!0),We(v,this,new Map);var t,e=Ue(Oe(B,this));try{for(e.s();!(t=e.n()).done;){var n=t.value;Oe(v,this).set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}catch(t){e.e(t)}finally{e.f()}}}},{key:"endDragSession",value:function(){var t=this;if(!Oe(v,this))return!1;this.disableUserSelect(!1);var e=Oe(v,this);We(v,this,null);var n,i=!1,a=Ue(e);try{for(a.s();!(n=a.n()).done;){var r=He(n.value,2),o=r[0],l=o.x,h=o.y,c=o.pageIndex,d=r[1];d.newX=l,d.newY=h,d.newPageIndex=c,i||(i=l!==d.savedX||h!==d.savedY||c!==d.savedPageIndex)}}catch(t){a.e(t)}finally{a.f()}if(!i)return!1;var f=function(e,n,i,a){if(Oe(s,t).has(e.id)){var r=Oe(u,t).get(a);r?e._setParentAndPosition(r,n,i):(e.pageIndex=a,e.x=n,e.y=i)}};return this.addCommands({cmd:function(){var t,n=Ue(e);try{for(n.s();!(t=n.n()).done;){var i=He(t.value,2),a=i[0],r=i[1],s=r.newX,u=r.newY,o=r.newPageIndex;f(a,s,u,o)}}catch(t){n.e(t)}finally{n.f()}},undo:function(){var t,n=Ue(e);try{for(n.s();!(t=n.n()).done;){var i=He(t.value,2),a=i[0],r=i[1],s=r.savedX,u=r.savedY,o=r.savedPageIndex;f(a,s,u,o)}}catch(t){n.e(t)}finally{n.f()}},mustExec:!0}),!0}},{key:"dragSelectedEditors",value:function(t,e){if(Oe(v,this)){var n,i=Ue(Oe(v,this).keys());try{for(i.s();!(n=i.n()).done;){n.value.drag(t,e)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"rebuild",value:function(t){if(null===t.parent){var e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}},{key:"isEditorHandlingKeyboard",get:function(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===Oe(B,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}},{key:"isActive",value:function(t){return Oe(r,this)===t}},{key:"getActive",value:function(){return Oe(r,this)}},{key:"getMode",value:function(){return Oe(M,this)}},{key:"imageManager",get:function(){return gi(this,"imageManager",new gr)}},{key:"getSelectionBoxes",value:function(t){if(!t)return null;for(var e=document.getSelection(),n=0,i=e.rangeCount;n<i;n++)if(!t.contains(e.getRangeAt(n).commonAncestorContainer))return null;var a,r=t.getBoundingClientRect(),s=r.x,u=r.y,o=r.width,l=r.height;switch(t.getAttribute("data-main-rotation")){case"90":a=function(t,e,n,i){return{x:(e-u)/l,y:1-(t+n-s)/o,width:i/l,height:n/o}};break;case"180":a=function(t,e,n,i){return{x:1-(t+n-s)/o,y:1-(e+i-u)/l,width:n/o,height:i/l}};break;case"270":a=function(t,e,n,i){return{x:1-(e+i-u)/l,y:(t-s)/o,width:i/l,height:n/o}};break;default:a=function(t,e,n,i){return{x:(t-s)/o,y:(e-u)/l,width:n/o,height:i/l}}}for(var h=[],c=0,d=e.rangeCount;c<d;c++){var f=e.getRangeAt(c);if(!f.collapsed){var v,p=Ue(f.getClientRects());try{for(p.s();!(v=p.n()).done;){var g=v.value,D=g.x,m=g.y,y=g.width,A=g.height;0!==y&&0!==A&&h.push(a(D,m,y,A))}}catch(t){p.e(t)}finally{p.f()}}}return 0===h.length?null:h}},{key:"addChangedExistingAnnotation",value:function(t){var e=t.annotationElementId,n=t.id;(Oe(h,this)||We(h,this,new Map)).set(e,n)}},{key:"removeChangedExistingAnnotation",value:function(t){var e,n=t.annotationElementId;null===(e=Oe(h,this))||void 0===e||e.delete(n)}},{key:"renderAnnotationElement",value:function(t){var e,n=null===(e=Oe(h,this))||void 0===e?void 0:e.get(t.data.id);if(n){var i=Oe(l,this).getRawValue(n);i&&(Oe(M,this)!==Cn.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}}],[{key:"_keyboardManager",get:function(){var e=t.prototype,n=function(t){return Oe(Y,t).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl()},i=function(t,e){var n=e.target;if(n instanceof HTMLInputElement){var i=n.type;return"text"!==i&&"number"!==i}return!0},a=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return gi(this,"_keyboardManager",new Cr([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:function(t,e){var n=e.target;return!(n instanceof HTMLButtonElement)&&Oe(Y,t).contains(n)&&!t.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:function(t,e){return!(e.target instanceof HTMLButtonElement)&&Oe(Y,t).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}]]))}}]);var e,n}(),Pe(i,"TRANSLATE_SMALL",1),Pe(i,"TRANSLATE_BIG",10),i);function Sr(t){var e=t.anchorNode;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}function Mr(t){var e=this.currentLayer;if(e.hasTextLayer(t))return e;var n,i=Ue(Oe(u,this).values());try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.hasTextLayer(t))return a}}catch(t){i.e(t)}finally{i.f()}return null}function Br(){var t=document.getSelection();if(t&&!t.isCollapsed){var e=je(J,this,Sr).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(Oe(E,this)||We(E,this,new rr(this)),Oe(E,this).show(e,n,"ltr"===this.direction))}}function Pr(){var t,e=this,n=document.getSelection();if(n&&!n.isCollapsed){var i=n.anchorNode;if(i!==Oe(P,this)){var a,r=je(J,this,Sr).call(this,n).closest(".textLayer");if(r){if(null===(t=Oe(E,this))||void 0===t||t.hide(),We(P,this,i),je(J,this,zr).call(this,{hasSelectedText:!0}),(Oe(M,this)===Cn.HIGHLIGHT||Oe(M,this)===Cn.NONE)&&(Oe(M,this)===Cn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),We(k,this,this.isShiftKeyDown),!this.isShiftKeyDown)){var s=Oe(M,this)===Cn.HIGHLIGHT?je(J,this,Mr).call(this,r):null;null==s||s.toggleDrawing();var u=this._signal,o=function(t){"pointerup"===t.type&&0!==t.button||(null==s||s.toggleDrawing(!0),window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),"pointerup"===t.type&&je(J,e,Lr).call(e,"main_toolbar"))};window.addEventListener("pointerup",o,{signal:u}),window.addEventListener("blur",o,{signal:u})}}else Oe(P,this)&&(null===(a=Oe(E,this))||void 0===a||a.hide(),We(P,this,null),je(J,this,zr).call(this,{hasSelectedText:!1}))}}else{var l;Oe(P,this)&&(null===(l=Oe(E,this))||void 0===l||l.hide(),We(P,this,null),je(J,this,zr).call(this,{hasSelectedText:!1}))}}function Lr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Oe(M,this)===Cn.HIGHLIGHT?this.highlightSelection(t):Oe(D,this)&&je(J,this,Br).call(this)}function Tr(){document.addEventListener("selectionchange",je(J,this,Pr).bind(this),{signal:this._signal})}function Ir(){var t=this._signal;window.addEventListener("focus",Oe(R,this),{signal:t}),window.addEventListener("blur",Oe(I,this),{signal:t})}function Rr(){window.removeEventListener("focus",Oe(R,this)),window.removeEventListener("blur",Oe(I,this))}function Nr(){var t=this._signal;window.addEventListener("keydown",Oe(j,this),{signal:t}),window.addEventListener("keyup",Oe(H,this),{signal:t})}function Or(){window.removeEventListener("keydown",Oe(j,this)),window.removeEventListener("keyup",Oe(H,this))}function Wr(){var t=this._signal;document.addEventListener("copy",Oe(N,this),{signal:t}),document.addEventListener("cut",Oe(O,this),{signal:t}),document.addEventListener("paste",Oe(W,this),{signal:t})}function jr(){document.removeEventListener("copy",Oe(N,this)),document.removeEventListener("cut",Oe(O,this)),document.removeEventListener("paste",Oe(W,this))}function Hr(){var t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}function zr(t){var e=this,n=Object.entries(t).some((function(t){var n=He(t,2),i=n[0],a=n[1];return Oe(q,e)[i]!==a}));n&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Oe(q,this),t)}),Oe(M,this)===Cn.HIGHLIGHT&&!1===t.hasSelectedEditor&&je(J,this,Vr).call(this,[[Fn.HIGHLIGHT_FREE,!0]]))}function Vr(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}function Ur(){if(!Oe(C,this)){We(C,this,!0);var t,e=Ue(Oe(u,this).values());try{for(e.s();!(t=e.n()).done;){t.value.enable()}}catch(t){e.e(t)}finally{e.f()}var n,i=Ue(Oe(s,this).values());try{for(i.s();!(n=i.n()).done;){n.value.enable()}}catch(t){i.e(t)}finally{i.f()}}}function Gr(){if(this.unselectAll(),Oe(C,this)){We(C,this,!1);var t,e=Ue(Oe(u,this).values());try{for(e.s();!(t=e.n()).done;){t.value.disable()}}catch(t){e.e(t)}finally{e.f()}var n,i=Ue(Oe(s,this).values());try{for(i.s();!(n=i.n()).done;){n.value.disable()}}catch(t){i.e(t)}finally{i.f()}}}function qr(t){var e=Oe(u,this).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}function Xr(t){var e,n=null,i=Ue(Oe(B,t));try{for(i.s();!(e=i.n()).done;)n=e.value}catch(t){i.e(t)}finally{i.f()}return n}function Kr(){if(0===Oe(s,this).size)return!0;if(1===Oe(s,this).size){var t,e=Ue(Oe(s,this).values());try{for(e.s();!(t=e.n()).done;){return t.value.isEmpty()}}catch(t){e.e(t)}finally{e.f()}}return!1}function Yr(t){var e,n=Ue(Oe(B,this));try{for(n.s();!(e=n.n()).done;){e.value.unselect()}}catch(t){n.e(t)}finally{n.f()}Oe(B,this).clear();var i,a=Ue(t);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.isEmpty()||(Oe(B,this).add(r),r.select())}}catch(t){a.e(t)}finally{a.f()}je(J,this,zr).call(this,{hasSelectedEditor:this.hasSelection})}var Qr=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,$r=new WeakMap,ts=new WeakMap,es=new WeakMap,ns=new WeakMap,is=new WeakSet,as=function(){function t(e){Qe(this,t),Me(this,is),Re(this,Qr,""),Re(this,Jr,!1),Re(this,Zr,null),Re(this,$r,null),Re(this,ts,null),Re(this,es,!1),Re(this,ns,null),We(ns,this,e)}return Ke(t,[{key:"render",value:(e=Ie(Le().mark((function e(){var n,i,a,r,s=this;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=We(Zr,this,document.createElement("button"))).className="altText",e.next=4,t._l10nPromise.get("pdfjs-editor-alt-text-button-label");case 4:return i=e.sent,n.textContent=i,n.setAttribute("aria-label",i),n.tabIndex="0",a=Oe(ns,this)._uiManager._signal,n.addEventListener("contextmenu",Ra,{signal:a}),n.addEventListener("pointerdown",(function(t){return t.stopPropagation()}),{signal:a}),r=function(t){t.preventDefault(),Oe(ns,s)._uiManager.editAltText(Oe(ns,s))},n.addEventListener("click",r,{capture:!0,signal:a}),n.addEventListener("keydown",(function(t){t.target===n&&"Enter"===t.key&&(We(es,s,!0),r(t))}),{signal:a}),e.next=16,je(is,this,rs).call(this);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"finish",value:function(){Oe(Zr,this)&&(Oe(Zr,this).focus({focusVisible:Oe(es,this)}),We(es,this,!1))}},{key:"isEmpty",value:function(){return!Oe(Qr,this)&&!Oe(Jr,this)}},{key:"data",get:function(){return{altText:Oe(Qr,this),decorative:Oe(Jr,this)}},set:function(t){var e=t.altText,n=t.decorative;Oe(Qr,this)===e&&Oe(Jr,this)===n||(We(Qr,this,e),We(Jr,this,n),je(is,this,rs).call(this))}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Oe(Zr,this)&&(!t&&Oe(ts,this)&&(clearTimeout(Oe(ts,this)),We(ts,this,null)),Oe(Zr,this).disabled=!t)}},{key:"destroy",value:function(){var t;null===(t=Oe(Zr,this))||void 0===t||t.remove(),We(Zr,this,null),We($r,this,null)}}],[{key:"initialize",value:function(e){t._l10nPromise||(t._l10nPromise=e)}}]);var e}();function rs(){return ss.apply(this,arguments)}function ss(){return(ss=Ie(Le().mark((function t(){var e,n,i,a,r,s,u=this;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Oe(Zr,this)){t.next=3;break}return t.abrupt("return");case 3:if(Oe(Qr,this)||Oe(Jr,this)){t.next=7;break}return e.classList.remove("done"),null===(n=Oe($r,this))||void 0===n||n.remove(),t.abrupt("return");case 7:if(e.classList.add("done"),Z._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((function(t){e.setAttribute("aria-label",t)})),(i=Oe($r,this))||(We($r,this,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip"),a=i.id="alt-text-tooltip-".concat(Oe(ns,this).id),e.setAttribute("aria-describedby",a),(r=Oe(ns,this)._uiManager._signal).addEventListener("abort",(function(){clearTimeout(Oe(ts,u)),We(ts,u,null)}),{once:!0}),e.addEventListener("mouseenter",(function(){We(ts,u,setTimeout((function(){We(ts,u,null),Oe($r,u).classList.add("show"),Oe(ns,u)._reportTelemetry({action:"alt_text_tooltip"})}),100))}),{signal:r}),e.addEventListener("mouseleave",(function(){var t;Oe(ts,u)&&(clearTimeout(Oe(ts,u)),We(ts,u,null)),null===(t=Oe($r,u))||void 0===t||t.classList.remove("show")}),{signal:r})),!Oe(Jr,this)){t.next=17;break}return t.next=14,Z._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip");case 14:t.t0=t.sent,t.next=18;break;case 17:t.t0=Oe(Qr,this);case 18:i.innerText=t.t0,i.parentNode||e.append(i),null==(s=Oe(ns,this).getImageForAltText())||s.setAttribute("aria-describedby",i.id);case 22:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}Z=as,Pe(as,"_l10nPromise",null);var us=new WeakMap,os=new WeakMap,ls=new WeakMap,hs=new WeakMap,cs=new WeakMap,ds=new WeakMap,fs=new WeakMap,vs=new WeakMap,ps=new WeakMap,gs=new WeakMap,Ds=new WeakMap,ms=new WeakMap,ys=new WeakMap,As=new WeakMap,bs=new WeakMap,ks=new WeakMap,Es=new WeakMap,ws=new WeakMap,Cs=new WeakMap,Fs=new WeakMap,_s=new WeakMap,xs=new WeakMap,Ss=new WeakSet,Ms=function(){function t(e){Qe(this,t),Me(this,Ss),Re(this,us,null),Re(this,os,null),Re(this,ls,null),Re(this,hs,!1),Re(this,cs,!1),Re(this,ds,null),Re(this,fs,null),Re(this,vs,this.focusin.bind(this)),Re(this,ps,this.focusout.bind(this)),Re(this,gs,null),Re(this,Ds,""),Re(this,ms,!1),Re(this,ys,null),Re(this,As,!1),Re(this,bs,!1),Re(this,ks,!1),Re(this,Es,null),Re(this,ws,0),Re(this,Cs,0),Re(this,Fs,null),Pe(this,"_initialOptions",Object.create(null)),Pe(this,"_isVisible",!0),Pe(this,"_uiManager",null),Pe(this,"_focusEventsAllowed",!0),Pe(this,"_l10nPromise",null),Re(this,_s,!1),Re(this,xs,t._zIndex++),this.constructor===t&&fi("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;var n=this.parent.viewport,i=n.rotation,a=n.rawDims,r=a.pageWidth,s=a.pageHeight,u=a.pageX,o=a.pageY;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[u,o];var l=He(this.parentDimensions,2),h=l[0],c=l[1];this.x=e.x/h,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}return Ke(t,[{key:"editorType",get:function(){return Object.getPrototypeOf(this).constructor._type}},{key:"propertiesToUpdate",get:function(){return[]}},{key:"_isDraggable",get:function(){return Oe(_s,this)},set:function(t){var e;We(_s,this,t),null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}},{key:"isEnterHandled",get:function(){return!0}},{key:"center",value:function(){var t=He(this.pageDimensions,2),e=t[0],n=t[1];switch(this.parentRotation){case 90:this.x-=this.height*n/(2*e),this.y+=this.width*e/(2*n);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(2*e),this.y-=this.width*e/(2*n);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}},{key:"addCommands",value:function(t){this._uiManager.addCommands(t)}},{key:"currentLayer",get:function(){return this._uiManager.currentLayer}},{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=Oe(xs,this)}},{key:"setParent",value:function(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):je(Ss,this,Us).call(this),this.parent=t}},{key:"focusin",value:function(t){this._focusEventsAllowed&&(Oe(ms,this)?We(ms,this,!1):this.parent.setSelected(this))}},{key:"focusout",value:function(t){var e;if(this._focusEventsAllowed&&this.isAttachedToDOM){var n=t.relatedTarget;null!=n&&n.closest("#".concat(this.id))||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.addToAnnotationStorage()}},{key:"addToAnnotationStorage",value:function(){this._uiManager.addToAnnotationStorage(this)}},{key:"setAt",value:function(t,e,n,i){var a=He(this.parentDimensions,2),r=a[0],s=a[1],u=He(this.screenToPageTranslation(n,i),2);n=u[0],i=u[1],this.x=(t+n)/r,this.y=(e+i)/s,this.fixAndSetPosition()}},{key:"translate",value:function(t,e){je(Ss,this,Bs).call(this,this.parentDimensions,t,e)}},{key:"translateInPage",value:function(t,e){Oe(ys,this)||We(ys,this,[this.x,this.y]),je(Ss,this,Bs).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}},{key:"drag",value:function(t,e){Oe(ys,this)||We(ys,this,[this.x,this.y]);var n=He(this.parentDimensions,2),i=n[0],a=n[1];if(this.x+=t/i,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){var r=this.div.getBoundingClientRect(),s=r.x,u=r.y;this.parent.findNewParent(this,s,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}var o=this.x,l=this.y,h=He(this.getBaseTranslation(),2);o+=h[0],l+=h[1],this.div.style.left="".concat((100*o).toFixed(2),"%"),this.div.style.top="".concat((100*l).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}},{key:"_hasBeenMoved",get:function(){return!!Oe(ys,this)&&(Oe(ys,this)[0]!==this.x||Oe(ys,this)[1]!==this.y)}},{key:"getBaseTranslation",value:function(){var e=He(this.parentDimensions,2),n=e[0],i=e[1],a=t._borderLineWidth,r=a/n,s=a/i;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}},{key:"_mustFixPosition",get:function(){return!0}},{key:"fixAndSetPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation,e=He(this.pageDimensions,2),n=e[0],i=e[1],a=this.x,r=this.y,s=this.width,u=this.height;if(s*=n,u*=i,a*=n,r*=i,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-s,a)),r=Math.max(0,Math.min(i-u,r));break;case 90:a=Math.max(0,Math.min(n-u,a)),r=Math.min(i,Math.max(s,r));break;case 180:a=Math.min(n,Math.max(s,a)),r=Math.min(i,Math.max(u,r));break;case 270:a=Math.min(n,Math.max(u,a)),r=Math.max(0,Math.min(i-s,r))}this.x=a/=n,this.y=r/=i;var o=He(this.getBaseTranslation(),2);a+=o[0],r+=o[1];var l=this.div.style;l.left="".concat((100*a).toFixed(2),"%"),l.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}},{key:"screenToPageTranslation",value:function(e,n){return Ps.call(t,e,n,this.parentRotation)}},{key:"pageTranslationToScreen",value:function(e,n){return Ps.call(t,e,n,360-this.parentRotation)}},{key:"parentScale",get:function(){return this._uiManager.viewParameters.realScale}},{key:"parentRotation",get:function(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}},{key:"parentDimensions",get:function(){var t=this.parentScale,e=He(this.pageDimensions,2),n=e[0]*t,i=e[1]*t;return xi.isCSSRoundSupported?[Math.round(n),Math.round(i)]:[n,i]}},{key:"setDims",value:function(t,e){var n=He(this.parentDimensions,2),i=n[0],a=n[1];this.div.style.width="".concat((100*t/i).toFixed(2),"%"),Oe(cs,this)||(this.div.style.height="".concat((100*e/a).toFixed(2),"%"))}},{key:"fixDims",value:function(){var t=this.div.style,e=t.height,n=t.width,i=n.endsWith("%"),a=!Oe(cs,this)&&e.endsWith("%");if(!i||!a){var r=He(this.parentDimensions,2),s=r[0],u=r[1];i||(t.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),Oe(cs,this)||a||(t.height="".concat((100*parseFloat(e)/u).toFixed(2),"%"))}}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"altTextFinish",value:function(){var t;null===(t=Oe(ls,this))||void 0===t||t.finish()}},{key:"addEditToolbar",value:(n=Ie(Le().mark((function t(){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Oe(gs,this)&&!Oe(bs,this)){t.next=2;break}return t.abrupt("return",Oe(gs,this));case 2:if(We(gs,this,new Ka(this)),this.div.append(Oe(gs,this).render()),!Oe(ls,this)){t.next=10;break}return t.t0=Oe(gs,this),t.next=8,Oe(ls,this).render();case 8:t.t1=t.sent,t.t0.addAltTextButton.call(t.t0,t.t1);case 10:return t.abrupt("return",Oe(gs,this));case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"removeEditToolbar",value:function(){var t;Oe(gs,this)&&(Oe(gs,this).remove(),We(gs,this,null),null===(t=Oe(ls,this))||void 0===t||t.destroy())}},{key:"getClientDimensions",value:function(){return this.div.getBoundingClientRect()}},{key:"addAltTextButton",value:(e=Ie(Le().mark((function e(){return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Oe(ls,this)){e.next=2;break}return e.abrupt("return");case 2:return as.initialize(t._l10nPromise),We(ls,this,new as(this)),Oe(us,this)&&(Oe(ls,this).data=Oe(us,this),We(us,this,null)),e.next=7,this.addEditToolbar();case 7:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"altTextData",get:function(){var t;return null===(t=Oe(ls,this))||void 0===t?void 0:t.data},set:function(t){Oe(ls,this)&&(Oe(ls,this).data=t)}},{key:"hasAltText",value:function(){var t;return!(null!==(t=Oe(ls,this))&&void 0!==t&&t.isEmpty())}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=Oe(hs,this)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();var t=this._uiManager._signal;this.div.addEventListener("focusin",Oe(vs,this),{signal:t}),this.div.addEventListener("focusout",Oe(ps,this),{signal:t});var e=He(this.parentDimensions,2),n=e[0],i=e[1];this.parentRotation%180!=0&&(this.div.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));var a=He(this.getInitialTranslation(),2),r=a[0],s=a[1];return this.translate(r,s),lr(this,this.div,["pointerdown"]),this.div}},{key:"pointerdown",value:function(t){var e=xi.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(We(ms,this,!0),this._isDraggable?je(Ss,this,Ws).call(this,t):je(Ss,this,Os).call(this,t))}},{key:"moveInDOM",value:function(){var t=this;Oe(Es,this)&&clearTimeout(Oe(Es,this)),We(Es,this,setTimeout((function(){var e;We(Es,t,null),null===(e=t.parent)||void 0===e||e.moveEditorInDOM(t)}),0))}},{key:"_setParentAndPosition",value:function(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}},{key:"getRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation,i=this.parentScale,a=He(this.pageDimensions,2),r=a[0],s=a[1],u=He(this.pageTranslation,2),o=u[0],l=u[1],h=t/i,c=e/i,d=this.x*r,f=this.y*s,v=this.width*r,p=this.height*s;switch(n){case 0:return[d+h+o,s-f-c-p+l,d+h+v+o,s-f-c+l];case 90:return[d+c+o,s-f+h+l,d+c+p+o,s-f+h+v+l];case 180:return[d-h-v+o,s-f+c+l,d-h+o,s-f+c+p+l];case 270:return[d-c-p+o,s-f-h-v+l,d-c+o,s-f-h+l];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(t,e){var n=He(t,4),i=n[0],a=n[1],r=n[2],s=n[3],u=r-i,o=s-a;switch(this.rotation){case 0:return[i,e-s,u,o];case 90:return[i,e-a,o,u];case 180:return[r,e-a,u,o];case 270:return[r,e-s,o,u];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){We(bs,this,!0)}},{key:"disableEditMode",value:function(){We(bs,this,!1)}},{key:"isInEditMode",value:function(){return Oe(bs,this)}},{key:"shouldGetKeyboardEvents",value:function(){return Oe(ks,this)}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var t,e,n=this._uiManager._signal;null===(t=this.div)||void 0===t||t.addEventListener("focusin",Oe(vs,this),{signal:n}),null===(e=this.div)||void 0===e||e.addEventListener("focusout",Oe(ps,this),{signal:n})}},{key:"rotate",value:function(t){}},{key:"serialize",value:function(){fi("An editor must be serializable")}},{key:"hasBeenModified",get:function(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}},{key:"remove",value:function(){if(this.div.removeEventListener("focusin",Oe(vs,this)),this.div.removeEventListener("focusout",Oe(ps,this)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Oe(Es,this)&&(clearTimeout(Oe(Es,this)),We(Es,this,null)),je(Ss,this,Us).call(this),this.removeEditToolbar(),Oe(Fs,this)){var t,e=Ue(Oe(Fs,this).values());try{for(e.s();!(t=e.n()).done;){var n=t.value;clearTimeout(n)}}catch(t){e.e(t)}finally{e.f()}We(Fs,this,null)}this.parent=null}},{key:"isResizable",get:function(){return!1}},{key:"makeResizable",value:function(){this.isResizable&&(je(Ss,this,Ts).call(this),Oe(ds,this).classList.remove("hidden"),lr(this,this.div,["keydown"]))}},{key:"toolbarPosition",get:function(){return null}},{key:"keydown",value:function(e){var n=this;if(this.isResizable&&e.target===this.div&&"Enter"===e.key){this._uiManager.setSelected(this),We(fs,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});var i=Oe(ds,this).children;if(!Oe(os,this)){We(os,this,Array.from(i));var a,r=je(Ss,this,js).bind(this),s=je(Ss,this,Hs).bind(this),u=this._uiManager._signal,o=Ue(Oe(os,this));try{var l=function(){var e=a.value,i=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",r,{signal:u}),e.addEventListener("blur",s,{signal:u}),e.addEventListener("focus",je(Ss,n,zs).bind(n,i),{signal:u}),t._l10nPromise.get("pdfjs-editor-resizer-label-".concat(i)).then((function(t){return e.setAttribute("aria-label",t)}))};for(o.s();!(a=o.n()).done;)l()}catch(t){o.e(t)}finally{o.f()}}var h,c=Oe(os,this)[0],d=0,f=Ue(i);try{for(f.s();!(h=f.n()).done;){if(h.value===c)break;d++}}catch(t){f.e(t)}finally{f.f()}var v=(360-this.rotation+this.parentRotation)%360/90*(Oe(os,this).length/4);if(v!==d){if(v<d)for(var p=0;p<d-v;p++)Oe(ds,this).append(Oe(ds,this).firstChild);else if(v>d)for(var g=0;g<v-d;g++)Oe(ds,this).firstChild.before(Oe(ds,this).lastChild);var D,m=0,y=Ue(i);try{var A=function(){var e=D.value,i=Oe(os,n)[m++].getAttribute("data-resizer-name");t._l10nPromise.get("pdfjs-editor-resizer-label-".concat(i)).then((function(t){return e.setAttribute("aria-label",t)}))};for(y.s();!(D=y.n()).done;)A()}catch(t){y.e(t)}finally{y.f()}}je(Ss,this,Vs).call(this,0),We(ks,this,!0),Oe(ds,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}}},{key:"_resizeWithKeyboard",value:function(t,e){Oe(ks,this)&&je(Ss,this,Ns).call(this,Oe(Ds,this),{movementX:t,movementY:e})}},{key:"_stopResizingWithKeyboard",value:function(){je(Ss,this,Us).call(this),this.div.focus()}},{key:"select",value:function(){var t,e,n=this;this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),Oe(gs,this)?null===(e=Oe(gs,this))||void 0===e||e.show():this.addEditToolbar().then((function(){var t,e;null!==(t=n.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=Oe(gs,n))||void 0===e||e.show())}))}},{key:"unselect",value:function(){var t,e,n,i;null===(t=Oe(ds,this))||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=Oe(gs,this))||void 0===i||i.hide()}},{key:"updateParams",value:function(t,e){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"enterInEditMode",value:function(){}},{key:"getImageForAltText",value:function(){return null}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return Oe(As,this)},set:function(t){We(As,this,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}},{key:"setAspectRatio",value:function(t,e){We(cs,this,!0);var n=t/e,i=this.div.style;i.aspectRatio=n,i.height="auto"}},{key:"telemetryInitialData",get:function(){return{action:"added"}}},{key:"telemetryFinalData",get:function(){return null}},{key:"_reportTelemetry",value:function(e){var n=this;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){Oe(Fs,this)||We(Fs,this,new Map);var i=e.action,a=Oe(Fs,this).get(i);return a&&clearTimeout(a),a=setTimeout((function(){n._reportTelemetry(e),Oe(Fs,n).delete(i),0===Oe(Fs,n).size&&We(Fs,n,null)}),t._telemetryTimeout),void Oe(Fs,this).set(i,a)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}},{key:"enable",value:function(){this.div&&(this.div.tabIndex=0),We(hs,this,!1)}},{key:"disable",value:function(){this.div&&(this.div.tabIndex=-1),We(hs,this,!0)}},{key:"renderAnnotationElement",value:function(t){var e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){var n=e;(e=document.createElement("div")).classList.add("annotationContent",this.editorType),n.before(e)}}else(e=document.createElement("div")).classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}},{key:"resetAnnotationElement",value:function(t){var e=t.container.firstChild;"DIV"===e.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}],[{key:"_resizerKeyboardManager",get:function(){var e=t.prototype._resizeWithKeyboard,n=xr.TRANSLATE_SMALL,i=xr.TRANSLATE_BIG;return gi(this,"_resizerKeyboardManager",new Cr([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],t.prototype._stopResizingWithKeyboard]]))}},{key:"_defaultLineColor",get:function(){return gi(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deleteAnnotationElement",value:function(t){var e=new Gs({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}},{key:"initialize",value:function(e,n,i){if(t._l10nPromise||(t._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((function(t){return[t,e.get(t.replaceAll(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())})))]})))),null!=i&&i.strings){var a,r=Ue(i.strings);try{for(r.s();!(a=r.n()).done;){var s=a.value;t._l10nPromise.set(s,e.get(s))}}catch(t){r.e(t)}finally{r.f()}}if(-1===t._borderLineWidth){var u=getComputedStyle(document.documentElement);t._borderLineWidth=parseFloat(u.getPropertyValue("--outline-width"))||0}}},{key:"updateDefaultParams",value:function(t,e){}},{key:"defaultPropertiesToUpdate",get:function(){return[]}},{key:"isHandlingMimeForPasting",value:function(t){return!1}},{key:"paste",value:function(t,e){fi("Not implemented")}},{key:"deserialize",value:function(t,e,n){var i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,We(us,i,t.accessibilityData);var a=He(i.pageDimensions,2),r=a[0],s=a[1],u=He(i.getRectInCurrentCoords(t.rect,s),4),o=u[0],l=u[1],h=u[2],c=u[3];return i.x=o/r,i.y=l/s,i.width=h/r,i.height=c/s,i}},{key:"MIN_SIZE",get:function(){return 16}},{key:"canCreateNewEmptyEditor",value:function(){return!0}}]);var e,n}();function Bs(t,e,n){var i=He(t,2),a=i[0],r=i[1],s=He(this.screenToPageTranslation(e,n),2);e=s[0],n=s[1],this.x+=e/a,this.y+=n/r,this.fixAndSetPosition()}function Ps(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}function Ls(t){switch(t){case 90:var e=He(this.pageDimensions,2),n=e[0],i=e[1];return[0,-n/i,i/n,0];case 180:return[-1,0,0,-1];case 270:var a=He(this.pageDimensions,2),r=a[0],s=a[1];return[0,r/s,-s/r,0];default:return[1,0,0,1]}}function Ts(){if(!Oe(ds,this)){We(ds,this,document.createElement("div")),Oe(ds,this).classList.add("resizers");for(var t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal,n=0,i=t;n<i.length;n++){var a=i[n],r=document.createElement("div");Oe(ds,this).append(r),r.classList.add("resizer",a),r.setAttribute("data-resizer-name",a),r.addEventListener("pointerdown",je(Ss,this,Is).bind(this,a),{signal:e}),r.addEventListener("contextmenu",Ra,{signal:e}),r.tabIndex=-1}this.div.prepend(Oe(ds,this))}}function Is(t,e){var n,i=this;e.preventDefault();var a=xi.platform.isMac;if(!(0!==e.button||e.ctrlKey&&a)){null===(n=Oe(ls,this))||void 0===n||n.toggle(!1);var r=je(Ss,this,Ns).bind(this,t),s=this._isDraggable;this._isDraggable=!1;var u=this._uiManager._signal,o={passive:!0,capture:!0,signal:u};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,o),window.addEventListener("contextmenu",Ra,{signal:u});var l=this.x,h=this.y,c=this.width,d=this.height,f=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;var p=function(){var t;i.parent.togglePointerEvents(!0),null===(t=Oe(ls,i))||void 0===t||t.toggle(!0),i._isDraggable=s,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",r,o),window.removeEventListener("contextmenu",Ra),i.parent.div.style.cursor=f,i.div.style.cursor=v,je(Ss,i,Rs).call(i,l,h,c,d)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})}}function Rs(t,e,n,i){var a=this,r=this.x,s=this.y,u=this.width,o=this.height;r===t&&s===e&&u===n&&o===i||this.addCommands({cmd:function(){a.width=u,a.height=o,a.x=r,a.y=s;var t=He(a.parentDimensions,2),e=t[0],n=t[1];a.setDims(e*u,n*o),a.fixAndSetPosition()},undo:function(){a.width=n,a.height=i,a.x=t,a.y=e;var r=He(a.parentDimensions,2),s=r[0],u=r[1];a.setDims(s*n,u*i),a.fixAndSetPosition()},mustExec:!0})}function Ns(t,e){var n,i,a=He(this.parentDimensions,2),r=a[0],s=a[1],u=this.x,o=this.y,l=this.width,h=this.height,c=$.MIN_SIZE/r,d=$.MIN_SIZE/s,f=function(t){return Math.round(1e4*t)/1e4},v=je(Ss,this,Ls).call(this,this.rotation),p=function(t,e){return[v[0]*t+v[2]*e,v[1]*t+v[3]*e]},g=je(Ss,this,Ls).call(this,360-this.rotation),D=!1,m=!1;switch(t){case"topLeft":D=!0,n=function(t,e){return[0,0]},i=function(t,e){return[t,e]};break;case"topMiddle":n=function(t,e){return[t/2,0]},i=function(t,e){return[t/2,e]};break;case"topRight":D=!0,n=function(t,e){return[t,0]},i=function(t,e){return[0,e]};break;case"middleRight":m=!0,n=function(t,e){return[t,e/2]},i=function(t,e){return[0,e/2]};break;case"bottomRight":D=!0,n=function(t,e){return[t,e]},i=function(t,e){return[0,0]};break;case"bottomMiddle":n=function(t,e){return[t/2,e]},i=function(t,e){return[t/2,0]};break;case"bottomLeft":D=!0,n=function(t,e){return[0,e]},i=function(t,e){return[t,0]};break;case"middleLeft":m=!0,n=function(t,e){return[0,e/2]},i=function(t,e){return[t,e/2]}}var y,A,b=n(l,h),k=i(l,h),E=p.apply(void 0,xe(k)),w=f(u+E[0]),C=f(o+E[1]),F=1,_=1,x=He(this.screenToPageTranslation(e.movementX,e.movementY),2),S=x[0],M=x[1],B=He((y=S/r,A=M/s,[g[0]*y+g[2]*A,g[1]*y+g[3]*A]),2);if(S=B[0],M=B[1],D){var P=Math.hypot(l,h);F=_=Math.max(Math.min(Math.hypot(k[0]-b[0]-S,k[1]-b[1]-M)/P,1/l,1/h),c/l,d/h)}else m?F=Math.max(c,Math.min(1,Math.abs(k[0]-b[0]-S)))/l:_=Math.max(d,Math.min(1,Math.abs(k[1]-b[1]-M)))/h;var L=f(l*F),T=f(h*_),I=w-(E=p.apply(void 0,xe(i(L,T))))[0],R=C-E[1];this.width=L,this.height=T,this.x=I,this.y=R,this.setDims(r*L,s*T),this.fixAndSetPosition()}function Os(t){var e=xi.platform.isMac;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Ws(t){var e,n,i=this,a=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();var r=this._uiManager._signal;a&&(this.div.classList.add("moving"),e={passive:!0,capture:!0,signal:r},We(ws,this,t.clientX),We(Cs,this,t.clientY),n=function(t){var e=t.clientX,n=t.clientY,a=He(i.screenToPageTranslation(e-Oe(ws,i),n-Oe(Cs,i)),2),r=a[0],s=a[1];We(ws,i,e),We(Cs,i,n),i._uiManager.dragSelectedEditors(r,s)},window.addEventListener("pointermove",n,e));var s=function(){window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),a&&(i.div.classList.remove("moving"),window.removeEventListener("pointermove",n,e)),We(ms,i,!1),i._uiManager.endDragSession()||je(Ss,i,Os).call(i,t)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})}function js(t){$._resizerKeyboardManager.exec(this,t)}function Hs(t){var e;Oe(ks,this)&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==Oe(ds,this)&&je(Ss,this,Us).call(this)}function zs(t){We(Ds,this,Oe(ks,this)?t:"")}function Vs(t){if(Oe(os,this)){var e,n=Ue(Oe(os,this));try{for(n.s();!(e=n.n()).done;){e.value.tabIndex=t}}catch(t){n.e(t)}finally{n.f()}}}function Us(){if(We(ks,this,!1),je(Ss,this,Vs).call(this,-1),Oe(fs,this)){var t=Oe(fs,this),e=t.savedX,n=t.savedY,i=t.savedWidth,a=t.savedHeight;je(Ss,this,Rs).call(this,e,n,i,a),We(fs,this,null)}}$=Ms,Pe(Ms,"_borderLineWidth",-1),Pe(Ms,"_colorManager",new _r),Pe(Ms,"_zIndex",1),Pe(Ms,"_telemetryTimeout",1e3);var Gs=function(){function t(e){var n;return Qe(this,t),(n=Je(this,t,[e])).annotationElementId=e.annotationElementId,n.deleted=!0,n}return tn(t,Ms),Ke(t,[{key:"serialize",value:function(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}])}(),qs=3285377520,Xs=4294901760,Ks=65535,Ys=function(){return Ke((function t(e){Qe(this,t),this.h1=e?4294967295&e:qs,this.h2=e?4294967295&e:qs}),[{key:"update",value:function(t){var e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(var i=0,a=t.length;i<a;i++){var r=t.charCodeAt(i);r<=255?e[n++]=r:(e[n++]=r>>>8,e[n++]=255&r)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");n=(e=t.slice()).byteLength}for(var s=n>>2,u=n-4*s,o=new Uint32Array(e.buffer,0,s),l=0,h=0,c=this.h1,d=this.h2,f=3432918353,v=461845907,p=11601,g=13715,D=0;D<s;D++)1&D?c=5*(c=(c^=l=(l=(l=(l=o[D])*f&Xs|l*p&Ks)<<15|l>>>17)*v&Xs|l*g&Ks)<<13|c>>>19)+3864292196:d=5*(d=(d^=h=(h=(h=(h=o[D])*f&Xs|h*p&Ks)<<15|h>>>17)*v&Xs|h*g&Ks)<<13|d>>>19)+3864292196;switch(l=0,u){case 3:l^=e[4*s+2]<<16;case 2:l^=e[4*s+1]<<8;case 1:l=(l=(l=(l^=e[4*s])*f&Xs|l*p&Ks)<<15|l>>>17)*v&Xs|l*g&Ks,1&s?c^=l:d^=l}this.h1=c,this.h2=d}},{key:"hexdigest",value:function(){var t=this.h1,e=this.h2;return t=3981806797*(t^=e>>>1)&Xs|36045*t&Ks,t=444984403*(t^=(e=4283543511*e&Xs|(2950163797*(e<<16|t>>>16)&Xs)>>>16)>>>1)&Xs|60499*t&Ks,((t^=(e=3301882366*e&Xs|(3120437893*(e<<16|t>>>16)&Xs)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}])}(),Qs=Object.freeze({map:null,hash:"",transfer:void 0}),Js=new WeakMap,Zs=new WeakMap,$s=new WeakMap,tu=new WeakSet,eu=function(){return Ke((function t(){Qe(this,t),Me(this,tu),Re(this,Js,!1),Re(this,Zs,null),Re(this,$s,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}),[{key:"getValue",value:function(t,e){var n=Oe($s,this).get(t);return void 0===n?e:Object.assign(e,n)}},{key:"getRawValue",value:function(t){return Oe($s,this).get(t)}},{key:"remove",value:function(t){if(Oe($s,this).delete(t),0===Oe($s,this).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){var e,n=Ue(Oe($s,this).values());try{for(n.s();!(e=n.n()).done;){if(e.value instanceof Ms)return}}catch(t){n.e(t)}finally{n.f()}this.onAnnotationEditor(null)}}},{key:"setValue",value:function(t,e){var n=Oe($s,this).get(t),i=!1;if(void 0!==n)for(var a=0,r=Object.entries(e);a<r.length;a++){var s=He(r[a],2),u=s[0],o=s[1];n[u]!==o&&(i=!0,n[u]=o)}else i=!0,Oe($s,this).set(t,e);i&&je(tu,this,nu).call(this),e instanceof Ms&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}},{key:"has",value:function(t){return Oe($s,this).has(t)}},{key:"getAll",value:function(){return Oe($s,this).size>0?_i(Oe($s,this)):null}},{key:"setAll",value:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var i=He(n[e],2),a=i[0],r=i[1];this.setValue(a,r)}}},{key:"size",get:function(){return Oe($s,this).size}},{key:"resetModified",value:function(){Oe(Js,this)&&(We(Js,this,!1),"function"==typeof this.onResetModified&&this.onResetModified())}},{key:"print",get:function(){return new au(this)}},{key:"serializable",get:function(){if(0===Oe($s,this).size)return Qs;var t,e=new Map,n=new Ys,i=[],a=Object.create(null),r=!1,s=Ue(Oe($s,this));try{for(s.s();!(t=s.n()).done;){var u=He(t.value,2),o=u[0],l=u[1],h=l instanceof Ms?l.serialize(!1,a):l;h&&(e.set(o,h),n.update("".concat(o,":").concat(JSON.stringify(h))),r||(r=!!h.bitmap))}}catch(t){s.e(t)}finally{s.f()}if(r){var c,d=Ue(e.values());try{for(d.s();!(c=d.n()).done;){var f=c.value;f.bitmap&&i.push(f.bitmap)}}catch(t){d.e(t)}finally{d.f()}}return e.size>0?{map:e,hash:n.hexdigest(),transfer:i}:Qs}},{key:"editorStats",get:function(){var t,e=null,n=new Map,i=Ue(Oe($s,this).values());try{for(i.s();!(t=i.n()).done;){var a,r=t.value;if(r instanceof Ms){var s=r.telemetryFinalData;if(s){var u=s.type;n.has(u)||n.set(u,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));for(var o=(a=e)[u]||(a[u]=new Map),l=0,h=Object.entries(s);l<h.length;l++){var c,d=He(h[l],2),f=d[0],v=d[1];if("type"!==f){var p=o.get(f);p||(p=new Map,o.set(f,p));var g=null!==(c=p.get(v))&&void 0!==c?c:0;p.set(v,g+1)}}}}}}catch(t){i.e(t)}finally{i.f()}var D,m=Ue(n);try{for(m.s();!(D=m.n()).done;){var y=He(D.value,2),A=y[0],b=y[1];e[A]=b.computeTelemetryFinalData(e[A])}}catch(t){m.e(t)}finally{m.f()}return e}},{key:"resetModifiedIds",value:function(){We(Zs,this,null)}},{key:"modifiedIds",get:function(){if(Oe(Zs,this))return Oe(Zs,this);var t,e=[],n=Ue(Oe($s,this).values());try{for(n.s();!(t=n.n()).done;){var i=t.value;i instanceof Ms&&i.annotationElementId&&i.serialize()&&e.push(i.annotationElementId)}}catch(t){n.e(t)}finally{n.f()}return We(Zs,this,{ids:new Set(e),hash:e.join(",")})}}])}();function nu(){Oe(Js,this)||(We(Js,this,!0),"function"==typeof this.onSetModified&&this.onSetModified())}var iu=new WeakMap,au=function(){function t(e){var n;Qe(this,t),Re(n=Je(this,t),iu,void 0);var i=e.serializable,a=i.map,r=i.hash,s=i.transfer,u=structuredClone(a,s?{transfer:s}:null);return We(iu,n,{map:u,hash:r,transfer:s}),n}return tn(t,eu),Ke(t,[{key:"print",get:function(){fi("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return Oe(iu,this)}},{key:"modifiedIds",get:function(){return gi(this,"modifiedIds",{ids:new Set,hash:""})}}])}(),ru=new WeakMap,su=function(){return Ke((function t(e){var n=e.ownerDocument,i=void 0===n?globalThis.document:n;e.styleElement,Qe(this,t),Re(this,ru,new Set),this._document=i,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}),[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}},{key:"removeNativeFontFace",value:function(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}},{key:"insertRule",value:function(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}},{key:"clear",value:function(){var t,e=Ue(this.nativeFontFaces);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._document.fonts.delete(n)}}catch(t){e.e(t)}finally{e.f()}this.nativeFontFaces.clear(),Oe(ru,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"loadSystemFont",value:(e=Ie(Le().mark((function t(e){var n,i,a,r,s,u;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.systemFontInfo,i=e._inspectFont,n&&!Oe(ru,this).has(n.loadedName)){t.next=3;break}return t.abrupt("return");case 3:if(vi(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),!this.isFontLoadingAPISupported){t.next=20;break}return a=n.loadedName,r=n.src,s=n.style,u=new FontFace(a,r,s),this.addNativeFontFace(u),t.prev=8,t.next=11,u.load();case 11:Oe(ru,this).add(a),null==i||i(n),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(8),di("Cannot load system font: ".concat(n.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(u);case 19:return t.abrupt("return");case 20:fi("Not implemented: loadSystemFont without the Font Loading API.");case 21:case"end":return t.stop()}}),t,this,[[8,15]])}))),function(t){return e.apply(this,arguments)})},{key:"bind",value:(t=Ie(Le().mark((function t(e){var n,i,a=this;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.attached||e.missingFile&&!e.systemFontInfo)){t.next=2;break}return t.abrupt("return");case 2:if(e.attached=!0,!e.systemFontInfo){t.next=7;break}return t.next=6,this.loadSystemFont(e);case 6:case 21:return t.abrupt("return");case 7:if(!this.isFontLoadingAPISupported){t.next=22;break}if(!(n=e.createNativeFontFace())){t.next=21;break}return this.addNativeFontFace(n),t.prev=11,t.next=14,n.loaded;case 14:t.next=21;break;case 16:throw t.prev=16,t.t0=t.catch(11),di("Failed to load font '".concat(n.family,"': '").concat(t.t0,"'.")),e.disableFontFace=!0,t.t0;case 22:if(!(i=e.createFontFaceRule())){t.next=29;break}if(this.insertRule(i),!this.isSyncFontLoadingSupported){t.next=27;break}return t.abrupt("return");case 27:return t.next=29,new Promise((function(t){var n=a._queueLoadingCallback(t);a._prepareFontLoadEvent(e,n)}));case 29:case"end":return t.stop()}}),t,this,[[11,16]])}))),function(e){return t.apply(this,arguments)})},{key:"isFontLoadingAPISupported",get:function(){var t;return gi(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}},{key:"isSyncFontLoadingSupported",get:function(){var t,e=!1;return(dn||"undefined"!=typeof navigator&&"string"==typeof(null===(t=navigator)||void 0===t?void 0:t.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),gi(this,"isSyncFontLoadingSupported",e)}},{key:"_queueLoadingCallback",value:function(t){var e=this.loadingRequests,n={done:!1,complete:function(){for(vi(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){var t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}},{key:"_loadTestFont",get:function(){return gi(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}var a,r,s=this._document.createElement("canvas");s.width=1,s.height=1;var u=s.getContext("2d"),o=0;var l="lt".concat(Date.now()).concat(this.loadTestFontId++),h=this._loadTestFont,c=1482184792,d=n(h=i(h,976,l.length,l),16);for(a=0,r=l.length-3;a<r;a+=4)d=d-c+n(l,a)|0;a<l.length&&(d=d-c+n(l+"XXX",a)|0),h=i(h,16,4,function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}(d));var f="url(data:font/opentype;base64,".concat(btoa(h),");"),v='@font-face {font-family:"'.concat(l,'";src:').concat(f,"}");this.insertRule(v);var p=this._document.createElement("div");p.style.visibility="hidden",p.style.width=p.style.height="10px",p.style.position="absolute",p.style.top=p.style.left="0px";for(var g=0,D=[t.loadedName,l];g<D.length;g++){var m=D[g],y=this._document.createElement("span");y.textContent="Hi",y.style.fontFamily=m,p.append(y)}this._document.body.append(p),function t(e,n){if(++o>30)return di("Load test font never loaded."),void n();u.font="30px "+e,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(l,(function(){p.remove(),e.complete()}))}}]);var t,e}(),uu=function(){return Ke((function t(e,n){var i=n.disableFontFace,a=void 0!==i&&i,r=n.inspectFont,s=void 0===r?null:r;for(var u in Qe(this,t),this.compiledGlyphs=Object.create(null),e)this[u]=e[u];this.disableFontFace=!0===a,this._inspectFont=s}),[{key:"createNativeFontFace",value:function(){var t,e;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}},{key:"createFontFaceRule",value:function(){var t;if(!this.data||this.disableFontFace)return null;var e,n=Ci(this.data),i="url(data:".concat(this.mimetype,";base64,").concat(btoa(n),");");if(this.cssFontInfo){var a="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(a+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),e='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(a,"src:").concat(i,"}")}else e='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(i,"}");return null===(t=this._inspectFont)||void 0===t||t.call(this,this,i),e}},{key:"getPathGenerator",value:function(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];var n;try{n=t.get(this.loadedName+"_path_"+e)}catch(t){di('getPathGenerator - ignoring character: "'.concat(t,'".'))}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[e]=function(t,e){};for(var i=[],a=function(t){switch(n[t++]){case Ni:var e=He(n.slice(t,t+6),6),a=e[0],s=e[1],u=e[2],o=e[3],l=e[4],h=e[5];i.push((function(t){return t.bezierCurveTo(a,s,u,o,l,h)})),t+=6;break;case Oi:var c=He(n.slice(t,t+2),2),d=c[0],f=c[1];i.push((function(t){return t.moveTo(d,f)})),t+=2;break;case Wi:var v=He(n.slice(t,t+2),2),p=v[0],g=v[1];i.push((function(t){return t.lineTo(p,g)})),t+=2;break;case ji:var D=He(n.slice(t,t+4),4),m=D[0],y=D[1],A=D[2],b=D[3];i.push((function(t){return t.quadraticCurveTo(m,y,A,b)})),t+=4;break;case Hi:i.push((function(t){return t.restore()}));break;case zi:i.push((function(t){return t.save()}));break;case Vi:vi(2===i.length,"Scale command is only valid at the third position.");break;case Ui:var k=He(n.slice(t,t+6),6),E=k[0],w=k[1],C=k[2],F=k[3],_=k[4],x=k[5];i.push((function(t){return t.transform(E,w,C,F,_,x)})),t+=6;break;case Gi:var S=He(n.slice(t,t+2),2),M=S[0],B=S[1];i.push((function(t){return t.translate(M,B)})),t+=2}r=t},r=0,s=n.length;r<s;)a(r);return this.compiledGlyphs[e]=function(t,e){i[0](t),i[1](t),t.scale(e,-e);for(var n=2,a=i.length;n<a;n++)i[n](t)}}}])}();if(dn){var ou=Promise.withResolvers(),lu=null;(function(){var t=Ie(Le().mark((function t(){var e,n,i,a;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,import("fs");case 2:return e=t.sent,t.next=5,import("http");case 5:return n=t.sent,t.next=8,import("https");case 8:return i=t.sent,t.next=11,import("url");case 11:return a=t.sent,t.abrupt("return",new Map(Object.entries({fs:e,http:n,https:i,url:a,canvas:undefined,path2d:undefined})));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().then((function(t){lu=t,ou.resolve()}),(function(t){di("loadPackages: ".concat(t)),lu=new Map,ou.resolve()}))}var hu=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"promise",get:function(){return ou.promise}},{key:"get",value:function(t){var e;return null===(e=lu)||void 0===e?void 0:e.get(t)}}])}(),cu=function(t){return hu.get("fs").promises.readFile(t).then((function(t){return new Uint8Array(t)}))},du=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,qi),Ke(t)}(),fu=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Ki),Ke(t,[{key:"_createCanvas",value:function(t,e){return hu.get("canvas").createCanvas(t,e)}}])}(),vu=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Yi),Ke(t,[{key:"_fetchData",value:function(t,e){return cu(t).then((function(t){return{cMapData:t,compressionType:e}}))}}])}(),pu=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Qi),Ke(t,[{key:"_fetchData",value:function(t){return cu(t)}}])}(),gu="Fill",Du="Stroke",mu="Shading";function yu(t,e){if(e){var n=e[2]-e[0],i=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],n,i),t.clip(a)}}var Au=function(){return Ke((function t(){Qe(this,t),this.constructor===t&&fi("Cannot initialize BaseShadingPattern.")}),[{key:"getPattern",value:function(){fi("Abstract method `getPattern` called.")}}])}(),bu=function(){function t(e){var n;return Qe(this,t),(n=Je(this,t))._type=e[1],n._bbox=e[2],n._colorStops=e[3],n._p0=e[4],n._p1=e[5],n._r0=e[6],n._r1=e[7],n.matrix=null,n}return tn(t,Au),Ke(t,[{key:"_createGradient",value:function(t){var e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var n,i=Ue(this._colorStops);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.addColorStop(a[0],a[1])}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"getPattern",value:function(t,e,n,i){var a;if(i===Du||i===gu){var r=e.current.getClippedPathBoundingBox(i,ja(t))||[0,0,0,0],s=Math.ceil(r[2]-r[0])||1,u=Math.ceil(r[3]-r[1])||1,o=e.cachedCanvases.getCanvas("pattern",s,u,!0),l=o.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-r[0],-r[1]),n=Mi.transform(n,[1,0,0,1,r[0],r[1]]),l.transform.apply(l,xe(e.baseTransform)),this.matrix&&l.transform.apply(l,xe(this.matrix)),yu(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),a=t.createPattern(o.canvas,"no-repeat");var h=new DOMMatrix(n);a.setTransform(h)}else yu(t,this._bbox),a=this._createGradient(t);return a}}])}();function ku(t,e,n,i,a,r,s,u){var o,l=e.coords,h=e.colors,c=t.data,d=4*t.width;l[n+1]>l[i+1]&&(o=n,n=i,i=o,o=r,r=s,s=o),l[i+1]>l[a+1]&&(o=i,i=a,a=o,o=s,s=u,u=o),l[n+1]>l[i+1]&&(o=n,n=i,i=o,o=r,r=s,s=o);var f=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY,p=(l[i]+e.offsetX)*e.scaleX,g=(l[i+1]+e.offsetY)*e.scaleY,D=(l[a]+e.offsetX)*e.scaleX,m=(l[a+1]+e.offsetY)*e.scaleY;if(!(v>=m))for(var y,A,b,k,E,w,C,F,_=h[r],x=h[r+1],S=h[r+2],M=h[s],B=h[s+1],P=h[s+2],L=h[u],T=h[u+1],I=h[u+2],R=Math.round(v),N=Math.round(m),O=R;O<=N;O++){if(O<g){var W=O<v?0:(v-O)/(v-g);y=f-(f-p)*W,A=_-(_-M)*W,b=x-(x-B)*W,k=S-(S-P)*W}else{var j=void 0;y=p-(p-D)*(j=O>m?1:g===m?0:(g-O)/(g-m)),A=M-(M-L)*j,b=B-(B-T)*j,k=P-(P-I)*j}var H=void 0;E=f-(f-D)*(H=O<v?0:O>m?1:(v-O)/(v-m)),w=_-(_-L)*H,C=x-(x-T)*H,F=S-(S-I)*H;for(var z=Math.round(Math.min(y,E)),V=Math.round(Math.max(y,E)),U=d*O+4*z,G=z;G<=V;G++)(H=(y-G)/(y-E))<0?H=0:H>1&&(H=1),c[U++]=A-(A-w)*H|0,c[U++]=b-(b-C)*H|0,c[U++]=k-(k-F)*H|0,c[U++]=255}}function Eu(t,e,n){var i,a,r=e.coords,s=e.colors;switch(e.type){case"lattice":var u=e.verticesPerRow,o=Math.floor(r.length/u)-1,l=u-1;for(i=0;i<o;i++)for(var h=i*u,c=0;c<l;c++,h++)ku(t,n,r[h],r[h+1],r[h+u],s[h],s[h+1],s[h+u]),ku(t,n,r[h+u+1],r[h+1],r[h+u],s[h+u+1],s[h+1],s[h+u]);break;case"triangles":for(i=0,a=r.length;i<a;i+=3)ku(t,n,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}var wu=function(){function t(e){var n;return Qe(this,t),(n=Je(this,t))._coords=e[2],n._colors=e[3],n._figures=e[4],n._bounds=e[5],n._bbox=e[7],n._background=e[8],n.matrix=null,n}return tn(t,Au),Ke(t,[{key:"_createMeshCanvas",value:function(t,e,n){var i=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,s=Math.ceil(this._bounds[3])-a,u=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),o=Math.min(Math.ceil(Math.abs(s*t[1]*1.1)),3e3),l=r/u,h=s/o,c={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-a,scaleX:1/l,scaleY:1/h},d=u+4,f=o+4,v=n.getCanvas("mesh",d,f,!1),p=v.context,g=p.createImageData(u,o);if(e)for(var D=g.data,m=0,y=D.length;m<y;m+=4)D[m]=e[0],D[m+1]=e[1],D[m+2]=e[2],D[m+3]=255;var A,b=Ue(this._figures);try{for(b.s();!(A=b.n()).done;){Eu(g,A.value,c)}}catch(t){b.e(t)}finally{b.f()}return p.putImageData(g,2,2),{canvas:v.canvas,offsetX:i-2*l,offsetY:a-2*h,scaleX:l,scaleY:h}}},{key:"getPattern",value:function(t,e,n,i){var a;if(yu(t,this._bbox),i===mu)a=Mi.singularValueDecompose2dScale(ja(t));else if(a=Mi.singularValueDecompose2dScale(e.baseTransform),this.matrix){var r=Mi.singularValueDecompose2dScale(this.matrix);a=[a[0]*r[0],a[1]*r[1]]}var s=this._createMeshCanvas(a,i===mu?null:this._background,e.cachedCanvases);return i!==mu&&(t.setTransform.apply(t,xe(e.baseTransform)),this.matrix&&t.transform.apply(t,xe(this.matrix))),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}}])}(),Cu=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Au),Ke(t,[{key:"getPattern",value:function(){return"hotpink"}}])}();var Fu=1,_u=2,xu=function(){function t(e,n,i,a,r){Qe(this,t),this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=n,this.ctx=i,this.canvasGraphicsFactory=a,this.baseTransform=r}return Ke(t,[{key:"createPatternCanvas",value:function(t){var e=this.operatorList,n=this.bbox,i=this.xstep,a=this.ystep,r=this.paintType,s=this.tilingType,u=this.color,o=this.canvasGraphicsFactory;ci("TilingType: "+s);var l=n[0],h=n[1],c=n[2],d=n[3],f=Mi.singularValueDecompose2dScale(this.matrix),v=Mi.singularValueDecompose2dScale(this.baseTransform),p=[f[0]*v[0],f[1]*v[1]],g=this.getSizeAndScale(i,this.ctx.canvas.width,p[0]),D=this.getSizeAndScale(a,this.ctx.canvas.height,p[1]),m=t.cachedCanvases.getCanvas("pattern",g.size,D.size,!0),y=m.context,A=o.createCanvasGraphics(y);A.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(A,r,u);var b=l,k=h,E=c,w=d;return l<0&&(b=0,E+=Math.abs(l)),h<0&&(k=0,w+=Math.abs(h)),y.translate(-g.scale*b,-D.scale*k),A.transform(g.scale,0,0,D.scale,0,0),y.save(),this.clipBbox(A,b,k,E,w),A.baseTransform=ja(A.ctx),A.executeOperatorList(e),A.endDrawing(),{canvas:m.canvas,scaleX:g.scale,scaleY:D.scale,offsetX:b,offsetY:k}}},{key:"getSizeAndScale",value:function(e,n,i){e=Math.abs(e);var a=Math.max(t.MAX_PATTERN_SIZE,n),r=Math.ceil(e*i);return r>=a?r=a:i=r/e,{scale:i,size:r}}},{key:"clipBbox",value:function(t,e,n,i,a){var r=i-e,s=a-n;t.ctx.rect(e,n,r,s),t.current.updateRectMinMax(ja(t.ctx),[e,n,i,a]),t.clip(),t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(t,e,n){var i=t.ctx,a=t.current;switch(e){case Fu:var r=this.ctx;i.fillStyle=r.fillStyle,i.strokeStyle=r.strokeStyle,a.fillColor=r.fillStyle,a.strokeColor=r.strokeStyle;break;case _u:var s=Mi.makeHexColor(n[0],n[1],n[2]);i.fillStyle=s,i.strokeStyle=s,a.fillColor=s,a.strokeColor=s;break;default:throw new Ei("Unsupported paint type: ".concat(e))}}},{key:"getPattern",value:function(t,e,n,i){var a=n;i!==mu&&(a=Mi.transform(a,e.baseTransform),this.matrix&&(a=Mi.transform(a,this.matrix)));var r=this.createPatternCanvas(e),s=new DOMMatrix(a);s=(s=s.translate(r.offsetX,r.offsetY)).scale(1/r.scaleX,1/r.scaleY);var u=t.createPattern(r.canvas,"repeat");return u.setTransform(s),u}}])}();function Su(t){var e=t.src,n=t.srcPos,i=void 0===n?0:n,a=t.dest,r=t.width,s=t.height,u=t.nonBlackColor,o=void 0===u?4294967295:u,l=t.inverseDecode,h=void 0!==l&&l,c=xi.isLittleEndian?4278190080:255,d=He(h?[o,c]:[c,o],2),f=d[0],v=d[1],p=r>>3,g=7&r,D=e.length;a=new Uint32Array(a.buffer);for(var m=0,y=0;y<s;y++){for(var A=i+p;i<A;i++){var b=i<D?e[i]:255;a[m++]=128&b?v:f,a[m++]=64&b?v:f,a[m++]=32&b?v:f,a[m++]=16&b?v:f,a[m++]=8&b?v:f,a[m++]=4&b?v:f,a[m++]=2&b?v:f,a[m++]=1&b?v:f}if(0!==g)for(var k=i<D?e[i++]:255,E=0;E<g;E++)a[m++]=k&1<<7-E?v:f}return{srcPos:i,destPos:m}}Pe(xu,"MAX_PATTERN_SIZE",3e3);var Mu=16;var Bu=function(){return Ke((function t(e){Qe(this,t),this.canvasFactory=e,this.cache=Object.create(null)}),[{key:"getCanvas",value:function(t,e,n){var i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}},{key:"delete",value:function(t){delete this.cache[t]}},{key:"clear",value:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}])}();function Pu(t,e,n,i,a,r,s,u,o,l){var h=He(ja(t),6),c=h[0],d=h[1],f=h[2],v=h[3],p=h[4],g=h[5];if(0===d&&0===f){var D=s*c+p,m=Math.round(D),y=u*v+g,A=Math.round(y),b=(s+o)*c+p,k=Math.abs(Math.round(b)-m)||1,E=(u+l)*v+g,w=Math.abs(Math.round(E)-A)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(v),m,A),t.drawImage(e,n,i,a,r,0,0,k,w),t.setTransform(c,d,f,v,p,g),[k,w]}if(0===c&&0===v){var C=u*f+p,F=Math.round(C),_=s*d+g,x=Math.round(_),S=(u+l)*f+p,M=Math.abs(Math.round(S)-F)||1,B=(s+o)*d+g,P=Math.abs(Math.round(B)-x)||1;return t.setTransform(0,Math.sign(d),Math.sign(f),0,F,x),t.drawImage(e,n,i,a,r,0,0,P,M),t.setTransform(c,d,f,v,p,g),[P,M]}return t.drawImage(e,n,i,a,r,s,u,o,l),[Math.hypot(c,d)*o,Math.hypot(f,v)*l]}var Lu=function(){return Ke((function t(e,n){Qe(this,t),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=fn,this.textMatrixScale=1,this.fontMatrix=vn,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=xn,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,n])}),[{key:"clone",value:function(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}},{key:"setCurrentPoint",value:function(t,e){this.x=t,this.y=e}},{key:"updatePathMinMax",value:function(t,e,n){var i=He(Mi.applyTransform([e,n],t),2);e=i[0],n=i[1],this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}},{key:"updateRectMinMax",value:function(t,e){var n=Mi.applyTransform(e,t),i=Mi.applyTransform(e.slice(2),t),a=Mi.applyTransform([e[0],e[3]],t),r=Mi.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],a[0],r[0]),this.minY=Math.min(this.minY,n[1],i[1],a[1],r[1]),this.maxX=Math.max(this.maxX,n[0],i[0],a[0],r[0]),this.maxY=Math.max(this.maxY,n[1],i[1],a[1],r[1])}},{key:"updateScalingPathMinMax",value:function(t,e){Mi.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}},{key:"updateCurvePathMinMax",value:function(t,e,n,i,a,r,s,u,o,l){var h=Mi.bezierBoundingBox(e,n,i,a,r,s,u,o,l);l||this.updateRectMinMax(t,h)}},{key:"getPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Du){e||fi("Stroke bounding box must include transform.");var i=Mi.singularValueDecompose2dScale(e),a=i[0]*this.lineWidth/2,r=i[1]*this.lineWidth/2;n[0]-=a,n[1]-=r,n[2]+=a,n[3]+=r}return n}},{key:"updateClipFromPath",value:function(){var t=Mi.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gu,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Mi.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}])}();function Tu(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var n,i,a,r,s,u=e.height,o=e.width,l=u%Mu,h=(u-l)/Mu,c=0===l?h:h+1,d=t.createImageData(o,Mu),f=0,v=e.data,p=d.data;if(e.kind===Tn.GRAYSCALE_1BPP){var g=v.byteLength,D=new Uint32Array(p.buffer,0,p.byteLength>>2),m=D.length,y=o+7>>3,A=4294967295,b=xi.isLittleEndian?4278190080:255;for(i=0;i<c;i++){for(r=i<h?Mu:l,n=0,a=0;a<r;a++){for(var k=g-f,E=0,w=k>y?o:8*k-7,C=-8&w,F=0,_=0;E<C;E+=8)_=v[f++],D[n++]=128&_?A:b,D[n++]=64&_?A:b,D[n++]=32&_?A:b,D[n++]=16&_?A:b,D[n++]=8&_?A:b,D[n++]=4&_?A:b,D[n++]=2&_?A:b,D[n++]=1&_?A:b;for(;E<w;E++)0===F&&(_=v[f++],F=128),D[n++]=_&F?A:b,F>>=1}for(;n<m;)D[n++]=0;t.putImageData(d,0,i*Mu)}}else if(e.kind===Tn.RGBA_32BPP){for(a=0,s=o*Mu*4,i=0;i<h;i++)p.set(v.subarray(f,f+s)),f+=s,t.putImageData(d,0,a),a+=Mu;i<c&&(s=o*l*4,p.set(v.subarray(f,f+s)),t.putImageData(d,0,a))}else{if(e.kind!==Tn.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(s=o*(r=Mu),i=0;i<c;i++){for(i>=h&&(s=o*(r=l)),n=0,a=s;a--;)p[n++]=v[f++],p[n++]=v[f++],p[n++]=v[f++],p[n++]=255;t.putImageData(d,0,i*Mu)}}}}function Iu(t,e){if(e.bitmap)t.drawImage(e.bitmap,0,0);else for(var n=e.height,i=e.width,a=n%Mu,r=(n-a)/Mu,s=0===a?r:r+1,u=t.createImageData(i,Mu),o=0,l=e.data,h=u.data,c=0;c<s;c++){o=Su({src:l,srcPos:o,dest:h,width:i,height:c<r?Mu:a,nonBlackColor:0}).srcPos,t.putImageData(u,0,c*Mu)}}function Ru(t,e){for(var n=0,i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];n<i.length;n++){var a=i[n];void 0!==t[a]&&(e[a]=t[a])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Nu(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!dn){var e=t.filter;"none"!==e&&""!==e&&(t.filter="none")}}function Ou(t,e){if(e)return!0;var n=Mi.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);var i=Math.fround((globalThis.devicePixelRatio||1)*$i.PDF_TO_CSS_UNITS);return n[0]<=i&&n[1]<=i}var Wu=["butt","round","square"],ju=["miter","round","bevel"],Hu={},zu={},Vu=new WeakSet,Uu=function(){function t(e,n,i,a,r,s,u,o){var l=s.optionalContentConfig,h=s.markedContentStack,c=void 0===h?null:h;Qe(this,t),Me(this,Vu),this.ctx=e,this.current=new Lu(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=a,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new Bu(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return Ke(t,[{key:"getObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}},{key:"beginDrawing",value:function(t){var e,n,i=t.transform,a=t.viewport,r=t.transparency,s=void 0!==r&&r,u=t.background,o=void 0===u?null:u,l=this.ctx.canvas.width,h=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=o||"#ffffff",this.ctx.fillRect(0,0,l,h),this.ctx.fillStyle=c,s){var d,f=this.cachedCanvases.getCanvas("transparent",l,h);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),(d=this.ctx).transform.apply(d,xe(ja(this.compositeCtx)))}(this.ctx.save(),Nu(this.ctx),i)&&((n=this.ctx).transform.apply(n,xe(i)),this.outputScaleX=i[0],this.outputScaleY=i[0]);(e=this.ctx).transform.apply(e,xe(a.transform)),this.viewportScale=a.scale,this.baseTransform=ja(this.ctx)}},{key:"executeOperatorList",value:function(t,e,n,i){var a=t.argsArray,r=t.fnArray,s=e||0,u=a.length;if(u===s)return s;for(var o,l=u-s>10&&"function"==typeof n,h=l?Date.now()+15:0,c=0,d=this.commonObjs,f=this.objs;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,n),s;if((o=r[s])!==si.dependency)this[o].apply(this,a[s]);else{var v,p=Ue(a[s]);try{for(p.s();!(v=p.n()).done;){var g=v.value,D=g.startsWith("g_")?d:f;if(!D.has(g))return D.get(g,n),s}}catch(t){p.e(t)}finally{p.f()}}if(++s===u)return s;if(l&&++c>10){if(Date.now()>h)return n(),s;c=0}}}},{key:"endDrawing",value:function(){je(Vu,this,Gu).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var t,e=Ue(this._cachedBitmapsMap.values());try{for(e.s();!(t=e.n()).done;){var n,i=t.value,a=Ue(i.values());try{for(a.s();!(n=a.n()).done;){var r=n.value;"undefined"!=typeof HTMLCanvasElement&&r instanceof HTMLCanvasElement&&(r.width=r.height=0)}}catch(t){a.e(t)}finally{a.f()}i.clear()}}catch(t){e.e(t)}finally{e.f()}this._cachedBitmapsMap.clear(),je(Vu,this,qu).call(this)}},{key:"_scaleImage",value:function(t,e){for(var n,i,a=t.width,r=t.height,s=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),o=a,l=r,h="prescale1";s>2&&o>1||u>2&&l>1;){var c=o,d=l;s>2&&o>1&&(s/=o/(c=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2))),u>2&&l>1&&(u/=l/(d=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2)),(i=(n=this.cachedCanvases.getCanvas(h,c,d)).context).clearRect(0,0,c,d),i.drawImage(t,0,0,o,l,0,0,c,d),t=n.canvas,o=c,l=d,h="prescale1"===h?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}},{key:"_createMaskCanvas",value:function(t){var e,n,i,a,r=this.ctx,s=t.width,u=t.height,o=this.current.fillColor,l=this.current.patternFill,h=ja(r);if((t.bitmap||t.data)&&t.count>1){var c=t.bitmap||t.data.buffer;n=JSON.stringify(l?h:[h.slice(0,4),o]),(e=this._cachedBitmapsMap.get(c))||(e=new Map,this._cachedBitmapsMap.set(c,e));var d=e.get(n);if(d&&!l)return{canvas:d,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])};i=d}i||Iu((a=this.cachedCanvases.getCanvas("maskCanvas",s,u)).context,t);var f=Mi.transform(h,[1/s,0,0,-1/u,0,0]);f=Mi.transform(f,[1,0,0,1,0,-u]);var v=He(Mi.getAxialAlignedBoundingBox([0,0,s,u],f),4),p=v[0],g=v[1],D=v[2],m=v[3],y=Math.round(D-p)||1,A=Math.round(m-g)||1,b=this.cachedCanvases.getCanvas("fillCanvas",y,A),k=b.context,E=p,w=g;k.translate(-E,-w),k.transform.apply(k,xe(f)),i||(i=(i=this._scaleImage(a.canvas,Ha(k))).img,e&&l&&e.set(n,i)),k.imageSmoothingEnabled=Ou(ja(k),t.interpolate),Pu(k,i,0,0,i.width,i.height,0,0,s,u),k.globalCompositeOperation="source-in";var C=Mi.transform(Ha(k),[1,0,0,1,-E,-w]);return k.fillStyle=l?o.getPattern(r,this,C,gu):o,k.fillRect(0,0,s,u),e&&!l&&(this.cachedCanvases.delete("fillCanvas"),e.set(n,b.canvas)),{canvas:b.canvas,offsetX:Math.round(E),offsetY:Math.round(w)}}},{key:"setLineWidth",value:function(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}},{key:"setLineCap",value:function(t){this.ctx.lineCap=Wu[t]}},{key:"setLineJoin",value:function(t){this.ctx.lineJoin=ju[t]}},{key:"setMiterLimit",value:function(t){this.ctx.miterLimit=t}},{key:"setDash",value:function(t,e){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}},{key:"setRenderingIntent",value:function(t){}},{key:"setFlatness",value:function(t){}},{key:"setGState",value:function(t){var e,n=Ue(t);try{for(n.s();!(e=n.n()).done;){var i=He(e.value,2),a=i[0],r=i[1];switch(a){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r)}}}catch(t){n.e(t)}finally{n.f()}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;var a=this.ctx;a.setTransform.apply(a,xe(ja(this.suspendedCtx))),Ru(this.suspendedCtx,a),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=function(){t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,a,r,s){e.transform(t,n,i,a,r,s),this.__originalTransform(t,n,i,a,r,s)},t.setTransform=function(t,n,i,a,r,s){e.setTransform(t,n,i,a,r,s),this.__originalSetTransform(t,n,i,a,r,s)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,a,r,s){e.bezierCurveTo(t,n,i,a,r,s),this.__originalBezierCurveTo(t,n,i,a,r,s)},t.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ru(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(t){if(this.current.activeSMask){t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"composeSMask",value:function(t,e,n,i){var a=i[0],r=i[1],s=i[2]-a,u=i[3]-r;0!==s&&0!==u&&(this.genericComposeSMask(e.context,n,s,u,e.subtype,e.backdrop,e.transferMap,a,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}},{key:"genericComposeSMask",value:function(t,e,n,i,a,r,s,u,o,l,h){var c=t.canvas,d=u-l,f=o-h;if(r)if(d<0||f<0||d+n>c.width||f+i>c.height){var v=this.cachedCanvases.getCanvas("maskExtension",n,i),p=v.context;p.drawImage(c,-d,-f),r.some((function(t){return 0!==t}))&&(p.globalCompositeOperation="destination-atop",p.fillStyle=Mi.makeHexColor.apply(Mi,xe(r)),p.fillRect(0,0,n,i),p.globalCompositeOperation="source-over"),c=v.canvas,d=f=0}else if(r.some((function(t){return 0!==t}))){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);var g=new Path2D;g.rect(d,f,n,i),t.clip(g),t.globalCompositeOperation="destination-atop",t.fillStyle=Mi.makeHexColor.apply(Mi,xe(r)),t.fillRect(d,f,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===a&&s?e.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===a&&(e.filter=this.filterFactory.addLuminosityFilter(s));var D=new Path2D;D.rect(u,o,n,i),e.clip(D),e.globalCompositeOperation="destination-in",e.drawImage(c,d,f,n,i,u,o,n,i),e.restore()}},{key:"save",value:function(){this.inSMaskMode?(Ru(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ru(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(t,e,n,i,a,r){this.ctx.transform(t,e,n,i,a,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(t,e,n){for(var i,a,r=this.ctx,s=this.current,u=s.x,o=s.y,l=ja(r),h=0===l[0]&&0===l[3]||0===l[1]&&0===l[2],c=h?n.slice(0):null,d=0,f=0,v=t.length;d<v;d++)switch(0|t[d]){case si.rectangle:u=e[f++],o=e[f++];var p=e[f++],g=e[f++],D=u+p,m=o+g;r.moveTo(u,o),0===p||0===g?r.lineTo(D,m):(r.lineTo(D,o),r.lineTo(D,m),r.lineTo(u,m)),h||s.updateRectMinMax(l,[u,o,D,m]),r.closePath();break;case si.moveTo:u=e[f++],o=e[f++],r.moveTo(u,o),h||s.updatePathMinMax(l,u,o);break;case si.lineTo:u=e[f++],o=e[f++],r.lineTo(u,o),h||s.updatePathMinMax(l,u,o);break;case si.curveTo:i=u,a=o,u=e[f+4],o=e[f+5],r.bezierCurveTo(e[f],e[f+1],e[f+2],e[f+3],u,o),s.updateCurvePathMinMax(l,i,a,e[f],e[f+1],e[f+2],e[f+3],u,o,c),f+=6;break;case si.curveTo2:i=u,a=o,r.bezierCurveTo(u,o,e[f],e[f+1],e[f+2],e[f+3]),s.updateCurvePathMinMax(l,i,a,u,o,e[f],e[f+1],e[f+2],e[f+3],c),u=e[f+2],o=e[f+3],f+=4;break;case si.curveTo3:i=u,a=o,u=e[f+2],o=e[f+3],r.bezierCurveTo(e[f],e[f+1],u,o,u,o),s.updateCurvePathMinMax(l,i,a,e[f],e[f+1],u,o,u,o,c),f+=4;break;case si.closePath:r.closePath()}h&&s.updateScalingPathMinMax(l,c),s.setCurrentPoint(u,o)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===nn(n)&&null!=n&&n.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,Ha(e),Du),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.ctx,n=this.current.fillColor,i=!1;this.current.patternFill&&(e.save(),e.fillStyle=n.getPattern(e,this,Ha(e),gu),i=!0);var a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),i&&e.restore(),t&&this.consumePath(a)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=Hu}},{key:"eoClip",value:function(){this.pendingClip=zu}},{key:"beginText",value:function(){this.current.textMatrix=fn,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();var n,i=Ue(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.setTransform.apply(e,xe(a.transform)),e.translate(a.x,a.y),a.addToPath(e,a.fontSize)}}catch(t){i.e(t)}finally{i.f()}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setFont",value:function(t,e){var n,i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=i.fontMatrix||vn,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||di("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=e,!i.isType3Font){var r=i.loadedName||"sans-serif",s=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(r,'", ').concat(i.fallbackName),u="normal";i.black?u="900":i.bold&&(u="bold");var o=i.italic?"italic":"normal",l=e;e<16?l=16:e>100&&(l=100),this.current.fontSizeScale=e/l,this.ctx.font="".concat(o," ").concat(u," ").concat(l,"px ").concat(s)}}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"moveText",value:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}},{key:"setLeadingMoveText",value:function(t,e){this.setLeading(-e),this.moveText(t,e)}},{key:"setTextMatrix",value:function(t,e,n,i,a,r){this.current.textMatrix=[t,e,n,i,a,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(t,e,n,i){var a,r=this.ctx,s=this.current,u=s.font,o=s.textRenderingMode,l=s.fontSize/s.fontSizeScale,h=o&Pn,c=!!(o&Ln),d=s.patternFill&&!u.missingFile;((u.disableFontFace||c||d)&&(a=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||d?(r.save(),r.translate(e,n),r.beginPath(),a(r,l),i&&r.setTransform.apply(r,xe(i)),h!==xn&&h!==Mn||r.fill(),h!==Sn&&h!==Mn||r.stroke(),r.restore()):(h!==xn&&h!==Mn||r.fillText(t,e,n),h!==Sn&&h!==Mn||r.strokeText(t,e,n)),c)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ja(r),x:e,y:n,fontSize:l,addToPath:a})}},{key:"isFontSubpixelAAEnabled",get:function(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,n=!1,i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return gi(this,"isFontSubpixelAAEnabled",n)}},{key:"showText",value:function(t){var e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);var i=e.fontSize;if(0!==i){var a,r=this.ctx,s=e.fontSizeScale,u=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,c=t.length,d=n.vertical,f=d?1:-1,v=n.defaultVMetrics,p=i*e.fontMatrix[0],g=e.textRenderingMode===xn&&!n.disableFontFace&&!e.patternFill;if(r.save(),r.transform.apply(r,xe(e.textMatrix)),r.translate(e.x,e.y+e.textRise),l>0?r.scale(h,-1):r.scale(h,1),e.patternFill){r.save();var D=e.fillColor.getPattern(r,this,Ha(r),gu);a=ja(r),r.restore(),r.fillStyle=D}var m=e.lineWidth,y=e.textMatrixScale;if(0===y||0===m){var A=e.textRenderingMode&Pn;A!==Sn&&A!==Mn||(m=this.getSinglePixelWidth())}else m/=y;if(1!==s&&(r.scale(s,s),m/=s),r.lineWidth=m,n.isInvalidPDFjsFont){var b,k=[],E=0,w=Ue(t);try{for(w.s();!(b=w.n()).done;){var C=b.value;k.push(C.unicode),E+=C.width}}catch(t){w.e(t)}finally{w.f()}return r.fillText(k.join(""),0,0),e.x+=E*p*h,r.restore(),void this.compose()}var F,_=0;for(F=0;F<c;++F){var x=t[F];if("number"!=typeof x){var S=!1,M=(x.isSpace?o:0)+u,B=x.fontChar,P=x.accent,L=void 0,T=void 0,I=x.width;if(d){var R=x.vmetric||v,N=-(x.vmetric?R[1]:.5*I)*p,O=R[2]*p;I=R?-R[0]:I,L=N/s,T=(_+O)/s}else L=_/s,T=0;if(n.remeasure&&I>0){var W=1e3*r.measureText(B).width/i*s;if(I<W&&this.isFontSubpixelAAEnabled){var j=I/W;S=!0,r.save(),r.scale(j,1),L/=j}else I!==W&&(L+=(I-W)/2e3*i/s)}if(this.contentVisible&&(x.isInFont||n.missingFile))if(g&&!P)r.fillText(B,L,T);else if(this.paintChar(B,L,T,a),P){var H=L+i*P.offset.x/s,z=T-i*P.offset.y/s;this.paintChar(P.fontChar,H,z,a)}_+=d?I*p-M*l:I*p+M*l,S&&r.restore()}else _+=f*x*i/1e3}d?e.y-=_:e.x+=_*h,r.restore(),this.compose()}}},{key:"showType3Text",value:function(t){var e,n,i,a,r=this.ctx,s=this.current,u=s.font,o=s.fontSize,l=s.fontDirection,h=u.vertical?1:-1,c=s.charSpacing,d=s.wordSpacing,f=s.textHScale*l,v=s.fontMatrix||vn,p=t.length;if(!(s.textRenderingMode===Bn)&&0!==o){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform.apply(r,xe(s.textMatrix)),r.translate(s.x,s.y),r.scale(f,l),e=0;e<p;++e)if("number"!=typeof(n=t[e])){var g=(n.isSpace?d:0)+c,D=u.charProcOperatorList[n.operatorListId];if(D)this.contentVisible&&(this.processingType3=n,this.save(),r.scale(o,o),r.transform.apply(r,xe(v)),this.executeOperatorList(D),this.restore()),i=Mi.applyTransform([n.width,0],v)[0]*o+g,r.translate(i,0),s.x+=i*f;else di('Type3 character "'.concat(n.operatorListId,'" is not available.'))}else a=h*n*o/1e3,this.ctx.translate(a,0),s.x+=a*f;r.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(t,e){}},{key:"setCharWidthAndBounds",value:function(t,e,n,i,a,r){this.ctx.rect(n,i,a-n,r-i),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(e){var n,i=this;if("TilingPattern"===e[0]){var a=e[1],r=this.baseTransform||ja(this.ctx),s={createCanvasGraphics:function(e){return new t(e,i.commonObjs,i.objs,i.canvasFactory,i.filterFactory,{optionalContentConfig:i.optionalContentConfig,markedContentStack:i.markedContentStack})}};n=new xu(e,a,this.ctx,s,r)}else n=this._getPattern(e[1],e[2]);return n}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Mi.makeHexColor(t,e,n)}},{key:"setStrokeTransparent",value:function(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}},{key:"setFillRGBColor",value:function(t,e,n){this.ctx.fillStyle=this.current.fillColor=Mi.makeHexColor(t,e,n),this.current.patternFill=!1}},{key:"setFillTransparent",value:function(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}},{key:"_getPattern",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new bu(t);case"Mesh":return new wu(t);case"Dummy":return new Cu}throw new Error("Unknown IR type: ".concat(t[0]))}(this.getObject(t)),this.cachedPatterns.set(t,e)),n&&(e.matrix=n),e}},{key:"shadingFill",value:function(t){if(this.contentVisible){var e=this.ctx;this.save();var n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Ha(e),mu);var i=Ha(e);if(i){var a=e.canvas,r=a.width,s=a.height,u=He(Mi.getAxialAlignedBoundingBox([0,0,r,s],i),4),o=u[0],l=u[1],h=u[2],c=u[3];this.ctx.fillRect(o,l,h-o,c-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){fi("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){fi("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform.apply(this,xe(t)),this.baseTransform=ja(this.ctx),e)){var n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(ja(this.ctx),e),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var e=this.ctx;t.isolated||ci("TODO: Support non-isolated groups."),t.knockout&&di("Knockout groups not supported.");var n=ja(e);if(t.matrix&&e.transform.apply(e,xe(t.matrix)),!t.bbox)throw new Error("Bounding box is required.");var i=Mi.getAxialAlignedBoundingBox(t.bbox,ja(e)),a=[0,0,e.canvas.width,e.canvas.height];i=Mi.intersect(i,a)||[0,0,0,0];var r=Math.floor(i[0]),s=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-r,1),o=Math.max(Math.ceil(i[3])-s,1);this.current.startNewPathAndClipBox([0,0,u,o]);var l="groupAt"+this.groupLevel;t.smask&&(l+="_smask_"+this.smaskCounter++%2);var h=this.cachedCanvases.getCanvas(l,u,o),c=h.context;c.translate(-r,-s),c.transform.apply(c,xe(n)),t.smask?this.smaskStack.push({canvas:h.canvas,context:c,offsetX:r,offsetY:s,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,s),e.save()),Ru(e,c),this.ctx=c,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}}},{key:"endGroup",value:function(t){if(this.contentVisible){this.groupLevel--;var e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{var i;this.ctx.restore();var a=ja(this.ctx);this.restore(),this.ctx.save(),(i=this.ctx).setTransform.apply(i,xe(a));var r=Mi.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}}},{key:"beginAnnotation",value:function(t,e,n,i,a){var r;(je(Vu,this,Gu).call(this),Nu(this.ctx),this.ctx.save(),this.save(),this.baseTransform)&&(r=this.ctx).setTransform.apply(r,xe(this.baseTransform));if(e){var s=e[2]-e[0],u=e[3]-e[1];if(a&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=s,e[3]=u;var o=He(Mi.singularValueDecompose2dScale(ja(this.ctx)),2),l=o[0],h=o[1],c=this.viewportScale,d=Math.ceil(s*this.outputScaleX*c),f=Math.ceil(u*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,f);var v=this.annotationCanvas,p=v.canvas,g=v.context;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-h,0,u*h),Nu(this.ctx)}else Nu(this.ctx),this.ctx.rect(e[0],e[1],s,u),this.ctx.clip(),this.endPath()}this.current=new Lu(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,xe(n)),this.transform.apply(this,xe(i))}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx.restore(),je(Vu,this,qu).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(t){if(this.contentVisible){var e=t.count;(t=this.getObject(t.data,t)).count=e;var n=this.ctx,i=this.processingType3;if(i&&(void 0===i.compiled&&(i.compiled=function(t){var e=t.width,n=t.height;if(e>1e3||n>1e3)return null;var i,a,r,s,u=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1,l=new Uint8Array(o*(n+1)),h=e+7&-8,c=new Uint8Array(h*n),d=0,f=Ue(t.data);try{for(f.s();!(s=f.n()).done;)for(var v=s.value,p=128;p>0;)c[d++]=v&p?0:255,p>>=1}catch(t){f.e(t)}finally{f.f()}var g=0;for(0!==c[d=0]&&(l[0]=1,++g),a=1;a<e;a++)c[d]!==c[d+1]&&(l[a]=c[d]?2:1,++g),d++;for(0!==c[d]&&(l[a]=2,++g),i=1;i<n;i++){r=i*o,c[(d=i*h)-h]!==c[d]&&(l[r]=c[d]?1:8,++g);var D=(c[d]?4:0)+(c[d-h]?8:0);for(a=1;a<e;a++)u[D=(D>>2)+(c[d+1]?4:0)+(c[d-h+1]?8:0)]&&(l[r+a]=u[D],++g),d++;if(c[d-h]!==c[d]&&(l[r+a]=c[d]?2:4,++g),g>1e3)return null}for(r=i*o,0!==c[d=h*(n-1)]&&(l[r]=8,++g),a=1;a<e;a++)c[d]!==c[d+1]&&(l[r+a]=c[d]?4:8,++g),d++;if(0!==c[d]&&(l[r+a]=4,++g),g>1e3)return null;var m=new Int32Array([0,o,-1,0,-o,0,0,0,1]),y=new Path2D;for(i=0;g&&i<=n;i++){for(var A=i*o,b=A+e;A<b&&!l[A];)A++;if(A!==b){y.moveTo(A%o,i);var k=A,E=l[A];do{var w=m[E];do{A+=w}while(!l[A]);var C=l[A];5!==C&&10!==C?(E=C,l[A]=0):(E=C&51*E>>4,l[A]&=E>>2|E<<2),y.lineTo(A%o,A/o|0),l[A]||--g}while(k!==A);--i}}return c=null,l=null,function(t){t.save(),t.scale(1/e,-1/n),t.translate(0,-n),t.fill(y),t.beginPath(),t.restore()}}(t)),i.compiled))i.compiled(n);else{var a=this._createMaskCanvas(t),r=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,a.offsetX,a.offsetY),n.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var s=this.ctx;s.save();var u=ja(s);s.transform(e,n,i,a,0,0);var o=this._createMaskCanvas(t);s.setTransform(1,0,0,1,o.offsetX-u[4],o.offsetY-u[5]);for(var l=0,h=r.length;l<h;l+=2){var c=Mi.transform(u,[e,n,i,a,r[l],r[l+1]]),d=He(Mi.applyTransform([0,0],c),2),f=d[0],v=d[1];s.drawImage(o.canvas,f,v)}s.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(t){if(this.contentVisible){var e,n=this.ctx,i=this.current.fillColor,a=this.current.patternFill,r=Ue(t);try{for(r.s();!(e=r.n()).done;){var s=e.value,u=s.data,o=s.width,l=s.height,h=s.transform,c=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=c.context;d.save(),Iu(d,this.getObject(u,s)),d.globalCompositeOperation="source-in",d.fillStyle=a?i.getPattern(d,this,Ha(n),gu):i,d.fillRect(0,0,o,l),d.restore(),n.save(),n.transform.apply(n,xe(h)),n.scale(1,-1),Pu(n,c.canvas,0,0,o,l,0,-1,1,1),n.restore()}}catch(t){r.e(t)}finally{r.f()}this.compose()}}},{key:"paintImageXObject",value:function(t){if(this.contentVisible){var e=this.getObject(t);e?this.paintInlineImageXObject(e):di("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(t,e,n,i){if(this.contentVisible){var a=this.getObject(t);if(a){for(var r=a.width,s=a.height,u=[],o=0,l=i.length;o<l;o+=2)u.push({transform:[e,0,0,n,i[o],i[o+1]],x:0,y:0,w:r,h:s});this.paintInlineImageXObjectGroup(a,u)}else di("Dependent image isn't ready yet")}}},{key:"applyTransferMapsToCanvas",value:function(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}},{key:"applyTransferMapsToBitmap",value:function(t){if("none"===this.current.transferMaps)return t.bitmap;var e=t.bitmap,n=t.width,i=t.height,a=this.cachedCanvases.getCanvas("inlineImage",n,i),r=a.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",a.canvas}},{key:"paintInlineImageXObject",value:function(t){if(this.contentVisible){var e,n=t.width,i=t.height,a=this.ctx;if(this.save(),!dn){var r=a.filter;"none"!==r&&""!==r&&(a.filter="none")}if(a.scale(1/n,-1/i),t.bitmap)e=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)e=t;else{var s=this.cachedCanvases.getCanvas("inlineImage",n,i).context;Tu(s,t),e=this.applyTransferMapsToCanvas(s)}var u=this._scaleImage(e,Ha(a));a.imageSmoothingEnabled=Ou(ja(a),t.interpolate),Pu(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,n,i),this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(t,e){if(this.contentVisible){var n,i=this.ctx;if(t.bitmap)n=t.bitmap;else{var a=t.width,r=t.height,s=this.cachedCanvases.getCanvas("inlineImage",a,r).context;Tu(s,t),n=this.applyTransferMapsToCanvas(s)}var u,o=Ue(e);try{for(o.s();!(u=o.n()).done;){var l=u.value;i.save(),i.transform.apply(i,xe(l.transform)),i.scale(1,-1),Pu(i,n,l.x,l.y,l.w,l.h,0,-1,1,1),i.restore()}}catch(t){o.e(t)}finally{o.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(t){}},{key:"markPointProps",value:function(t,e){}},{key:"beginMarkedContent",value:function(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(t){var e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);var n=this.ctx;this.pendingClip&&(e||(this.pendingClip===zu?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var t=ja(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(-1===this._cachedScaleForStroking[0]){var t,e,n=this.current.lineWidth,i=this.ctx.getTransform(),a=i.a,r=i.b,s=i.c,u=i.d;if(0===r&&0===s){var o=Math.abs(a),l=Math.abs(u);if(o===l)if(0===n)t=e=1/o;else{var h=o*n;t=e=h<1?1/h:1}else if(0===n)t=1/o,e=1/l;else{var c=o*n,d=l*n;t=c<1?1/c:1,e=d<1?1/d:1}}else{var f=Math.abs(a*u-r*s),v=Math.hypot(a,r),p=Math.hypot(s,u);if(0===n)t=p/f,e=v/f;else{var g=n*f;t=p>g?p/g:1,e=v>g?v/g:1}}this._cachedScaleForStroking[0]=t,this._cachedScaleForStroking[1]=e}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(t){var e=this.ctx,n=this.current.lineWidth,i=He(this.getScaleForStroking(),2),a=i[0],r=i[1];if(e.lineWidth=n||1,1!==a||1!==r){var s=e.getLineDash();if(t&&e.save(),e.scale(a,r),s.length>0){var u=Math.max(a,r);e.setLineDash(s.map((function(t){return t/u}))),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}else e.stroke()}},{key:"isContentVisible",value:function(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}])}();function Gu(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function qu(){if(this.pageColors){var t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){var e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}for(var Xu in si)void 0!==Uu.prototype[Xu]&&(Uu.prototype[si[Xu]]=Uu.prototype[Xu]);var Ku=(tt=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"workerPort",get:function(){return je(tt,this,et)._},set:function(t){if(!("undefined"!=typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");et._=je(tt,this,t)}},{key:"workerSrc",get:function(){return je(tt,this,nt)._},set:function(t){if("string"!=typeof t)throw new Error("Invalid `workerSrc` type.");nt._=je(tt,this,t)}}])}(),et={_:null},nt={_:""},tt),Yu=1,Qu=2,Ju=1,Zu=2,$u=3,to=4,eo=5,no=6,io=7,ao=8;function ro(t){switch(t instanceof Error||"object"===nn(t)&&null!==t||fi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new wi(t.message);case"MissingPDFException":return new bi(t.message);case"PasswordException":return new mi(t.message,t.code);case"UnexpectedResponseException":return new ki(t.message,t.status);case"UnknownErrorException":return new yi(t.message,t.details);default:return new yi(t.message,t.toString())}}var so=new WeakSet,uo=function(){return Ke((function t(e,n,i){var a=this;Qe(this,t),Me(this,so),this.sourceName=e,this.targetName=n,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===a.sourceName)if(e.stream)je(so,a,lo).call(a,e);else if(e.callback){var n=e.callbackId,r=a.callbackCapabilities[n];if(!r)throw new Error("Cannot resolve callback ".concat(n));if(delete a.callbackCapabilities[n],e.callback===Yu)r.resolve(e.data);else{if(e.callback!==Qu)throw new Error("Unexpected callback case");r.reject(ro(e.reason))}}else{var s=a.actionHandler[e.action];if(!s)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){var u=a.sourceName,o=e.sourceName;new Promise((function(t){t(s(e.data))})).then((function(t){i.postMessage({sourceName:u,targetName:o,callback:Yu,callbackId:e.callbackId,data:t})}),(function(t){i.postMessage({sourceName:u,targetName:o,callback:Qu,callbackId:e.callbackId,reason:ro(t)})}))}else e.streamId?je(so,a,oo).call(a,e):s(e.data)}},i.addEventListener("message",this._onComObjOnMessage)}),[{key:"on",value:function(t,e){var n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}},{key:"send",value:function(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}},{key:"sendWithPromise",value:function(t,e,n){var i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(t){a.reject(t)}return a.promise}},{key:"sendWithStream",value:function(t,e,n,i){var a=this,r=this.streamId++,s=this.sourceName,u=this.targetName,o=this.comObj;return new ReadableStream({start:function(n){var l=Promise.withResolvers();return a.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:u,action:t,streamId:r,data:e,desiredSize:n.desiredSize},i),l.promise},pull:function(t){var e=Promise.withResolvers();return a.streamControllers[r].pullCall=e,o.postMessage({sourceName:s,targetName:u,stream:no,streamId:r,desiredSize:t.desiredSize}),e.promise},cancel:function(t){vi(t instanceof Error,"cancel must have a valid reason");var e=Promise.withResolvers();return a.streamControllers[r].cancelCall=e,a.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:u,stream:Ju,streamId:r,reason:ro(t)}),e.promise}},n)}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}])}();function oo(t){var e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,r=this,s=this.actionHandler[t.action],u={enqueue:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var u=this.desiredSize;this.desiredSize-=r,u>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:to,streamId:e,chunk:t},s)}},close:function(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:$u,streamId:e}),delete r.streamSinks[e])},error:function(t){vi(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:eo,streamId:e,reason:ro(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise((function(e){e(s(t.data,u))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:ao,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:n,targetName:i,stream:ao,streamId:e,reason:ro(t)})}))}function lo(t){var e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,r=this.streamControllers[e],s=this.streamSinks[e];switch(t.stream){case ao:t.success?r.startCall.resolve():r.startCall.reject(ro(t.reason));break;case io:t.success?r.pullCall.resolve():r.pullCall.reject(ro(t.reason));break;case no:if(!s){a.postMessage({sourceName:n,targetName:i,stream:io,streamId:e,success:!0});break}s.desiredSize<=0&&t.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=t.desiredSize,new Promise((function(t){var e;t(null===(e=s.onPull)||void 0===e?void 0:e.call(s))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:io,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:n,targetName:i,stream:io,streamId:e,reason:ro(t)})}));break;case to:if(vi(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case $u:if(vi(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),je(so,this,ho).call(this,r,e);break;case eo:vi(r,"error should have stream controller"),r.controller.error(ro(t.reason)),je(so,this,ho).call(this,r,e);break;case Zu:t.success?r.cancelCall.resolve():r.cancelCall.reject(ro(t.reason)),je(so,this,ho).call(this,r,e);break;case Ju:if(!s)break;new Promise((function(e){var n;e(null===(n=s.onCancel)||void 0===n?void 0:n.call(s,ro(t.reason)))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:Zu,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:n,targetName:i,stream:Zu,streamId:e,reason:ro(t)})})),s.sinkCapability.reject(ro(t.reason)),s.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}function ho(t,e){return co.apply(this,arguments)}function co(){return(co=Ie(Le().mark((function t(e,n){var i,a,r;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([null===(i=e.startCall)||void 0===i?void 0:i.promise,null===(a=e.pullCall)||void 0===a?void 0:a.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]);case 2:delete this.streamControllers[n];case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var fo=new WeakMap,vo=new WeakMap,po=function(){return Ke((function t(e){var n=e.parsedData,i=e.rawData;Qe(this,t),Re(this,fo,void 0),Re(this,vo,void 0),We(fo,this,n),We(vo,this,i)}),[{key:"getRaw",value:function(){return Oe(vo,this)}},{key:"get",value:function(t){var e;return null!==(e=Oe(fo,this).get(t))&&void 0!==e?e:null}},{key:"getAll",value:function(){return _i(Oe(fo,this))}},{key:"has",value:function(t){return Oe(fo,this).has(t)}}])}(),go=Symbol("INTERNAL"),Do=new WeakMap,mo=new WeakMap,yo=new WeakMap,Ao=new WeakMap,bo=function(){return Ke((function t(e,n){var i=n.name,a=n.intent,r=n.usage;Qe(this,t),Re(this,Do,!1),Re(this,mo,!1),Re(this,yo,!1),Re(this,Ao,!0),We(Do,this,!!(e&Dn)),We(mo,this,!!(e&mn)),this.name=i,this.intent=a,this.usage=r}),[{key:"visible",get:function(){if(Oe(yo,this))return Oe(Ao,this);if(!Oe(Ao,this))return!1;var t=this.usage,e=t.print,n=t.view;return Oe(Do,this)?"OFF"!==(null==n?void 0:n.viewState):!Oe(mo,this)||"OFF"!==(null==e?void 0:e.printState)}},{key:"_setVisible",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==go&&fi("Internal method `_setVisible` called."),We(yo,this,n),We(Ao,this,e)}}])}(),ko=new WeakMap,Eo=new WeakMap,wo=new WeakMap,Co=new WeakMap,Fo=new WeakSet,_o=function(){return Ke((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn;if(Qe(this,t),Me(this,Fo),Re(this,ko,null),Re(this,Eo,new Map),Re(this,wo,null),Re(this,Co,null),this.renderingIntent=n,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,We(Co,this,e.order);var i,a=Ue(e.groups);try{for(a.s();!(i=a.n()).done;){var r=i.value;Oe(Eo,this).set(r.id,new bo(n,r))}}catch(t){a.e(t)}finally{a.f()}if("OFF"===e.baseState){var s,u=Ue(Oe(Eo,this).values());try{for(u.s();!(s=u.n()).done;){s.value._setVisible(go,!1)}}catch(t){u.e(t)}finally{u.f()}}var o,l=Ue(e.on);try{for(l.s();!(o=l.n()).done;){var h=o.value;Oe(Eo,this).get(h)._setVisible(go,!0)}}catch(t){l.e(t)}finally{l.f()}var c,d=Ue(e.off);try{for(d.s();!(c=d.n()).done;){var f=c.value;Oe(Eo,this).get(f)._setVisible(go,!1)}}catch(t){d.e(t)}finally{d.f()}We(wo,this,this.getHash())}}),[{key:"isVisible",value:function(t){if(0===Oe(Eo,this).size)return!0;if(!t)return ci("Optional content group not defined."),!0;if("OCG"===t.type)return Oe(Eo,this).has(t.id)?Oe(Eo,this).get(t.id).visible:(di("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return je(Fo,this,xo).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var e,n=Ue(t.ids);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!Oe(Eo,this).has(i))return di("Optional content group not found: ".concat(i)),!0;if(Oe(Eo,this).get(i).visible)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}if("AllOn"===t.policy){var a,r=Ue(t.ids);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(!Oe(Eo,this).has(s))return di("Optional content group not found: ".concat(s)),!0;if(!Oe(Eo,this).get(s).visible)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}if("AnyOff"===t.policy){var u,o=Ue(t.ids);try{for(o.s();!(u=o.n()).done;){var l=u.value;if(!Oe(Eo,this).has(l))return di("Optional content group not found: ".concat(l)),!0;if(!Oe(Eo,this).get(l).visible)return!0}}catch(t){o.e(t)}finally{o.f()}return!1}if("AllOff"===t.policy){var h,c=Ue(t.ids);try{for(c.s();!(h=c.n()).done;){var d=h.value;if(!Oe(Eo,this).has(d))return di("Optional content group not found: ".concat(d)),!0;if(Oe(Eo,this).get(d).visible)return!1}}catch(t){c.e(t)}finally{c.f()}return!0}return di("Unknown optional content policy ".concat(t.policy,".")),!0}return di("Unknown group type ".concat(t.type,".")),!0}},{key:"setVisibility",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Oe(Eo,this).get(t);n?(n._setVisible(go,!!e,!0),We(ko,this,null)):di("Optional content group not found: ".concat(t))}},{key:"setOCGState",value:function(t){var e,n,i=t.state,a=(t.preserveRB,Ue(i));try{for(a.s();!(n=a.n()).done;){var r=n.value;switch(r){case"ON":case"OFF":case"Toggle":e=r;continue}var s=Oe(Eo,this).get(r);if(s)switch(e){case"ON":s._setVisible(go,!0);break;case"OFF":s._setVisible(go,!1);break;case"Toggle":s._setVisible(go,!s.visible)}}}catch(t){a.e(t)}finally{a.f()}We(ko,this,null)}},{key:"hasInitialVisibility",get:function(){return null===Oe(wo,this)||this.getHash()===Oe(wo,this)}},{key:"getOrder",value:function(){return Oe(Eo,this).size?Oe(Co,this)?Oe(Co,this).slice():xe(Oe(Eo,this).keys()):null}},{key:"getGroups",value:function(){return Oe(Eo,this).size>0?_i(Oe(Eo,this)):null}},{key:"getGroup",value:function(t){return Oe(Eo,this).get(t)||null}},{key:"getHash",value:function(){if(null!==Oe(ko,this))return Oe(ko,this);var t,e=new Ys,n=Ue(Oe(Eo,this));try{for(n.s();!(t=n.n()).done;){var i=He(t.value,2),a=i[0],r=i[1];e.update("".concat(a,":").concat(r.visible))}}catch(t){n.e(t)}finally{n.f()}return We(ko,this,e.hexdigest())}}])}();function xo(t){var e=t.length;if(e<2)return!0;for(var n=t[0],i=1;i<e;i++){var a=t[i],r=void 0;if(Array.isArray(a))r=je(Fo,this,xo).call(this,a);else{if(!Oe(Eo,this).has(a))return di("Optional content group not found: ".concat(a)),!0;r=Oe(Eo,this).get(a).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}var So=function(){return Ke((function t(e,n){var i=this,a=n.disableRange,r=void 0!==a&&a,s=n.disableStream,u=void 0!==s&&s;Qe(this,t),vi(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');var o=e.length,l=e.initialData,h=e.progressiveDone,c=e.contentDispositionFilename;if(this._queuedChunks=[],this._progressiveDone=h,this._contentDispositionFilename=c,(null==l?void 0:l.length)>0){var d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!u,this._isRangeSupported=!r,this._contentLength=o,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((function(t,e){i._onReceiveData({begin:t,chunk:e})})),e.addProgressListener((function(t,e){i._onProgress({loaded:t,total:e})})),e.addProgressiveReadListener((function(t){i._onReceiveData({chunk:t})})),e.addProgressiveDoneListener((function(){i._onProgressiveDone()})),e.transportReady()}),[{key:"_onReceiveData",value:function(t){var e=t.begin,n=t.chunk,i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):vi(this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}},{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function(t){var e,n,i,a;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(a=i.onProgress)||void 0===a||a.call(i,{loaded:t.loaded,total:t.total})}},{key:"_onProgressiveDone",value:function(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}},{key:"getFullReader",value:function(){vi(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new Mo(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new Bo(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=Ue(this._rangeReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}this._pdfDataRangeTransport.abort()}}])}(),Mo=function(){return Ke((function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Qe(this,t),this._stream=e,this._done=i||!1,this._filename=Ma(a)?a:null,this._queuedChunks=n||[],this._loaded=0;var r,s=Ue(this._queuedChunks);try{for(s.s();!(r=s.n()).done;){var u=r.value;this._loaded+=u.byteLength}}catch(t){s.e(t)}finally{s.f()}this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}),[{key:"_enqueue",value:function(t){if(!this._done){if(this._requests.length>0)this._requests.shift().resolve({value:t,done:!1});else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._queuedChunks.length>0)){t.next=3;break}return e=this._queuedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 3:if(!this._done){t.next=5;break}return t.abrupt("return",{value:void 0,done:!0});case 5:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 8:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]);var t}(),Bo=function(){return Ke((function t(e,n,i){Qe(this,t),this._stream=e,this._begin=n,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}),[{key:"_enqueue",value:function(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 9:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]);var t}();function Po(t){var e=t.getResponseHeader,n=t.isHttp,i=t.rangeChunkSize,a=t.disableRange,r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(e("Content-Length"),10);return Number.isInteger(s)?(r.suggestedLength=s,s<=2*i||a||!n||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r):r}function Lo(t){var e=t("Content-Disposition");if(e){var n=function(t){var e=!0,n=r("filename\\*","i").exec(t);if(n){var i=o(n=n[1]);return u(i=h(i=l(i=unescape(i))))}if(n=function(t){for(var e,n=[],i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(e=i.exec(t));){var a=He(e,4),s=a[1],u=a[2],h=a[3];if((s=parseInt(s,10))in n){if(0===s)break}else n[s]=[u,h]}for(var c=[],d=0;d<n.length&&d in n;++d){var f=He(n[d],2),v=f[0],p=f[1];p=o(p),v&&(p=unescape(p),0===d&&(p=l(p))),c.push(p)}return c.join("")}(t),n)return u(h(n));if(n=r("filename","i").exec(t)){var a=o(n=n[1]);return u(a=h(a))}function r(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var i=new TextDecoder(t,{fatal:!0}),a=Fi(n);n=i.decode(a),e=!1}catch(t){}}return n}function u(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function o(t){if(t.startsWith('"')){for(var e=t.slice(1).split('\\"'),n=0;n<e.length;++n){var i=e[n].indexOf('"');-1!==i&&(e[n]=e[n].slice(0,i),e.length=n+1),e[n]=e[n].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){var e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function h(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,n,i){if("q"===n||"Q"===n)return s(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{i=atob(i)}catch(t){}return s(e,i)}))}return""}(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch(t){}if(Ma(n))return n}return null}function To(t,e){return 404===t||0===t&&e.startsWith("file:")?new bi('Missing PDF "'+e+'".'):new ki("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t)}function Io(t){return 200===t||206===t}function Ro(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function No(t){var e=new Headers;for(var n in t){var i=t[n];void 0!==i&&e.append(n,i)}return e}function Oo(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(di("getArrayBuffer - unexpected data format: ".concat(t)),new Uint8Array(t).buffer)}var Wo=function(){return Ke((function t(e){Qe(this,t),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}),[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return vi(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new jo(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new Ho(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=Ue(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),jo=function(){return Ke((function t(e){var n=this;Qe(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var i=e.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._headers=No(this._stream.httpHeaders);var a=i.url;fetch(a,Ro(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!Io(t.status))throw To(t.status,a);n._reader=t.body.getReader(),n._headersCapability.resolve();var e=function(e){return t.headers.get(e)},i=Po({getResponseHeader:e,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),r=i.allowRangeRequests,s=i.suggestedLength;n._isRangeSupported=r,n._contentLength=s||n._contentLength,n._filename=Lo(e),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new wi("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}),[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n,i,a;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._headersCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(n=t.sent,i=n.value,!(a=n.done)){t.next=9;break}return t.abrupt("return",{value:i,done:a});case 9:return this._loaded+=i.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),t.abrupt("return",{value:Oo(i),done:!1});case 12:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}]);var t}(),Ho=function(){return Ke((function t(e,n,i){var a=this;Qe(this,t),this._stream=e,this._reader=null,this._loaded=0;var r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=No(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(n,"-").concat(i-1));var s=r.url;fetch(s,Ro(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!Io(t.status))throw To(t.status,s);a._readCapability.resolve(),a._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}),[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n,i,a;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(n=t.sent,i=n.value,!(a=n.done)){t.next=9;break}return t.abrupt("return",{value:i,done:a});case 9:return this._loaded+=i.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),t.abrupt("return",{value:Oo(i),done:!1});case 12:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}]);var t}();var zo=function(){return Ke((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qe(this,t),this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}),[{key:"requestRange",value:function(t,e,n){var i={begin:t,end:e};for(var a in n)i[a]=n[a];return this.request(i)}},{key:"requestFull",value:function(t){return this.request(t)}},{key:"request",value:function(t){var e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};for(var a in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var r=this.httpHeaders[a];void 0!==r&&e.setRequestHeader(a,r)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}},{key:"onProgress",value:function(t,e){var n,i=this.pendingRequests[t];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,e))}},{key:"onStateChange",value:function(t,e){var n=this.pendingRequests[t];if(n){var i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===i.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===i.status&&this.isHttp){var a;null===(a=n.onError)||void 0===a||a.call(n,i.status)}else{var r=i.status||200;if(200===r&&206===n.expectedStatus||r===n.expectedStatus){var s=function(t){var e=t.response;return"string"!=typeof e?e:Fi(e).buffer}(i);if(206===r){var u=i.getResponseHeader("Content-Range"),o=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);n.onDone({begin:parseInt(o[1],10),chunk:s})}else if(s)n.onDone({begin:0,chunk:s});else{var l;null===(l=n.onError)||void 0===l||l.call(n,i.status)}}else{var h;null===(h=n.onError)||void 0===h||h.call(n,i.status)}}}}},{key:"getRequestXhr",value:function(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function(t){return t in this.pendingRequests}},{key:"abortRequest",value:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}])}(),Vo=function(){return Ke((function t(e){Qe(this,t),this._source=e,this._manager=new zo(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}),[{key:"_onRangeRequestReaderClosed",value:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}},{key:"getFullReader",value:function(){return vi(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Uo(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var n=new Go(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=Ue(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),Uo=function(){return Ke((function t(e,n){Qe(this,t),this._manager=e;var i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}),[{key:"_onHeadersReceived",value:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=function(t){return e.getResponseHeader(t)},i=Po({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),a=i.allowRangeRequests,r=i.suggestedLength;a&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Lo(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk));if(this._done=!0,!(this._cachedChunks.length>0)){var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}}},{key:"_onError",value:function(t){this._storedError=To(t,this._url),this._headersReceivedCapability.reject(this._storedError);var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.reject(this._storedError)}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){t.next=5;break}return e=this._cachedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 5:if(!this._done){t.next=7;break}return t.abrupt("return",{value:void 0,done:!0});case 7:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 10:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._headersReceivedCapability.reject(t);var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]);var t}(),Go=function(){return Ke((function t(e,n,i){Qe(this,t),this._manager=e;var a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(n,i,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}),[{key:"_close",value:function(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e;this._done=!0;var n,i=Ue(this._requests);try{for(i.s();!(n=i.n()).done;){n.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(t){this._storedError=To(t,this._url);var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.reject(this._storedError)}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){t.next=6;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 6:if(!this._done){t.next=8;break}return t.abrupt("return",{value:void 0,done:!0});case 8:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 11:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=Ue(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]);var t}(),qo=/^file:\/\/\/[a-zA-Z]:\//;var Xo=function(){return Ke((function t(e){var n,i,a;Qe(this,t),this.source=e,this.url=(n=e.url,i=hu.get("url"),"file:"===(a=i.parse(n)).protocol||a.host?a:/^[a-z]:[/\\]/i.test(n)?i.parse("file:///".concat(n)):(a.host||(a.protocol="file:"),a)),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}),[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return vi(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new $o(this):new Jo(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=this.isFsUrl?new tl(this,t,e):new Zo(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=Ue(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),Ko=function(){return Ke((function t(e){Qe(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;var n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}),[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(n=this._readableStream.read())){t.next=10;break}return this._readCapability=Promise.withResolvers(),t.abrupt("return",this.read());case 10:return this._loaded+=n.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),i=new Uint8Array(n).buffer,t.abrupt("return",{value:i,done:!1});case 14:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new wi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t}(),Yo=function(){return Ke((function t(e){Qe(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();var n=e.source;this._isStreamingSupported=!n.disableStream}),[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=Ie(Le().mark((function t(){var e,n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(n=this._readableStream.read())){t.next=10;break}return this._readCapability=Promise.withResolvers(),t.abrupt("return",this.read());case 10:return this._loaded+=n.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),i=new Uint8Array(n).buffer,t.abrupt("return",{value:i,done:!1});case 14:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t}();function Qo(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}var Jo=function(){function t(e){var n;Qe(this,t);var i=function(t){if(404===t.statusCode){var i=new bi('Missing PDF "'.concat(n._url,'".'));return n._storedError=i,void n._headersCapability.reject(i)}n._headersCapability.resolve(),n._setReadableStream(t);var a=function(t){return n._readableStream.headers[t.toLowerCase()]},r=Po({getResponseHeader:a,isHttp:e.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=r.allowRangeRequests,u=r.suggestedLength;n._isRangeSupported=s,n._contentLength=u||n._contentLength,n._filename=Lo(a)};if((n=Je(this,t,[e]))._request=null,"http:"===n._url.protocol){var a=hu.get("http");n._request=a.request(Qo(n._url,e.httpHeaders),i)}else{var r=hu.get("https");n._request=r.request(Qo(n._url,e.httpHeaders),i)}return n._request.on("error",(function(t){n._storedError=t,n._headersCapability.reject(t)})),n._request.end(),n}return tn(t,Ko),Ke(t)}(),Zo=function(){function t(e,n,i){var a;for(var r in Qe(this,t),(a=Je(this,t,[e]))._httpHeaders={},e.httpHeaders){var s=e.httpHeaders[r];void 0!==s&&(a._httpHeaders[r]=s)}a._httpHeaders.Range="bytes=".concat(n,"-").concat(i-1);var u=function(t){if(404!==t.statusCode)a._setReadableStream(t);else{var e=new bi('Missing PDF "'.concat(a._url,'".'));a._storedError=e}};if(a._request=null,"http:"===a._url.protocol){var o=hu.get("http");a._request=o.request(Qo(a._url,a._httpHeaders),u)}else{var l=hu.get("https");a._request=l.request(Qo(a._url,a._httpHeaders),u)}return a._request.on("error",(function(t){a._storedError=t})),a._request.end(),a}return tn(t,Yo),Ke(t)}(),$o=function(){function t(e){var n;Qe(this,t),n=Je(this,t,[e]);var i=decodeURIComponent(n._url.path);qo.test(n._url.href)&&(i=i.replace(/^\//,""));var a=hu.get("fs");return a.promises.lstat(i).then((function(t){n._contentLength=t.size,n._setReadableStream(a.createReadStream(i)),n._headersCapability.resolve()}),(function(t){"ENOENT"===t.code&&(t=new bi('Missing PDF "'.concat(i,'".'))),n._storedError=t,n._headersCapability.reject(t)})),n}return tn(t,Ko),Ke(t)}(),tl=function(){function t(e,n,i){var a;Qe(this,t),a=Je(this,t,[e]);var r=decodeURIComponent(a._url.path);qo.test(a._url.href)&&(r=r.replace(/^\//,""));var s=hu.get("fs");return a._setReadableStream(s.createReadStream(r,{start:n,end:i-1})),a}return tn(t,Yo),Ke(t)}(),el=30,nl=(at=new WeakMap,rt=new WeakMap,st=new WeakMap,ut=new WeakMap,ot=new WeakMap,lt=new WeakMap,ht=new WeakMap,ct=new WeakMap,dt=new WeakMap,ft=new WeakMap,vt=new WeakMap,pt=new WeakMap,gt=new WeakMap,Dt=new WeakMap,mt=new WeakMap,yt=new WeakMap,At=new WeakMap,bt=new WeakMap,kt=new WeakSet,it=function(){function t(e){var n,i=this,a=e.textContentSource,r=e.container,s=e.viewport;if(Qe(this,t),Me(this,kt),Re(this,at,Promise.withResolvers()),Re(this,rt,null),Re(this,st,!1),Re(this,ut,!(null===(n=globalThis.FontInspector)||void 0===n||!n.enabled)),Re(this,ot,null),Re(this,lt,null),Re(this,ht,0),Re(this,ct,0),Re(this,dt,null),Re(this,ft,null),Re(this,vt,0),Re(this,pt,0),Re(this,gt,Object.create(null)),Re(this,Dt,[]),Re(this,mt,null),Re(this,yt,[]),Re(this,At,new WeakMap),Re(this,bt,null),a instanceof ReadableStream)We(mt,this,a);else{if("object"!==nn(a))throw new Error('No "textContentSource" parameter specified.');We(mt,this,new ReadableStream({start:function(t){t.enqueue(a),t.close()}}))}We(rt,this,We(ft,this,r)),We(pt,this,s.scale*(globalThis.devicePixelRatio||1)),We(vt,this,s.rotation),We(lt,this,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});var u=s.rawDims,o=u.pageWidth,l=u.pageHeight,h=u.pageX,c=u.pageY;We(bt,this,[1,0,0,-1,-h,c+l]),We(ct,this,o),We(ht,this,l),je(it,t,ul).call(t),za(r,s),Oe(at,this).promise.catch((function(){})).then((function(){je(it,t,Ft)._.delete(i),We(lt,i,null),We(gt,i,null)}))}return Ke(t,[{key:"render",value:function(){var e=this,n=function(){Oe(dt,e).read().then((function(t){var i,a=t.value;t.done?Oe(at,e).resolve():(null!==(i=Oe(ot,e))&&void 0!==i||We(ot,e,a.lang),Object.assign(Oe(gt,e),a.styles),je(kt,e,il).call(e,a.items),n())}),Oe(at,e).reject)};return We(dt,this,Oe(mt,this).getReader()),je(it,t,Ft)._.add(this),n(),Oe(at,this).promise}},{key:"update",value:function(e){var n=e.viewport,i=e.onBefore,a=void 0===i?null:i,r=n.scale*(globalThis.devicePixelRatio||1),s=n.rotation;if(s!==Oe(vt,this)&&(null==a||a(),We(vt,this,s),za(Oe(ft,this),{rotation:s})),r!==Oe(pt,this)){null==a||a(),We(pt,this,r);var u,o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:je(it,t,sl).call(t,Oe(ot,this))},l=Ue(Oe(yt,this));try{for(l.s();!(u=l.n()).done;){var h=u.value;o.properties=Oe(At,this).get(h),o.div=h,je(kt,this,rl).call(this,o)}}catch(t){l.e(t)}finally{l.f()}}}},{key:"cancel",value:function(){var t,e=new wi("TextLayer task cancelled.");null===(t=Oe(dt,this))||void 0===t||t.cancel(e).catch((function(){})),We(dt,this,null),Oe(at,this).reject(e)}},{key:"textDivs",get:function(){return Oe(yt,this)}},{key:"textContentItemsStr",get:function(){return Oe(Dt,this)}}],[{key:"cleanup",value:function(){if(!(je(it,this,Ft)._.size>0)){je(it,this,Et)._.clear();var t,e=Ue(je(it,this,wt)._.values());try{for(e.s();!(t=e.n()).done;){t.value.canvas.remove()}}catch(t){e.e(t)}finally{e.f()}je(it,this,wt)._.clear()}}}])}(),Et={_:new Map},wt={_:new Map},Ct={_:null},Ft={_:new Set},it);function il(t){var e,n;if(!Oe(st,this)){null!==(n=(e=Oe(lt,this)).ctx)&&void 0!==n||(e.ctx=je(it,it,sl).call(it,Oe(ot,this)));var i,a=Oe(yt,this),r=Oe(Dt,this),s=Ue(t);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(a.length>1e5)return di("Ignoring additional textDivs for performance reasons."),void We(st,this,!0);if(void 0!==u.str)r.push(u.str),je(kt,this,al).call(this,u);else if("beginMarkedContentProps"===u.type||"beginMarkedContent"===u.type){var o=Oe(rt,this);We(rt,this,document.createElement("span")),Oe(rt,this).classList.add("markedContent"),null!==u.id&&Oe(rt,this).setAttribute("id","".concat(u.id)),o.append(Oe(rt,this))}else"endMarkedContent"===u.type&&We(rt,this,Oe(rt,this).parentNode)}}catch(t){s.e(t)}finally{s.f()}}}function al(t){var e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};Oe(yt,this).push(e);var i=Mi.transform(Oe(bt,this),t.transform),a=Math.atan2(i[1],i[0]),r=Oe(gt,this)[t.fontName];r.vertical&&(a+=Math.PI/2);var s,u,o=Oe(ut,this)&&r.fontSubstitution||r.fontFamily,l=Math.hypot(i[2],i[3]),h=l*je(it,it,ol).call(it,o,Oe(ot,this));0===a?(s=i[4],u=i[5]-h):(s=i[4]+h*Math.sin(a),u=i[5]-h*Math.cos(a));var c="calc(var(--scale-factor)*",d=e.style;Oe(rt,this)===Oe(ft,this)?(d.left="".concat((100*s/Oe(ct,this)).toFixed(2),"%"),d.top="".concat((100*u/Oe(ht,this)).toFixed(2),"%")):(d.left="".concat(c).concat(s.toFixed(2),"px)"),d.top="".concat(c).concat(u.toFixed(2),"px)")),d.fontSize="".concat(c).concat((je(it,it,Ct)._*l).toFixed(2),"px)"),d.fontFamily=o,n.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,Oe(ut,this)&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),0!==a&&(n.angle=a*(180/Math.PI));var f=!1;if(t.str.length>1)f=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){var v=Math.abs(t.transform[0]),p=Math.abs(t.transform[3]);v!==p&&Math.max(v,p)/Math.min(v,p)>1.5&&(f=!0)}if(f&&(n.canvasWidth=r.vertical?t.height:t.width),Oe(At,this).set(e,n),Oe(lt,this).div=e,Oe(lt,this).properties=n,je(kt,this,rl).call(this,Oe(lt,this)),n.hasText&&Oe(rt,this).append(e),n.hasEOL){var g=document.createElement("br");g.setAttribute("role","presentation"),Oe(rt,this).append(g)}}function rl(t){var e=t.div,n=t.properties,i=t.ctx,a=t.prevFontSize,r=t.prevFontFamily,s=e.style,u="";if(je(it,it,Ct)._>1&&(u="scale(".concat(1/je(it,it,Ct)._,")")),0!==n.canvasWidth&&n.hasText){var o=s.fontFamily,l=n.canvasWidth,h=n.fontSize;a===h&&r===o||(i.font="".concat(h*Oe(pt,this),"px ").concat(o),t.prevFontSize=h,t.prevFontFamily=o);var c=i.measureText(e.textContent).width;c>0&&(u="scaleX(".concat(l*Oe(pt,this)/c,") ").concat(u))}0!==n.angle&&(u="rotate(".concat(n.angle,"deg) ").concat(u)),u.length>0&&(s.transform=u)}function sl(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=je(it,this,wt)._.get(t||(t=""));if(!e){var n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),je(it,this,wt)._.set(t,e)}return e}function ul(){if(null===je(it,this,Ct)._){var t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),Ct._=je(it,this,t.getBoundingClientRect().height),t.remove()}}function ol(t,e){var n=je(it,this,Et)._.get(t);if(n)return n;var i=je(it,this,sl).call(this,e),a=i.font;i.canvas.width=i.canvas.height=el,i.font="".concat(el,"px ").concat(t);var r=i.measureText(""),s=r.fontBoundingBoxAscent,u=Math.abs(r.fontBoundingBoxDescent);if(s){var o=s/(s+u);return je(it,this,Et)._.set(t,o),i.canvas.width=i.canvas.height=0,i.font=a,o}i.strokeStyle="red",i.clearRect(0,0,el,el),i.strokeText("g",0,0);var l=i.getImageData(0,0,el,el).data;u=0;for(var h=l.length-1-3;h>=0;h-=4)if(l[h]>0){u=Math.ceil(h/4/el);break}i.clearRect(0,0,el,el),i.strokeText("A",0,el),s=0;for(var c=0,d=(l=i.getImageData(0,0,el,el).data).length;c<d;c+=4)if(l[c]>0){s=el-Math.floor(c/4/el);break}i.canvas.width=i.canvas.height=0,i.font=a;var f=s?s/(s+u):.8;return je(it,this,Et)._.set(t,f),f}var ll=function(){function t(){Qe(this,t)}return Ke(t,null,[{key:"textContent",value:function(e){var n=[],i={items:n,styles:Object.create(null)};return function e(i){var a;if(i){var r=null,s=i.name;if("#text"===s)r=i.value;else{if(!t.shouldBuildText(s))return;null!=i&&null!==(a=i.attributes)&&void 0!==a&&a.textContent?r=i.attributes.textContent:i.value&&(r=i.value)}if(null!==r&&n.push({str:r}),i.children){var u,o=Ue(i.children);try{for(o.s();!(u=o.n()).done;){e(u.value)}}catch(t){o.e(t)}finally{o.f()}}}}(e),i}},{key:"shouldBuildText",value:function(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}])}(),hl=65536,cl=dn?fu:ba,dl=dn?vu:wa,fl=dn?du:oa,vl=dn?pu:Ca;function pl(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});var i=new Dl,a=i.docId,r=n.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch(e){if(dn&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,s=n.data?function(t){if(dn&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return Fi(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===nn(t)&&!isNaN(null==t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,u=n.httpHeaders||null,o=!0===n.withCredentials,l=null!==(t=n.password)&&void 0!==t?t:null,h=n.range instanceof yl?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:hl,d=n.worker instanceof Bl?n.worker:null,f=n.verbosity,v="string"!=typeof n.docBaseUrl||Sa(n.docBaseUrl)?null:n.docBaseUrl,p="string"==typeof n.cMapUrl?n.cMapUrl:null,g=!1!==n.cMapPacked,D=n.CMapReaderFactory||dl,m="string"==typeof n.standardFontDataUrl?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||vl,A=!0!==n.stopAtErrors,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=!1!==n.isEvalSupported,E="boolean"==typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!dn,w=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,C="boolean"==typeof n.disableFontFace?n.disableFontFace:dn,F=!0===n.fontExtraProperties,_=!0===n.enableXfa,x=n.ownerDocument||globalThis.document,S=!0===n.disableRange,M=!0===n.disableStream,B=!0===n.disableAutoFetch,P=!0===n.pdfBug,L=!0===n.enableHWA,T=h?h.length:null!==(e=n.length)&&void 0!==e?e:NaN,I="boolean"==typeof n.useSystemFonts?n.useSystemFonts:!dn&&!C,R="boolean"==typeof n.useWorkerFetch?n.useWorkerFetch:D===wa&&y===Ca&&p&&m&&Ia(p,document.baseURI)&&Ia(m,document.baseURI),N=n.canvasFactory||new cl({ownerDocument:x,enableHWA:L}),O=n.filterFactory||new fl({docId:a,ownerDocument:x});li(f);var W={canvasFactory:N,filterFactory:O};if(R||(W.cMapReaderFactory=new D({baseUrl:p,isCompressed:g}),W.standardFontDataFactory=new y({baseUrl:m})),!d){var j={verbosity:f,port:Ku.workerPort};d=j.port?Bl.fromPort(j):new Bl(j),i._worker=d}var H={docId:a,apiVersion:"4.5.136",data:s,password:l,disableAutoFetch:B,rangeChunkSize:c,length:T,docBaseUrl:v,enableXfa:_,evaluatorOptions:{maxImageSize:b,disableFontFace:C,ignoreErrors:A,isEvalSupported:k,isOffscreenCanvasSupported:E,canvasMaxAreaInBytes:w,fontExtraProperties:F,useSystemFonts:I,cMapUrl:R?p:null,standardFontDataUrl:R?m:null}},z={disableFontFace:C,fontExtraProperties:F,ownerDocument:x,pdfBug:P,styleElement:null,loadingParams:{disableAutoFetch:B,enableXfa:_}};return d.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");var t,e=d.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);if(h)t=new So(h,{disableRange:S,disableStream:M});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");t=function(t){if(dn){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&Ia(t.url)?new Wo(t):new Xo(t)}return Ia(t.url)?new Wo(t):new Vo(t)}({url:r,length:T,httpHeaders:u,withCredentials:o,rangeChunkSize:c,disableRange:S,disableStream:M})}return e.then((function(e){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");var n=new uo(a,e,d.port),r=new jl(n,i,t,z,W);i._transport=r,n.send("Ready",null)}))})).catch(i._capability.reject),i}function gl(t){return"object"===nn(t)&&Number.isInteger(null==t?void 0:t.num)&&t.num>=0&&Number.isInteger(null==t?void 0:t.gen)&&t.gen>=0}var Dl=function(){return Ke((function t(){var e,n;Qe(this,t),this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((ml._=(e=ml._,n=e++,e),n)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}),[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(t=Ie(Le().mark((function t(){var e,n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyed=!0,t.prev=1,null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),t.next=5,null===(n=this._transport)||void 0===n?void 0:n.destroy();case 5:t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(1),null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,t.t0;case 11:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 13:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(){return t.apply(this,arguments)})}]);var t}(),ml={_:0},yl=function(){return Ke((function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Qe(this,t),this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}),[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function(t,e){var n,i=Ue(this._rangeListeners);try{for(i.s();!(n=i.n()).done;){(0,n.value)(t,e)}}catch(t){i.e(t)}finally{i.f()}}},{key:"onDataProgress",value:function(t,e){var n=this;this._readyCapability.promise.then((function(){var i,a=Ue(n._progressListeners);try{for(a.s();!(i=a.n()).done;){(0,i.value)(t,e)}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"onDataProgressiveRead",value:function(t){var e=this;this._readyCapability.promise.then((function(){var n,i=Ue(e._progressiveReadListeners);try{for(i.s();!(n=i.n()).done;){(0,n.value)(t)}}catch(t){i.e(t)}finally{i.f()}}))}},{key:"onDataProgressiveDone",value:function(){var t=this;this._readyCapability.promise.then((function(){var e,n=Ue(t._progressiveDoneListeners);try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(t){n.e(t)}finally{n.f()}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(t,e){fi("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}])}(),Al=function(){return Ke((function t(e,n){Qe(this,t),this._pdfInfo=e,this._transport=n}),[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function(){return gi(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?"display":t,n=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getOptionalContentConfig(n)}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"saveDocument",value:function(){return this._transport.saveDocument()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"cachedPageNumber",value:function(t){return this._transport.cachedPageNumber(t)}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}])}(),bl=new WeakMap,kl=new WeakMap,El=new WeakSet,wl=function(){return Ke((function t(e,n,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Qe(this,t),Me(this,El),Re(this,bl,null),Re(this,kl,!1),this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=a?new Ta:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Gl,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}),[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scale,n=t.rotation,i=void 0===n?this.rotate:n,a=t.offsetX,r=void 0===a?0:a,s=t.offsetY,u=void 0===s?0:s,o=t.dontFlip,l=void 0!==o&&o;return new _a({viewBox:this.view,scale:e,rotation:i,offsetX:r,offsetY:u,dontFlip:l})}},{key:"getAnnotations",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?"display":t,n=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getAnnotations(this._pageIndex,n)}},{key:"getJSActions",value:function(){return this._transport.getPageJSActions(this._pageIndex)}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"isPureXfa",get:function(){return gi(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"getXfa",value:(t=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null);case 1:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(t){var e,n,i=this,a=t.canvasContext,r=t.viewport,s=t.intent,u=void 0===s?"display":s,o=t.annotationMode,l=void 0===o?wn.ENABLE:o,h=t.transform,c=void 0===h?null:h,d=t.background,f=void 0===d?null:d,v=t.optionalContentConfigPromise,p=void 0===v?null:v,g=t.annotationCanvasMap,D=void 0===g?null:g,m=t.pageColors,y=void 0===m?null:m,A=t.printAnnotationStorage,b=void 0===A?null:A,k=t.isEditing,E=void 0!==k&&k;null===(e=this._stats)||void 0===e||e.time("Overall");var w=this._transport.getRenderingIntent(u,l,b,E),C=w.renderingIntent,F=w.cacheKey;We(kl,this,!1),je(El,this,Fl).call(this),p||(p=this._transport.getOptionalContentConfig(C));var _=this._intentStates.get(F);_||(_=Object.create(null),this._intentStates.set(F,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);var x,S=!!(C&mn);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(x=this._stats)||void 0===x||x.time("Page Request"),this._pumpOperatorList(w));var M=function(t){var e;(_.renderTasks.delete(B),(i._maybeCleanupAfterRender||S)&&We(kl,i,!0),je(El,i,Cl).call(i,!S),t?(B.capability.reject(t),i._abortOperatorList({intentState:_,reason:t instanceof Error?t:new Error(t)})):B.capability.resolve(),i._stats)&&(i._stats.timeEnd("Rendering"),i._stats.timeEnd("Overall"),null!==(e=globalThis.Stats)&&void 0!==e&&e.enabled&&globalThis.Stats.add(i.pageNumber,i._stats))},B=new Ql({callback:M,params:{canvasContext:a,viewport:r,transform:c,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:D,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:y});((n=_).renderTasks||(n.renderTasks=new Set)).add(B);var P=B.task;return Promise.all([_.displayReadyCapability.promise,p]).then((function(t){var e,n=He(t,2),a=n[0],r=n[1];if(i.destroyed)M();else{if(null===(e=i._stats)||void 0===e||e.time("Rendering"),!(r.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:a,optionalContentConfig:r}),B.operatorListChanged()}})).catch(M),P}},{key:"getOperatorList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.intent,n=void 0===e?"display":e,i=t.annotationMode,a=void 0===i?wn.ENABLE:i,r=t.printAnnotationStorage,s=void 0===r?null:r,u=t.isEditing,o=void 0!==u&&u;var l,h,c,d=this._transport.getRenderingIntent(n,a,s,o,!0),f=this._intentStates.get(d.cacheKey);(f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f)),f.opListReadCapability)||((l=Object.create(null)).operatorListChanged=function(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(l))},f.opListReadCapability=Promise.withResolvers(),((h=f).renderTasks||(h.renderTasks=new Set)).add(l),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(c=this._stats)||void 0===c||c.time("Page Request"),this._pumpOperatorList(d));return f.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.includeMarkedContent,n=void 0!==e&&e,i=t.disableNormalization,a=void 0!==i&&i;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===n,disableNormalization:!0===a},{highWaterMark:100,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(t){return ll.textContent(t)}));var e=this.streamTextContent(t);return new Promise((function(t,n){var i=e.getReader(),a={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then((function(n){var i,r,s=n.value;n.done?t(a):(null!==(i=a.lang)&&void 0!==i||(a.lang=s.lang),Object.assign(a.styles,s.styles),(r=a.items).push.apply(r,xe(s.items)),e())}),n)}()}))}},{key:"getStructTree",value:function(){return this._transport.getStructTree(this._pageIndex)}},{key:"_destroy",value:function(){this.destroyed=!0;var t,e=[],n=Ue(this._intentStates.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability){var a,r=Ue(i.renderTasks);try{for(r.s();!(a=r.n()).done;){var s=a.value;e.push(s.completed),s.cancel()}}catch(t){r.e(t)}finally{r.f()}}}}catch(t){n.e(t)}finally{n.f()}return this.objs.clear(),We(kl,this,!1),je(El,this,Fl).call(this),Promise.all(e)}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];We(kl,this,!0);var e=je(El,this,Cl).call(this,!1);return t&&e&&this._stats&&(this._stats=new Ta),e}},{key:"_startRenderPage",value:function(t,e){var n,i,a=this._intentStates.get(e);a&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=a.displayReadyCapability)||void 0===i||i.resolve(t))}},{key:"_renderPageChunk",value:function(t,e){for(var n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;var a,r=Ue(e.renderTasks);try{for(r.s();!(a=r.n()).done;){a.value.operatorListChanged()}}catch(t){r.e(t)}finally{r.f()}t.lastChunk&&je(El,this,Cl).call(this,!0)}},{key:"_pumpOperatorList",value:function(t){var e=this,n=t.renderingIntent,i=t.cacheKey,a=t.annotationStorageSerializable,r=t.modifiedIds,s=a.map,u=a.transfer,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:i,annotationStorage:s,modifiedIds:r},u).getReader(),l=this._intentStates.get(i);l.streamReader=o;var h=function(){o.read().then((function(t){var n=t.value;t.done?l.streamReader=null:e._transport.destroyed||(e._renderPageChunk(n,l),h())}),(function(t){if(l.streamReader=null,!e._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;var n,i=Ue(l.renderTasks);try{for(i.s();!(n=i.n()).done;){n.value.operatorListChanged()}}catch(t){i.e(t)}finally{i.f()}je(El,e,Cl).call(e,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(t);else{if(!l.opListReadCapability)throw t;l.opListReadCapability.reject(t)}}}))};h()}},{key:"_abortOperatorList",value:function(t){var e=this,n=t.intentState,i=t.reason,a=t.force,r=void 0!==a&&a;if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!r){if(n.renderTasks.size>0)return;if(i instanceof xa){var s=100;return i.extraDelay>0&&i.extraDelay<1e3&&(s+=i.extraDelay),void(n.streamReaderCancelTimeout=setTimeout((function(){n.streamReaderCancelTimeout=null,e._abortOperatorList({intentState:n,reason:i,force:!0})}),s))}}if(n.streamReader.cancel(new wi(i.message)).catch((function(){})),n.streamReader=null,!this._transport.destroyed){var u,o=Ue(this._intentStates);try{for(o.s();!(u=o.n()).done;){var l=He(u.value,2),h=l[0];if(l[1]===n){this._intentStates.delete(h);break}}}catch(t){o.e(t)}finally{o.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]);var t}();function Cl(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(je(El,this,Fl).call(this),!Oe(kl,this)||this.destroyed)return!1;if(e)return We(bl,this,setTimeout((function(){We(bl,t,null),je(El,t,Cl).call(t,!1)}),5e3)),!1;var n,i=Ue(this._intentStates.values());try{for(i.s();!(n=i.n()).done;){var a=n.value,r=a.renderTasks,s=a.operatorList;if(r.size>0||!s.lastChunk)return!1}}catch(t){i.e(t)}finally{i.f()}return this._intentStates.clear(),this.objs.clear(),We(kl,this,!1),!0}function Fl(){Oe(bl,this)&&(clearTimeout(Oe(bl,this)),We(bl,this,null))}var _l=new WeakMap,xl=new WeakMap,Sl=function(){return Ke((function t(){Qe(this,t),Re(this,_l,new Set),Re(this,xl,Promise.resolve())}),[{key:"postMessage",value:function(t,e){var n=this,i={data:structuredClone(t,e?{transfer:e}:null)};Oe(xl,this).then((function(){var t,e=Ue(Oe(_l,n));try{for(e.s();!(t=e.n()).done;){t.value.call(n,i)}}catch(t){e.e(t)}finally{e.f()}}))}},{key:"addEventListener",value:function(t,e){Oe(_l,this).add(e)}},{key:"removeEventListener",value:function(t,e){Oe(_l,this).delete(e)}},{key:"terminate",value:function(){Oe(_l,this).clear()}}])}(),Ml={isWorkerDisabled:!1,fakeWorkerId:0};dn&&(Ml.isWorkerDisabled=!0,Ku.workerSrc||(Ku.workerSrc="./pdf.worker.mjs")),Ml.isSameOrigin=function(t,e){var n;try{if(!(n=new URL(t)).origin||"null"===n.origin)return!1}catch(t){return!1}var i=new URL(e,n);return n.origin===i.origin},Ml.createCDNWrapper=function(t){var e='await import("'.concat(t,'");');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Bl=(xt=new WeakSet,_t=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,i=void 0===n?null:n,a=e.port,r=void 0===a?null:a,s=e.verbosity,u=void 0===s?hi():s;if(Qe(this,t),Me(this,xt),this.name=i,this.destroyed=!1,this.verbosity=u,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,r){var o;if(null!==(o=je(_t,t,St)._)&&void 0!==o&&o.has(r))throw new Error("Cannot use more than one PDFWorker per port.");return(je(_t,t,St)._||(St._=je(_t,t,new WeakMap))).set(r,this),void this._initializeFromPort(r)}this._initialize()}return Ke(t,[{key:"promise",get:function(){return dn?Promise.all([hu.promise,this._readyCapability.promise]):this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(t){this._port=t,this._messageHandler=new uo("main","worker",t),this._messageHandler.on("ready",(function(){})),je(xt,this,Pl).call(this)}},{key:"_initialize",value:function(){var e=this;if(Ml.isWorkerDisabled||Be(_t,t,Ll))this._setupFakeWorker();else{var n=t.workerSrc;try{Ml.isSameOrigin(window.location.href,n)||(n=Ml.createCDNWrapper(new URL(n,window.location).href));var i=new Worker(n,{type:"module"}),a=new uo("main","worker",i),r=function(){s.abort(),a.destroy(),i.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},s=new AbortController;i.addEventListener("error",(function(){e._webWorker||r()}),{signal:s.signal}),a.on("test",(function(t){s.abort(),!e.destroyed&&t?(e._messageHandler=a,e._port=i,e._webWorker=i,je(xt,e,Pl).call(e)):r()})),a.on("ready",(function(t){if(s.abort(),e.destroyed)r();else try{u()}catch(t){e._setupFakeWorker()}}));var u=function(){var t=new Uint8Array;a.send("test",t,[t.buffer])};return void u()}catch(t){ci("The worker has been disabled.")}this._setupFakeWorker()}}},{key:"_setupFakeWorker",value:function(){var e=this;Ml.isWorkerDisabled||(di("Setting up fake worker."),Ml.isWorkerDisabled=!0),t._setupFakeWorkerGlobal.then((function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var n=new Sl;e._port=n;var i="fake".concat(Ml.fakeWorkerId++),a=new uo(i+"_worker",i,n);t.setup(a,n),e._messageHandler=new uo(i,i+"_worker",n),je(xt,e,Pl).call(e)}})).catch((function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}},{key:"destroy",value:function(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(e=je(_t,t,St)._)||void 0===e||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(e){var n;if(null==e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");var i=null===(n=je(_t,this,St)._)||void 0===n?void 0:n.get(e.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new t(e)}},{key:"workerSrc",get:function(){if(Ku.workerSrc)return Ku.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_setupFakeWorkerGlobal",get:function(){var t=this,e=function(){var e=Ie(Le().mark((function e(){var n;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Be(_t,t,Ll)){e.next=2;break}return e.abrupt("return",Be(_t,t,Ll));case 2:return e.next=4,import(t.workerSrc);case 4:return n=e.sent,e.abrupt("return",n.WorkerMessageHandler);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return gi(this,"_setupFakeWorkerGlobal",e())}}])}(),St={_:void 0},_t);function Pl(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}function Ll(t){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(t){return null}}var Tl=new WeakMap,Il=new WeakMap,Rl=new WeakMap,Nl=new WeakMap,Ol=new WeakMap,Wl=new WeakSet,jl=function(){return Ke((function t(e,n,i,a,r){Qe(this,t),Me(this,Wl),Re(this,Tl,new Map),Re(this,Il,new Map),Re(this,Rl,new Map),Re(this,Nl,new Map),Re(this,Ol,null),this.messageHandler=e,this.loadingTask=n,this.commonObjs=new Gl,this.fontLoader=new su({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}),[{key:"annotationStorage",get:function(){return gi(this,"annotationStorage",new eu)}},{key:"getRenderingIntent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=Dn,s=Qs;switch(t){case"any":r=gn;break;case"display":break;case"print":r=mn;break;default:di("getRenderingIntent - invalid intent: ".concat(t))}var u=r&mn&&n instanceof au?n:this.annotationStorage;switch(e){case wn.DISABLE:r+=bn;break;case wn.ENABLE:break;case wn.ENABLE_FORMS:r+=yn;break;case wn.ENABLE_STORAGE:r+=An,s=u.serializable;break;default:di("getRenderingIntent - invalid annotationMode: ".concat(e))}i&&(r+=kn),a&&(r+=En);var o=u.modifiedIds,l=o.ids,h=o.hash;return{renderingIntent:r,cacheKey:[r,s.hash,h].join("_"),annotationStorageSerializable:s,modifiedIds:l}}},{key:"destroy",value:function(){var t,e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=Oe(Ol,this))||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));var n,i=[],a=Ue(Oe(Il,this).values());try{for(a.s();!(n=a.n()).done;){var r=n.value;i.push(r._destroy())}}catch(t){a.e(t)}finally{a.f()}Oe(Il,this).clear(),Oe(Rl,this).clear(),Oe(Nl,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var s=this.messageHandler.sendWithPromise("Terminate",null);return i.push(s),Promise.all(i).then((function(){var t;e.commonObjs.clear(),e.fontLoader.clear(),Oe(Tl,e).clear(),e.filterFactory.destroy(),nl.cleanup(),null===(t=e._networkStream)||void 0===t||t.cancelAllRequests(new wi("Worker was terminated.")),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this,e=this.messageHandler,n=this.loadingTask;e.on("GetReader",(function(e,n){vi(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(e){t._lastProgress={loaded:e.loaded,total:e.total}},n.onPull=function(){t._fullReader.read().then((function(t){var e=t.value;t.done?n.close():(vi(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))})).catch((function(t){n.error(t)}))},n.onCancel=function(e){t._fullReader.cancel(e),n.ready.catch((function(e){if(!t.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(function(e){var i=Promise.withResolvers(),a=t._fullReader;return a.headersReady.then((function(){if(!a.isStreamingSupported||!a.isRangeSupported){var e;if(t._lastProgress)null===(e=n.onProgress)||void 0===e||e.call(n,t._lastProgress);a.onProgress=function(t){var e;null===(e=n.onProgress)||void 0===e||e.call(n,{loaded:t.loaded,total:t.total})}}i.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})}),i.reject),i.promise})),e.on("GetRangeReader",(function(e,n){vi(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var i=t._networkStream.getRangeReader(e.begin,e.end);i?(n.onPull=function(){i.read().then((function(t){var e=t.value;t.done?n.close():(vi(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))})).catch((function(t){n.error(t)}))},n.onCancel=function(e){i.cancel(e),n.ready.catch((function(e){if(!t.destroyed)throw e}))}):n.close()})),e.on("GetDoc",(function(e){var i=e.pdfInfo;t._numPages=i.numPages,t._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new Al(i,t))})),e.on("DocException",(function(t){var e;switch(t.name){case"PasswordException":e=new mi(t.message,t.code);break;case"InvalidPDFException":e=new Ai(t.message);break;case"MissingPDFException":e=new bi(t.message);break;case"UnexpectedResponseException":e=new ki(t.message,t.status);break;case"UnknownErrorException":e=new yi(t.message,t.details);break;default:fi("DocException - expected a valid Error.")}n._capability.reject(e)})),e.on("PasswordRequest",(function(e){if(We(Ol,t,Promise.withResolvers()),n.onPassword){try{n.onPassword((function(e){e instanceof Error?Oe(Ol,t).reject(e):Oe(Ol,t).resolve({password:e})}),e.code)}catch(e){Oe(Ol,t).reject(e)}}else Oe(Ol,t).reject(new mi(e.message,e.code));return Oe(Ol,t).promise})),e.on("DataLoaded",(function(e){var i;null===(i=n.onProgress)||void 0===i||i.call(n,{loaded:e.length,total:e.length}),t.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(function(e){t.destroyed||Oe(Il,t).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(function(n){var i,a=He(n,3),r=a[0],s=a[1],u=a[2];if(t.destroyed)return null;if(t.commonObjs.has(r))return null;switch(s){case"Font":var o=t._params,l=o.disableFontFace,h=o.fontExtraProperties,c=o.pdfBug;if("error"in u){var d=u.error;di("Error during font loading: ".concat(d)),t.commonObjs.resolve(r,d);break}var f=c&&null!==(i=globalThis.FontInspector)&&void 0!==i&&i.enabled?function(t,e){return globalThis.FontInspector.fontAdded(t,e)}:null,v=new uu(u,{disableFontFace:l,inspectFont:f});t.fontLoader.bind(v).catch((function(){return e.sendWithPromise("FontFallback",{id:r})})).finally((function(){!h&&v.data&&(v.data=null),t.commonObjs.resolve(r,v)}));break;case"CopyLocalImage":var p=u.imageRef;vi(p,"The imageRef must be defined.");var g,D=Ue(Oe(Il,t).values());try{for(D.s();!(g=D.n()).done;){var m,y=Ue(g.value.objs);try{for(y.s();!(m=y.n()).done;){var A=He(m.value,2)[1];if((null==A?void 0:A.ref)===p)return A.dataLen?(t.commonObjs.resolve(r,structuredClone(A)),A.dataLen):null}}catch(t){y.e(t)}finally{y.f()}}}catch(t){D.e(t)}finally{D.f()}break;case"FontPath":case"Image":case"Pattern":t.commonObjs.resolve(r,u);break;default:throw new Error("Got unknown common object type ".concat(s))}return null})),e.on("obj",(function(e){var n=He(e,4),i=n[0],a=n[1],r=n[2],s=n[3];if(!t.destroyed){var u,o=Oe(Il,t).get(a);if(!o.objs.has(i))if(0!==o._intentStates.size)switch(r){case"Image":o.objs.resolve(i,s),(null==s?void 0:s.dataLen)>1e7&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,s);break;default:throw new Error("Got unknown object type ".concat(r))}else null==s||null===(u=s.bitmap)||void 0===u||u.close()}})),e.on("DocProgress",(function(e){var i;t.destroyed||null===(i=n.onProgress)||void 0===i||i.call(n,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.cMapReaderFactory?t.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))})),e.on("FetchStandardFontData",(function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.standardFontDataFactory?t.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"saveDocument",value:function(){var t,e,n=this;this.annotationStorage.size<=0&&di("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");var i=this.annotationStorage.serializable,a=i.map,r=i.transfer;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null},r).finally((function(){n.annotationStorage.resetModified()}))}},{key:"getPage",value:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var n=t-1,i=Oe(Rl,this).get(n);if(i)return i;var a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then((function(i){if(e.destroyed)throw new Error("Transport destroyed");i.refStr&&Oe(Nl,e).set(i.refStr,t);var a=new wl(n,i,e,e._params.pdfBug);return Oe(Il,e).set(n,a),a}));return Oe(Rl,this).set(n,a),a}},{key:"getPageIndex",value:function(t){return gl(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}},{key:"getAnnotations",value:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}},{key:"getFieldObjects",value:function(){return je(Wl,this,Hl).call(this,"GetFieldObjects")}},{key:"hasJSActions",value:function(){return je(Wl,this,Hl).call(this,"HasJSActions")}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getDocJSActions",value:function(){return je(Wl,this,Hl).call(this,"GetDocJSActions")}},{key:"getPageJSActions",value:function(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(t){return je(Wl,this,Hl).call(this,"GetOptionalContentConfig").then((function(e){return new _o(e,t)}))}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this,e="GetMetadata",n=Oe(Tl,this).get(e);if(n)return n;var i=this.messageHandler.sendWithPromise(e,null).then((function(e){var n,i,a,r;return{info:e[0],metadata:e[1]?new po(e[1]):null,contentDispositionFilename:null!==(n=null===(i=t._fullReader)||void 0===i?void 0:i.filename)&&void 0!==n?n:null,contentLength:null!==(a=null===(r=t._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==a?a:null}}));return Oe(Tl,this).set(e,i),i}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(t=Ie(Le().mark((function t(){var e,n,i,a,r=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]&&r[0],!this.destroyed){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.messageHandler.sendWithPromise("Cleanup",null);case 5:n=Ue(Oe(Il,this).values()),t.prev=6,n.s();case 8:if((i=n.n()).done){t.next=15;break}if((a=i.value).cleanup()){t.next=13;break}throw new Error("startCleanup: Page ".concat(a.pageNumber," is currently rendering."));case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:this.commonObjs.clear(),e||this.fontLoader.clear(),Oe(Tl,this).clear(),this.filterFactory.destroy(!0),nl.cleanup();case 28:case"end":return t.stop()}}),t,this,[[6,17,20,23]])}))),function(){return t.apply(this,arguments)})},{key:"cachedPageNumber",value:function(t){var e;if(!gl(t))return null;var n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return null!==(e=Oe(Nl,this).get(n))&&void 0!==e?e:null}}]);var t}();function Hl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Oe(Tl,this).get(t);if(n)return n;var i=this.messageHandler.sendWithPromise(t,e);return Oe(Tl,this).set(t,i),i}var zl=Symbol("INITIAL_DATA"),Vl=new WeakMap,Ul=new WeakSet,Gl=function(){return Ke((function t(){Qe(this,t),Me(this,Ul),Re(this,Vl,Object.create(null))}),[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n=je(Ul,this,ql).call(this,t);return n.promise.then((function(){return e(n.data)})),null}var i=Oe(Vl,this)[t];if(!i||i.data===zl)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return i.data}},{key:"has",value:function(t){var e=Oe(Vl,this)[t];return!!e&&e.data!==zl}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=je(Ul,this,ql).call(this,t);n.data=e,n.resolve()}},{key:"clear",value:function(){for(var t in Oe(Vl,this)){var e,n=Oe(Vl,this)[t].data;null==n||null===(e=n.bitmap)||void 0===e||e.close()}We(Vl,this,Object.create(null))}},{key:Symbol.iterator,value:Le().mark((function t(){var e,n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=Le().keys(Oe(Vl,this));case 1:if((t.t1=t.t0()).done){t.next=10;break}if(e=t.t1.value,(n=Oe(Vl,this)[e].data)!==zl){t.next=6;break}return t.abrupt("continue",1);case 6:return t.next=8,[e,n];case 8:t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))}])}();function ql(t){var e;return(e=Oe(Vl,this))[t]||(e[t]=we(we({},Promise.withResolvers()),{},{data:zl}))}var Xl=new WeakMap,Kl=function(){return Ke((function t(e){Qe(this,t),Re(this,Xl,null),We(Xl,this,e),this.onContinue=null}),[{key:"promise",get:function(){return Oe(Xl,this).capability.promise}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Oe(Xl,this).cancel(null,t)}},{key:"separateAnnots",get:function(){var t=Oe(Xl,this).operatorList.separateAnnots;if(!t)return!1;var e=Oe(Xl,this).annotationCanvasMap;return t.form||t.canvas&&(null==e?void 0:e.size)>0}}])}(),Yl=new WeakMap,Ql=function(){return Ke((function t(e){var n=e.callback,i=e.params,a=e.objs,r=e.commonObjs,s=e.annotationCanvasMap,u=e.operatorList,o=e.pageIndex,l=e.canvasFactory,h=e.filterFactory,c=e.useRequestAnimationFrame,d=void 0!==c&&c,f=e.pdfBug,v=void 0!==f&&f,p=e.pageColors,g=void 0===p?null:p;Qe(this,t),Re(this,Yl,null),this.callback=n,this.params=i,this.objs=a,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=v,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Kl(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}),[{key:"completed",get:function(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function(t){var e,n,i=t.transparency,a=void 0!==i&&i,r=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(Jl._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Jl._.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var s=this.params,u=s.canvasContext,o=s.viewport,l=s.transform,h=s.background;this.gfx=new Uu(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:o,transparency:a,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}}},{key:"cancel",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),Oe(Yl,this)&&(window.cancelAnimationFrame(Oe(Yl,this)),We(Yl,this,null)),Jl._.delete(this._canvas),this.callback(e||new xa("Rendering cancelled, page ".concat(this._pageIndex+1),n))}},{key:"operatorListChanged",value:function(){var t;this.graphicsReady?(null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?We(Yl,this,window.requestAnimationFrame((function(){We(Yl,t,null),t._nextBound().catch(t._cancelBound)}))):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(t=Ie(Le().mark((function t(){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Jl._.delete(this._canvas),this.callback()));case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),Jl={_:new WeakSet},Zl="4.5.136",$l="3a21f03b0";function th(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function eh(t){return Math.max(0,Math.min(255,255*t))}var nh=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"CMYK_G",value:function(t){var e=He(t,4),n=e[0],i=e[1],a=e[2],r=e[3];return["G",1-Math.min(1,.3*n+.59*a+.11*i+r)]}},{key:"G_CMYK",value:function(t){return["CMYK",0,0,0,1-He(t,1)[0]]}},{key:"G_RGB",value:function(t){var e=He(t,1)[0];return["RGB",e,e,e]}},{key:"G_rgb",value:function(t){var e=He(t,1)[0];return[e=eh(e),e,e]}},{key:"G_HTML",value:function(t){var e=th(He(t,1)[0]);return"#".concat(e).concat(e).concat(e)}},{key:"RGB_G",value:function(t){var e=He(t,3);return["G",.3*e[0]+.59*e[1]+.11*e[2]]}},{key:"RGB_rgb",value:function(t){return t.map(eh)}},{key:"RGB_HTML",value:function(t){return"#".concat(t.map(th).join(""))}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"T_rgb",value:function(){return[null]}},{key:"CMYK_RGB",value:function(t){var e=He(t,4),n=e[0],i=e[1],a=e[2],r=e[3];return["RGB",1-Math.min(1,n+r),1-Math.min(1,a+r),1-Math.min(1,i+r)]}},{key:"CMYK_rgb",value:function(t){var e=He(t,4),n=e[0],i=e[1],a=e[2],r=e[3];return[eh(1-Math.min(1,n+r)),eh(1-Math.min(1,a+r)),eh(1-Math.min(1,i+r))]}},{key:"CMYK_HTML",value:function(t){var e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}},{key:"RGB_CMYK",value:function(t){var e=He(t,3),n=1-e[0],i=1-e[1],a=1-e[2];return["CMYK",n,i,a,Math.min(n,i,a)]}}])}(),ih=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"setupStorage",value:function(t,e,n,i,a){var r=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===a)break;t.addEventListener("input",(function(t){i.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?t.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===a)break;t.addEventListener("change",(function(t){i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===a)break;t.addEventListener("input",(function(t){i.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);var s,u=Ue(n.children);try{for(u.s();!(s=u.n()).done;){var o=s.value;o.attributes.value===r.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}}catch(t){u.e(t)}finally{u.f()}}t.addEventListener("input",(function(t){var n=t.target.options,a=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:a})}))}}},{key:"setAttributes",value:function(t){var e=t.html,n=t.element,i=t.storage,a=void 0===i?null:i,r=t.intent,s=t.linkService,u=n.attributes,o=e instanceof HTMLAnchorElement;"radio"===u.type&&(u.name="".concat(u.name,"-").concat(r));for(var l=0,h=Object.entries(u);l<h.length;l++){var c=He(h[l],2),d=c[0],f=c[1];if(null!=f)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!o||"href"!==d&&"newWindow"!==d)&&e.setAttribute(d,f)}}o&&s.addLinkAttributes(e,u.href,u.newWindow),a&&u.dataId&&this.setupStorage(e,u.dataId,n,a)}},{key:"render",value:function(t){var e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,a=t.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:a,linkService:n});var s="richText"!==a,u=t.div;if(u.append(r),t.viewport){var o="matrix(".concat(t.viewport.transform.join(","),")");u.style.transform=o}s&&u.setAttribute("class","xfaLayer xfaFont");var l=[];if(0===i.children.length){if(i.value){var h=document.createTextNode(i.value);r.append(h),s&&ll.shouldBuildText(i.name)&&l.push(h)}return{textDivs:l}}for(var c=[[i,-1,r]];c.length>0;){var d,f,v=He(c.at(-1),3),p=v[0],g=v[1],D=v[2];if(g+1!==p.children.length){var m=p.children[++c.at(-1)[1]];if(null!==m){var y=m.name;if("#text"!==y){var A=null!=m&&null!==(d=m.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(m.attributes.xmlns,y):document.createElement(y);if(D.append(A),m.attributes&&this.setAttributes({html:A,element:m,storage:e,intent:a,linkService:n}),(null===(f=m.children)||void 0===f?void 0:f.length)>0)c.push([m,-1,A]);else if(m.value){var b=document.createTextNode(m.value);s&&ll.shouldBuildText(y)&&l.push(b),A.append(b)}}else{var k=document.createTextNode(m.value);l.push(k),D.append(k)}}}else c.pop()}var E,w=Ue(u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(w.s();!(E=w.n()).done;){E.value.setAttribute("readOnly",!0)}}catch(t){w.e(t)}finally{w.f()}return{textDivs:l}}},{key:"update",value:function(t){var e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}])}(),ah=1e3,rh=new WeakSet;function sh(t){return{width:t[2]-t[0],height:t[3]-t[1]}}var uh=function(){return Ke((function t(){Qe(this,t)}),null,[{key:"create",value:function(t){switch(t.data.annotationType){case Rn:return new ph(t);case In:return new yh(t);case Zn:switch(t.data.fieldType){case"Tx":return new bh(t);case"Btn":return t.data.radioButton?new wh(t):t.data.checkBox?new Eh(t):new Ch(t);case"Ch":return new Fh(t);case"Sig":return new kh(t)}return new Ah(t);case Qn:return new _h(t);case Nn:return new ac(t);case On:return new sc(t);case Wn:return new oc(t);case jn:return new hc(t);case zn:return new dc(t);case Kn:return new vc(t);case Yn:return new gc(t);case Hn:return new fc(t);case Vn:return new Dc(t);case Un:return new mc(t);case Gn:return new yc(t);case qn:return new Ac(t);case Xn:return new bc(t);case Jn:return new wc(t);default:return new dh(t)}}}])}(),oh=new WeakMap,lh=new WeakMap,hh=new WeakMap,ch=new WeakSet,dh=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isRenderable,a=void 0!==i&&i,r=n.ignoreBorder,s=void 0!==r&&r,u=n.createQuadrilaterals,o=void 0!==u&&u;Qe(this,t),Me(this,ch),Re(this,oh,null),Re(this,lh,!1),Re(this,hh,null),this.isRenderable=a,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,a&&(this.container=this._createContainer(s)),o&&this._createQuadrilaterals()}return Ke(t,[{key:"_isEditable",get:function(){return this.data.isEditable}},{key:"hasPopupData",get:function(){return t._hasPopupData(this.data)}},{key:"updateEdited",value:function(t){var e;if(this.container){Oe(oh,this)||We(oh,this,{rect:this.data.rect.slice(0)});var n=t.rect;n&&je(ch,this,fh).call(this,n),null===(e=Oe(hh,this))||void 0===e||e.popup.updateEdited(t)}}},{key:"resetEdited",value:function(){var t;Oe(oh,this)&&(je(ch,this,fh).call(this,Oe(oh,this).rect),null===(t=Oe(hh,this))||void 0===t||t.popup.resetEdited(),We(oh,this,null))}},{key:"_createContainer",value:function(t){var e=this.data,n=this.parent,i=n.page,a=n.viewport,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ah||(r.tabIndex=ah);var s=r.style;if(s.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof _h){var u=e.rotation;return e.hasOwnCanvas||0===u||this.setRotation(u,r),r}var o=sh(e.rect),l=o.width,h=o.height;if(!t&&e.borderStyle.width>0){s.borderWidth="".concat(e.borderStyle.width,"px");var c=e.borderStyle.horizontalCornerRadius,d=e.borderStyle.verticalCornerRadius;if(c>0||d>0){var f="calc(".concat(c,"px * var(--scale-factor)) / calc(").concat(d,"px * var(--scale-factor))");s.borderRadius=f}else if(this instanceof wh){var v="calc(".concat(l,"px * var(--scale-factor)) / calc(").concat(h,"px * var(--scale-factor))");s.borderRadius=v}switch(e.borderStyle.style){case $n:s.borderStyle="solid";break;case ti:s.borderStyle="dashed";break;case ei:di("Unimplemented border style: beveled");break;case ni:di("Unimplemented border style: inset");break;case ii:s.borderBottomStyle="solid"}var p=e.borderColor||null;p?(We(lh,this,!0),s.borderColor=Mi.makeHexColor(0|p[0],0|p[1],0|p[2])):s.borderWidth=0}var g=Mi.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),D=a.rawDims,m=D.pageWidth,y=D.pageHeight,A=D.pageX,b=D.pageY;s.left="".concat(100*(g[0]-A)/m,"%"),s.top="".concat(100*(g[1]-b)/y,"%");var k=e.rotation;return e.hasOwnCanvas||0===k?(s.width="".concat(100*l/m,"%"),s.height="".concat(100*h/y,"%")):this.setRotation(k,r),r}},{key:"setRotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(this.data.rect){var n,i,a=this.parent.viewport.rawDims,r=a.pageWidth,s=a.pageHeight,u=sh(this.data.rect),o=u.width,l=u.height;t%180==0?(n=100*o/r,i=100*l/s):(n=100*l/r,i=100*o/s),e.style.width="".concat(n,"%"),e.style.height="".concat(i,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}}},{key:"_commonActions",get:function(){var t=this,e=function(e,n,i){var a=i.detail[e],r=a[0],s=a.slice(1);i.target.style[n]=nh["".concat(r,"_HTML")](s),t.annotationStorage.setValue(t.data.id,Pe({},n,nh["".concat(r,"_rgb")](s)))};return gi(this,"_commonActions",{display:function(e){var n=e.detail.display,i=n%2==1;t.container.style.visibility=i?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{noView:i,noPrint:1===n||2===n})},print:function(e){t.annotationStorage.setValue(t.data.id,{noPrint:!e.detail.print})},hidden:function(e){var n=e.detail.hidden;t.container.style.visibility=n?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{noPrint:n,noView:n})},focus:function(t){setTimeout((function(){return t.target.focus({preventScroll:!1})}),0)},userName:function(t){t.target.title=t.detail.userName},readonly:function(t){t.target.disabled=t.detail.readonly},required:function(e){t._setRequired(e.target,e.detail.required)},bgColor:function(t){e("bgColor","backgroundColor",t)},fillColor:function(t){e("fillColor","backgroundColor",t)},fgColor:function(t){e("fgColor","color",t)},textColor:function(t){e("textColor","color",t)},borderColor:function(t){e("borderColor","borderColor",t)},strokeColor:function(t){e("strokeColor","borderColor",t)},rotation:function(e){var n=e.detail.rotation;t.setRotation(n),t.annotationStorage.setValue(t.data.id,{rotation:n})}})}},{key:"_dispatchEventFromSandbox",value:function(t,e){for(var n=this._commonActions,i=0,a=Object.keys(e.detail);i<a.length;i++){var r=a[i],s=t[r]||n[r];null==s||s(e)}}},{key:"_setDefaultPropertiesFromJS",value:function(t){if(this.enableScripting){var e=this.annotationStorage.getRawValue(this.data.id);if(e)for(var n=this._commonActions,i=0,a=Object.entries(e);i<a.length;i++){var r=He(a[i],2),s=r[0],u=r[1],o=n[s];if(o)o({detail:Pe({},s,u),target:t}),delete e[s]}}}},{key:"_createQuadrilaterals",value:function(){if(this.container){var t=this.data.quadPoints;if(t){var e=this.data.rect.map((function(t){return Math.fround(t)})),n=He(e,4),i=n[0],a=n[1],r=n[2],s=n[3];if(8===t.length){var u=He(t.subarray(2,6),4),o=u[0],l=u[1],h=u[2],c=u[3];if(r===o&&s===l&&i===h&&a===c)return}var d,f=this.container.style;if(Oe(lh,this)){var v=f.borderColor,p=f.borderWidth;f.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(v,'" stroke-width="').concat(p,'">')],this.container.classList.add("hasBorder")}var g=r-i,D=s-a,m=this.svgFactory,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);var A=m.createElement("defs");y.append(A);var b=m.createElement("clipPath"),k="clippath_".concat(this.data.id);b.setAttribute("id",k),b.setAttribute("clipPathUnits","objectBoundingBox"),A.append(b);for(var E=2,w=t.length;E<w;E+=8){var C,F=t[E],_=t[E+1],x=t[E+2],S=t[E+3],M=m.createElement("rect"),B=(x-i)/g,P=(s-_)/D,L=(F-x)/g,T=(_-S)/D;M.setAttribute("x",B),M.setAttribute("y",P),M.setAttribute("width",L),M.setAttribute("height",T),b.append(M),null===(C=d)||void 0===C||C.push('<rect vector-effect="non-scaling-stroke" x="'.concat(B,'" y="').concat(P,'" width="').concat(L,'" height="').concat(T,'"/>'))}Oe(lh,this)&&(d.push("</g></svg>')"),f.backgroundImage=d.join("")),this.container.append(y),this.container.style.clipPath="url(#".concat(k,")")}}}},{key:"_createPopup",value:function(){var t=this.container,e=this.data;t.setAttribute("aria-haspopup","dialog");var n=We(hh,this,new _h({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}},{key:"render",value:function(){fi("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];if(this._fieldObjects){var i=this._fieldObjects[t];if(i){var a,r=Ue(i);try{for(r.s();!(a=r.n()).done;){var s=a.value,u=s.page,o=s.id,l=s.exportValues;if(-1!==u&&o!==e){var h="string"==typeof l?l:null,c=document.querySelector('[data-element-id="'.concat(o,'"]'));!c||rh.has(c)?n.push({id:o,exportValue:h,domElement:c}):di("_getElementsByName - element not allowed: ".concat(o))}}}catch(t){r.e(t)}finally{r.f()}}return n}var d,f=Ue(document.getElementsByName(t));try{for(f.s();!(d=f.n()).done;){var v=d.value,p=v.exportValue,g=v.getAttribute("data-element-id");g!==e&&(rh.has(v)&&n.push({id:g,exportValue:p,domElement:v}))}}catch(t){f.e(t)}finally{f.f()}return n}},{key:"show",value:function(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}},{key:"hide",value:function(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}},{key:"getElementsToTriggerPopup",value:function(){return this.container}},{key:"addHighlightArea",value:function(){var t=this.getElementsToTriggerPopup();if(Array.isArray(t)){var e,n=Ue(t);try{for(n.s();!(e=n.n()).done;){e.value.classList.add("highlightArea")}}catch(t){n.e(t)}finally{n.f()}}else t.classList.add("highlightArea")}},{key:"_editOnDoubleClick",value:function(){var t=this;if(this._isEditable){var e=this.annotationEditorType,n=this.data.id;this.container.addEventListener("dblclick",(function(){var i;null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("switchannotationeditormode",{source:t,mode:e,editId:n})}))}}}],[{key:"_hasPopupData",value:function(t){var e=t.titleObj,n=t.contentsObj,i=t.richText;return!!(null!=e&&e.str||null!=n&&n.str||null!=i&&i.str)}}])}();function fh(t){var e=this.container.style,n=this.data,i=n.rect,a=n.rotation,r=this.parent.viewport.rawDims,s=r.pageWidth,u=r.pageHeight,o=r.pageX,l=r.pageY;null==i||i.splice.apply(i,[0,4].concat(xe(t)));var h=sh(t),c=h.width,d=h.height;e.left="".concat(100*(t[0]-o)/s,"%"),e.top="".concat(100*(u-t[3]+l)/u,"%"),0===a?(e.width="".concat(100*c/s,"%"),e.height="".concat(100*d/u,"%")):this.setRotation(a)}var vh=new WeakSet,ph=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Qe(this,t),Me(n=Je(this,t,[e,{isRenderable:!0,ignoreBorder:!(null==i||!i.ignoreBorder),createQuadrilaterals:!0}]),vh),n.isTooltipOnly=e.data.isTooltipOnly,n}return tn(t,dh),Ke(t,[{key:"render",value:function(){var t=this.data,e=this.linkService,n=document.createElement("a");n.setAttribute("data-element-id",t.id);var i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(je(vh,this,Dh).call(this,n,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(je(vh,this,mh).call(this,n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}},{key:"_bindLink",value:function(t,e){var n=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&n.linkService.goToDestination(e),!1},(e||""===e)&&je(vh,this,gh).call(this)}},{key:"_bindNamedAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeNamedAction(e),!1},je(vh,this,gh).call(this)}},{key:"_bindJSAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl("");for(var i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),a=function(){var a=s[r],u=i.get(a);if(!u)return 1;t[u]=function(){var t;return null===(t=n.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:n,detail:{id:e.id,name:a}}),!1}},r=0,s=Object.keys(e.actions);r<s.length;r++)a();t.onclick||(t.onclick=function(){return!1}),je(vh,this,gh).call(this)}},{key:"_bindResetFormAction",value:function(t,e){var n=this,i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),je(vh,this,gh).call(this),!this._fieldObjects)return di('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=function(){return!1}));t.onclick=function(){null==i||i();var t=e.fields,a=e.refs,r=e.include,s=[];if(0!==t.length||0!==a.length){var u,o=new Set(a),l=Ue(t);try{for(l.s();!(u=l.n()).done;){var h,c=u.value,d=Ue(n._fieldObjects[c]||[]);try{for(d.s();!(h=d.n()).done;){var f=h.value.id;o.add(f)}}catch(t){d.e(t)}finally{d.f()}}}catch(t){l.e(t)}finally{l.f()}for(var v=0,p=Object.values(n._fieldObjects);v<p.length;v++){var g,D=Ue(p[v]);try{for(D.s();!(g=D.n()).done;){var m=g.value;o.has(m.id)===r&&s.push(m)}}catch(t){D.e(t)}finally{D.f()}}}else for(var y=0,A=Object.values(n._fieldObjects);y<A.length;y++){var b=A[y];s.push.apply(s,xe(b))}for(var k,E=n.annotationStorage,w=[],C=0,F=s;C<F.length;C++){var _=F[C],x=_.id;switch(w.push(x),_.type){case"text":var S=_.defaultValue||"";E.setValue(x,{value:S});break;case"checkbox":case"radiobutton":var M=_.defaultValue===_.exportValues;E.setValue(x,{value:M});break;case"combobox":case"listbox":var B=_.defaultValue||"";E.setValue(x,{value:B});break;default:continue}var P=document.querySelector('[data-element-id="'.concat(x,'"]'));P&&(rh.has(P)?P.dispatchEvent(new Event("resetform")):di("_bindResetFormAction - element not allowed: ".concat(x)))}n.enableScripting&&(null===(k=n.linkService.eventBus)||void 0===k||k.dispatch("dispatcheventinsandbox",{source:n,detail:{id:"app",ids:w,name:"ResetForm"}}));return!1}}}])}();function gh(){this.container.setAttribute("data-internal-link","")}function Dh(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=function(){var t;return null===(t=n.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,i),!1},je(vh,this,gh).call(this)}function mh(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeSetOCGState(e),!1},je(vh,this,gh).call(this)}var yh=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!0}])}return tn(t,dh),Ke(t,[{key:"render",value:function(){this.container.classList.add("textAnnotation");var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}])}(),Ah=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,dh),Ke(t,[{key:"render",value:function(){return this.container}},{key:"showElementAndHideCanvas",value:function(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}},{key:"_getKeyModifier",value:function(t){return xi.platform.isMac?t.metaKey:t.ctrlKey}},{key:"_setEventListener",value:function(t,e,n,i,a){var r=this;n.includes("mouse")?t.addEventListener(n,(function(t){var e;null===(e=r.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:r,detail:{id:r.data.id,name:i,value:a(t),shift:t.shiftKey,modifier:r._getKeyModifier(t)}})})):t.addEventListener(n,(function(t){var s;if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}a&&(null===(s=r.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:r,detail:{id:r.data.id,name:i,value:a(t)}}))}))}},{key:"_setEventListeners",value:function(t,e,n,i){var a,r=Ue(n);try{for(r.s();!(a=r.n()).done;){var s,u,o,l=He(a.value,2),h=l[0],c=l[1];if("Action"===c||null!==(s=this.data.actions)&&void 0!==s&&s[c])"Focus"!==c&&"Blur"!==c||e||(e={focused:!1}),this._setEventListener(t,e,h,c,i),"Focus"!==c||null!==(u=this.data.actions)&&void 0!==u&&u.Blur?"Blur"!==c||null!==(o=this.data.actions)&&void 0!==o&&o.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_setBackgroundColor",value:function(t){var e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Mi.makeHexColor(e[0],e[1],e[2])}},{key:"_setTextStyle",value:function(t){var e,n=this.data.defaultAppearanceData.fontColor,i=this.data.defaultAppearanceData.fontSize||9,a=t.style,r=function(t){return Math.round(10*t)/10};if(this.data.multiLine){var s=Math.abs(this.data.rect[3]-this.data.rect[1]-2),u=s/(Math.round(s/(pn*i))||1);e=Math.min(i,r(u/pn))}else{var o=Math.abs(this.data.rect[3]-this.data.rect[1]-2);e=Math.min(i,r(o/pn))}a.fontSize="calc(".concat(e,"px * var(--scale-factor))"),a.color=Mi.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(a.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}])}(),bh=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue}])}return tn(t,Ah),Ke(t,[{key:"setPropertyOnSiblings",value:function(t,e,n,i){var a,r=this.annotationStorage,s=Ue(this._getElementsByName(t.name,t.id));try{for(s.s();!(a=s.n()).done;){var u=a.value;u.domElement&&(u.domElement[e]=n),r.setValue(u.id,Pe({},i,n))}}catch(t){s.e(t)}finally{s.f()}}},{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");var i=null;if(this.renderForms){var a,r=e.getValue(n,{value:this.data.fieldValue}),s=r.value||"",u=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;u&&s.length>u&&(s=s.slice(0,u));var o=r.formattedValue||(null===(a=this.data.textContent)||void 0===a?void 0:a.join("\n"))||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));var l={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((i=document.createElement("textarea")).textContent=null!=o?o:s,this.data.doNotScroll&&(i.style.overflowY="hidden")):((i=document.createElement("input")).type="text",i.setAttribute("value",null!=o?o:s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),rh.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=ah,this._setRequired(i,this.data.required),u&&(i.maxLength=u),i.addEventListener("input",(function(a){e.setValue(n,{value:a.target.value}),t.setPropertyOnSiblings(i,"value",a.target.value,"value"),l.formattedValue=null})),i.addEventListener("resetform",(function(e){var n,a=null!==(n=t.data.defaultFieldValue)&&void 0!==n?n:"";i.value=l.userValue=a,l.formattedValue=null}));var h=function(t){var e=l.formattedValue;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var c;i.addEventListener("focus",(function(e){var n;if(!l.focused){var i=e.target;l.userValue&&(i.value=l.userValue),l.lastCommittedValue=i.value,l.commitKey=1,null!==(n=t.data.actions)&&void 0!==n&&n.Focus||(l.focused=!0)}})),i.addEventListener("updatefromsandbox",(function(i){t.showElementAndHideCanvas(i.target);var a={value:function(t){var i;l.userValue=null!==(i=t.detail.value)&&void 0!==i?i:"",e.setValue(n,{value:l.userValue.toString()}),t.target.value=l.userValue},formattedValue:function(t){var i=t.detail.formattedValue;l.formattedValue=i,null!=i&&t.target!==document.activeElement&&(t.target.value=i),e.setValue(n,{formattedValue:i})},selRange:function(t){var e;(e=t.target).setSelectionRange.apply(e,xe(t.detail.selRange))},charLimit:function(i){var a,r=i.detail.charLimit,s=i.target;if(0!==r){s.setAttribute("maxLength",r);var u=l.userValue;!u||u.length<=r||(u=u.slice(0,r),s.value=l.userValue=u,e.setValue(n,{value:u}),null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:u,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}else s.removeAttribute("maxLength")}};t._dispatchEventFromSandbox(a,i)})),i.addEventListener("keydown",(function(e){var i;l.commitKey=1;var a=-1;if("Escape"===e.key?a=0:"Enter"!==e.key||t.data.multiLine?"Tab"===e.key&&(l.commitKey=3):a=2,-1!==a){var r=e.target.value;l.lastCommittedValue!==r&&(l.lastCommittedValue=r,l.userValue=r,null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:r,willCommit:!0,commitKey:a,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}}));var d=h;h=null,i.addEventListener("blur",(function(e){var i;if(l.focused&&e.relatedTarget){null!==(i=t.data.actions)&&void 0!==i&&i.Blur||(l.focused=!1);var a,r=e.target.value;if(l.userValue=r,l.lastCommittedValue!==r)null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:r,willCommit:!0,commitKey:l.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}});d(e)}})),null!==(c=this.data.actions)&&void 0!==c&&c.Keystroke&&i.addEventListener("beforeinput",(function(e){var i;l.lastCommittedValue=null;var a=e.data,r=e.target,s=r.value,u=r.selectionStart,o=r.selectionEnd,h=u,c=o;switch(e.inputType){case"deleteWordBackward":var d=s.substring(0,u).match(/\w*[^\w]*$/);d&&(h-=d[0].length);break;case"deleteWordForward":var f=s.substring(u).match(/^[^\w]*\w*/);f&&(c+=f[0].length);break;case"deleteContentBackward":u===o&&(h-=1);break;case"deleteContentForward":u===o&&(c+=1)}e.preventDefault(),null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:s,change:a||"",willCommit:!1,selStart:h,selEnd:c}})})),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}if(h&&i.addEventListener("blur",h),this.data.comb){var f=(this.data.rect[2]-this.data.rect[0])/u;i.classList.add("comb"),i.style.letterSpacing="calc(".concat(f,"px * var(--scale-factor) - 1ch)")}}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}])}(),kh=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!!e.data.hasOwnCanvas}])}return tn(t,Ah),Ke(t)}(),Eh=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:e.renderForms}])}return tn(t,Ah),Ke(t,[{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data,i=n.id,a=e.getValue(i,{value:n.exportValue===n.fieldValue}).value;"string"==typeof a&&(a="Off"!==a,e.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var r=document.createElement("input");return rh.add(r),r.setAttribute("data-element-id",i),r.disabled=n.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=n.fieldName,a&&r.setAttribute("checked",!0),r.setAttribute("exportValue",n.exportValue),r.tabIndex=ah,r.addEventListener("change",(function(a){var r,s=a.target,u=s.name,o=s.checked,l=Ue(t._getElementsByName(u,i));try{for(l.s();!(r=l.n()).done;){var h=r.value,c=o&&h.exportValue===n.exportValue;h.domElement&&(h.domElement.checked=c),e.setValue(h.id,{value:c})}}catch(t){l.e(t)}finally{l.f()}e.setValue(i,{value:o})})),r.addEventListener("resetform",(function(t){var e=n.defaultFieldValue||"Off";t.target.checked=e===n.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(function(n){var a={value:function(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}};t._dispatchEventFromSandbox(a,n)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}])}(),wh=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:e.renderForms}])}return tn(t,Ah),Ke(t,[{key:"render",value:function(){var t=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var e=this.annotationStorage,n=this.data,i=n.id,a=e.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if("string"==typeof a&&(a=a!==n.buttonValue,e.setValue(i,{value:a})),a){var r,s=Ue(this._getElementsByName(n.fieldName,i));try{for(s.s();!(r=s.n()).done;){var u=r.value;e.setValue(u.id,{value:!1})}}catch(t){s.e(t)}finally{s.f()}}var o=document.createElement("input");if(rh.add(o),o.setAttribute("data-element-id",i),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=ah,o.addEventListener("change",(function(n){var a,r=n.target,s=r.name,u=r.checked,o=Ue(t._getElementsByName(s,i));try{for(o.s();!(a=o.n()).done;){var l=a.value;e.setValue(l.id,{value:!1})}}catch(t){o.e(t)}finally{o.f()}e.setValue(i,{value:u})})),o.addEventListener("resetform",(function(t){var e=n.defaultFieldValue;t.target.checked=null!=e&&e===n.buttonValue})),this.enableScripting&&this.hasJSActions){var l=n.buttonValue;o.addEventListener("updatefromsandbox",(function(n){var a={value:function(n){var a,r=l===n.detail.value,s=Ue(t._getElementsByName(n.target.name));try{for(s.s();!(a=s.n()).done;){var u=a.value,o=r&&u.id===i;u.domElement&&(u.domElement.checked=o),e.setValue(u.id,{value:o})}}catch(t){s.e(t)}finally{s.f()}}};t._dispatchEventFromSandbox(a,n)})),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}])}(),Ch=function(){function t(e){return Qe(this,t),Je(this,t,[e,{ignoreBorder:e.data.hasAppearance}])}return tn(t,ph),Ke(t,[{key:"render",value:function(){var e=this,n=Fe(t,"render",this,3)([]);n.classList.add("buttonWidgetAnnotation","pushButton");var i=n.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",(function(t){e._dispatchEventFromSandbox({},t)}))),n}}])}(),Fh=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:e.renderForms}])}return tn(t,Ah),Ke(t,[{key:"render",value:function(){var t=this;this.container.classList.add("choiceWidgetAnnotation");var e=this.annotationStorage,n=this.data.id,i=e.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");rh.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=ah;var r=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",(function(e){var n,i=t.data.defaultFieldValue,r=Ue(a.options);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.selected=s.value===i}}catch(t){r.e(t)}finally{r.f()}}));var s,u=Ue(this.data.options);try{for(u.s();!(s=u.n()).done;){var o=s.value,l=document.createElement("option");l.textContent=o.displayValue,l.value=o.exportValue,i.value.includes(o.exportValue)&&(l.setAttribute("selected",!0),r=!1),a.append(l)}}catch(t){u.e(t)}finally{u.f()}var h=null;if(r){var c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),a.prepend(c),h=function(){c.remove(),a.removeEventListener("input",h),h=null},a.addEventListener("input",h)}var d=function(t){var e=t?"value":"textContent",n=a.options;return a.multiple?Array.prototype.filter.call(n,(function(t){return t.selected})).map((function(t){return t[e]})):-1===n.selectedIndex?null:n[n.selectedIndex][e]},f=d(!1),v=function(t){var e=t.target.options;return Array.prototype.map.call(e,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",(function(i){var r={value:function(t){var i;null===(i=h)||void 0===i||i();var r,s=t.detail.value,u=new Set(Array.isArray(s)?s:[s]),o=Ue(a.options);try{for(o.s();!(r=o.n()).done;){var l=r.value;l.selected=u.has(l.value)}}catch(t){o.e(t)}finally{o.f()}e.setValue(n,{value:d(!0)}),f=d(!1)},multipleSelection:function(t){a.multiple=!0},remove:function(t){var i=a.options,r=t.detail.remove;if(i[r].selected=!1,a.remove(r),i.length>0){var s=Array.prototype.findIndex.call(i,(function(t){return t.selected}));-1===s&&(i[0].selected=!0)}e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},clear:function(t){for(;0!==a.length;)a.remove(0);e.setValue(n,{value:null,items:[]}),f=d(!1)},insert:function(t){var i=t.detail.insert,r=i.index,s=i.displayValue,u=i.exportValue,o=a.children[r],l=document.createElement("option");l.textContent=s,l.value=u,o?o.before(l):a.append(l),e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},items:function(t){for(var i=t.detail.items;0!==a.length;)a.remove(0);var r,s=Ue(i);try{for(s.s();!(r=s.n()).done;){var u=r.value,o=u.displayValue,l=u.exportValue,h=document.createElement("option");h.textContent=o,h.value=l,a.append(h)}}catch(t){s.e(t)}finally{s.f()}a.options.length>0&&(a.options[0].selected=!0),e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},indices:function(t){var i,a=new Set(t.detail.indices),r=Ue(t.target.options);try{for(r.s();!(i=r.n()).done;){var s=i.value;s.selected=a.has(s.index)}}catch(t){r.e(t)}finally{r.f()}e.setValue(n,{value:d(!0)}),f=d(!1)},editable:function(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(r,i)})),a.addEventListener("input",(function(i){var a,r=d(!0),s=d(!1);e.setValue(n,{value:r}),i.preventDefault(),null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:f,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(function(t){return t.target.value}))):a.addEventListener("input",(function(t){e.setValue(n,{value:d(!0)})})),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}])}(),_h=function(){function t(e){var n;Qe(this,t);var i=e.data,a=e.elements;return(n=Je(this,t,[e,{isRenderable:dh._hasPopupData(i)}])).elements=a,n.popup=null,n}return tn(t,dh),Ke(t,[{key:"render",value:function(){this.container.classList.add("popupAnnotation");var t,e=this.popup=new Kh({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[],i=Ue(this.elements);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.popup=e,n.push(a.data.id),a.addHighlightArea()}}catch(t){i.e(t)}finally{i.f()}return this.container.setAttribute("aria-controls",n.map((function(t){return"".concat(Ri).concat(t)})).join(",")),this.container}}])}(),xh=new WeakMap,Sh=new WeakMap,Mh=new WeakMap,Bh=new WeakMap,Ph=new WeakMap,Lh=new WeakMap,Th=new WeakMap,Ih=new WeakMap,Rh=new WeakMap,Nh=new WeakMap,Oh=new WeakMap,Wh=new WeakMap,jh=new WeakMap,Hh=new WeakMap,zh=new WeakMap,Vh=new WeakMap,Uh=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Xh=new WeakSet,Kh=function(){return Ke((function t(e){var n=e.container,i=e.color,a=e.elements,r=e.titleObj,s=e.modificationDate,u=e.contentsObj,o=e.richText,l=e.parent,h=e.rect,c=e.parentRect,d=e.open;Qe(this,t),Me(this,Xh),Re(this,xh,je(Xh,this,$h).bind(this)),Re(this,Sh,je(Xh,this,ic).bind(this)),Re(this,Mh,je(Xh,this,nc).bind(this)),Re(this,Bh,je(Xh,this,ec).bind(this)),Re(this,Ph,null),Re(this,Lh,null),Re(this,Th,null),Re(this,Ih,null),Re(this,Rh,null),Re(this,Nh,null),Re(this,Oh,null),Re(this,Wh,!1),Re(this,jh,null),Re(this,Hh,null),Re(this,zh,null),Re(this,Vh,null),Re(this,Uh,null),Re(this,Gh,null),Re(this,qh,!1),We(Lh,this,n),We(Uh,this,r),We(Th,this,u),We(Vh,this,o),We(Nh,this,l),We(Ph,this,i),We(zh,this,h),We(Oh,this,c),We(Rh,this,a),We(Ih,this,Na.toDateObject(s)),this.trigger=a.flatMap((function(t){return t.getElementsToTriggerPopup()}));var f,v=Ue(this.trigger);try{for(v.s();!(f=v.n()).done;){var p=f.value;p.addEventListener("click",Oe(Bh,this)),p.addEventListener("mouseenter",Oe(Mh,this)),p.addEventListener("mouseleave",Oe(Sh,this)),p.classList.add("popupTriggerArea")}}catch(t){v.e(t)}finally{v.f()}var g,D=Ue(a);try{for(D.s();!(g=D.n()).done;){var m;null===(m=g.value.container)||void 0===m||m.addEventListener("keydown",Oe(xh,this))}}catch(t){D.e(t)}finally{D.f()}Oe(Lh,this).hidden=!0,d&&je(Xh,this,ec).call(this)}),[{key:"render",value:function(){if(!Oe(jh,this)){var t=We(jh,this,document.createElement("div"));if(t.className="popup",Oe(Ph,this)){var e=t.style.outlineColor=Mi.makeHexColor.apply(Mi,xe(Oe(Ph,this)));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)");else{t.style.backgroundColor=Mi.makeHexColor.apply(Mi,xe(Oe(Ph,this).map((function(t){return Math.floor(.7*(255-t)+t)}))))}}var n=document.createElement("span");n.className="header";var i=document.createElement("h1");n.append(i);var a=Oe(Uh,this);if(i.dir=a.dir,i.textContent=a.str,t.append(n),Oe(Ih,this)){var r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:Oe(Ih,this).toLocaleDateString(),time:Oe(Ih,this).toLocaleTimeString()})),n.append(r)}var s=Be(Xh,this,Yh);if(s)ih.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{var u=this._formatContents(Oe(Th,this));t.append(u)}Oe(Lh,this).append(t)}}},{key:"_formatContents",value:function(t){var e=t.str,n=t.dir,i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;for(var a=e.split(/(?:\r\n?|\n)/),r=0,s=a.length;r<s;++r){var u=a[r];i.append(document.createTextNode(u)),r<s-1&&i.append(document.createElement("br"))}return i}},{key:"updateEdited",value:function(t){var e,n=t.rect,i=t.popupContent;Oe(Gh,this)||We(Gh,this,{contentsObj:Oe(Th,this),richText:Oe(Vh,this)}),n&&We(Hh,this,null),i&&(We(Vh,this,je(Xh,this,Zh).call(this,i)),We(Th,this,null)),null===(e=Oe(jh,this))||void 0===e||e.remove(),We(jh,this,null)}},{key:"resetEdited",value:function(){var t;if(Oe(Gh,this)){var e=Oe(Gh,this);Ce(We,[Th,this])._=e.contentsObj,Ce(We,[Vh,this])._=e.richText,We(Gh,this,null),null===(t=Oe(jh,this))||void 0===t||t.remove(),We(jh,this,null),We(Hh,this,null)}}},{key:"forceHide",value:function(){We(qh,this,this.isVisible),Oe(qh,this)&&(Oe(Lh,this).hidden=!0)}},{key:"maybeShow",value:function(){Oe(qh,this)&&(Oe(jh,this)||je(Xh,this,nc).call(this),We(qh,this,!1),Oe(Lh,this).hidden=!1)}},{key:"isVisible",get:function(){return!1===Oe(Lh,this).hidden}}])}();function Yh(t){var e=Oe(Vh,t),n=Oe(Th,t);return null==e||!e.str||null!=n&&n.str&&n.str!==e.str?null:Oe(Vh,t).html||null}function Qh(t){var e;return(null===(e=Be(Xh,t,Yh))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.fontSize)||0}function Jh(t){var e;return(null===(e=Be(Xh,t,Yh))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.color)||null}function Zh(t){var e,n=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:Be(Xh,this,Jh),fontSize:Be(Xh,this,Qh)?"calc(".concat(Be(Xh,this,Qh),"px * var(--scale-factor))"):""}},r=Ue(t.split("\n"));try{for(r.s();!(e=r.n()).done;){var s=e.value;n.push({name:"span",value:s,attributes:a})}}catch(t){r.e(t)}finally{r.f()}return i}function $h(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&Oe(Wh,this))&&je(Xh,this,ec).call(this)}function tc(){if(null===Oe(Hh,this)){var t,e=Oe(Nh,this),n=e.page.view,i=e.viewport.rawDims,a=i.pageWidth,r=i.pageHeight,s=i.pageX,u=i.pageY,o=!!Oe(Oh,this),l=Oe(o?Oh:zh,this),h=Ue(Oe(Rh,this));try{for(h.s();!(t=h.n()).done;){var c=t.value;if(!l||null!==Mi.intersect(c.data.rect,l)){l=c.data.rect,o=!0;break}}}catch(t){h.e(t)}finally{h.f()}var d=Mi.normalizeRect([l[0],n[3]-l[1]+n[1],l[2],n[3]-l[3]+n[1]]),f=o?l[2]-l[0]+5:0,v=d[0]+f,p=d[1];We(Hh,this,[100*(v-s)/a,100*(p-u)/r]);var g=Oe(Lh,this).style;g.left="".concat(Oe(Hh,this)[0],"%"),g.top="".concat(Oe(Hh,this)[1],"%")}}function ec(){We(Wh,this,!Oe(Wh,this)),Oe(Wh,this)?(je(Xh,this,nc).call(this),Oe(Lh,this).addEventListener("click",Oe(Bh,this)),Oe(Lh,this).addEventListener("keydown",Oe(xh,this))):(je(Xh,this,ic).call(this),Oe(Lh,this).removeEventListener("click",Oe(Bh,this)),Oe(Lh,this).removeEventListener("keydown",Oe(xh,this)))}function nc(){Oe(jh,this)||this.render(),this.isVisible?Oe(Wh,this)&&Oe(Lh,this).classList.add("focused"):(je(Xh,this,tc).call(this),Oe(Lh,this).hidden=!1,Oe(Lh,this).style.zIndex=parseInt(Oe(Lh,this).style.zIndex)+1e3)}function ic(){Oe(Lh,this).classList.remove("focused"),!Oe(Wh,this)&&this.isVisible&&(Oe(Lh,this).hidden=!0,Oe(Lh,this).style.zIndex=parseInt(Oe(Lh,this).style.zIndex)-1e3)}var ac=function(){function t(e){var n;return Qe(this,t),(n=Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}])).textContent=e.data.textContent,n.textPosition=e.data.textPosition,n.annotationEditorType=Cn.FREETEXT,n}return tn(t,dh),Ke(t,[{key:"render",value:function(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");var e,n=Ue(this.textContent);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=document.createElement("span");a.textContent=i,t.append(a)}}catch(t){n.e(t)}finally{n.f()}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}])}(),rc=new WeakMap,sc=function(){function t(e){var n;return Qe(this,t),Re(n=Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}]),rc,null),n}return tn(t,dh),Ke(t,[{key:"render",value:function(){this.container.classList.add("lineAnnotation");var t=this.data,e=sh(t.rect),n=e.width,i=e.height,a=this.svgFactory.create(n,i,!0),r=We(rc,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return Oe(rc,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),uc=new WeakMap,oc=function(){function t(e){var n;return Qe(this,t),Re(n=Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}]),uc,null),n}return tn(t,dh),Ke(t,[{key:"render",value:function(){this.container.classList.add("squareAnnotation");var t=this.data,e=sh(t.rect),n=e.width,i=e.height,a=this.svgFactory.create(n,i,!0),r=t.borderStyle.width,s=We(uc,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",n-r),s.setAttribute("height",i-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return Oe(uc,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),lc=new WeakMap,hc=function(){function t(e){var n;return Qe(this,t),Re(n=Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}]),lc,null),n}return tn(t,dh),Ke(t,[{key:"render",value:function(){this.container.classList.add("circleAnnotation");var t=this.data,e=sh(t.rect),n=e.width,i=e.height,a=this.svgFactory.create(n,i,!0),r=t.borderStyle.width,s=We(lc,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",n/2),s.setAttribute("cy",i/2),s.setAttribute("rx",n/2-r/2),s.setAttribute("ry",i/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return Oe(lc,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),cc=new WeakMap,dc=function(){function t(e){var n;return Qe(this,t),Re(n=Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}]),cc,null),n.containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return tn(t,dh),Ke(t,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var t=this.data,e=t.rect,n=t.vertices,i=t.borderStyle,a=t.popupRef;if(!n)return this.container;for(var r=sh(e),s=r.width,u=r.height,o=this.svgFactory.create(s,u,!0),l=[],h=0,c=n.length;h<c;h+=2){var d=n[h]-e[0],f=e[3]-n[h+1];l.push("".concat(d,",").concat(f))}l=l.join(" ");var v=We(cc,this,this.svgFactory.createElement(this.svgElementName));return v.setAttribute("points",l),v.setAttribute("stroke-width",i.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),o.append(v),this.container.append(o),!a&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return Oe(cc,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),fc=function(){function t(e){var n;return Qe(this,t),(n=Je(this,t,[e])).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return tn(t,dc),Ke(t)}(),vc=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}])}return tn(t,dh),Ke(t,[{key:"render",value:function(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}])}(),pc=new WeakMap,gc=function(){function t(e){var n;return Qe(this,t),Re(n=Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}]),pc,[]),n.containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n.annotationEditorType=Cn.INK,n}return tn(t,dh),Ke(t,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var t,e=this.data,n=e.rect,i=e.inkLists,a=e.borderStyle,r=e.popupRef,s=sh(n),u=s.width,o=s.height,l=this.svgFactory.create(u,o,!0),h=Ue(i);try{for(h.s();!(t=h.n()).done;){for(var c=t.value,d=[],f=0,v=c.length;f<v;f+=2){var p=c[f]-n[0],g=n[3]-c[f+1];d.push("".concat(p,",").concat(g))}d=d.join(" ");var D=this.svgFactory.createElement(this.svgElementName);Oe(pc,this).push(D),D.setAttribute("points",d),D.setAttribute("stroke-width",a.width||1),D.setAttribute("stroke","transparent"),D.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),l.append(D)}}catch(t){h.e(t)}finally{h.f()}return this.container.append(l),this.container}},{key:"getElementsToTriggerPopup",value:function(){return Oe(pc,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),Dc=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return tn(t,dh),Ke(t,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}])}(),mc=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return tn(t,dh),Ke(t,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}])}(),yc=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return tn(t,dh),Ke(t,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}])}(),Ac=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return tn(t,dh),Ke(t,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}])}(),bc=function(){function t(e){return Qe(this,t),Je(this,t,[e,{isRenderable:!0,ignoreBorder:!0}])}return tn(t,dh),Ke(t,[{key:"render",value:function(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}])}(),kc=new WeakMap,Ec=new WeakSet,wc=function(){function t(e){var n,i;Qe(this,t),Me(i=Je(this,t,[e,{isRenderable:!0}]),Ec),Re(i,kc,null);var a=i.data.file;return i.filename=a.filename,i.content=a.content,null===(n=i.linkService.eventBus)||void 0===n||n.dispatch("fileattachmentannotation",we({source:i},a)),i}return tn(t,dh),Ke(t,[{key:"render",value:function(){var t=this;this.container.classList.add("fileAttachmentAnnotation");var e,n=this.container,i=this.data;i.hasAppearance||0===i.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(i.name)?"paperclip":"pushpin",".svg"),i.fillAlpha&&i.fillAlpha<1&&(e.style="filter: opacity(".concat(Math.round(100*i.fillAlpha),"%);"))),e.addEventListener("dblclick",je(Ec,this,Cc).bind(this)),We(kc,this,e);var a=xi.platform.isMac;return n.addEventListener("keydown",(function(e){"Enter"===e.key&&(a?e.metaKey:e.ctrlKey)&&je(Ec,t,Cc).call(t)})),!i.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),n.append(e),n}},{key:"getElementsToTriggerPopup",value:function(){return Oe(kc,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}();function Cc(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}var Fc=(Mt=new WeakMap,Bt=new WeakMap,Pt=new WeakMap,Lt=new WeakSet,function(){return Ke((function t(e){var n=e.div,i=e.accessibilityManager,a=e.annotationCanvasMap,r=e.annotationEditorUIManager,s=e.page,u=e.viewport;Qe(this,t),Me(this,Lt),Re(this,Mt,null),Re(this,Bt,null),Re(this,Pt,new Map),this.div=n,We(Mt,this,i),We(Bt,this,a),this.page=s,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}),[{key:"hasEditableAnnotations",value:function(){return Oe(Pt,this).size>0}},{key:"render",value:(t=Ie(Le().mark((function t(e){var n,i,a,r,s,u,o,l,h,c,d,f,v,p,g,D;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.annotations,za(i=this.div,this.viewport),a=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Fa,annotationStorage:e.annotationStorage||new eu,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null},s=Ue(n),t.prev=6,s.s();case 8:if((u=s.n()).done){t.next=34;break}if(!(o=u.value).noHTML){t.next=12;break}return t.abrupt("continue",32);case 12:if(l=o.annotationType===Qn){t.next=19;break}if(h=sh(o.rect),c=h.width,d=h.height,!(c<=0||d<=0)){t.next=17;break}return t.abrupt("continue",32);case 17:t.next=23;break;case 19:if(f=a.get(o.id)){t.next=22;break}return t.abrupt("continue",32);case 22:r.elements=f;case 23:if(r.data=o,(v=uh.create(r)).isRenderable){t.next=27;break}return t.abrupt("continue",32);case 27:!l&&o.popupRef&&((p=a.get(o.popupRef))?p.push(v):a.set(o.popupRef,[v])),g=v.render(),o.hidden&&(g.style.visibility="hidden"),je(Lt,this,_c).call(this,g,o.id),v._isEditable&&(Oe(Pt,this).set(v.data.id,v),null===(D=this._annotationEditorUIManager)||void 0===D||D.renderAnnotationElement(v));case 32:t.next=8;break;case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(6),s.e(t.t0);case 39:return t.prev=39,s.f(),t.finish(39);case 42:je(Lt,this,xc).call(this);case 43:case"end":return t.stop()}}),t,this,[[6,36,39,42]])}))),function(e){return t.apply(this,arguments)})},{key:"update",value:function(t){var e=t.viewport,n=this.div;this.viewport=e,za(n,{rotation:e.rotation}),je(Lt,this,xc).call(this),n.hidden=!1}},{key:"getEditableAnnotations",value:function(){return Array.from(Oe(Pt,this).values())}},{key:"getEditableAnnotation",value:function(t){return Oe(Pt,this).get(t)}}]);var t}());function _c(t,e){var n,i=t.firstChild||t;i.id="".concat(Ri).concat(e),this.div.append(t),null===(n=Oe(Mt,this))||void 0===n||n.moveElementInDOM(this.div,t,i,!1)}function xc(){if(Oe(Bt,this)){var t,e=this.div,n=Ue(Oe(Bt,this));try{for(n.s();!(t=n.n()).done;){var i=He(t.value,2),a=i[0],r=i[1],s=e.querySelector('[data-annotation-id="'.concat(a,'"]'));if(s){r.className="annotationContent";var u=s.firstChild;u?"CANVAS"===u.nodeName?u.replaceWith(r):u.classList.contains("annotationContent")?u.after(r):u.before(r):s.append(r)}}}catch(t){n.e(t)}finally{n.f()}Oe(Bt,this).clear()}}var Sc=/\r\n?|\n/g,Mc=new WeakMap,Bc=new WeakMap,Pc=new WeakMap,Lc=new WeakMap,Tc=new WeakMap,Ic=new WeakMap,Rc=new WeakMap,Nc=new WeakMap,Oc=new WeakMap,Wc=new WeakMap,jc=new WeakSet,Hc=function(){function t(e){var n;return Qe(this,t),Me(n=Je(this,t,[we(we({},e),{},{name:"freeTextEditor"})]),jc),Re(n,Mc,n.editorDivBlur.bind(n)),Re(n,Bc,n.editorDivFocus.bind(n)),Re(n,Pc,n.editorDivInput.bind(n)),Re(n,Lc,n.editorDivKeydown.bind(n)),Re(n,Tc,n.editorDivPaste.bind(n)),Re(n,Ic,void 0),Re(n,Rc,""),Re(n,Nc,"".concat(n.id,"-editor")),Re(n,Oc,void 0),Re(n,Wc,null),We(Ic,n,e.color||t._defaultColor||Ms._defaultLineColor),We(Oc,n,e.fontSize||t._defaultFontSize),n}return tn(t,Ms),Ke(t,[{key:"updateParams",value:function(t,e){switch(t){case Fn.FREETEXT_SIZE:je(jc,this,zc).call(this,e);break;case Fn.FREETEXT_COLOR:je(jc,this,Vc).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[Fn.FREETEXT_SIZE,Oe(Oc,this)],[Fn.FREETEXT_COLOR,Oe(Ic,this)]]}},{key:"_translateEmpty",value:function(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}},{key:"getInitialTranslation",value:function(){var e=this.parentScale;return[-t._internalPadding*e,-(t._internalPadding+Oe(Oc,this))*e]}},{key:"rebuild",value:function(){this.parent&&(Fe(t,"rebuild",this,3)([]),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}},{key:"enableEditMode",value:function(){if(!this.isInEditMode()){this.parent.setEditingState(!1),this.parent.updateToolbar(Cn.FREETEXT),Fe(t,"enableEditMode",this,3)([]),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");var e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",Oe(Lc,this),{signal:e}),this.editorDiv.addEventListener("focus",Oe(Bc,this),{signal:e}),this.editorDiv.addEventListener("blur",Oe(Mc,this),{signal:e}),this.editorDiv.addEventListener("input",Oe(Pc,this),{signal:e}),this.editorDiv.addEventListener("paste",Oe(Tc,this),{signal:e})}}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),Fe(t,"disableEditMode",this,3)([]),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Oe(Nc,this)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",Oe(Lc,this)),this.editorDiv.removeEventListener("focus",Oe(Bc,this)),this.editorDiv.removeEventListener("blur",Oe(Mc,this)),this.editorDiv.removeEventListener("input",Oe(Pc,this)),this.editorDiv.removeEventListener("paste",Oe(Tc,this)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}},{key:"focusin",value:function(e){this._focusEventsAllowed&&(Fe(t,"focusin",this,3)([e]),e.target!==this.editorDiv&&this.editorDiv.focus())}},{key:"onceAdded",value:function(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}},{key:"isEmpty",value:function(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),Fe(t,"remove",this,3)([])}},{key:"commit",value:function(){var e=this;if(this.isInEditMode()){Fe(t,"commit",this,3)([]),this.disableEditMode();var n=Oe(Rc,this),i=We(Rc,this,je(jc,this,Uc).call(this).trimEnd());if(n!==i){var a=function(t){We(Rc,e,t),t?(je(jc,e,Xc).call(e),e._uiManager.rebuild(e),je(jc,e,Gc).call(e)):e.remove()};this.addCommands({cmd:function(){a(i)},undo:function(){a(n)},mustExec:!1}),je(jc,this,Gc).call(this)}}}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"enterInEditMode",value:function(){this.enableEditMode(),this.editorDiv.focus()}},{key:"dblclick",value:function(t){this.enterInEditMode()}},{key:"keydown",value:function(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}},{key:"editorDivKeydown",value:function(e){t._keyboardManager.exec(this,e)}},{key:"editorDivFocus",value:function(t){this.isEditing=!0}},{key:"editorDivBlur",value:function(t){this.isEditing=!1}},{key:"editorDivInput",value:function(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){var e,n,i=this;if(this.div)return this.div;this.width&&(e=this.x,n=this.y),Fe(t,"render",this,3)([]),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Oe(Nc,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Ms._l10nPromise.get("pdfjs-free-text-default-content").then((function(t){var e;return null===(e=i.editorDiv)||void 0===e?void 0:e.setAttribute("default-content",t)})),this.editorDiv.contentEditable=!0;var a=this.editorDiv.style;if(a.fontSize="calc(".concat(Oe(Oc,this),"px * var(--scale-factor))"),a.color=Oe(Ic,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),lr(this,this.div,["dblclick","keydown"]),this.width){var r=He(this.parentDimensions,2),s=r[0],u=r[1];if(this.annotationElementId){var o=Oe(Wc,this).position,l=He(this.getInitialTranslation(),2),h=l[0],c=l[1],d=He(this.pageTranslationToScreen(h,c),2);h=d[0],c=d[1];var f,v,p=He(this.pageDimensions,2),g=p[0],D=p[1],m=He(this.pageTranslation,2),y=m[0],A=m[1];switch(this.rotation){case 0:f=e+(o[0]-y)/g,v=n+this.height-(o[1]-A)/D;break;case 90:f=e+(o[0]-y)/g,v=n-(o[1]-A)/D;var b=[c,-h];h=b[0],c=b[1];break;case 180:f=e-this.width+(o[0]-y)/g,v=n-(o[1]-A)/D;var k=[-h,-c];h=k[0],c=k[1];break;case 270:f=e+(o[0]-y-this.height*D)/g,v=n+(o[1]-A-this.width*g)/D;var E=[-c,h];h=E[0],c=E[1]}this.setAt(f*s,v*u,h,c)}else this.setAt(e*s,n*u,this.width*s,this.height*u);je(jc,this,Xc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"editorDivPaste",value:function(e){var n=e.clipboardData||window.clipboardData,i=n.types;if(1!==i.length||"text/plain"!==i[0]){e.preventDefault();var a=Yc.call(t,n.getData("text")||"").replaceAll(Sc,"\n");if(a){var r=window.getSelection();if(r.rangeCount){this.editorDiv.normalize(),r.deleteFromDocument();var s=r.getRangeAt(0);if(!a.includes("\n"))return s.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),void r.collapseToStart();var u=s.startContainer,o=s.startOffset,l=[],h=[];if(u.nodeType===Node.TEXT_NODE){var c=u.parentElement;if(h.push(u.nodeValue.slice(o).replaceAll(Sc,"")),c!==this.editorDiv){var d,f=l,v=Ue(this.editorDiv.childNodes);try{for(v.s();!(d=v.n()).done;){var p=d.value;p!==c?f.push(qc.call(t,p)):f=h}}catch(t){v.e(t)}finally{v.f()}}l.push(u.nodeValue.slice(0,o).replaceAll(Sc,""))}else if(u===this.editorDiv){var g,D=l,m=0,y=Ue(this.editorDiv.childNodes);try{for(y.s();!(g=y.n()).done;){var A=g.value;m++===o&&(D=h),D.push(qc.call(t,A))}}catch(t){y.e(t)}finally{y.f()}}We(Rc,this,"".concat(l.join("\n")).concat(a).concat(h.join("\n"))),je(jc,this,Xc).call(this);var b,k=new Range,E=l.reduce((function(t,e){return t+e.length}),0),w=Ue(this.editorDiv.childNodes);try{for(w.s();!(b=w.n()).done;){var C=b.value.firstChild;if(C.nodeType===Node.TEXT_NODE){var F=C.nodeValue.length;if(E<=F){k.setStart(C,E),k.setEnd(C,E);break}E-=F}}}catch(t){w.e(t)}finally{w.f()}r.removeAllRanges(),r.addRange(k)}}}}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};var n=t._internalPadding*this.parentScale,i=this.getRect(n,n),a=Ms._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Oe(Ic,this)),r={annotationType:Cn.FREETEXT,color:a,fontSize:Oe(Oc,this),value:je(jc,this,Kc).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!je(jc,this,Qc).call(this,r)?null:(r.id=this.annotationElementId,r)}},{key:"renderAnnotationElement",value:function(e){var n=Fe(t,"renderAnnotationElement",this,3)([e]);if(this.deleted)return n;var i=n.style;i.fontSize="calc(".concat(Oe(Oc,this),"px * var(--scale-factor))"),i.color=Oe(Ic,this),n.replaceChildren();var a,r=Ue(Oe(Rc,this).split("\n"));try{for(r.s();!(a=r.n()).done;){var s=a.value,u=document.createElement("div");u.append(s?document.createTextNode(s):document.createElement("br")),n.append(u)}}catch(t){r.e(t)}finally{r.f()}var o=t._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:Oe(Rc,this)}),n}},{key:"resetAnnotationElement",value:function(e){Fe(t,"resetAnnotationElement",this,3)([e]),e.resetEdited()}}],[{key:"_keyboardManager",get:function(){var e=t.prototype,n=function(t){return t.isEmpty()},i=xr.TRANSLATE_SMALL,a=xr.TRANSLATE_BIG;return gi(this,"_keyboardManager",new Cr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}]]))}},{key:"initialize",value:function(t,e){Ms.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});var n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(e,n){switch(e){case Fn.FREETEXT_SIZE:t._defaultFontSize=n;break;case Fn.FREETEXT_COLOR:t._defaultColor=n}}},{key:"defaultPropertiesToUpdate",get:function(){return[[Fn.FREETEXT_SIZE,t._defaultFontSize],[Fn.FREETEXT_COLOR,t._defaultColor||Ms._defaultLineColor]]}},{key:"deserialize",value:function(e,n,i){var a=null;if(e instanceof ac){var r=e,s=r.data,u=s.defaultAppearanceData,o=u.fontSize,l=u.fontColor,h=s.rect,c=s.rotation,d=s.id,f=r.textContent,v=r.textPosition,p=r.parent.page.pageNumber;if(!f||0===f.length)return null;a=e={annotationType:Cn.FREETEXT,color:Array.from(l),fontSize:o,value:f.join("\n"),position:v,pageIndex:p-1,rect:h.slice(0),rotation:c,id:d,deleted:!1}}var g=Fe(t,"deserialize",this,2)([e,n,i]);return We(Oc,g,e.fontSize),We(Ic,g,Mi.makeHexColor.apply(Mi,xe(e.color))),We(Rc,g,Yc.call(t,e.value)),g.annotationElementId=e.id||null,We(Wc,g,a),g}}])}();function zc(t){var e=this,n=function(t){e.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))"),e.translate(0,-(t-Oe(Oc,e))*e.parentScale),We(Oc,e,t),je(jc,e,Gc).call(e)},i=Oe(Oc,this);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Vc(t){var e=this,n=function(t){We(Ic,e,e.editorDiv.style.color=t)},i=Oe(Ic,this);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Uc(){var t=[];this.editorDiv.normalize();var e,n=Ue(this.editorDiv.childNodes);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(qc.call(Tt,i))}}catch(t){n.e(t)}finally{n.f()}return t.join("\n")}function Gc(){var t,e=He(this.parentDimensions,2),n=e[0],i=e[1];if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{var a=this.currentLayer,r=this.div,s=r.style.display,u=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",a.div.append(this.div),t=r.getBoundingClientRect(),r.remove(),r.style.display=s,r.classList.toggle("hidden",u)}this.rotation%180==this.parentRotation%180?(this.width=t.width/n,this.height=t.height/i):(this.width=t.height/n,this.height=t.width/i),this.fixAndSetPosition()}function qc(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Sc,"")}function Xc(){if(this.editorDiv.replaceChildren(),Oe(Rc,this)){var t,e=Ue(Oe(Rc,this).split("\n"));try{for(e.s();!(t=e.n()).done;){var n=t.value,i=document.createElement("div");i.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(i)}}catch(t){e.e(t)}finally{e.f()}}}function Kc(){return Oe(Rc,this).replaceAll(" "," ")}function Yc(t){return t.replaceAll(" "," ")}function Qc(t){var e=Oe(Wc,this),n=e.value,i=e.fontSize,a=e.color,r=e.pageIndex;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((function(t,e){return t!==a[e]}))||t.pageIndex!==r}Tt=Hc,Pe(Hc,"_freeTextDefaultContent",""),Pe(Hc,"_internalPadding",0),Pe(Hc,"_defaultColor",null),Pe(Hc,"_defaultFontSize",10),Pe(Hc,"_type","freetext"),Pe(Hc,"_editorType",Cn.FREETEXT);var Jc=new WeakMap,Zc=new WeakMap,$c=new WeakMap,td=new WeakSet,ed=function(){return Ke((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Qe(this,t),Me(this,td),Re(this,Jc,void 0),Re(this,Zc,[]),Re(this,$c,[]);var r,s=1/0,u=-1/0,o=1/0,l=-1/0,h=Math.pow(10,-4),c=Ue(e);try{for(c.s();!(r=c.n()).done;){var d=r.value,f=d.x,v=d.y,p=d.width,g=d.height,D=Math.floor((f-n)/h)*h,m=Math.ceil((f+p+n)/h)*h,y=Math.floor((v-n)/h)*h,A=Math.ceil((v+g+n)/h)*h,b=[D,y,A,!0],k=[m,y,A,!1];Oe(Zc,this).push(b,k),s=Math.min(s,D),u=Math.max(u,m),o=Math.min(o,y),l=Math.max(l,A)}}catch(t){c.e(t)}finally{c.f()}var E,w=u-s+2*i,C=l-o+2*i,F=s-i,_=o-i,x=Oe(Zc,this).at(a?-1:-2),S=[x[0],x[2]],M=Ue(Oe(Zc,this));try{for(M.s();!(E=M.n()).done;){var B=E.value,P=He(B,3),L=P[0],T=P[1],I=P[2];B[0]=(L-F)/w,B[1]=(T-_)/C,B[2]=(I-_)/C}}catch(t){M.e(t)}finally{M.f()}We(Jc,this,{x:F,y:_,width:w,height:C,lastPoint:S})}),[{key:"getOutlines",value:function(){Oe(Zc,this).sort((function(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}));var t,e=[],n=Ue(Oe(Zc,this));try{for(n.s();!(t=n.n()).done;){var i=t.value;i[3]?(e.push.apply(e,xe(je(td,this,sd).call(this,i))),je(td,this,ad).call(this,i)):(je(td,this,rd).call(this,i),e.push.apply(e,xe(je(td,this,sd).call(this,i))))}}catch(t){n.e(t)}finally{n.f()}return je(td,this,nd).call(this,e)}}])}();function nd(t){var e,n=[],i=new Set,a=Ue(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,s=He(r,3),u=s[0],o=s[1],l=s[2];n.push([u,o,r],[u,l,r])}}catch(t){a.e(t)}finally{a.f()}n.sort((function(t,e){return t[1]-e[1]||t[0]-e[0]}));for(var h=0,c=n.length;h<c;h+=2){var d=n[h][2],f=n[h+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}for(var v,p=[];i.size>0;){var g=i.values().next().value,D=He(g,5),m=D[0],y=D[1],A=D[2],b=D[3],k=D[4];i.delete(g);var E=m,w=y;for(v=[m,A],p.push(v);;){var C=void 0;if(i.has(b))C=b;else{if(!i.has(k))break;C=k}i.delete(C);var F=He(C,5);m=F[0],y=F[1],A=F[2],b=F[3],k=F[4],E!==m&&(v.push(E,w,m,w===y?y:A),E=m),w=w===y?A:y}v.push(E,w)}return new hd(p,Oe(Jc,this))}function id(t){for(var e=Oe($c,this),n=0,i=e.length-1;n<=i;){var a=n+i>>1,r=e[a][0];if(r===t)return a;r<t?n=a+1:i=a-1}return i+1}function ad(t){var e=He(t,3),n=e[1],i=e[2],a=je(td,this,id).call(this,n);Oe($c,this).splice(a,0,[n,i])}function rd(t){for(var e=He(t,3),n=e[1],i=e[2],a=je(td,this,id).call(this,n),r=a;r<Oe($c,this).length;r++){var s=He(Oe($c,this)[r],2),u=s[0],o=s[1];if(u!==n)break;if(u===n&&o===i)return void Oe($c,this).splice(r,1)}for(var l=a-1;l>=0;l--){var h=He(Oe($c,this)[l],2),c=h[0],d=h[1];if(c!==n)break;if(c===n&&d===i)return void Oe($c,this).splice(l,1)}}function sd(t){for(var e=He(t,3),n=e[0],i=e[1],a=e[2],r=[[n,i,a]],s=je(td,this,id).call(this,a),u=0;u<s;u++)for(var o=He(Oe($c,this)[u],2),l=o[0],h=o[1],c=0,d=r.length;c<d;c++){var f=He(r[c],3),v=f[1],p=f[2];if(!(h<=v||p<=l))if(v>=l)if(p>h)r[c][1]=h;else{if(1===d)return[];r.splice(c,1),c--,d--}else r[c][2]=l,p>h&&r.push([n,h,p])}return r}var ud=function(){return Ke((function t(){Qe(this,t)}),[{key:"toSVGPath",value:function(){throw new Error("Abstract method `toSVGPath` must be implemented.")}},{key:"box",get:function(){throw new Error("Abstract getter `box` must be implemented.")}},{key:"serialize",value:function(t,e){throw new Error("Abstract method `serialize` must be implemented.")}},{key:"free",get:function(){return this instanceof Nd}}])}(),od=new WeakMap,ld=new WeakMap,hd=function(){function t(e,n){var i;return Qe(this,t),Re(i=Je(this,t),od,void 0),Re(i,ld,void 0),We(ld,i,e),We(od,i,n),i}return tn(t,ud),Ke(t,[{key:"toSVGPath",value:function(){var t,e=[],n=Ue(Oe(ld,this));try{for(n.s();!(t=n.n()).done;){var i=t.value,a=He(i,2),r=a[0],s=a[1];e.push("M".concat(r," ").concat(s));for(var u=2;u<i.length;u+=2){var o=i[u],l=i[u+1];o===r?(e.push("V".concat(l)),s=l):l===s&&(e.push("H".concat(o)),r=o)}e.push("Z")}}catch(t){n.e(t)}finally{n.f()}return e.join(" ")}},{key:"serialize",value:function(t,e){var n,i=He(t,4),a=i[0],r=i[1],s=i[2],u=i[3],o=[],l=s-a,h=u-r,c=Ue(Oe(ld,this));try{for(c.s();!(n=c.n()).done;){for(var d=n.value,f=new Array(d.length),v=0;v<d.length;v+=2)f[v]=a+d[v]*l,f[v+1]=u-d[v+1]*h;o.push(f)}}catch(t){c.e(t)}finally{c.f()}return o}},{key:"box",get:function(){return Oe(od,this)}}])}(),cd=new WeakMap,dd=new WeakMap,fd=new WeakMap,vd=new WeakMap,pd=new WeakMap,gd=new WeakMap,Dd=new WeakMap,md=new WeakMap,yd=new WeakMap,Ad=new WeakMap,bd=new WeakMap,kd=new WeakMap,Ed=new WeakMap,wd=new WeakSet,Cd=function(){return Ke((function t(e,n,i,a,r){var s=e.x,u=e.y,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Qe(this,t),Me(this,wd),Re(this,cd,void 0),Re(this,dd,[]),Re(this,fd,void 0),Re(this,vd,void 0),Re(this,pd,[]),Re(this,gd,new Float64Array(18)),Re(this,Dd,void 0),Re(this,md,void 0),Re(this,yd,void 0),Re(this,Ad,void 0),Re(this,bd,void 0),Re(this,kd,void 0),Re(this,Ed,[]),We(cd,this,n),We(kd,this,a*i),We(vd,this,r),Oe(gd,this).set([NaN,NaN,NaN,NaN,s,u],6),We(fd,this,o),We(Ad,this,_d._*i),We(yd,this,xd._*i),We(bd,this,i),Oe(Ed,this).push(s,u)}),[{key:"free",get:function(){return!0}},{key:"isEmpty",value:function(){return isNaN(Oe(gd,this)[8])}},{key:"add",value:function(t){var e,n=t.x,i=t.y;We(Dd,this,n),We(md,this,i);var a=He(Oe(cd,this),4),r=a[0],s=a[1],u=a[2],o=a[3],l=He(Oe(gd,this).subarray(8,12),4),h=l[0],c=l[1],d=l[2],f=l[3],v=n-d,p=i-f,g=Math.hypot(v,p);if(g<Oe(yd,this))return!1;var D=g-Oe(Ad,this),m=D/g,y=m*v,A=m*p,b=h,k=c;h=d,c=f,d+=y,f+=A,null===(e=Oe(Ed,this))||void 0===e||e.push(n,i);var E=y/D,w=-A/D*Oe(kd,this),C=E*Oe(kd,this);if(Oe(gd,this).set(Oe(gd,this).subarray(2,8),0),Oe(gd,this).set([d+w,f+C],4),Oe(gd,this).set(Oe(gd,this).subarray(14,18),12),Oe(gd,this).set([d-w,f-C],16),isNaN(Oe(gd,this)[6]))return 0===Oe(pd,this).length&&(Oe(gd,this).set([h+w,c+C],2),Oe(pd,this).push(NaN,NaN,NaN,NaN,(h+w-r)/u,(c+C-s)/o),Oe(gd,this).set([h-w,c-C],14),Oe(dd,this).push(NaN,NaN,NaN,NaN,(h-w-r)/u,(c-C-s)/o)),Oe(gd,this).set([b,k,h,c,d,f],6),!this.isEmpty();if(Oe(gd,this).set([b,k,h,c,d,f],6),Math.abs(Math.atan2(k-c,b-h)-Math.atan2(A,y))<Math.PI/2){var F=He(Oe(gd,this).subarray(2,6),4);h=F[0],c=F[1],d=F[2],f=F[3],Oe(pd,this).push(NaN,NaN,NaN,NaN,((h+d)/2-r)/u,((c+f)/2-s)/o);var _=He(Oe(gd,this).subarray(14,18),4);return h=_[0],c=_[1],b=_[2],k=_[3],Oe(dd,this).push(NaN,NaN,NaN,NaN,((b+h)/2-r)/u,((k+c)/2-s)/o),!0}var x=He(Oe(gd,this).subarray(0,6),6);b=x[0],k=x[1],h=x[2],c=x[3],d=x[4],f=x[5],Oe(pd,this).push(((b+5*h)/6-r)/u,((k+5*c)/6-s)/o,((5*h+d)/6-r)/u,((5*c+f)/6-s)/o,((h+d)/2-r)/u,((c+f)/2-s)/o);var S=He(Oe(gd,this).subarray(12,18),6);return d=S[0],f=S[1],h=S[2],c=S[3],b=S[4],k=S[5],Oe(dd,this).push(((b+5*h)/6-r)/u,((k+5*c)/6-s)/o,((5*h+d)/6-r)/u,((5*c+f)/6-s)/o,((h+d)/2-r)/u,((c+f)/2-s)/o),!0}},{key:"toSVGPath",value:function(){if(this.isEmpty())return"";var t=Oe(pd,this),e=Oe(dd,this),n=Oe(gd,this).subarray(4,6),i=Oe(gd,this).subarray(16,18),a=He(Oe(cd,this),4),r=a[0],s=a[1],u=a[2],o=a[3],l=He(je(wd,this,Fd).call(this),4),h=l[0],c=l[1],d=l[2],f=l[3];if(isNaN(Oe(gd,this)[6])&&!this.isEmpty())return"M".concat((Oe(gd,this)[2]-r)/u," ").concat((Oe(gd,this)[3]-s)/o," L").concat((Oe(gd,this)[4]-r)/u," ").concat((Oe(gd,this)[5]-s)/o," L").concat(h," ").concat(c," L").concat(d," ").concat(f," L").concat((Oe(gd,this)[16]-r)/u," ").concat((Oe(gd,this)[17]-s)/o," L").concat((Oe(gd,this)[14]-r)/u," ").concat((Oe(gd,this)[15]-s)/o," Z");var v=[];v.push("M".concat(t[4]," ").concat(t[5]));for(var p=6;p<t.length;p+=6)isNaN(t[p])?v.push("L".concat(t[p+4]," ").concat(t[p+5])):v.push("C".concat(t[p]," ").concat(t[p+1]," ").concat(t[p+2]," ").concat(t[p+3]," ").concat(t[p+4]," ").concat(t[p+5]));v.push("L".concat((n[0]-r)/u," ").concat((n[1]-s)/o," L").concat(h," ").concat(c," L").concat(d," ").concat(f," L").concat((i[0]-r)/u," ").concat((i[1]-s)/o));for(var g=e.length-6;g>=6;g-=6)isNaN(e[g])?v.push("L".concat(e[g+4]," ").concat(e[g+5])):v.push("C".concat(e[g]," ").concat(e[g+1]," ").concat(e[g+2]," ").concat(e[g+3]," ").concat(e[g+4]," ").concat(e[g+5]));return v.push("L".concat(e[4]," ").concat(e[5]," Z")),v.join(" ")}},{key:"getOutlines",value:function(){for(var t,e,n=Oe(pd,this),i=Oe(dd,this),a=Oe(gd,this),r=a.subarray(4,6),s=a.subarray(16,18),u=He(Oe(cd,this),4),o=u[0],l=u[1],h=u[2],c=u[3],d=new Float64Array((null!==(t=null===(e=Oe(Ed,this))||void 0===e?void 0:e.length)&&void 0!==t?t:0)+2),f=0,v=d.length-2;f<v;f+=2)d[f]=(Oe(Ed,this)[f]-o)/h,d[f+1]=(Oe(Ed,this)[f+1]-l)/c;d[d.length-2]=(Oe(Dd,this)-o)/h,d[d.length-1]=(Oe(md,this)-l)/c;var p=He(je(wd,this,Fd).call(this),4),g=p[0],D=p[1],m=p[2],y=p[3];if(isNaN(a[6])&&!this.isEmpty()){var A=new Float64Array(36);return A.set([NaN,NaN,NaN,NaN,(a[2]-o)/h,(a[3]-l)/c,NaN,NaN,NaN,NaN,(a[4]-o)/h,(a[5]-l)/c,NaN,NaN,NaN,NaN,g,D,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(a[16]-o)/h,(a[17]-l)/c,NaN,NaN,NaN,NaN,(a[14]-o)/h,(a[15]-l)/c],0),new Nd(A,d,Oe(cd,this),Oe(bd,this),Oe(fd,this),Oe(vd,this))}for(var b=new Float64Array(Oe(pd,this).length+24+Oe(dd,this).length),k=n.length,E=0;E<k;E+=2)isNaN(n[E])?b[E]=b[E+1]=NaN:(b[E]=n[E],b[E+1]=n[E+1]);b.set([NaN,NaN,NaN,NaN,(r[0]-o)/h,(r[1]-l)/c,NaN,NaN,NaN,NaN,g,D,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(s[0]-o)/h,(s[1]-l)/c],k),k+=24;for(var w=i.length-6;w>=6;w-=6)for(var C=0;C<6;C+=2)isNaN(i[w+C])?(b[k]=b[k+1]=NaN,k+=2):(b[k]=i[w+C],b[k+1]=i[w+C+1],k+=2);return b.set([NaN,NaN,NaN,NaN,i[4],i[5]],k),new Nd(b,d,Oe(cd,this),Oe(bd,this),Oe(fd,this),Oe(vd,this))}}])}();function Fd(){var t=Oe(gd,this).subarray(4,6),e=Oe(gd,this).subarray(16,18),n=He(Oe(cd,this),4),i=n[0],a=n[1],r=n[2],s=n[3];return[(Oe(Dd,this)+(t[0]-e[0])/2-i)/r,(Oe(md,this)+(t[1]-e[1])/2-a)/s,(Oe(Dd,this)+(e[0]-t[0])/2-i)/r,(Oe(md,this)+(e[1]-t[1])/2-a)/s]}var _d={_:8},xd={_:_d._+2},Sd=new WeakMap,Md=new WeakMap,Bd=new WeakMap,Pd=new WeakMap,Ld=new WeakMap,Td=new WeakMap,Id=new WeakMap,Rd=new WeakSet,Nd=function(){function t(e,n,i,a,r,s){var u;Qe(this,t),Me(u=Je(this,t),Rd),Re(u,Sd,void 0),Re(u,Md,null),Re(u,Bd,void 0),Re(u,Pd,void 0),Re(u,Ld,void 0),Re(u,Td,void 0),Re(u,Id,void 0),We(Id,u,e),We(Ld,u,n),We(Sd,u,i),We(Td,u,a),We(Bd,u,r),We(Pd,u,s),je(Rd,u,jd).call(u,s);for(var o=Oe(Md,u),l=o.x,h=o.y,c=o.width,d=o.height,f=0,v=e.length;f<v;f+=2)e[f]=(e[f]-l)/c,e[f+1]=(e[f+1]-h)/d;for(var p=0,g=n.length;p<g;p+=2)n[p]=(n[p]-l)/c,n[p+1]=(n[p+1]-h)/d;return u}return tn(t,ud),Ke(t,[{key:"toSVGPath",value:function(){for(var t=["M".concat(Oe(Id,this)[4]," ").concat(Oe(Id,this)[5])],e=6,n=Oe(Id,this).length;e<n;e+=6)isNaN(Oe(Id,this)[e])?t.push("L".concat(Oe(Id,this)[e+4]," ").concat(Oe(Id,this)[e+5])):t.push("C".concat(Oe(Id,this)[e]," ").concat(Oe(Id,this)[e+1]," ").concat(Oe(Id,this)[e+2]," ").concat(Oe(Id,this)[e+3]," ").concat(Oe(Id,this)[e+4]," ").concat(Oe(Id,this)[e+5]));return t.push("Z"),t.join(" ")}},{key:"serialize",value:function(t,e){var n,i,a=He(t,4),r=a[0],s=a[1],u=a[2],o=a[3],l=u-r,h=o-s;switch(e){case 0:n=je(Rd,this,Od).call(this,Oe(Id,this),r,o,l,-h),i=je(Rd,this,Od).call(this,Oe(Ld,this),r,o,l,-h);break;case 90:n=je(Rd,this,Wd).call(this,Oe(Id,this),r,s,l,h),i=je(Rd,this,Wd).call(this,Oe(Ld,this),r,s,l,h);break;case 180:n=je(Rd,this,Od).call(this,Oe(Id,this),u,s,-l,h),i=je(Rd,this,Od).call(this,Oe(Ld,this),u,s,-l,h);break;case 270:n=je(Rd,this,Wd).call(this,Oe(Id,this),u,o,-l,-h),i=je(Rd,this,Wd).call(this,Oe(Ld,this),u,o,-l,-h)}return{outline:Array.from(n),points:[Array.from(i)]}}},{key:"box",get:function(){return Oe(Md,this)}},{key:"getNewOutline",value:function(t,e){for(var n=Oe(Md,this),i=n.x,a=n.y,r=n.width,s=n.height,u=He(Oe(Sd,this),4),o=u[0],l=u[1],h=u[2],c=u[3],d=r*h,f=s*c,v=i*h+o,p=a*c+l,g=new Cd({x:Oe(Ld,this)[0]*d+v,y:Oe(Ld,this)[1]*f+p},Oe(Sd,this),Oe(Td,this),t,Oe(Pd,this),null!=e?e:Oe(Bd,this)),D=2;D<Oe(Ld,this).length;D+=2)g.add({x:Oe(Ld,this)[D]*d+v,y:Oe(Ld,this)[D+1]*f+p});return g.getOutlines()}}])}();function Od(t,e,n,i,a){for(var r=new Float64Array(t.length),s=0,u=t.length;s<u;s+=2)r[s]=e+t[s]*i,r[s+1]=n+t[s+1]*a;return r}function Wd(t,e,n,i,a){for(var r=new Float64Array(t.length),s=0,u=t.length;s<u;s+=2)r[s]=e+t[s+1]*i,r[s+1]=n+t[s]*a;return r}function jd(t){for(var e=Oe(Id,this),n=e[4],i=e[5],a=n,r=i,s=n,u=i,o=n,l=i,h=t?Math.max:Math.min,c=6,d=e.length;c<d;c+=6){if(isNaN(e[c]))a=Math.min(a,e[c+4]),r=Math.min(r,e[c+5]),s=Math.max(s,e[c+4]),u=Math.max(u,e[c+5]),l<e[c+5]?(o=e[c+4],l=e[c+5]):l===e[c+5]&&(o=h(o,e[c+4]));else{var f=Mi.bezierBoundingBox.apply(Mi,[n,i].concat(xe(e.slice(c,c+6))));a=Math.min(a,f[0]),r=Math.min(r,f[1]),s=Math.max(s,f[2]),u=Math.max(u,f[3]),l<f[3]?(o=f[2],l=f[3]):l===f[3]&&(o=h(o,f[2]))}n=e[c+4],i=e[c+5]}var v=a-Oe(Bd,this),p=r-Oe(Bd,this),g=s-a+2*Oe(Bd,this),D=u-r+2*Oe(Bd,this);We(Md,this,{x:v,y:p,width:g,height:D,lastPoint:[o,l]})}var Hd=(Rt=new WeakMap,Nt=new WeakMap,Ot=new WeakMap,Wt=new WeakMap,jt=new WeakMap,Ht=new WeakMap,zt=new WeakMap,Vt=new WeakMap,Ut=new WeakMap,Gt=new WeakMap,qt=new WeakMap,Xt=new WeakMap,Kt=new WeakSet,It=function(){function t(e){var n,i=e.editor,a=void 0===i?null:i,r=e.uiManager,s=void 0===r?null:r;Qe(this,t),Me(this,Kt),Re(this,Rt,je(Kt,this,Ud).bind(this)),Re(this,Nt,je(Kt,this,qd).bind(this)),Re(this,Ot,null),Re(this,Wt,null),Re(this,jt,void 0),Re(this,Ht,null),Re(this,zt,!1),Re(this,Vt,!1),Re(this,Ut,null),Re(this,Gt,void 0),Re(this,qt,null),Re(this,Xt,void 0),a?(We(Vt,this,!1),We(Xt,this,Fn.HIGHLIGHT_COLOR),We(Ut,this,a)):(We(Vt,this,!0),We(Xt,this,Fn.HIGHLIGHT_DEFAULT_COLOR)),We(qt,this,(null==a?void 0:a._uiManager)||s),We(Gt,this,Oe(qt,this)._eventBus),We(jt,this,(null==a?void 0:a.color)||(null===(n=Oe(qt,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98")}return Ke(t,[{key:"renderButton",value:function(){var t=We(Ot,this,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);var e=Oe(qt,this)._signal;t.addEventListener("click",je(Kt,this,Gd).bind(this),{signal:e}),t.addEventListener("keydown",Oe(Rt,this),{signal:e});var n=We(Wt,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=Oe(jt,this),t.append(n),t}},{key:"renderMainDropdown",value:function(){var t=We(Ht,this,je(Kt,this,zd).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}},{key:"_colorSelectFromKeyboard",value:function(t){if(t.target!==Oe(Ot,this)){var e=t.target.getAttribute("data-color");e&&je(Kt,this,Vd).call(this,e,t)}else je(Kt,this,Gd).call(this,t)}},{key:"_moveToNext",value:function(t){var e,n;Be(Kt,this,Xd)?t.target!==Oe(Ot,this)?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(n=Oe(Ht,this).firstChild)||void 0===n||n.focus():je(Kt,this,Gd).call(this,t)}},{key:"_moveToPrevious",value:function(t){var e,n;t.target!==(null===(e=Oe(Ht,this))||void 0===e?void 0:e.firstChild)&&t.target!==Oe(Ot,this)?(Be(Kt,this,Xd)||je(Kt,this,Gd).call(this,t),null===(n=t.target.previousSibling)||void 0===n||n.focus()):Be(Kt,this,Xd)&&this._hideDropdownFromKeyboard()}},{key:"_moveToBeginning",value:function(t){var e;Be(Kt,this,Xd)?null===(e=Oe(Ht,this).firstChild)||void 0===e||e.focus():je(Kt,this,Gd).call(this,t)}},{key:"_moveToEnd",value:function(t){var e;Be(Kt,this,Xd)?null===(e=Oe(Ht,this).lastChild)||void 0===e||e.focus():je(Kt,this,Gd).call(this,t)}},{key:"hideDropdown",value:function(){var t;null===(t=Oe(Ht,this))||void 0===t||t.classList.add("hidden"),window.removeEventListener("pointerdown",Oe(Nt,this))}},{key:"_hideDropdownFromKeyboard",value:function(){var t;Oe(Vt,this)||(Be(Kt,this,Xd)?(this.hideDropdown(),Oe(Ot,this).focus({preventScroll:!0,focusVisible:Oe(zt,this)})):null===(t=Oe(Ut,this))||void 0===t||t.unselect())}},{key:"updateColor",value:function(t){if(Oe(Wt,this)&&(Oe(Wt,this).style.backgroundColor=t),Oe(Ht,this)){var e,n=Oe(qt,this).highlightColors.values(),i=Ue(Oe(Ht,this).children);try{for(i.s();!(e=i.n()).done;){e.value.setAttribute("aria-selected",n.next().value===t)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"destroy",value:function(){var t,e;null===(t=Oe(Ot,this))||void 0===t||t.remove(),We(Ot,this,null),We(Wt,this,null),null===(e=Oe(Ht,this))||void 0===e||e.remove(),We(Ht,this,null)}}],[{key:"_keyboardManager",get:function(){return gi(this,"_keyboardManager",new Cr([[["Escape","mac+Escape"],t.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],t.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],t.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],t.prototype._moveToPrevious],[["Home","mac+Home"],t.prototype._moveToBeginning],[["End","mac+End"],t.prototype._moveToEnd]]))}}])}());function zd(){var t=document.createElement("div"),e=Oe(qt,this)._signal;t.addEventListener("contextmenu",Ra,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");var n,i=Ue(Oe(qt,this).highlightColors);try{for(i.s();!(n=i.n()).done;){var a=He(n.value,2),r=a[0],s=a[1],u=document.createElement("button");u.tabIndex="0",u.role="option",u.setAttribute("data-color",s),u.title=r,u.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-".concat(r));var o=document.createElement("span");u.append(o),o.className="swatch",o.style.backgroundColor=s,u.setAttribute("aria-selected",s===Oe(jt,this)),u.addEventListener("click",je(Kt,this,Vd).bind(this,s),{signal:e}),t.append(u)}}catch(t){i.e(t)}finally{i.f()}return t.addEventListener("keydown",Oe(Rt,this),{signal:e}),t}function Vd(t,e){e.stopPropagation(),Oe(Gt,this).dispatch("switchannotationeditorparams",{source:this,type:Oe(Xt,this),value:t})}function Ud(t){It._keyboardManager.exec(this,t)}function Gd(t){if(Be(Kt,this,Xd))this.hideDropdown();else if(We(zt,this,0===t.detail),window.addEventListener("pointerdown",Oe(Nt,this),{signal:Oe(qt,this)._signal}),Oe(Ht,this))Oe(Ht,this).classList.remove("hidden");else{var e=We(Ht,this,je(Kt,this,zd).call(this));Oe(Ot,this).append(e)}}function qd(t){var e;null!==(e=Oe(Ht,this))&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}function Xd(t){return Oe(Ht,t)&&!Oe(Ht,t).classList.contains("hidden")}var Kd=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,$d=new WeakMap,tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,af=new WeakMap,rf=new WeakMap,sf=new WeakMap,uf=new WeakMap,of=new WeakMap,lf=new WeakMap,hf=new WeakMap,cf=new WeakMap,df=new WeakMap,ff=new WeakMap,vf=new WeakSet,pf=function(){function t(e){var n;return Qe(this,t),Me(n=Je(this,t,[we(we({},e),{},{name:"highlightEditor"})]),vf),Re(n,Kd,null),Re(n,Yd,0),Re(n,Qd,void 0),Re(n,Jd,null),Re(n,Zd,null),Re(n,$d,null),Re(n,tf,null),Re(n,ef,0),Re(n,nf,null),Re(n,af,null),Re(n,rf,null),Re(n,sf,!1),Re(n,uf,je(vf,n,wf).bind(n)),Re(n,of,null),Re(n,lf,void 0),Re(n,hf,null),Re(n,cf,""),Re(n,df,void 0),Re(n,ff,""),n.color=e.color||t._defaultColor,We(df,n,e.thickness||t._defaultThickness),We(lf,n,e.opacity||t._defaultOpacity),We(Qd,n,e.boxes||null),We(ff,n,e.methodOfCreation||""),We(cf,n,e.text||""),n._isDraggable=!1,e.highlightId>-1?(We(sf,n,!0),je(vf,n,Df).call(n,e),je(vf,n,kf).call(n)):(We(Kd,n,e.anchorNode),We(Yd,n,e.anchorOffset),We(tf,n,e.focusNode),We(ef,n,e.focusOffset),je(vf,n,gf).call(n),je(vf,n,kf).call(n),n.rotate(n.rotation)),n}return tn(t,Ms),Ke(t,[{key:"telemetryInitialData",get:function(){return{action:"added",type:Oe(sf,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:Oe(df,this),methodOfCreation:Oe(ff,this)}}},{key:"telemetryFinalData",get:function(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}},{key:"translateInPage",value:function(t,e){}},{key:"toolbarPosition",get:function(){return Oe(of,this)}},{key:"updateParams",value:function(t,e){switch(t){case Fn.HIGHLIGHT_COLOR:je(vf,this,mf).call(this,e);break;case Fn.HIGHLIGHT_THICKNESS:je(vf,this,yf).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[Fn.HIGHLIGHT_COLOR,this.color||t._defaultColor],[Fn.HIGHLIGHT_THICKNESS,Oe(df,this)||t._defaultThickness],[Fn.HIGHLIGHT_FREE,Oe(sf,this)]]}},{key:"addEditToolbar",value:(e=Ie(Le().mark((function e(){var n;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t,"addEditToolbar",this,3)([]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return this._uiManager.highlightColors&&(We(Zd,this,new Hd({editor:this})),n.addColorPicker(Oe(Zd,this))),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"disableEditing",value:function(){Fe(t,"disableEditing",this,3)([]),this.div.classList.toggle("disabled",!0)}},{key:"enableEditing",value:function(){Fe(t,"enableEditing",this,3)([]),this.div.classList.toggle("disabled",!1)}},{key:"fixAndSetPosition",value:function(){return Fe(t,"fixAndSetPosition",this,3)([je(vf,this,Ff).call(this)])}},{key:"getBaseTranslation",value:function(){return[0,0]}},{key:"getRect",value:function(e,n){return Fe(t,"getRect",this,3)([e,n,je(vf,this,Ff).call(this)])}},{key:"onceAdded",value:function(){this.parent.addUndoableEditor(this),this.div.focus()}},{key:"remove",value:function(){je(vf,this,bf).call(this),this._reportTelemetry({action:"deleted"}),Fe(t,"remove",this,3)([])}},{key:"rebuild",value:function(){this.parent&&(Fe(t,"rebuild",this,3)([]),null!==this.div&&(je(vf,this,kf).call(this),this.isAttachedToDOM||this.parent.add(this)))}},{key:"setParent",value:function(e){var n=!1;if(this.parent&&!e)je(vf,this,bf).call(this);else if(e){var i;je(vf,this,kf).call(this,e),n=!this.parent&&(null===(i=this.div)||void 0===i?void 0:i.classList.contains("selectedEditor"))}Fe(t,"setParent",this,3)([e]),this.show(this._isVisible),n&&this.select()}},{key:"rotate",value:function(e){var n,i=this.parent.drawLayer;Oe(sf,this)?(e=(e-this.rotation+360)%360,n=Ef.call(t,Oe(af,this).box,e)):n=Ef.call(t,this,e),i.rotate(Oe(rf,this),e),i.rotate(Oe(hf,this),e),i.updateBox(Oe(rf,this),n),i.updateBox(Oe(hf,this),Ef.call(t,Oe($d,this).box,e))}},{key:"render",value:function(){if(this.div)return this.div;var e=Fe(t,"render",this,3)([]);Oe(cf,this)&&(e.setAttribute("aria-label",Oe(cf,this)),e.setAttribute("role","mark")),Oe(sf,this)?e.classList.add("free"):this.div.addEventListener("keydown",Oe(uf,this),{signal:this._uiManager._signal});var n=We(nf,this,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=Oe(Jd,this);var i=He(this.parentDimensions,2),a=i[0],r=i[1];return this.setDims(this.width*a,this.height*r),lr(this,Oe(nf,this),["pointerover","pointerleave"]),this.enableEditing(),e}},{key:"pointerover",value:function(){this.parent.drawLayer.addClass(Oe(hf,this),"hovered")}},{key:"pointerleave",value:function(){this.parent.drawLayer.removeClass(Oe(hf,this),"hovered")}},{key:"_moveCaret",value:function(t){switch(this.parent.unselect(this),t){case 0:case 2:je(vf,this,Cf).call(this,!0);break;case 1:case 3:je(vf,this,Cf).call(this,!1)}}},{key:"select",value:function(){var e,n;Fe(t,"select",this,3)([]),Oe(hf,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(Oe(hf,this),"hovered"),null===(n=this.parent)||void 0===n||n.drawLayer.addClass(Oe(hf,this),"selected"))}},{key:"unselect",value:function(){var e;Fe(t,"unselect",this,3)([]),Oe(hf,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(Oe(hf,this),"selected"),Oe(sf,this)||je(vf,this,Cf).call(this,!1))}},{key:"_mustFixPosition",get:function(){return!Oe(sf,this)}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;Fe(t,"show",this,3)([e]),this.parent&&(this.parent.drawLayer.show(Oe(rf,this),e),this.parent.drawLayer.show(Oe(hf,this),e))}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;var e=this.getRect(0,0),n=Ms._colorManager.convert(this.color);return{annotationType:Cn.HIGHLIGHT,color:n,opacity:Oe(lf,this),thickness:Oe(df,this),quadPoints:je(vf,this,_f).call(this),outlines:je(vf,this,xf).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:je(vf,this,Ff).call(this),structTreeParentId:this._structTreeParentId}}}],[{key:"_keyboardManager",get:function(){var e=t.prototype;return gi(this,"_keyboardManager",new Cr([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}},{key:"computeTelemetryFinalData",value:function(t){return{numberOfColors:t.get("color").size}}},{key:"initialize",value:function(e,n){var i;Ms.initialize(e,n),t._defaultColor||(t._defaultColor=(null===(i=n.highlightColors)||void 0===i?void 0:i.values().next().value)||"#fff066")}},{key:"updateDefaultParams",value:function(e,n){switch(e){case Fn.HIGHLIGHT_DEFAULT_COLOR:t._defaultColor=n;break;case Fn.HIGHLIGHT_THICKNESS:t._defaultThickness=n}}},{key:"defaultPropertiesToUpdate",get:function(){return[[Fn.HIGHLIGHT_DEFAULT_COLOR,t._defaultColor],[Fn.HIGHLIGHT_THICKNESS,t._defaultThickness]]}},{key:"startHighlighting",value:function(e,n,i){var a=this,r=i.target,s=i.x,u=i.y,o=r.getBoundingClientRect(),l=o.x,h=o.y,c=o.width,d=o.height,f=function(n){je(t,a,Sf).call(a,e,n)},v=e._signal,p={capture:!0,passive:!1,signal:v},g=function(t){t.preventDefault(),t.stopPropagation()},D=function(n){r.removeEventListener("pointermove",f),window.removeEventListener("blur",D),window.removeEventListener("pointerup",D),window.removeEventListener("pointerdown",g,p),window.removeEventListener("contextmenu",Ra),je(t,a,Mf).call(a,e,n)};window.addEventListener("blur",D,{signal:v}),window.addEventListener("pointerup",D,{signal:v}),window.addEventListener("pointerdown",g,p),window.addEventListener("contextmenu",Ra,{signal:v}),r.addEventListener("pointermove",f,{signal:v}),this._freeHighlight=new Cd({x:s,y:u},[l,h,c,d],e.scale,this._defaultThickness/2,n,.001);var m=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0);this._freeHighlightId=m.id,this._freeHighlightClipId=m.clipPathId}},{key:"deserialize",value:function(e,n,i){var a=Fe(t,"deserialize",this,2)([e,n,i]),r=He(e.rect,4),s=r[0],u=r[1],o=r[2],l=r[3],h=e.color,c=e.quadPoints;a.color=Mi.makeHexColor.apply(Mi,xe(h)),We(lf,a,e.opacity);var d=He(a.pageDimensions,2),f=d[0],v=d[1];a.width=(o-s)/f,a.height=(l-u)/v;for(var p=We(Qd,a,[]),g=0;g<c.length;g+=8)p.push({x:(c[4]-o)/f,y:(l-(1-c[g+5]))/v,width:(c[g+2]-c[g])/f,height:(c[g+5]-c[g+1])/v});return je(vf,a,gf).call(a),a}},{key:"canCreateNewEmptyEditor",value:function(){return!1}}]);var e}();function gf(){var t=new ed(Oe(Qd,this),.001);We(af,this,t.getOutlines());var e=Oe(af,this).box;this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height;var n=new ed(Oe(Qd,this),.0025,.001,"ltr"===this._uiManager.direction);We($d,this,n.getOutlines());var i=Oe($d,this).box.lastPoint;We(of,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function Df(t){var e=t.highlightOutlines,n=t.highlightId,i=t.clipPathId;We(af,this,e);if(We($d,this,e.getNewOutline(Oe(df,this)/2+1.5,.0025)),n>=0)We(rf,this,n),We(Jd,this,i),this.parent.drawLayer.finalizeLine(n,e),We(hf,this,this.parent.drawLayer.highlightOutline(Oe($d,this)));else if(this.parent){var a=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(Oe(rf,this),e),this.parent.drawLayer.updateBox(Oe(rf,this),Ef.call(Yt,Oe(af,this).box,(a-this.rotation+360)%360)),this.parent.drawLayer.updateLine(Oe(hf,this),Oe($d,this)),this.parent.drawLayer.updateBox(Oe(hf,this),Ef.call(Yt,Oe($d,this).box,a))}var r=e.box,s=r.x,u=r.y,o=r.width,l=r.height;switch(this.rotation){case 0:this.x=s,this.y=u,this.width=o,this.height=l;break;case 90:var h=He(this.parentDimensions,2),c=h[0],d=h[1];this.x=u,this.y=1-s,this.width=o*d/c,this.height=l*c/d;break;case 180:this.x=1-s,this.y=1-u,this.width=o,this.height=l;break;case 270:var f=He(this.parentDimensions,2),v=f[0],p=f[1];this.x=1-u,this.y=s,this.width=o*p/v,this.height=l*v/p}var g=Oe($d,this).box.lastPoint;We(of,this,[(g[0]-s)/o,(g[1]-u)/l])}function mf(t){var e=this,n=function(t){var n,i;e.color=t,null===(n=e.parent)||void 0===n||n.drawLayer.changeColor(Oe(rf,e),t),null===(i=Oe(Zd,e))||void 0===i||i.updateColor(t)},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}function yf(t){var e=this,n=Oe(df,this),i=function(t){We(df,e,t),je(vf,e,Af).call(e,t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}function Af(t){if(Oe(sf,this)){je(vf,this,Df).call(this,{highlightOutlines:Oe(af,this).getNewOutline(t/2)}),this.fixAndSetPosition();var e=He(this.parentDimensions,2),n=e[0],i=e[1];this.setDims(this.width*n,this.height*i)}}function bf(){null!==Oe(rf,this)&&this.parent&&(this.parent.drawLayer.remove(Oe(rf,this)),We(rf,this,null),this.parent.drawLayer.remove(Oe(hf,this)),We(hf,this,null))}function kf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;if(null===Oe(rf,this)){var e=t.drawLayer.highlight(Oe(af,this),this.color,Oe(lf,this));Ce(We,[rf,this])._=e.id,Ce(We,[Jd,this])._=e.clipPathId,We(hf,this,t.drawLayer.highlightOutline(Oe($d,this))),Oe(nf,this)&&(Oe(nf,this).style.clipPath=Oe(Jd,this))}}function Ef(t,e){var n=t.x,i=t.y,a=t.width,r=t.height;switch(e){case 90:return{x:1-i-r,y:n,width:r,height:a};case 180:return{x:1-n-a,y:1-i-r,width:a,height:r};case 270:return{x:i,y:1-n-a,width:r,height:a}}return{x:n,y:i,width:a,height:r}}function wf(t){Yt._keyboardManager.exec(this,t)}function Cf(t){if(Oe(Kd,this)){var e=window.getSelection();t?e.setPosition(Oe(Kd,this),Oe(Yd,this)):e.setPosition(Oe(tf,this),Oe(ef,this))}}function Ff(){return Oe(sf,this)?this.rotation:0}function _f(){if(Oe(sf,this))return null;var t,e=He(this.pageDimensions,2),n=e[0],i=e[1],a=He(this.pageTranslation,2),r=a[0],s=a[1],u=Oe(Qd,this),o=new Float32Array(8*u.length),l=0,h=Ue(u);try{for(h.s();!(t=h.n()).done;){var c=t.value,d=c.x,f=c.y,v=c.width,p=c.height,g=d*n+r,D=(1-f-p)*i+s;o[l]=o[l+4]=g,o[l+1]=o[l+3]=D,o[l+2]=o[l+6]=g+v*n,o[l+5]=o[l+7]=D+p*i,l+=8}}catch(t){h.e(t)}finally{h.f()}return o}function xf(t){return Oe(af,this).serialize(t,je(vf,this,Ff).call(this))}function Sf(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}function Mf(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}Yt=pf,Pe(pf,"_defaultColor",null),Pe(pf,"_defaultOpacity",1),Pe(pf,"_defaultThickness",12),Pe(pf,"_l10nPromise",void 0),Pe(pf,"_type","highlight"),Pe(pf,"_editorType",Cn.HIGHLIGHT),Pe(pf,"_freeHighlightId",-1),Pe(pf,"_freeHighlight",null),Pe(pf,"_freeHighlightClipId","");var Bf=new WeakMap,Pf=new WeakMap,Lf=new WeakMap,Tf=new WeakMap,If=new WeakMap,Rf=new WeakMap,Nf=new WeakMap,Of=new WeakMap,Wf=new WeakMap,jf=new WeakMap,Hf=new WeakMap,zf=new WeakMap,Vf=new WeakMap,Uf=new WeakMap,Gf=new WeakMap,qf=new WeakSet,Xf=function(){function t(e){var n;return Qe(this,t),Me(n=Je(this,t,[we(we({},e),{},{name:"inkEditor"})]),qf),Re(n,Bf,0),Re(n,Pf,0),Re(n,Lf,n.canvasPointermove.bind(n)),Re(n,Tf,n.canvasPointerleave.bind(n)),Re(n,If,n.canvasPointerup.bind(n)),Re(n,Rf,n.canvasPointerdown.bind(n)),Re(n,Nf,null),Re(n,Of,new Path2D),Re(n,Wf,!1),Re(n,jf,!1),Re(n,Hf,!1),Re(n,zf,null),Re(n,Vf,0),Re(n,Uf,0),Re(n,Gf,null),n.color=e.color||null,n.thickness=e.thickness||null,n.opacity=e.opacity||null,n.paths=[],n.bezierPath2D=[],n.allRawPaths=[],n.currentPath=[],n.scaleFactor=1,n.translationX=n.translationY=0,n.x=0,n.y=0,n._willKeepAspectRatio=!0,n}return tn(t,Ms),Ke(t,[{key:"updateParams",value:function(t,e){switch(t){case Fn.INK_THICKNESS:je(qf,this,Kf).call(this,e);break;case Fn.INK_COLOR:je(qf,this,Yf).call(this,e);break;case Fn.INK_OPACITY:je(qf,this,Qf).call(this,e)}}},{key:"propertiesToUpdate",get:function(){var e;return[[Fn.INK_THICKNESS,this.thickness||t._defaultThickness],[Fn.INK_COLOR,this.color||t._defaultColor||Ms._defaultLineColor],[Fn.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:t._defaultOpacity))]]}},{key:"rebuild",value:function(){this.parent&&(Fe(t,"rebuild",this,3)([]),null!==this.div&&(this.canvas||(je(qf,this,ov).call(this),je(qf,this,lv).call(this)),this.isAttachedToDOM||(this.parent.add(this),je(qf,this,hv).call(this)),je(qf,this,yv).call(this)))}},{key:"remove",value:function(){var e;null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Oe(Nf,this)&&(clearTimeout(Oe(Nf,this)),We(Nf,this,null)),null===(e=Oe(zf,this))||void 0===e||e.disconnect(),We(zf,this,null),Fe(t,"remove",this,3)([]))}},{key:"setParent",value:function(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),Fe(t,"setParent",this,3)([e])}},{key:"onScaleChanging",value:function(){var t=He(this.parentDimensions,2),e=t[0],n=t[1],i=this.width*e,a=this.height*n;this.setDimensions(i,a)}},{key:"enableEditMode",value:function(){Oe(Wf,this)||null===this.canvas||(Fe(t,"enableEditMode",this,3)([]),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",Oe(Rf,this),{signal:this._uiManager._signal}))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&null!==this.canvas&&(Fe(t,"disableEditMode",this,3)([]),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Oe(Rf,this)))}},{key:"onceAdded",value:function(){this._isDraggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}},{key:"commit",value:function(){Oe(Wf,this)||(Fe(t,"commit",this,3)([]),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),We(Wf,this,!0),this.div.classList.add("disabled"),je(qf,this,yv).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}},{key:"focusin",value:function(e){this._focusEventsAllowed&&(Fe(t,"focusin",this,3)([e]),this.enableEditMode())}},{key:"canvasPointerdown",value:function(t){0===t.button&&this.isInEditMode()&&!Oe(Wf,this)&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),je(qf,this,$f).call(this,t.offsetX,t.offsetY))}},{key:"canvasPointermove",value:function(t){t.preventDefault(),je(qf,this,tv).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function(t){t.preventDefault(),je(qf,this,uv).call(this,t)}},{key:"canvasPointerleave",value:function(t){je(qf,this,uv).call(this,t)}},{key:"isResizable",get:function(){return!this.isEmpty()&&Oe(Wf,this)}},{key:"render",value:function(){if(this.div)return this.div;var e,n;this.width&&(e=this.x,n=this.y),Fe(t,"render",this,3)([]),this.div.setAttribute("data-l10n-id","pdfjs-ink");var i=He(je(qf,this,Jf).call(this),4),a=i[0],r=i[1],s=i[2],u=i[3];if(this.setAt(a,r,0,0),this.setDims(s,u),je(qf,this,ov).call(this),this.width){var o=He(this.parentDimensions,2),l=o[0],h=o[1];this.setAspectRatio(this.width*l,this.height*h),this.setAt(e*l,n*h,this.width*l,this.height*h),We(Hf,this,!0),je(qf,this,hv).call(this),this.setDims(this.width*l,this.height*h),je(qf,this,sv).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return je(qf,this,lv).call(this),this.div}},{key:"setDimensions",value:function(t,e){var n=Math.round(t),i=Math.round(e);if(Oe(Vf,this)!==n||Oe(Uf,this)!==i){We(Vf,this,n),We(Uf,this,i),this.canvas.style.visibility="hidden";var a=He(this.parentDimensions,2),r=a[0],s=a[1];this.width=t/r,this.height=e/s,this.fixAndSetPosition(),Oe(Wf,this)&&je(qf,this,cv).call(this,t,e),je(qf,this,hv).call(this),je(qf,this,sv).call(this),this.canvas.style.visibility="visible",this.fixDims()}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var t=this.getRect(0,0),e=Ms._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Cn.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:je(qf,this,gv).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}],[{key:"initialize",value:function(t,e){Ms.initialize(t,e)}},{key:"updateDefaultParams",value:function(e,n){switch(e){case Fn.INK_THICKNESS:t._defaultThickness=n;break;case Fn.INK_COLOR:t._defaultColor=n;break;case Fn.INK_OPACITY:t._defaultOpacity=n/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[Fn.INK_THICKNESS,t._defaultThickness],[Fn.INK_COLOR,t._defaultColor||Ms._defaultLineColor],[Fn.INK_OPACITY,Math.round(100*t._defaultOpacity)]]}},{key:"deserialize",value:function(e,n,i){if(e instanceof gc)return null;var a=Fe(t,"deserialize",this,2)([e,n,i]);a.thickness=e.thickness,a.color=Mi.makeHexColor.apply(Mi,xe(e.color)),a.opacity=e.opacity;var r=He(a.pageDimensions,2),s=r[0],u=r[1],o=a.width*s,l=a.height*u,h=a.parentScale,c=e.thickness/2;We(Wf,a,!0),We(Vf,a,Math.round(o)),We(Uf,a,Math.round(l));var d,f=e.paths,v=e.rect,p=e.rotation,g=Ue(f);try{for(g.s();!(d=g.n()).done;){var D=d.value.bezier;D=pv.call(t,D,v,p);var m=[];a.paths.push(m);for(var y=h*(D[0]-c),A=h*(D[1]-c),b=2,k=D.length;b<k;b+=6){var E=h*(D[b]-c),w=h*(D[b+1]-c),C=h*(D[b+2]-c),F=h*(D[b+3]-c),_=h*(D[b+4]-c),x=h*(D[b+5]-c);m.push([[y,A],[E,w],[C,F],[_,x]]),y=_,A=x}var S=je(t,this,fv).call(this,m);a.bezierPath2D.push(S)}}catch(t){g.e(t)}finally{g.f()}var M=je(qf,a,Dv).call(a);return We(Pf,a,Math.max(Ms.MIN_SIZE,M[2]-M[0])),We(Bf,a,Math.max(Ms.MIN_SIZE,M[3]-M[1])),je(qf,a,cv).call(a,o,l),a}}])}();function Kf(t){var e=this,n=function(t){e.thickness=t,je(qf,e,yv).call(e)},i=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Yf(t){var e=this,n=function(t){e.color=t,je(qf,e,sv).call(e)},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fn.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Qf(t){var e=this,n=function(t){e.opacity=t,je(qf,e,sv).call(e)};t/=100;var i=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fn.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Jf(){var t=this.parentRotation,e=He(this.parentDimensions,2),n=e[0],i=e[1];switch(t){case 90:return[0,i,i,n];case 180:return[n,i,n,i];case 270:return[n,0,i,n];default:return[0,0,n,i]}}function Zf(){var t=this.ctx,e=this.color,n=this.opacity,i=this.thickness,a=this.parentScale,r=this.scaleFactor;t.lineWidth=i*a/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle="".concat(e).concat(function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}(n))}function $f(t,e){var n,i=this,a=this._uiManager._signal;(this.canvas.addEventListener("contextmenu",Ra,{signal:a}),this.canvas.addEventListener("pointerleave",Oe(Tf,this),{signal:a}),this.canvas.addEventListener("pointermove",Oe(Lf,this),{signal:a}),this.canvas.addEventListener("pointerup",Oe(If,this),{signal:a}),this.canvas.removeEventListener("pointerdown",Oe(Rf,this)),this.isEditing=!0,Oe(Hf,this))||(We(Hf,this,!0),je(qf,this,hv).call(this),this.thickness||(this.thickness=Qt._defaultThickness),this.color||(this.color=Qt._defaultColor||Ms._defaultLineColor),null!==(n=this.opacity)&&void 0!==n||(this.opacity=Qt._defaultOpacity));this.currentPath.push([t,e]),We(jf,this,!1),je(qf,this,Zf).call(this),We(Gf,this,(function(){je(qf,i,iv).call(i),Oe(Gf,i)&&window.requestAnimationFrame(Oe(Gf,i))})),window.requestAnimationFrame(Oe(Gf,this))}function tv(t,e){var n,i=He(this.currentPath.at(-1),2),a=i[0],r=i[1];if(!(this.currentPath.length>1&&t===a&&e===r)){var s,u,o=this.currentPath,l=Oe(Of,this);if(o.push([t,e]),We(jf,this,!0),o.length<=2)return(s=l).moveTo.apply(s,xe(o[0])),void l.lineTo(t,e);if(3===o.length)We(Of,this,l=new Path2D),(u=l).moveTo.apply(u,xe(o[0]));(n=je(qf,this,av)).call.apply(n,[this,l].concat(xe(o.at(-3)),xe(o.at(-2)),[t,e]))}}function ev(){var t;if(0!==this.currentPath.length){var e=this.currentPath.at(-1);(t=Oe(Of,this)).lineTo.apply(t,xe(e))}}function nv(t,e){var n,i=this;if(We(Gf,this,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),je(qf,this,tv).call(this,t,e),je(qf,this,ev).call(this),1!==this.currentPath.length)n=je(qf,this,rv).call(this);else{var a=[t,e];n=[[a,a.slice(),a.slice(),a]]}var r=Oe(Of,this),s=this.currentPath;this.currentPath=[],We(Of,this,new Path2D);this.addCommands({cmd:function(){i.allRawPaths.push(s),i.paths.push(n),i.bezierPath2D.push(r),i._uiManager.rebuild(i)},undo:function(){i.allRawPaths.pop(),i.paths.pop(),i.bezierPath2D.pop(),0===i.paths.length?i.remove():(i.canvas||(je(qf,i,ov).call(i),je(qf,i,lv).call(i)),je(qf,i,yv).call(i))},mustExec:!0})}function iv(){if(Oe(jf,this)){We(jf,this,!1);Math.ceil(this.thickness*this.parentScale);var t=this.currentPath.slice(-3),e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));Math.min.apply(Math,xe(e)),Math.max.apply(Math,xe(e)),Math.min.apply(Math,xe(n)),Math.max.apply(Math,xe(n));var i=this.ctx;i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);var a,r=Ue(this.bezierPath2D);try{for(r.s();!(a=r.n()).done;){var s=a.value;i.stroke(s)}}catch(t){r.e(t)}finally{r.f()}i.stroke(Oe(Of,this)),i.restore()}}function av(t,e,n,i,a,r,s){var u=(e+i)/2,o=(n+a)/2,l=(i+r)/2,h=(a+s)/2;t.bezierCurveTo(u+2*(i-u)/3,o+2*(a-o)/3,l+2*(i-l)/3,h+2*(a-h)/3,l,h)}function rv(){var t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];var e,n=[],i=He(t[0],2),a=i[0],r=i[1];for(e=1;e<t.length-2;e++){var s=He(t[e],2),u=s[0],o=s[1],l=He(t[e+1],2),h=(u+l[0])/2,c=(o+l[1])/2,d=[a+2*(u-a)/3,r+2*(o-r)/3],f=[h+2*(u-h)/3,c+2*(o-c)/3];n.push([[a,r],d,f,[h,c]]),a=h,r=c}var v=He(t[e],2),p=v[0],g=v[1],D=He(t[e+1],2),m=D[0],y=D[1],A=[a+2*(p-a)/3,r+2*(g-r)/3],b=[m+2*(p-m)/3,y+2*(g-y)/3];return n.push([[a,r],A,b,[m,y]]),n}function sv(){if(this.isEmpty())je(qf,this,dv).call(this);else{je(qf,this,Zf).call(this);var t=this.canvas,e=this.ctx;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),je(qf,this,dv).call(this);var n,i=Ue(this.bezierPath2D);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.stroke(a)}}catch(t){i.e(t)}finally{i.f()}}}function uv(t){var e=this;this.canvas.removeEventListener("pointerleave",Oe(Tf,this)),this.canvas.removeEventListener("pointermove",Oe(Lf,this)),this.canvas.removeEventListener("pointerup",Oe(If,this)),this.canvas.addEventListener("pointerdown",Oe(Rf,this),{signal:this._uiManager._signal}),Oe(Nf,this)&&clearTimeout(Oe(Nf,this)),We(Nf,this,setTimeout((function(){We(Nf,e,null),e.canvas.removeEventListener("contextmenu",Ra)}),10)),je(qf,this,nv).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function ov(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function lv(){var t=this;We(zf,this,new ResizeObserver((function(e){var n=e[0].contentRect;n.width&&n.height&&t.setDimensions(n.width,n.height)}))),Oe(zf,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(function(){var e;null===(e=Oe(zf,t))||void 0===e||e.disconnect(),We(zf,t,null)}),{once:!0})}function hv(){if(Oe(Hf,this)){var t=He(this.parentDimensions,2),e=t[0],n=t[1];this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),je(qf,this,dv).call(this)}}function cv(t,e){var n=je(qf,this,mv).call(this),i=(t-n)/Oe(Pf,this),a=(e-n)/Oe(Bf,this);this.scaleFactor=Math.min(i,a)}function dv(){var t=je(qf,this,mv).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function fv(t){for(var e=new Path2D,n=0,i=t.length;n<i;n++){var a=He(t[n],4),r=a[0],s=a[1],u=a[2],o=a[3];0===n&&e.moveTo.apply(e,xe(r)),e.bezierCurveTo(s[0],s[1],u[0],u[1],o[0],o[1])}return e}function vv(t,e,n){var i=He(e,4),a=i[0],r=i[1],s=i[2],u=i[3];switch(n){case 0:for(var o=0,l=t.length;o<l;o+=2)t[o]+=a,t[o+1]=u-t[o+1];break;case 90:for(var h=0,c=t.length;h<c;h+=2){var d=t[h];t[h]=t[h+1]+a,t[h+1]=d+r}break;case 180:for(var f=0,v=t.length;f<v;f+=2)t[f]=s-t[f],t[f+1]+=r;break;case 270:for(var p=0,g=t.length;p<g;p+=2){var D=t[p];t[p]=s-t[p+1],t[p+1]=u-D}break;default:throw new Error("Invalid rotation")}return t}function pv(t,e,n){var i=He(e,4),a=i[0],r=i[1],s=i[2],u=i[3];switch(n){case 0:for(var o=0,l=t.length;o<l;o+=2)t[o]-=a,t[o+1]=u-t[o+1];break;case 90:for(var h=0,c=t.length;h<c;h+=2){var d=t[h];t[h]=t[h+1]-r,t[h+1]=d-a}break;case 180:for(var f=0,v=t.length;f<v;f+=2)t[f]=s-t[f],t[f+1]-=r;break;case 270:for(var p=0,g=t.length;p<g;p+=2){var D=t[p];t[p]=u-t[p+1],t[p+1]=s-D}break;default:throw new Error("Invalid rotation")}return t}function gv(t,e,n,i){var a,r=[],s=this.thickness/2,u=t*e+s,o=t*n+s,l=Ue(this.paths);try{for(l.s();!(a=l.n()).done;){for(var h=a.value,c=[],d=[],f=0,v=h.length;f<v;f++){var p=He(h[f],4),g=p[0],D=p[1],m=p[2],y=p[3];if(g[0]===y[0]&&g[1]===y[1]&&1===v){var A=t*g[0]+u,b=t*g[1]+o;c.push(A,b),d.push(A,b);break}var k=t*g[0]+u,E=t*g[1]+o,w=t*D[0]+u,C=t*D[1]+o,F=t*m[0]+u,_=t*m[1]+o,x=t*y[0]+u,S=t*y[1]+o;0===f&&(c.push(k,E),d.push(k,E)),c.push(w,C,F,_,x,S),d.push(w,C),f===v-1&&d.push(x,S)}r.push({bezier:vv.call(Qt,c,i,this.rotation),points:vv.call(Qt,d,i,this.rotation)})}}catch(t){l.e(t)}finally{l.f()}return r}function Dv(){var t,e=1/0,n=-1/0,i=1/0,a=-1/0,r=Ue(this.paths);try{for(r.s();!(t=r.n()).done;){var s,u=Ue(t.value);try{for(u.s();!(s=u.n()).done;){var o=He(s.value,4),l=o[0],h=o[1],c=o[2],d=o[3],f=Mi.bezierBoundingBox.apply(Mi,xe(l).concat(xe(h),xe(c),xe(d)));e=Math.min(e,f[0]),i=Math.min(i,f[1]),n=Math.max(n,f[2]),a=Math.max(a,f[3])}}catch(t){u.e(t)}finally{u.f()}}}catch(t){r.e(t)}finally{r.f()}return[e,i,n,a]}function mv(){return Oe(Wf,this)?Math.ceil(this.thickness*this.parentScale):0}function yv(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEmpty())if(Oe(Wf,this)){var e=je(qf,this,Dv).call(this),n=je(qf,this,mv).call(this);We(Pf,this,Math.max(Ms.MIN_SIZE,e[2]-e[0])),We(Bf,this,Math.max(Ms.MIN_SIZE,e[3]-e[1]));var i=Math.ceil(n+Oe(Pf,this)*this.scaleFactor),a=Math.ceil(n+Oe(Bf,this)*this.scaleFactor),r=He(this.parentDimensions,2),s=r[0],u=r[1];this.width=i/s,this.height=a/u,this.setAspectRatio(i,a);var o=this.translationX,l=this.translationY;this.translationX=-e[0],this.translationY=-e[1],je(qf,this,hv).call(this),je(qf,this,sv).call(this),We(Vf,this,i),We(Uf,this,a),this.setDims(i,a);var h=t?n/this.scaleFactor/2:0;this.translate(o-this.translationX-h,l-this.translationY-h)}else je(qf,this,sv).call(this)}Qt=Xf,Pe(Xf,"_defaultColor",null),Pe(Xf,"_defaultOpacity",1),Pe(Xf,"_defaultThickness",1),Pe(Xf,"_type","ink"),Pe(Xf,"_editorType",Cn.INK);var Av=new WeakMap,bv=new WeakMap,kv=new WeakMap,Ev=new WeakMap,wv=new WeakMap,Cv=new WeakMap,Fv=new WeakMap,_v=new WeakMap,xv=new WeakMap,Sv=new WeakMap,Mv=new WeakMap,Bv=new WeakMap,Pv=new WeakSet,Lv=function(){function t(e){var n;return Qe(this,t),Me(n=Je(this,t,[we(we({},e),{},{name:"stampEditor"})]),Pv),Re(n,Av,null),Re(n,bv,null),Re(n,kv,null),Re(n,Ev,null),Re(n,wv,null),Re(n,Cv,""),Re(n,Fv,null),Re(n,_v,!1),Re(n,xv,null),Re(n,Sv,null),Re(n,Mv,!1),Re(n,Bv,!1),We(Ev,n,e.bitmapUrl),We(wv,n,e.bitmapFile),n}return tn(t,Ms),Ke(t,[{key:"remove",value:function(){var e,n;Oe(bv,this)&&(We(Av,this,null),this._uiManager.imageManager.deleteId(Oe(bv,this)),null===(e=Oe(Fv,this))||void 0===e||e.remove(),We(Fv,this,null),null===(n=Oe(xv,this))||void 0===n||n.disconnect(),We(xv,this,null),Oe(Sv,this)&&(clearTimeout(Oe(Sv,this)),We(Sv,this,null)));Fe(t,"remove",this,3)([])}},{key:"rebuild",value:function(){this.parent?(Fe(t,"rebuild",this,3)([]),null!==this.div&&(Oe(bv,this)&&null===Oe(Fv,this)&&je(Pv,this,Rv).call(this),this.isAttachedToDOM||this.parent.add(this))):Oe(bv,this)&&je(Pv,this,Rv).call(this)}},{key:"onceAdded",value:function(){this._isDraggable=!0,this.div.focus()}},{key:"isEmpty",value:function(){return!(Oe(kv,this)||Oe(Av,this)||Oe(Ev,this)||Oe(wv,this)||Oe(bv,this))}},{key:"isResizable",get:function(){return!0}},{key:"render",value:function(){if(this.div)return this.div;var e,n;if(this.width&&(e=this.x,n=this.y),Fe(t,"render",this,3)([]),this.div.hidden=!0,this.addAltTextButton(),Oe(Av,this)?je(Pv,this,Nv).call(this):je(Pv,this,Rv).call(this),this.width){var i=He(this.parentDimensions,2),a=i[0],r=i[1];this.setAt(e*a,n*r,this.width*a,this.height*r)}return this.div}},{key:"getImageForAltText",value:function(){return Oe(Fv,this)}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;var n={annotationType:Cn.STAMP,bitmapId:Oe(bv,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Oe(Mv,this),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=je(Pv,this,Vv).call(this,!0),n.accessibilityData=this.altTextData,n;var i=this.altTextData,a=i.decorative,r=i.altText;if(!a&&r&&(n.accessibilityData={type:"Figure",alt:r}),null===e)return n;e.stamps||(e.stamps=new Map);var s=Oe(Mv,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(Oe(bv,this))){if(Oe(Mv,this)){var u=e.stamps.get(Oe(bv,this));s>u.area&&(u.area=s,u.serialized.bitmap.close(),u.serialized.bitmap=je(Pv,this,Vv).call(this,!1))}}else e.stamps.set(Oe(bv,this),{area:s,serialized:n}),n.bitmap=je(Pv,this,Vv).call(this,!1);return n}}],[{key:"initialize",value:function(t,e){Ms.initialize(t,e)}},{key:"supportedTypes",get:function(){return gi(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((function(t){return"image/".concat(t)})))}},{key:"supportedTypesStr",get:function(){return gi(this,"supportedTypesStr",this.supportedTypes.join(","))}},{key:"isHandlingMimeForPasting",value:function(t){return this.supportedTypes.includes(t)}},{key:"paste",value:function(t,e){e.pasteEditor(Cn.STAMP,{bitmapFile:t.getAsFile()})}},{key:"deserialize",value:function(e,n,i){if(e instanceof bc)return null;var a=Fe(t,"deserialize",this,2)([e,n,i]),r=e.rect,s=e.bitmapUrl,u=e.bitmapId,o=e.isSvg,l=e.accessibilityData;u&&i.imageManager.isValidId(u)?We(bv,a,u):We(Ev,a,s),We(Mv,a,o);var h=He(a.pageDimensions,2),c=h[0],d=h[1];return a.width=(r[2]-r[0])/c,a.height=(r[3]-r[1])/d,l&&(a.altTextData=l),a}}])}();function Tv(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(We(Av,this,t.bitmap),e||(We(bv,this,t.id),We(Mv,this,t.isSvg)),t.file&&We(Cv,this,t.file.name),je(Pv,this,Nv).call(this)):this.remove()}function Iv(){We(kv,this,null),this._uiManager.enableWaiting(!1),Oe(Fv,this)&&this.div.focus()}function Rv(){var t=this;if(Oe(bv,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(Oe(bv,this)).then((function(e){return je(Pv,t,Tv).call(t,e,!0)})).finally((function(){return je(Pv,t,Iv).call(t)}));if(Oe(Ev,this)){var e=Oe(Ev,this);return We(Ev,this,null),this._uiManager.enableWaiting(!0),void We(kv,this,this._uiManager.imageManager.getFromUrl(e).then((function(e){return je(Pv,t,Tv).call(t,e)})).finally((function(){return je(Pv,t,Iv).call(t)})))}if(Oe(wv,this)){var n=Oe(wv,this);return We(wv,this,null),this._uiManager.enableWaiting(!0),void We(kv,this,this._uiManager.imageManager.getFromFile(n).then((function(e){return je(Pv,t,Tv).call(t,e)})).finally((function(){return je(Pv,t,Iv).call(t)})))}var i=document.createElement("input");i.type="file",i.accept=Jt.supportedTypesStr;var a=this._uiManager._signal;We(kv,this,new Promise((function(e){i.addEventListener("change",Ie(Le().mark((function n(){var a;return Le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.files&&0!==i.files.length){n.next=4;break}t.remove(),n.next=9;break;case 4:return t._uiManager.enableWaiting(!0),n.next=7,t._uiManager.imageManager.getFromFile(i.files[0]);case 7:a=n.sent,je(Pv,t,Tv).call(t,a);case 9:e();case 10:case"end":return n.stop()}}),n)}))),{signal:a}),i.addEventListener("cancel",(function(){t.remove(),e()}),{signal:a})})).finally((function(){return je(Pv,t,Iv).call(t)}))),i.click()}function Nv(){var t=this.div,e=Oe(Av,this),n=e.width,i=e.height,a=He(this.pageDimensions,2),r=a[0],s=a[1],u=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>u*r||i>u*s){var o=Math.min(u*r/n,u*s/i);n*=o,i*=o}var l=He(this.parentDimensions,2),h=l[0],c=l[1];this.setDims(n*h/r,i*c/s),this._uiManager.enableWaiting(!1);var d=We(Fv,this,document.createElement("canvas"));t.append(d),t.hidden=!1,je(Pv,this,zv).call(this,n,i),je(Pv,this,Uv).call(this),Oe(Bv,this)||(this.parent.addUndoableEditor(this),We(Bv,this,!0)),this._reportTelemetry({action:"inserted_image"}),Oe(Cv,this)&&d.setAttribute("aria-label",Oe(Cv,this))}function Ov(t,e){var n,i=this,a=He(this.parentDimensions,2),r=a[0],s=a[1];this.width=t/r,this.height=e/s,this.setDims(t,e),null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==Oe(Sv,this)&&clearTimeout(Oe(Sv,this));We(Sv,this,setTimeout((function(){We(Sv,i,null),je(Pv,i,zv).call(i,t,e)}),200))}function Wv(t,e){for(var n=Oe(Av,this),i=n.width,a=n.height,r=Oe(Av,this);i>2*t||a>2*e;){var s=i,u=a;i>2*t&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));var o=new OffscreenCanvas(i,a);o.getContext("2d").drawImage(r,0,0,s,u,0,0,i,a),r=o.transferToImageBitmap()}return r}function jv(t,e,n){return Hv.apply(this,arguments)}function Hv(){return(Hv=Ie(Le().mark((function t(e,n,i){var a,r,s,u;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Oe(_v,this)){t.next=2;break}return t.abrupt("return");case 2:return We(_v,this,!0),t.next=5,this._uiManager.isMLEnabledFor("altText");case 5:if(t.sent&&!this.hasAltText()){t.next=8;break}return t.abrupt("return");case 8:return a=new OffscreenCanvas(n,i),(r=a.getContext("2d",{willReadFrequently:!0})).drawImage(e,0,0,e.width,e.height,0,0,n,i),t.next=13,this._uiManager.mlGuess({service:"moz-image-to-text",request:{data:r.getImageData(0,0,n,i).data,width:n,height:i,channels:4}});case 13:s=t.sent,u=(null==s?void 0:s.output)||"",this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1});case 16:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function zv(t,e){t=Math.ceil(t),e=Math.ceil(e);var n=Oe(Fv,this);if(n&&(n.width!==t||n.height!==e)){n.width=t,n.height=e;var i=Oe(Mv,this)?Oe(Av,this):je(Pv,this,Wv).call(this,t,e);je(Pv,this,jv).call(this,i,t,e);var a=n.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(i,0,0,i.width,i.height,0,0,t,e)}}function Vv(t){if(t){if(Oe(Mv,this)){var e=this._uiManager.imageManager.getSvgUrl(Oe(bv,this));if(e)return e}var n=document.createElement("canvas"),i=Oe(Av,this);return n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(Oe(Av,this),0,0),n.toDataURL()}if(Oe(Mv,this)){var a=He(this.pageDimensions,2),r=a[0],s=a[1],u=Math.round(this.width*r*$i.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*$i.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(u,o);return l.getContext("2d").drawImage(Oe(Av,this),0,0,Oe(Av,this).width,Oe(Av,this).height,0,0,u,o),l.transferToImageBitmap()}return structuredClone(Oe(Av,this))}function Uv(){var t=this;this._uiManager._signal&&(We(xv,this,new ResizeObserver((function(e){var n=e[0].contentRect;n.width&&n.height&&je(Pv,t,Ov).call(t,n.width,n.height)}))),Oe(xv,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(function(){var e;null===(e=Oe(xv,t))||void 0===e||e.disconnect(),We(xv,t,null)}),{once:!0}))}Jt=Lv,Pe(Lv,"_type","stamp"),Pe(Lv,"_editorType",Cn.STAMP);var Gv=($t=new WeakMap,te=new WeakMap,ee=new WeakMap,ne=new WeakMap,ie=new WeakMap,ae=new WeakMap,re=new WeakMap,se=new WeakMap,ue=new WeakMap,oe=new WeakMap,le=new WeakMap,he=new WeakMap,ce=new WeakMap,de=new WeakSet,Zt=function(){function t(e){var n=e.uiManager,i=e.pageIndex,a=e.div,r=e.accessibilityManager,s=e.annotationLayer,u=e.drawLayer,o=e.textLayer,l=e.viewport,h=e.l10n;Qe(this,t),Me(this,de),Re(this,$t,void 0),Re(this,te,!1),Re(this,ee,null),Re(this,ne,null),Re(this,ie,null),Re(this,ae,null),Re(this,re,null),Re(this,se,new Map),Re(this,ue,!1),Re(this,oe,!1),Re(this,le,!1),Re(this,he,null),Re(this,ce,void 0);var c=xe(je(Zt,t,fe)._.values());if(!t._initialized){t._initialized=!0;var d,f=Ue(c);try{for(f.s();!(d=f.n()).done;){d.value.initialize(h,n)}}catch(t){f.e(t)}finally{f.f()}}n.registerEditorTypes(c),We(ce,this,n),this.pageIndex=i,this.div=a,We($t,this,r),We(ee,this,s),this.viewport=l,We(he,this,o),this.drawLayer=u,Oe(ce,this).addLayer(this)}return Ke(t,[{key:"isEmpty",get:function(){return 0===Oe(se,this).size}},{key:"isInvisible",get:function(){return this.isEmpty&&Oe(ce,this).getMode()===Cn.NONE}},{key:"updateToolbar",value:function(t){Oe(ce,this).updateToolbar(t)}},{key:"updateMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe(ce,this).getMode();switch(je(de,this,Qv).call(this),e){case Cn.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Cn.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Cn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);var n,i=this.div.classList,a=Ue(je(Zt,t,fe)._.values());try{for(a.s();!(n=a.n()).done;){var r=n.value;i.toggle("".concat(r._type,"Editing"),e===r._editorType)}}catch(t){a.e(t)}finally{a.f()}this.div.hidden=!1}},{key:"hasTextLayer",value:function(t){var e;return t===(null===(e=Oe(he,this))||void 0===e?void 0:e.div)}},{key:"addInkEditorIfNeeded",value:function(t){if(Oe(ce,this).getMode()===Cn.INK){if(!t){var e,n=Ue(Oe(se,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.isEmpty())return void i.setInBackground()}}catch(t){n.e(t)}finally{n.f()}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}},{key:"setEditingState",value:function(t){Oe(ce,this).setEditingState(t)}},{key:"addCommands",value:function(t){Oe(ce,this).addCommands(t)}},{key:"toggleDrawing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!t)}},{key:"togglePointerEvents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}},{key:"toggleAnnotationLayerPointerEvents",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=Oe(ee,this))||void 0===t||t.div.classList.toggle("disabled",!e)}},{key:"enable",value:function(){this.div.tabIndex=0,this.togglePointerEvents(!0);var t,e=new Set,n=Ue(Oe(se,this).values());try{for(n.s();!(t=n.n()).done;){var i=t.value;i.enableEditing(),i.show(!0),i.annotationElementId&&(Oe(ce,this).removeChangedExistingAnnotation(i),e.add(i.annotationElementId))}}catch(t){n.e(t)}finally{n.f()}if(Oe(ee,this)){var a,r=Ue(Oe(ee,this).getEditableAnnotations());try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.hide(),!Oe(ce,this).isDeletedAnnotationElement(s.data.id)&&!e.has(s.data.id)){var u=this.deserialize(s);u&&(this.addOrRebuild(u),u.enableEditing())}}}catch(t){r.e(t)}finally{r.f()}}}},{key:"disable",value:function(){We(le,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);var e,n=new Map,i=new Map,a=Ue(Oe(se,this).values());try{for(a.s();!(e=a.n()).done;){var r,s=e.value;s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(i.set(s.annotationElementId,s),null===(r=this.getEditableAnnotation(s.annotationElementId))||void 0===r||r.show(),s.remove()):n.set(s.annotationElementId,s))}}catch(t){a.e(t)}finally{a.f()}if(Oe(ee,this)){var u,o=Ue(Oe(ee,this).getEditableAnnotations());try{for(o.s();!(u=o.n()).done;){var l=u.value,h=l.data.id;if(!Oe(ce,this).isDeletedAnnotationElement(h)){var c=i.get(h);c?(c.resetAnnotationElement(l),c.show(!1),l.show()):((c=n.get(h))&&(Oe(ce,this).addChangedExistingAnnotation(c),c.renderAnnotationElement(l),c.show(!1)),l.show())}}}catch(t){o.e(t)}finally{o.f()}}je(de,this,Qv).call(this),this.isEmpty&&(this.div.hidden=!0);var d,f=this.div.classList,v=Ue(je(Zt,t,fe)._.values());try{for(v.s();!(d=v.n()).done;){var p=d.value;f.remove("".concat(p._type,"Editing"))}}catch(t){v.e(t)}finally{v.f()}this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),We(le,this,!1)}},{key:"getEditableAnnotation",value:function(t){var e;return(null===(e=Oe(ee,this))||void 0===e?void 0:e.getEditableAnnotation(t))||null}},{key:"setActiveEditor",value:function(t){Oe(ce,this).getActive()!==t&&Oe(ce,this).setActiveEditor(t)}},{key:"enableTextSelection",value:function(){var t;this.div.tabIndex=-1,null!==(t=Oe(he,this))&&void 0!==t&&t.div&&!Oe(ae,this)&&(We(ae,this,je(de,this,qv).bind(this)),Oe(he,this).div.addEventListener("pointerdown",Oe(ae,this),{signal:Oe(ce,this)._signal}),Oe(he,this).div.classList.add("highlighting"))}},{key:"disableTextSelection",value:function(){var t;this.div.tabIndex=0,null!==(t=Oe(he,this))&&void 0!==t&&t.div&&Oe(ae,this)&&(Oe(he,this).div.removeEventListener("pointerdown",Oe(ae,this)),We(ae,this,null),Oe(he,this).div.classList.remove("highlighting"))}},{key:"enableClick",value:function(){if(!Oe(ie,this)){var t=Oe(ce,this)._signal;We(ie,this,this.pointerdown.bind(this)),We(ne,this,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",Oe(ie,this),{signal:t}),this.div.addEventListener("pointerup",Oe(ne,this),{signal:t})}}},{key:"disableClick",value:function(){Oe(ie,this)&&(this.div.removeEventListener("pointerdown",Oe(ie,this)),this.div.removeEventListener("pointerup",Oe(ne,this)),We(ie,this,null),We(ne,this,null))}},{key:"attach",value:function(t){Oe(se,this).set(t.id,t);var e=t.annotationElementId;e&&Oe(ce,this).isDeletedAnnotationElement(e)&&Oe(ce,this).removeDeletedAnnotationElement(t)}},{key:"detach",value:function(t){var e;Oe(se,this).delete(t.id),null===(e=Oe($t,this))||void 0===e||e.removePointerInTextLayer(t.contentDiv),!Oe(le,this)&&t.annotationElementId&&Oe(ce,this).addDeletedAnnotationElement(t)}},{key:"remove",value:function(t){this.detach(t),Oe(ce,this).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,Oe(oe,this)||this.addInkEditorIfNeeded(!1)}},{key:"changeParent",value:function(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(Oe(ce,this).addDeletedAnnotationElement(t.annotationElementId),Ms.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}},{key:"add",value:function(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),Oe(ce,this).addEditor(t),this.attach(t),!t.isAttachedToDOM){var e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),Oe(ce,this).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}},{key:"moveEditorInDOM",value:function(t){var e,n=this;if(t.isAttachedToDOM){var i=document.activeElement;t.div.contains(i)&&!Oe(re,this)&&(t._focusEventsAllowed=!1,We(re,this,setTimeout((function(){We(re,n,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(function(){t._focusEventsAllowed=!0}),{once:!0,signal:Oe(ce,n)._signal}),i.focus())}),0))),t._structTreeParentId=null===(e=Oe($t,this))||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}}},{key:"addOrRebuild",value:function(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}},{key:"addUndoableEditor",value:function(t){this.addCommands({cmd:function(){return t._uiManager.rebuild(t)},undo:function(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return Oe(ce,this).getId()}},{key:"_signal",get:function(){return Oe(ce,this)._signal}},{key:"canCreateNewEmptyEditor",value:function(){var t;return null===(t=Be(de,this,Xv))||void 0===t?void 0:t.canCreateNewEmptyEditor()}},{key:"pasteEditor",value:function(t,e){Oe(ce,this).updateToolbar(t),Oe(ce,this).updateMode(t);var n=je(de,this,Yv).call(this),i=n.offsetX,a=n.offsetY,r=this.getNextId(),s=je(de,this,Kv).call(this,we({parent:this,id:r,x:i,y:a,uiManager:Oe(ce,this),isCentered:!0},e));s&&this.add(s)}},{key:"deserialize",value:function(e){var n,i;return(null===(n=je(Zt,t,fe)._.get(null!==(i=e.annotationType)&&void 0!==i?i:e.annotationEditorType))||void 0===n?void 0:n.deserialize(e,this,Oe(ce,this)))||null}},{key:"createAndAddNewEditor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getNextId(),a=je(de,this,Kv).call(this,we({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:Oe(ce,this),isCentered:e},n));return a&&this.add(a),a}},{key:"addNewEditor",value:function(){this.createAndAddNewEditor(je(de,this,Yv).call(this),!0)}},{key:"setSelected",value:function(t){Oe(ce,this).setSelected(t)}},{key:"toggleSelected",value:function(t){Oe(ce,this).toggleSelected(t)}},{key:"isSelected",value:function(t){return Oe(ce,this).isSelected(t)}},{key:"unselect",value:function(t){Oe(ce,this).unselect(t)}},{key:"pointerup",value:function(t){var e=xi.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&Oe(ue,this)&&(We(ue,this,!1),Oe(te,this)?Oe(ce,this).getMode()!==Cn.STAMP?this.createAndAddNewEditor(t,!1):Oe(ce,this).unselectAll():We(te,this,!0))}},{key:"pointerdown",value:function(t){if(Oe(ce,this).getMode()===Cn.HIGHLIGHT&&this.enableTextSelection(),Oe(ue,this))We(ue,this,!1);else{var e=xi.platform.isMac;if(!(0!==t.button||t.ctrlKey&&e)&&t.target===this.div){We(ue,this,!0);var n=Oe(ce,this).getActive();We(te,this,!n||n.isEmpty())}}}},{key:"findNewParent",value:function(t,e,n){var i=Oe(ce,this).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}},{key:"destroy",value:function(){var t;(null===(t=Oe(ce,this).getActive())||void 0===t?void 0:t.parent)===this&&(Oe(ce,this).commitOrRemove(),Oe(ce,this).setActiveEditor(null)),Oe(re,this)&&(clearTimeout(Oe(re,this)),We(re,this,null));var e,n=Ue(Oe(se,this).values());try{for(n.s();!(e=n.n()).done;){var i,a=e.value;null===(i=Oe($t,this))||void 0===i||i.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove()}}catch(t){n.e(t)}finally{n.f()}this.div=null,Oe(se,this).clear(),Oe(ce,this).removeLayer(this)}},{key:"render",value:function(t){var e=t.viewport;this.viewport=e,za(this.div,e);var n,i=Ue(Oe(ce,this).getEditors(this.pageIndex));try{for(i.s();!(n=i.n()).done;){var a=n.value;this.add(a),a.rebuild()}}catch(t){i.e(t)}finally{i.f()}this.updateMode()}},{key:"update",value:function(t){var e=t.viewport;Oe(ce,this).commitOrRemove(),je(de,this,Qv).call(this);var n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,za(this.div,{rotation:i}),n!==i){var a,r=Ue(Oe(se,this).values());try{for(r.s();!(a=r.n()).done;){a.value.rotate(i)}}catch(t){r.e(t)}finally{r.f()}}this.addInkEditorIfNeeded(!1)}},{key:"pageDimensions",get:function(){var t=this.viewport.rawDims;return[t.pageWidth,t.pageHeight]}},{key:"scale",get:function(){return Oe(ce,this).viewParameters.realScale}}])}(),Pe(Zt,"_initialized",!1),fe={_:new Map([Hc,Xf,Lv,pf].map((function(t){return[t._editorType,t]})))},Zt);function qv(t){var e=this;Oe(ce,this).unselectAll();var n=t.target;if(n===Oe(he,this).div||n.classList.contains("endOfContent")&&Oe(he,this).div.contains(n)){var i=xi.platform.isMac;if(0!==t.button||t.ctrlKey&&i)return;Oe(ce,this).showAllEditors("highlight",!0,!0),Oe(he,this).div.classList.add("free"),this.toggleDrawing(),pf.startHighlighting(this,"ltr"===Oe(ce,this).direction,t),Oe(he,this).div.addEventListener("pointerup",(function(){Oe(he,e).div.classList.remove("free"),e.toggleDrawing(!0)}),{once:!0,signal:Oe(ce,this)._signal}),t.preventDefault()}}function Xv(t){return je(Zt,Zt,fe)._.get(Oe(ce,t).getMode())}function Kv(t){var e=Be(de,this,Xv);return e?new e.prototype.constructor(t):null}function Yv(){var t=this.div.getBoundingClientRect(),e=t.x,n=t.y,i=t.width,a=t.height,r=Math.max(0,e),s=Math.max(0,n),u=(r+Math.min(window.innerWidth,e+i))/2-e,o=(s+Math.min(window.innerHeight,n+a))/2-n,l=He(this.viewport.rotation%180==0?[u,o]:[o,u],2);return{offsetX:l[0],offsetY:l[1]}}function Qv(){We(oe,this,!0);var t,e=Ue(Oe(se,this).values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isEmpty()&&n.remove()}}catch(t){e.e(t)}finally{e.f()}We(oe,this,!1)}var Jv=(pe=new WeakMap,ge=new WeakMap,De=new WeakMap,me=new WeakMap,ye=new WeakSet,ve=function(){function t(e){var n=e.pageIndex;Qe(this,t),Me(this,ye),Re(this,pe,null),Re(this,ge,0),Re(this,De,new Map),Re(this,me,new Map),this.pageIndex=n}return Ke(t,[{key:"setParent",value:function(t){if(Oe(pe,this)){if(Oe(pe,this)!==t){if(Oe(De,this).size>0){var e,n=Ue(Oe(De,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.remove(),t.append(i)}}catch(t){n.e(t)}finally{n.f()}}We(pe,this,t)}}else We(pe,this,t)}},{key:"highlight",value:function(e,n,i){var a,r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=(We(ge,this,(a=Oe(ge,this),r=a++,a)),r),o=je(ye,this,$v).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");var l=t._svgFactory.createElement("defs");o.append(l);var h=t._svgFactory.createElement("path");l.append(h);var c="path_p".concat(this.pageIndex,"_").concat(u);h.setAttribute("id",c),h.setAttribute("d",e.toSVGPath()),s&&Oe(me,this).set(u,h);var d=je(ye,this,tp).call(this,l,c),f=t._svgFactory.createElement("use");return o.append(f),o.setAttribute("fill",n),o.setAttribute("fill-opacity",i),f.setAttribute("href","#".concat(c)),Oe(De,this).set(u,o),{id:u,clipPathId:"url(#".concat(d,")")}}},{key:"highlightOutline",value:function(e){var n,i,a=(We(ge,this,(n=Oe(ge,this),i=n++,n)),i),r=je(ye,this,$v).call(this,e.box);r.classList.add("highlightOutline");var s=t._svgFactory.createElement("defs");r.append(s);var u=t._svgFactory.createElement("path");s.append(u);var o,l="path_p".concat(this.pageIndex,"_").concat(a);if(u.setAttribute("id",l),u.setAttribute("d",e.toSVGPath()),u.setAttribute("vector-effect","non-scaling-stroke"),e.free){r.classList.add("free");var h=t._svgFactory.createElement("mask");s.append(h),o="mask_p".concat(this.pageIndex,"_").concat(a),h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");var c=t._svgFactory.createElement("rect");h.append(c),c.setAttribute("width","1"),c.setAttribute("height","1"),c.setAttribute("fill","white");var d=t._svgFactory.createElement("use");h.append(d),d.setAttribute("href","#".concat(l)),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}var f=t._svgFactory.createElement("use");r.append(f),f.setAttribute("href","#".concat(l)),o&&f.setAttribute("mask","url(#".concat(o,")"));var v=f.cloneNode();return r.append(v),f.classList.add("mainOutline"),v.classList.add("secondaryOutline"),Oe(De,this).set(a,r),a}},{key:"finalizeLine",value:function(t,e){var n=Oe(me,this).get(t);Oe(me,this).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}},{key:"updateLine",value:function(t,e){Oe(De,this).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}},{key:"removeFreeHighlight",value:function(t){this.remove(t),Oe(me,this).delete(t)}},{key:"updatePath",value:function(t,e){Oe(me,this).get(t).setAttribute("d",e.toSVGPath())}},{key:"updateBox",value:function(e,n){je(ve,t,Zv).call(t,Oe(De,this).get(e),n)}},{key:"show",value:function(t,e){Oe(De,this).get(t).classList.toggle("hidden",!e)}},{key:"rotate",value:function(t,e){Oe(De,this).get(t).setAttribute("data-main-rotation",e)}},{key:"changeColor",value:function(t,e){Oe(De,this).get(t).setAttribute("fill",e)}},{key:"changeOpacity",value:function(t,e){Oe(De,this).get(t).setAttribute("fill-opacity",e)}},{key:"addClass",value:function(t,e){Oe(De,this).get(t).classList.add(e)}},{key:"removeClass",value:function(t,e){Oe(De,this).get(t).classList.remove(e)}},{key:"remove",value:function(t){null!==Oe(pe,this)&&(Oe(De,this).get(t).remove(),Oe(De,this).delete(t))}},{key:"destroy",value:function(){We(pe,this,null);var t,e=Ue(Oe(De,this).values());try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}Oe(De,this).clear()}}],[{key:"_svgFactory",get:function(){return gi(this,"_svgFactory",new Fa)}}])}());function Zv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.x,i=void 0===n?0:n,a=e.y,r=void 0===a?0:a,s=e.width,u=void 0===s?1:s,o=e.height,l=void 0===o?1:o,h=t.style;h.top="".concat(100*r,"%"),h.left="".concat(100*i,"%"),h.width="".concat(100*u,"%"),h.height="".concat(100*l,"%")}function $v(t){var e=ve._svgFactory.create(1,1,!0);return Oe(pe,this).append(e),e.setAttribute("aria-hidden",!0),je(ve,ve,Zv).call(ve,e,t),e}function tp(t,e){var n=ve._svgFactory.createElement("clipPath");t.append(n);var i="clip_".concat(e);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");var a=ve._svgFactory.createElement("use");return n.append(a),a.setAttribute("href","#".concat(e)),a.classList.add("clip"),i}var ep=cn.GlobalWorkerOptions,np=cn.InvalidPDFException,ip=cn.MissingPDFException,ap=cn.UnexpectedResponseException,rp=cn.build,sp=cn.getDocument,up=cn.version,op={d:function(t,e){for(var n in e)op.o(e,n)&&!op.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},lp=globalThis.pdfjsViewer={};op.d(lp,{AnnotationLayerBuilder:function(){return oD},DownloadManager:function(){return dD},EventBus:function(){return DD},FindState:function(){return Yp},GenericL10n:function(){return Om},LinkTarget:function(){return Tg},PDFFindController:function(){return fg},PDFHistory:function(){return Qm},PDFLinkService:function(){return Ig},PDFPageView:function(){return _A},PDFScriptingManager:function(){return Db},PDFSinglePageViewer:function(){return Dk},PDFViewer:function(){return Zb},ProgressBar:function(){return Rp},RenderingStates:function(){return hp},ScrollMode:function(){return mp},SimpleLinkService:function(){return Ng},SpreadMode:function(){return yp},StructTreeLayerBuilder:function(){return jy},TextLayerBuilder:function(){return aA},XfaLayerBuilder:function(){return hA},parseQueryString:function(){return kp}});var hp={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},cp=0,dp=1,fp=2,vp=3,pp=0,gp=1,Dp=2,mp={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},yp={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},Ap=function(){return Ke((function t(){Qe(this,t);var e=window.devicePixelRatio||1;this.sx=e,this.sy=e}),[{key:"scaled",get:function(){return 1!==this.sx||1!==this.sy}}])}();function bp(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.offsetParent;if(i){for(var a=t.offsetTop+t.clientTop,r=t.offsetLeft+t.clientLeft;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||n&&(i.classList.contains("markedContent")||"hidden"===getComputedStyle(i).overflow);)if(a+=i.offsetTop,r+=i.offsetLeft,!(i=i.offsetParent))return;e&&(void 0!==e.top&&(a+=e.top),void 0!==e.left&&(r+=e.left,i.scrollLeft=r)),i.scrollTop=a}else console.error("offsetParent is not set -- cannot scroll")}function kp(t){var e,n=new Map,i=Ue(new URLSearchParams(t));try{for(i.s();!(e=i.n()).done;){var a=He(e.value,2),r=a[0],s=a[1];n.set(r.toLowerCase(),s)}}catch(t){i.e(t)}finally{i.f()}return n}var Ep=/[\x00-\x1F]/g;function wp(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ep.test(t)?e?t.replaceAll(Ep,(function(t){return"\0"===t?"":" "})):t.replaceAll("\0",""):t}function Cp(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.length-1;if(i<0||!e(t[i]))return t.length;if(e(t[n]))return n;for(;n<i;){var a=n+i>>1;e(t[a])?i=a:n=a+1}return n}function Fp(t){if(Math.floor(t)===t)return[t,1];var e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];for(var n=t>1?e:t,i=0,a=1,r=1,s=1;;){var u=i+r,o=a+s;if(o>8)break;n<=u/o?(r=u,s=o):(i=u,a=o)}return n-i/a<r/s-n?n===t?[i,a]:[a,i]:n===t?[r,s]:[s,r]}function _p(t,e){return t-t%e}function xp(t){return Number.isInteger(t)&&t%90==0}function Sp(t){return t.width<=t.height}new Promise((function(t){window.requestAnimationFrame(t)}));var Mp=document.documentElement.style;var Bp=new WeakMap,Pp=new WeakMap,Lp=new WeakMap,Tp=new WeakMap,Ip=new WeakMap,Rp=function(){return Ke((function t(e){Qe(this,t),Re(this,Bp,null),Re(this,Pp,null),Re(this,Lp,0),Re(this,Tp,null),Re(this,Ip,!0),We(Bp,this,e.classList),We(Tp,this,e.style)}),[{key:"percent",get:function(){return Oe(Lp,this)},set:function(t){var e,n,i;We(Lp,this,(e=t,n=0,i=100,Math.min(Math.max(e,n),i))),isNaN(t)?Oe(Bp,this).add("indeterminate"):(Oe(Bp,this).remove("indeterminate"),Oe(Tp,this).setProperty("--progressBar-percent","".concat(Oe(Lp,this),"%")))}},{key:"setWidth",value:function(t){if(t){var e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&Oe(Tp,this).setProperty("--progressBar-end-offset","".concat(e,"px"))}}},{key:"setDisableAutoFetch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;100===Oe(Lp,this)||isNaN(Oe(Lp,this))||(Oe(Pp,this)&&clearTimeout(Oe(Pp,this)),this.show(),We(Pp,this,setTimeout((function(){We(Pp,t,null),t.hide()}),e)))}},{key:"hide",value:function(){Oe(Ip,this)&&(We(Ip,this,!1),Oe(Bp,this).add("hidden"))}},{key:"show",value:function(){Oe(Ip,this)||(We(Ip,this,!0),Oe(Bp,this).remove("hidden"))}}])}();function Np(t){var e=mp.VERTICAL,n=yp.NONE;switch(t){case"SinglePage":e=mp.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=mp.PAGE;case"TwoColumnLeft":n=yp.ODD;break;case"TwoPageRight":e=mp.PAGE;case"TwoColumnRight":n=yp.EVEN}return{scrollMode:e,spreadMode:n}}var Op,Wp=0,jp=1,Hp=2,zp=3,Vp=4,Up=5,Gp=6,qp=7;function Xp(t){return function(t){return t<11904}(t)?function(t){return!(65408&t)}(t)?function(t){return 32===t||9===t||13===t||10===t}(t)?Wp:function(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function(t){return t>=48&&t<=57}(t)||95===t?jp:Hp:function(t){return 3584==(65408&t)}(t)?qp:160===t?Wp:jp:function(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t)?zp:function(t){return t>=12448&&t<=12543}(t)?Vp:function(t){return t>=12352&&t<=12447}(t)?Up:function(t){return t>=65376&&t<=65439}(t)?Gp:jp}var Kp,Yp={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},Qp={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},Jp=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),Zp=/(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDD69-\uDD6D\uDEAB\uDEAC\uDEFC-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDFB8-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD0\uDFD2\uDFE1\uDFE2]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42\uDF5A]|\uD80D[\uDC40\uDC47-\uDC55]|\uD818[\uDD1E-\uDD2F]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF\uDDEE\uDDEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])+/g,$p=/([\$\(-\+\.\?\[-\^\{-\}])|((?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F]))|([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|((?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDD69-\uDD6D\uDEAB\uDEAC\uDEFC-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDFB8-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD0\uDFD2\uDFE1\uDFE2]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42\uDF5A]|\uD80D[\uDC40\uDC47-\uDC55]|\uD818[\uDD1E-\uDD2F]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF\uDDEE\uDDEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]))|((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))/g,tg=/((?:[\0-\u02FF\u0370-\u0482\u048A-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u060F\u061B-\u064A\u0660-\u066F\u0671-\u06D5\u06DD\u06DE\u06E5\u06E6\u06E9\u06EE-\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4-\u07FC\u07FE-\u0815\u081A\u0824\u0828\u082E-\u0858\u085C-\u0896\u08A0-\u08C9\u08E2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0964-\u0980\u0984-\u09BB\u09BD\u09C5\u09C6\u09C9\u09CA\u09CE-\u09D6\u09D8-\u09E1\u09E4-\u09FD\u09FF\u0A00\u0A04-\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A6F\u0A72-\u0A74\u0A76-\u0A80\u0A84-\u0ABB\u0ABD\u0AC6\u0ACA\u0ACE-\u0AE1\u0AE4-\u0AF9\u0B00\u0B04-\u0B3B\u0B3D\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B61\u0B64-\u0B81\u0B83-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE-\u0BD6\u0BD8-\u0BFF\u0C05-\u0C3B\u0C3D\u0C45\u0C49\u0C4E-\u0C54\u0C57-\u0C61\u0C64-\u0C80\u0C84-\u0CBB\u0CBD\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CE1\u0CE4-\u0CF2\u0CF4-\u0CFF\u0D04-\u0D3A\u0D3D\u0D45\u0D49\u0D4E-\u0D56\u0D58-\u0D61\u0D64-\u0D80\u0D84-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF4-\u0E30\u0E32\u0E33\u0E3B-\u0E46\u0E4F-\u0EB0\u0EB2\u0EB3\u0EBD-\u0EC7\u0ECF-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F40-\u0F70\u0F85\u0F88-\u0F8C\u0F98\u0FBD-\u0FC5\u0FC7-\u102A\u103F-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u109E-\u135C\u1360-\u1711\u1716-\u1731\u1735-\u1751\u1754-\u1771\u1774-\u17B3\u17D4-\u17DC\u17DE-\u180A\u180E\u1810-\u1884\u1887-\u18A8\u18AA-\u191F\u192C-\u192F\u193C-\u1A16\u1A1C-\u1A54\u1A5F\u1A7D\u1A7E\u1A80-\u1AAF\u1ACF-\u1AFF\u1B05-\u1B33\u1B45-\u1B6A\u1B74-\u1B7F\u1B83-\u1BA0\u1BAE-\u1BE5\u1BF4-\u1C23\u1C38-\u1CCF\u1CD3\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA-\u1DBF\u1E00-\u20CF\u20F1-\u2CEE\u2CF2-\u2D7E\u2D80-\u2DDF\u2E00-\u3029\u3030-\u3098\u309B-\uA66E\uA673\uA67E-\uA69D\uA6A0-\uA6EF\uA6F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA82D-\uA87F\uA882-\uA8B3\uA8C6-\uA8DF\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA954-\uA97F\uA984-\uA9B2\uA9C1-\uA9E4\uA9E6-\uAA28\uAA37-\uAA42\uAA44-\uAA4B\uAA4E-\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2-\uAAEA\uAAF0-\uAAF4\uAAF7-\uABE2\uABEB\uABEE-\uD7FF\uE000-\uFB1D\uFB1F-\uFDFF\uFE10-\uFE1F\uFE30-\uFFFF]|\uD800[\uDC00-\uDDFC\uDDFE-\uDEDF\uDEE1-\uDF75\uDF7B-\uDFFF]|[\uD801\uD808-\uD80C\uD80E-\uD817\uD819\uD81C-\uD82E\uD830-\uD832\uD835\uD837\uD83B-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD802[\uDC00-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDEE4\uDEE7-\uDFFF]|\uD803[\uDC00-\uDD23\uDD28-\uDD68\uDD6E-\uDEAA\uDEAD-\uDEFB\uDF00-\uDF45\uDF51-\uDF81\uDF86-\uDFFF]|\uD804[\uDC03-\uDC37\uDC47-\uDC6F\uDC71\uDC72\uDC75-\uDC7E\uDC83-\uDCAF\uDCBB-\uDCC1\uDCC3-\uDCFF\uDD03-\uDD26\uDD35-\uDD44\uDD47-\uDD72\uDD74-\uDD7F\uDD83-\uDDB2\uDDC1-\uDDC8\uDDCD\uDDD0-\uDE2B\uDE38-\uDE3D\uDE3F\uDE40\uDE42-\uDEDE\uDEEB-\uDEFF\uDF04-\uDF3A\uDF3D\uDF45\uDF46\uDF49\uDF4A\uDF4E-\uDF56\uDF58-\uDF61\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFB7\uDFC1\uDFC3\uDFC4\uDFC6\uDFCB\uDFD1\uDFD3-\uDFE0\uDFE3-\uDFFF]|\uD805[\uDC00-\uDC34\uDC47-\uDC5D\uDC5F-\uDCAF\uDCC4-\uDDAE\uDDB6\uDDB7\uDDC1-\uDDDB\uDDDE-\uDE2F\uDE41-\uDEAA\uDEB8-\uDF1C\uDF2C-\uDFFF]|\uD806[\uDC00-\uDC2B\uDC3B-\uDD2F\uDD36\uDD39\uDD3A\uDD3F\uDD41\uDD44-\uDDD0\uDDD8\uDDD9\uDDE1-\uDDE3\uDDE5-\uDE00\uDE0B-\uDE32\uDE3A\uDE3F-\uDE46\uDE48-\uDE50\uDE5C-\uDE89\uDE9A-\uDFFF]|\uD807[\uDC00-\uDC2E\uDC37\uDC40-\uDC91\uDCA8\uDCB7-\uDD30\uDD37-\uDD39\uDD3B\uDD3E\uDD46\uDD48-\uDD89\uDD8F\uDD92\uDD98-\uDEF2\uDEF7-\uDEFF\uDF02\uDF04-\uDF33\uDF3B-\uDF3D\uDF43-\uDF59\uDF5B-\uDFFF]|\uD80D[\uDC00-\uDC3F\uDC41-\uDC46\uDC56-\uDFFF]|\uD818[\uDC00-\uDD1D\uDD30-\uDFFF]|\uD81A[\uDC00-\uDEEF\uDEF5-\uDF2F\uDF37-\uDFFF]|\uD81B[\uDC00-\uDF4E\uDF50\uDF88-\uDF8E\uDF93-\uDFE3\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD82F[\uDC00-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC8E\uDC90-\uDD2F\uDD37-\uDEAD\uDEAF-\uDEEB\uDEF0-\uDFFF]|\uD839[\uDC00-\uDCEB\uDCF0-\uDDED\uDDF0-\uDFFF]|\uD83A[\uDC00-\uDCCF\uDCD7-\uDD43\uDD4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDD69-\uDD6D\uDEAB\uDEAC\uDEFC-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDFB8-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD0\uDFD2\uDFE1\uDFE2]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42\uDF5A]|\uD80D[\uDC40\uDC47-\uDC55]|\uD818[\uDD1E-\uDD2F]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF\uDDEE\uDDEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/,eg=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDD69-\uDD6D\uDEAB\uDEAC\uDEFC-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74\uDFB8-\uDFC0\uDFC2\uDFC5\uDFC7-\uDFCA\uDFCC-\uDFD0\uDFD2\uDFE1\uDFE2]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42\uDF5A]|\uD80D[\uDC40\uDC47-\uDC55]|\uD818[\uDD1E-\uDD2F]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF\uDDEE\uDDEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*((?:[\0-\u02FF\u0370-\u0482\u048A-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u060F\u061B-\u064A\u0660-\u066F\u0671-\u06D5\u06DD\u06DE\u06E5\u06E6\u06E9\u06EE-\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4-\u07FC\u07FE-\u0815\u081A\u0824\u0828\u082E-\u0858\u085C-\u0896\u08A0-\u08C9\u08E2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0964-\u0980\u0984-\u09BB\u09BD\u09C5\u09C6\u09C9\u09CA\u09CE-\u09D6\u09D8-\u09E1\u09E4-\u09FD\u09FF\u0A00\u0A04-\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A6F\u0A72-\u0A74\u0A76-\u0A80\u0A84-\u0ABB\u0ABD\u0AC6\u0ACA\u0ACE-\u0AE1\u0AE4-\u0AF9\u0B00\u0B04-\u0B3B\u0B3D\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B61\u0B64-\u0B81\u0B83-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE-\u0BD6\u0BD8-\u0BFF\u0C05-\u0C3B\u0C3D\u0C45\u0C49\u0C4E-\u0C54\u0C57-\u0C61\u0C64-\u0C80\u0C84-\u0CBB\u0CBD\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CE1\u0CE4-\u0CF2\u0CF4-\u0CFF\u0D04-\u0D3A\u0D3D\u0D45\u0D49\u0D4E-\u0D56\u0D58-\u0D61\u0D64-\u0D80\u0D84-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF4-\u0E30\u0E32\u0E33\u0E3B-\u0E46\u0E4F-\u0EB0\u0EB2\u0EB3\u0EBD-\u0EC7\u0ECF-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F40-\u0F70\u0F85\u0F88-\u0F8C\u0F98\u0FBD-\u0FC5\u0FC7-\u102A\u103F-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u109E-\u135C\u1360-\u1711\u1716-\u1731\u1735-\u1751\u1754-\u1771\u1774-\u17B3\u17D4-\u17DC\u17DE-\u180A\u180E\u1810-\u1884\u1887-\u18A8\u18AA-\u191F\u192C-\u192F\u193C-\u1A16\u1A1C-\u1A54\u1A5F\u1A7D\u1A7E\u1A80-\u1AAF\u1ACF-\u1AFF\u1B05-\u1B33\u1B45-\u1B6A\u1B74-\u1B7F\u1B83-\u1BA0\u1BAE-\u1BE5\u1BF4-\u1C23\u1C38-\u1CCF\u1CD3\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA-\u1DBF\u1E00-\u20CF\u20F1-\u2CEE\u2CF2-\u2D7E\u2D80-\u2DDF\u2E00-\u3029\u3030-\u3098\u309B-\uA66E\uA673\uA67E-\uA69D\uA6A0-\uA6EF\uA6F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA82D-\uA87F\uA882-\uA8B3\uA8C6-\uA8DF\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA954-\uA97F\uA984-\uA9B2\uA9C1-\uA9E4\uA9E6-\uAA28\uAA37-\uAA42\uAA44-\uAA4B\uAA4E-\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2-\uAAEA\uAAF0-\uAAF4\uAAF7-\uABE2\uABEB\uABEE-\uD7FF\uE000-\uFB1D\uFB1F-\uFDFF\uFE10-\uFE1F\uFE30-\uFFFF]|\uD800[\uDC00-\uDDFC\uDDFE-\uDEDF\uDEE1-\uDF75\uDF7B-\uDFFF]|[\uD801\uD808-\uD80C\uD80E-\uD817\uD819\uD81C-\uD82E\uD830-\uD832\uD835\uD837\uD83B-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD802[\uDC00-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDEE4\uDEE7-\uDFFF]|\uD803[\uDC00-\uDD23\uDD28-\uDD68\uDD6E-\uDEAA\uDEAD-\uDEFB\uDF00-\uDF45\uDF51-\uDF81\uDF86-\uDFFF]|\uD804[\uDC03-\uDC37\uDC47-\uDC6F\uDC71\uDC72\uDC75-\uDC7E\uDC83-\uDCAF\uDCBB-\uDCC1\uDCC3-\uDCFF\uDD03-\uDD26\uDD35-\uDD44\uDD47-\uDD72\uDD74-\uDD7F\uDD83-\uDDB2\uDDC1-\uDDC8\uDDCD\uDDD0-\uDE2B\uDE38-\uDE3D\uDE3F\uDE40\uDE42-\uDEDE\uDEEB-\uDEFF\uDF04-\uDF3A\uDF3D\uDF45\uDF46\uDF49\uDF4A\uDF4E-\uDF56\uDF58-\uDF61\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFB7\uDFC1\uDFC3\uDFC4\uDFC6\uDFCB\uDFD1\uDFD3-\uDFE0\uDFE3-\uDFFF]|\uD805[\uDC00-\uDC34\uDC47-\uDC5D\uDC5F-\uDCAF\uDCC4-\uDDAE\uDDB6\uDDB7\uDDC1-\uDDDB\uDDDE-\uDE2F\uDE41-\uDEAA\uDEB8-\uDF1C\uDF2C-\uDFFF]|\uD806[\uDC00-\uDC2B\uDC3B-\uDD2F\uDD36\uDD39\uDD3A\uDD3F\uDD41\uDD44-\uDDD0\uDDD8\uDDD9\uDDE1-\uDDE3\uDDE5-\uDE00\uDE0B-\uDE32\uDE3A\uDE3F-\uDE46\uDE48-\uDE50\uDE5C-\uDE89\uDE9A-\uDFFF]|\uD807[\uDC00-\uDC2E\uDC37\uDC40-\uDC91\uDCA8\uDCB7-\uDD30\uDD37-\uDD39\uDD3B\uDD3E\uDD46\uDD48-\uDD89\uDD8F\uDD92\uDD98-\uDEF2\uDEF7-\uDEFF\uDF02\uDF04-\uDF33\uDF3B-\uDF3D\uDF43-\uDF59\uDF5B-\uDFFF]|\uD80D[\uDC00-\uDC3F\uDC41-\uDC46\uDC56-\uDFFF]|\uD818[\uDC00-\uDD1D\uDD30-\uDFFF]|\uD81A[\uDC00-\uDEEF\uDEF5-\uDF2F\uDF37-\uDFFF]|\uD81B[\uDC00-\uDF4E\uDF50\uDF88-\uDF8E\uDF93-\uDFE3\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD82F[\uDC00-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC8E\uDC90-\uDD2F\uDD37-\uDEAD\uDEAF-\uDEEB\uDEF0-\uDFFF]|\uD839[\uDC00-\uDCEB\uDCF0-\uDDED\uDDF0-\uDFFF]|\uD83A[\uDC00-\uDCCF\uDCD7-\uDD43\uDD4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,ng=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,ig=new Map,ag=new Map,rg=null,sg=null;function ug(t){for(var e,n,i=[];null!==(e=ng.exec(t));){var a,r=e.index,s=Ue(e[0]);try{for(s.s();!(a=s.n()).done;){var u=a.value,o=ig.get(u);o||(o=u.normalize("NFD").length,ig.set(u,o)),i.push([o,r++])}}catch(t){s.e(t)}finally{s.f()}}if(0===i.length&&rg)n=rg;else if(i.length>0&&sg)n=sg;else{var l=Object.keys(Qp).join(""),h=(Op||(Op=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),Op),c="([".concat(l,"])|([").concat(h,"])|(").concat("(?:゙|゚)","\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(").concat("(?:\\p{Ideographic}|[぀-ヿ])","\\n)|(\\n)");n=0===i.length?rg=new RegExp(c+"|(\\u0000)","gum"):sg=new RegExp(c+"|(".concat("[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",")"),"gum")}for(var d=[];null!==(e=Zp.exec(t));)d.push([e[0].length,e.index]);var f=t.normalize("NFD"),v=[[0,0]],p=0,g=0,D=0,m=0,y=0,A=!1;return f=f.replace(n,(function(t,e,n,a,r,s,u,o,l,h){var c,f;if(h-=m,e){for(var b=Qp[e],k=b.length,E=1;E<k;E++)v.push([h-D+E,D-E]);return D-=k-1,b}if(n){var w=ag.get(n);w||(w=n.normalize("NFKC"),ag.set(n,w));for(var C=w.length,F=1;F<C;F++)v.push([h-D+F,D-F]);return D-=C-1,w}if(a)return A=!0,h+y===(null===(f=d[p])||void 0===f?void 0:f[1])?++p:(v.push([h-1-D+1,D-1]),D-=1,m+=1),v.push([h-D+1,D]),m+=1,y+=1,a.charAt(0);if(r){var _,x=r.endsWith("\n"),S=x?r.length-2:r.length;A=!0;var M=S;h+y===(null===(_=d[p])||void 0===_?void 0:_[1])&&(M-=d[p][0],++p);for(var B=1;B<=M;B++)v.push([h-1-D+B,D-B]);return D-=M,m+=M,x?(h+=S-1,v.push([h-D+1,1+D]),D+=1,m+=1,y+=1,r.slice(0,S)):r}if(s){var P=s.length-2;return v.push([h-D+P,1+D]),D+=1,m+=1,y+=1,s.slice(0,-2)}if(u){var L=u.length-1;return v.push([h-D+L,D]),m+=1,y+=1,u.slice(0,-1)}if(o)return v.push([h-D+1,D-1]),D-=1,m+=1,y+=1," ";if(h+y===(null===(c=i[g])||void 0===c?void 0:c[1])){var T=i[g][0]-1;++g;for(var I=1;I<=T;I++)v.push([h-(D-I),D-I]);D-=T,m+=T}return l})),v.push([f.length,D]),[f,v,A]}function og(t,e,n){if(!t)return[e,n];var i=e,a=e+n-1,r=Cp(t,(function(t){return t[0]>=i}));t[r][0]>i&&--r;var s=Cp(t,(function(t){return t[0]>=a}),r);t[s][0]>a&&--s;var u=i+t[r][1];return[u,a+t[s][1]+1-u]}var lg=new WeakMap,hg=new WeakMap,cg=new WeakMap,dg=new WeakSet,fg=function(){return Ke((function t(e){var n=e.linkService,i=e.eventBus,a=e.updateMatchesCountOnProgress,r=void 0===a||a;Qe(this,t),Me(this,dg),Re(this,lg,null),Re(this,hg,!0),Re(this,cg,0),this._linkService=n,this._eventBus=i,We(hg,this,r),this.onIsPageVisible=null,je(dg,this,pg).call(this),i._on("find",je(dg,this,vg).bind(this)),i._on("findbarclose",je(dg,this,Mg).bind(this))}),[{key:"highlightMatches",get:function(){return this._highlightMatches}},{key:"pageMatches",get:function(){return this._pageMatches}},{key:"pageMatchesLength",get:function(){return this._pageMatchesLength}},{key:"selected",get:function(){return this._selected}},{key:"state",get:function(){return Oe(lg,this)}},{key:"setDocument",value:function(t){this._pdfDocument&&je(dg,this,pg).call(this),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}},{key:"scrollMatchIntoView",value:function(t){var e=t.element,n=void 0===e?null:e,i=t.selectedLeft,a=void 0===i?0:i,r=t.pageIndex,s=void 0===r?-1:r,u=t.matchIndex,o=void 0===u?-1:u;this._scrollMatches&&n&&(-1!==o&&o===this._selected.matchIdx&&-1!==s&&s===this._selected.pageIdx&&(this._scrollMatches=!1,bp(n,{top:-50,left:a+-400},!0)))}}])}();function vg(t){var e=this;if(t){var n=this._pdfDocument,i=t.type;(null===Oe(lg,this)||je(dg,this,Dg).call(this,t))&&(this._dirtyMatch=!0),We(lg,this,t),"highlightallchange"!==i&&je(dg,this,Lg).call(this,Yp.PENDING),this._firstPageCapability.promise.then((function(){if(e._pdfDocument&&(!n||e._pdfDocument===n)){je(dg,e,kg).call(e);var t=!e._highlightMatches,a=!!e._findTimeout;e._findTimeout&&(clearTimeout(e._findTimeout),e._findTimeout=null),i?e._dirtyMatch?je(dg,e,Cg).call(e):"again"===i?(je(dg,e,Cg).call(e),t&&Oe(lg,e).highlightAll&&je(dg,e,wg).call(e)):"highlightallchange"===i?(a?je(dg,e,Cg).call(e):e._highlightMatches=!0,je(dg,e,wg).call(e)):je(dg,e,Cg).call(e):e._findTimeout=setTimeout((function(){je(dg,e,Cg).call(e),e._findTimeout=null}),250)}}))}}function pg(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],We(cg,this,0),We(lg,this,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}function gg(t){var e=Oe(lg,t).query;if("string"==typeof e){if(e!==t._rawQuery){t._rawQuery=e;var n=He(ug(e),1);t._normalizedQuery=n[0]}return t._normalizedQuery}return(e||[]).filter((function(t){return!!t})).map((function(t){return ug(t)[0]}))}function Dg(t){var e,n,i=t.query,a=Oe(lg,this).query,r=nn(i);if(r!==nn(a))return!0;if("string"===r){if(i!==a)return!0}else if(JSON.stringify(i)!==JSON.stringify(a))return!0;switch(t.type){case"again":var s=this._selected.pageIdx+1,u=this._linkService;return s>=1&&s<=u.pagesCount&&s!==u.page&&!(null===(e=null===(n=this.onIsPageVisible)||void 0===n?void 0:n.call(this,s))||void 0===e||e);case"highlightallchange":return!1}return!0}function mg(t,e,n){var i=t.slice(0,e).match(tg);if(i){var a=t.charCodeAt(e),r=i[1].charCodeAt(0);if(Xp(a)===Xp(r))return!1}if(i=t.slice(e+n).match(eg)){var s=t.charCodeAt(e+n-1),u=i[1].charCodeAt(0);if(Xp(s)===Xp(u))return!1}return!0}function yg(t,e,n,i){var a=this._pageMatches[n]=[],r=this._pageMatchesLength[n]=[];if(t)for(var s,u=this._pageDiffs[n];null!==(s=t.exec(i));)if(!e||je(dg,this,mg).call(this,i,s.index,s[0].length)){var o=He(og(u,s.index,s[0].length),2),l=o[0],h=o[1];h&&(a.push(l),r.push(h))}}function Ag(t,e){var n=Oe(lg,this).matchDiacritics,i=!1,a="[ ]*";return(t=t.replaceAll($p,(function(t,a,r,s,u,o){return a?"[ ]*\\".concat(a,"[ ]*"):r?"[ ]*".concat(r,"[ ]*"):s?"[ ]+":n?u||o:u?Jp.has(u.charCodeAt(0))?u:"":e?(i=!0,"".concat(o,"\\p{M}*")):o}))).endsWith(a)&&(t=t.slice(0,t.length-4)),n&&e&&(Kp||(Kp=String.fromCharCode.apply(String,xe(Jp))),i=!0,t="".concat(t,"(?=[").concat(Kp,"]|[^\\p{M}]|$)")),[i,t]}function bg(t){var e,n=this,i=Be(dg,this,gg);if(0!==i.length){var a=Oe(lg,this),r=a.caseSensitive,s=a.entireWord,u=this._pageContents[t],o=this._hasDiacritics[t],l=!1;if("string"==typeof i){var h=He(je(dg,this,Ag).call(this,i,o),2);l=h[0],i=h[1]}else i=i.sort().reverse().map((function(t){var e=He(je(dg,n,Ag).call(n,t,o),2),i=e[0],a=e[1];return l||(l=i),"(".concat(a,")")})).join("|");var c="g".concat(l?"u":"").concat(r?"":"i");i=i?new RegExp(i,c):null,je(dg,this,yg).call(this,i,s,t,u),Oe(lg,this).highlightAll&&je(dg,this,Eg).call(this,t),this._resumePageIdx===t&&(this._resumePageIdx=null,je(dg,this,_g).call(this));var d=this._pageMatches[t].length;this._matchesCountTotal+=d,Oe(hg,this)?d>0&&je(dg,this,Pg).call(this):We(cg,this,(e=Oe(cg,this),++e))===this._linkService.pagesCount&&je(dg,this,Pg).call(this)}}function kg(){var t=this;if(!(this._extractTextPromises.length>0))for(var e=Promise.resolve(),n={disableNormalization:!0},i=function(i){var a=Promise.withResolvers(),r=a.promise,s=a.resolve;t._extractTextPromises[i]=r,e=e.then((function(){return t._pdfDocument.getPage(i+1).then((function(t){return t.getTextContent(n)})).then((function(e){var n,a=[],r=Ue(e.items);try{for(r.s();!(n=r.n()).done;){var u=n.value;a.push(u.str),u.hasEOL&&a.push("\n")}}catch(t){r.e(t)}finally{r.f()}var o=He(ug(a.join("")),3);t._pageContents[i]=o[0],t._pageDiffs[i]=o[1],t._hasDiacritics[i]=o[2],s()}),(function(e){console.error("Unable to get text content for page ".concat(i+1),e),t._pageContents[i]="",t._pageDiffs[i]=null,t._hasDiacritics[i]=!1,s()}))}))},a=0,r=this._linkService.pagesCount;a<r;a++)i(a)}function Eg(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}function wg(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function Cg(){var t=this,e=Oe(lg,this).findPrevious,n=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=n,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,We(cg,this,0),this._matchesCountTotal=0,je(dg,this,wg).call(this);for(var a=function(e){if(t._pendingFindMatches.has(e))return 1;t._pendingFindMatches.add(e),t._extractTextPromises[e].then((function(){t._pendingFindMatches.delete(e),je(dg,t,bg).call(t,e)}))},r=0;r<i;r++)a(r)}if(0!==Be(dg,this,gg).length){if(!this._resumePageIdx){var s=this._offset;if(this._pagesToSearch=i,null!==s.matchIdx){var u=this._pageMatches[s.pageIdx].length;if(!e&&s.matchIdx+1<u||e&&s.matchIdx>0)return s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,void je(dg,this,Sg).call(this,!0);je(dg,this,xg).call(this,e)}je(dg,this,_g).call(this)}}else je(dg,this,Lg).call(this,Yp.FOUND)}function Fg(t){var e=this._offset,n=t.length,i=Oe(lg,this).findPrevious;return n?(e.matchIdx=i?n-1:0,je(dg,this,Sg).call(this,!0),!0):(je(dg,this,xg).call(this,i),!!(e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0))&&(je(dg,this,Sg).call(this,!1),!0))}function _g(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var t=null;do{var e=this._offset.pageIdx;if(!(t=this._pageMatches[e])){this._resumePageIdx=e;break}}while(!je(dg,this,Fg).call(this,t))}function xg(t){var e=this._offset,n=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=n||e.pageIdx<0)&&(e.pageIdx=t?n-1:0,e.wrapped=!0)}function Sg(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Yp.NOT_FOUND,n=this._offset.wrapped;if(this._offset.wrapped=!1,t){var i=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=n?Yp.WRAPPED:Yp.FOUND,-1!==i&&i!==this._selected.pageIdx&&je(dg,this,Eg).call(this,i)}je(dg,this,Lg).call(this,e,Oe(lg,this).findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,je(dg,this,Eg).call(this,this._selected.pageIdx))}function Mg(t){var e=this,n=this._pdfDocument;this._firstPageCapability.promise.then((function(){!e._pdfDocument||n&&e._pdfDocument!==n||(e._findTimeout&&(clearTimeout(e._findTimeout),e._findTimeout=null),e._resumePageIdx&&(e._resumePageIdx=null,e._dirtyMatch=!0),je(dg,e,Lg).call(e,Yp.FOUND),e._highlightMatches=!1,je(dg,e,wg).call(e))}))}function Bg(){var t=this._selected,e=t.pageIdx,n=t.matchIdx,i=0,a=this._matchesCountTotal;if(-1!==n){for(var r=0;r<e;r++){var s;i+=(null===(s=this._pageMatches[r])||void 0===s?void 0:s.length)||0}i+=n+1}return(i<1||i>a)&&(i=a=0),{current:i,total:a}}function Pg(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:je(dg,this,Bg).call(this)})}function Lg(t){var e,n,i,a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(Oe(hg,this)||Oe(cg,this)===this._linkService.pagesCount&&t!==Yp.PENDING)&&this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:r,entireWord:null!==(e=null===(n=Oe(lg,this))||void 0===n?void 0:n.entireWord)&&void 0!==e?e:null,matchesCount:je(dg,this,Bg).call(this),rawQuery:null!==(i=null===(a=Oe(lg,this))||void 0===a?void 0:a.query)&&void 0!==i?i:null})}var Tg={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},Ig=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.eventBus,i=e.externalLinkTarget,a=void 0===i?null:i,r=e.externalLinkRel,s=void 0===r?null:r,u=e.ignoreDestinationZoom,o=void 0!==u&&u;Qe(this,t),Pe(this,"externalLinkEnabled",!0),this.eventBus=n,this.externalLinkTarget=a,this.externalLinkRel=s,this._ignoreDestinationZoom=o,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}return Ke(t,[{key:"setDocument",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=e,this.pdfDocument=t}},{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setHistory",value:function(t){this.pdfHistory=t}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1},set:function(t){this.pdfDocument&&(this.pdfViewer.currentPageNumber=t)}},{key:"rotation",get:function(){return this.pdfDocument?this.pdfViewer.pagesRotation:0},set:function(t){this.pdfDocument&&(this.pdfViewer.pagesRotation=t)}},{key:"isInPresentationMode",get:function(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}},{key:"goToDestination",value:(n=Ie(Le().mark((function t(e){var n,i,a,r,s;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pdfDocument){t.next=2;break}return t.abrupt("return");case 2:if("string"!=typeof e){t.next=9;break}return n=e,t.next=6,this.pdfDocument.getDestination(e);case 6:i=t.sent,t.next=13;break;case 9:return n=null,t.next=12,e;case 12:i=t.sent;case 13:if(Array.isArray(i)){t.next=16;break}return console.error('goToDestination: "'.concat(i,'" is not a valid destination array, for dest="').concat(e,'".')),t.abrupt("return");case 16:if(r=He(i,1),!(s=r[0])||"object"!==nn(s)){t.next=33;break}if(a=this.pdfDocument.cachedPageNumber(s)){t.next=31;break}return t.prev=20,t.next=23,this.pdfDocument.getPageIndex(s);case 23:t.t0=t.sent,a=t.t0+1,t.next=31;break;case 27:return t.prev=27,t.t1=t.catch(20),console.error('goToDestination: "'.concat(s,'" is not a valid page reference, for dest="').concat(e,'".')),t.abrupt("return");case 31:t.next=34;break;case 33:Number.isInteger(s)&&(a=s+1);case 34:if(!(!a||a<1||a>this.pagesCount)){t.next=37;break}return console.error('goToDestination: "'.concat(a,'" is not a valid page number, for dest="').concat(e,'".')),t.abrupt("return");case 37:this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:n,explicitDest:i,pageNumber:a})),this.pdfViewer.scrollPageIntoView({pageNumber:a,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom});case 39:case"end":return t.stop()}}),t,this,[[20,27]])}))),function(t){return n.apply(this,arguments)})},{key:"goToPage",value:function(t){if(this.pdfDocument){var e="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;Number.isInteger(e)&&e>0&&e<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(e)),this.pdfViewer.scrollPageIntoView({pageNumber:e})):console.error('PDFLinkService.goToPage: "'.concat(t,'" is not a valid page.'))}}},{key:"addLinkAttributes",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||"string"!=typeof e)throw new Error('A valid "url" parameter must provided.');var i=n?Tg.BLANK:this.externalLinkTarget,a=this.externalLinkRel;this.externalLinkEnabled?t.href=t.title=e:(t.href="",t.title="Disabled: ".concat(e),t.onclick=function(){return!1});var r="";switch(i){case Tg.NONE:break;case Tg.SELF:r="_self";break;case Tg.BLANK:r="_blank";break;case Tg.PARENT:r="_parent";break;case Tg.TOP:r="_top"}t.target=r,t.rel="string"==typeof a?a:"noopener noreferrer nofollow"}},{key:"getDestinationHash",value:function(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){var e=JSON.stringify(t);if(e.length>0)return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(t){return this.baseUrl?this.baseUrl+t:t}},{key:"setHash",value:function(e){if(this.pdfDocument){var n,i;if(e.includes("=")){var a=kp(e);if(a.has("search")){var r=a.get("search").replaceAll('"',""),s="true"===a.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:s?r:r.match(/\S+/g)})}if(a.has("page")&&(n=0|a.get("page")||1),a.has("zoom")){var u=a.get("zoom").split(","),o=u[0],l=parseFloat(o);o.includes("Fit")?"Fit"===o||"FitB"===o?i=[null,{name:o}]:"FitH"===o||"FitBH"===o||"FitV"===o||"FitBV"===o?i=[null,{name:o},u.length>1?0|u[1]:null]:"FitR"===o?5!==u.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:o},0|u[1],0|u[2],0|u[3],0|u[4]]:console.error('PDFLinkService.setHash: "'.concat(o,'" is not a valid zoom value.')):i=[null,{name:"XYZ"},u.length>1?0|u[1]:null,u.length>2?0|u[2]:null,l?l/100:o]}return i?this.pdfViewer.scrollPageIntoView({pageNumber:n||this.page,destArray:i,allowNegativeOffset:!0}):n&&(this.page=n),a.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:a.get("pagemode")}),void(a.has("nameddest")&&this.goToDestination(a.get("nameddest")))}i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch(t){}"string"==typeof i||Rg.call(t,i)?this.goToDestination(i):console.error('PDFLinkService.setHash: "'.concat(unescape(e),'" is not a valid destination.'))}}},{key:"executeNamedAction",value:function(t){var e,n;if(this.pdfDocument){switch(t){case"GoBack":null===(e=this.pdfHistory)||void 0===e||e.back();break;case"GoForward":null===(n=this.pdfHistory)||void 0===n||n.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}}},{key:"executeSetOCGState",value:(e=Ie(Le().mark((function t(e){var n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pdfDocument){t.next=2;break}return t.abrupt("return");case 2:return n=this.pdfDocument,t.next=5,this.pdfViewer.optionalContentConfigPromise;case 5:if(i=t.sent,n===this.pdfDocument){t.next=8;break}return t.abrupt("return");case 8:i.setOCGState(e),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e,n}();function Rg(t){if(!Array.isArray(t)||t.length<2)return!1;var e,n=Ve(e=t)||Se(e)||Ge(e)||ze(),i=n[0],a=n[1],r=n.slice(2);if(!("object"===nn(i)&&Number.isInteger(null==i?void 0:i.num)&&Number.isInteger(null==i?void 0:i.gen)||Number.isInteger(i)))return!1;if("object"!==nn(a)||"string"!=typeof(null==a?void 0:a.name))return!1;var s=r.length,u=!0;switch(a.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return 0===s;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(4!==s)return!1;u=!1;break;default:return!1}var o,l=Ue(r);try{for(l.s();!(o=l.n()).done;){var h=o.value;if(!("number"==typeof h||u&&null===h))return!1}}catch(t){l.e(t)}finally{l.f()}return!0}var Ng=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Ig),Ke(t,[{key:"setDocument",value:function(t){}}])}(),Og=globalThis.pdfjsLib,Wg=Og.AbortException,jg=Og.AnnotationEditorLayer,Hg=(Og.AnnotationEditorParamsType,Og.AnnotationEditorType),zg=Og.AnnotationEditorUIManager,Vg=Og.AnnotationLayer,Ug=Og.AnnotationMode,Gg=(Og.build,Og.CMapCompressionType,Og.ColorPicker,Og.createValidAbsoluteUrl),qg=(Og.DOMSVGFactory,Og.DrawLayer),Xg=(Og.FeatureTest,Og.fetchData),Kg=(Og.getDocument,Og.getFilenameFromUrl,Og.getPdfFilenameFromUrl),Yg=(Og.getXfaPageViewport,Og.GlobalWorkerOptions,Og.ImageKind,Og.InvalidPDFException,Og.isDataScheme,Og.isPdfFile),Qg=(Og.MissingPDFException,Og.noContextMenu,Og.normalizeUnicode),Jg=(Og.OPS,Og.PasswordResponses,Og.PDFDataRangeTransport,Og.PDFDateString,Og.PDFWorker,Og.PermissionFlag),Zg=Og.PixelsPerInch,$g=Og.RenderingCancelledException,tD=Og.setLayerDimensions,eD=Og.shadow,nD=Og.TextLayer,iD=(Og.UnexpectedResponseException,Og.Util,Og.VerbosityLevel,Og.version),aD=Og.XfaLayer,rD=new WeakMap,sD=new WeakMap,uD=new WeakSet,oD=function(){return Ke((function t(e){var n=e.pdfPage,i=e.linkService,a=e.downloadManager,r=e.annotationStorage,s=void 0===r?null:r,u=e.imageResourcesPath,o=void 0===u?"":u,l=e.renderForms,h=void 0===l||l,c=e.enableScripting,d=void 0!==c&&c,f=e.hasJSActionsPromise,v=void 0===f?null:f,p=e.fieldObjectsPromise,g=void 0===p?null:p,D=e.annotationCanvasMap,m=void 0===D?null:D,y=e.accessibilityManager,A=void 0===y?null:y,b=e.annotationEditorUIManager,k=void 0===b?null:b,E=e.onAppend,w=void 0===E?null:E;Qe(this,t),Me(this,uD),Re(this,rD,null),Re(this,sD,null),this.pdfPage=n,this.linkService=i,this.downloadManager=a,this.imageResourcesPath=o,this.renderForms=h,this.annotationStorage=s,this.enableScripting=d,this._hasJSActionsPromise=v||Promise.resolve(!1),this._fieldObjectsPromise=g||Promise.resolve(null),this._annotationCanvasMap=m,this._accessibilityManager=A,this._annotationEditorUIManager=k,We(rD,this,w),this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=i.eventBus}),[{key:"render",value:(t=Ie(Le().mark((function t(e){var n,i,a,r,s,u,o,l,h,c=this,d=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=d.length>1&&void 0!==d[1]?d[1]:"display",!this.div){t.next=6;break}if(!this._cancelled&&this.annotationLayer){t.next=4;break}return t.abrupt("return");case 4:return this.annotationLayer.update({viewport:e.clone({dontFlip:!0})}),t.abrupt("return");case 6:return t.next=8,Promise.all([this.pdfPage.getAnnotations({intent:i}),this._hasJSActionsPromise,this._fieldObjectsPromise]);case 8:if(a=t.sent,r=He(a,3),s=r[0],u=r[1],o=r[2],!this._cancelled){t.next=15;break}return t.abrupt("return");case 15:if((l=this.div=document.createElement("div")).className="annotationLayer",null===(n=Oe(rD,this))||void 0===n||n.call(this,l),0!==s.length){t.next=21;break}return this.hide(),t.abrupt("return");case 21:return this.annotationLayer=new Vg({div:l,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:e.clone({dontFlip:!0})}),t.next=24,this.annotationLayer.render({annotations:s,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:u,fieldObjects:o});case 24:this.linkService.isInPresentationMode&&je(uD,this,lD).call(this,vp),Oe(sD,this)||(We(sD,this,new AbortController),null===(h=this._eventBus)||void 0===h||h._on("presentationmodechanged",(function(t){je(uD,c,lD).call(c,t.state)}),{signal:Oe(sD,this).signal}));case 26:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"cancel",value:function(){var t;this._cancelled=!0,null===(t=Oe(sD,this))||void 0===t||t.abort(),We(sD,this,null)}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}},{key:"hasEditableAnnotations",value:function(){var t;return!(null===(t=this.annotationLayer)||void 0===t||!t.hasEditableAnnotations())}}]);var t}();function lD(t){if(this.div){var e=!1;switch(t){case vp:e=!0;break;case dp:break;default:return}var n,i=Ue(this.div.childNodes);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.hasAttribute("data-internal-link")||(a.inert=e)}}catch(t){i.e(t)}finally{i.f()}}}function hD(t,e){var n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=t,n.target="_parent","download"in n&&(n.download=e),(document.body||document.documentElement).append(n),n.click(),n.remove()}var cD=new WeakMap,dD=function(){return Ke((function t(){Qe(this,t),Re(this,cD,new WeakMap)}),[{key:"downloadData",value:function(t,e,n){hD(URL.createObjectURL(new Blob([t],{type:n})),e)}},{key:"openOrDownloadData",value:function(t,e){var n=Yg(e)?"application/pdf":"";return this.downloadData(t,e,n),!1}},{key:"download",value:function(t,e,n,i){var a;if(t)a=URL.createObjectURL(new Blob([t],{type:"application/pdf"}));else{if(!Gg(e,"http://example.com"))return void console.error("download - not a valid URL: ".concat(e));a=e+"#pdfjs.action=download"}hD(a,n)}}])}(),fD="event",vD="timeout";function pD(){return pD=Ie(Le().mark((function t(e){var n,i,a,r,s,u,o,l,h,c;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=function(t){l.abort(),clearTimeout(c),o(t)},n=e.target,i=e.name,a=e.delay,r=void 0===a?0:a,"object"===nn(n)&&(Number.isInteger(r)&&r>=0)){t.next=4;break}throw new Error("waitOnEventOrTimeout - invalid parameters.");case 4:return s=Promise.withResolvers(),u=s.promise,o=s.resolve,l=new AbortController,n[n instanceof DD?"_on":"addEventListener"](i,h.bind(null,fD),{signal:l.signal}),c=setTimeout(h.bind(null,vD),r),t.abrupt("return",u);case 10:case"end":return t.stop()}}),t)}))),pD.apply(this,arguments)}var gD=new WeakMap,DD=function(){return Ke((function t(){Qe(this,t),Re(this,gD,Object.create(null))}),[{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(t,e,{external:!0,once:null==n?void 0:n.once,signal:null==n?void 0:n.signal})}},{key:"off",value:function(t,e){this._off(t,e)}},{key:"dispatch",value:function(t,e){var n=Oe(gD,this)[t];if(n&&0!==n.length){var i,a,r=Ue(n.slice(0));try{for(r.s();!(a=r.n()).done;){var s=a.value,u=s.listener,o=s.external;s.once&&this._off(t,u),o?(i||(i=[])).push(u):u(e)}}catch(t){r.e(t)}finally{r.f()}if(i){var l,h=Ue(i);try{for(h.s();!(l=h.n()).done;){(0,l.value)(e)}}catch(t){h.e(t)}finally{h.f()}i=null}}}},{key:"_on",value:function(t,e){var n,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if((null==a?void 0:a.signal)instanceof AbortSignal){var s=a.signal;if(s.aborted)return void console.error("Cannot use an `aborted` signal.");var u=function(){return i._off(t,e)};r=function(){return s.removeEventListener("abort",u)},s.addEventListener("abort",u)}((n=Oe(gD,this))[t]||(n[t]=[])).push({listener:e,external:!0===(null==a?void 0:a.external),once:!0===(null==a?void 0:a.once),rmAbort:r})}},{key:"_off",value:function(t,e){var n=Oe(gD,this)[t];if(n)for(var i=0,a=n.length;i<a;i++){var r,s=n[i];if(s.listener===e)return null===(r=s.rmAbort)||void 0===r||r.call(s),void n.splice(i,1)}}}])}(),mD=function(){return Ke((function t(e){Qe(this,t),this.value=e}),[{key:"valueOf",value:function(){return this.value}}])}(),yD=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"???";return Qe(this,t),Je(this,t,[e])}return tn(t,mD),Ke(t,[{key:"toString",value:function(t){return"{".concat(this.value,"}")}}])}(),AD=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qe(this,t),(n=Je(this,t,[e])).opts=i,n}return tn(t,mD),Ke(t,[{key:"toString",value:function(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}}])}(),bD=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qe(this,t),(n=Je(this,t,[e])).opts=i,n}return tn(t,mD),Ke(t,[{key:"toString",value:function(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}}])}();function kD(t,e,n){if(n===e)return!0;if(n instanceof AD&&e instanceof AD&&n.value===e.value)return!0;if(e instanceof AD&&"string"==typeof n&&n===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value))return!0;return!1}function ED(t,e,n){return e[n]?_D(t,e[n].value):(t.reportError(new RangeError("No default")),new yD)}function wD(t,e){var n,i=[],a=Object.create(null),r=Ue(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;"narg"===s.type?a[s.name]=CD(t,s.value):i.push(CD(t,s))}}catch(t){r.e(t)}finally{r.f()}return{positional:i,named:a}}function CD(t,e){switch(e.type){case"str":return e.value;case"num":return new AD(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,e){var n,i=e.name;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,i))return new yD("$".concat(i));n=t.params[i]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,i))return t.reportError(new ReferenceError("Unknown variable: $".concat(i))),new yD("$".concat(i));n=t.args[i]}if(n instanceof mD)return n;switch(nn(n)){case"string":return n;case"number":return new AD(n);case"object":if(n instanceof Date)return new bD(n.getTime());default:return t.reportError(new TypeError("Variable type not supported: $".concat(i,", ").concat(nn(n)))),new yD("$".concat(i))}}(t,e);case"mesg":return function(t,e){var n=e.name,i=e.attr,a=t.bundle._messages.get(n);if(!a)return t.reportError(new ReferenceError("Unknown message: ".concat(n))),new yD(n);if(i){var r=a.attributes[i];return r?_D(t,r):(t.reportError(new ReferenceError("Unknown attribute: ".concat(i))),new yD("".concat(n,".").concat(i)))}if(a.value)return _D(t,a.value);return t.reportError(new ReferenceError("No value: ".concat(n))),new yD(n)}(t,e);case"term":return function(t,e){var n=e.name,i=e.attr,a=e.args,r="-".concat(n),s=t.bundle._terms.get(r);if(!s)return t.reportError(new ReferenceError("Unknown term: ".concat(r))),new yD(r);if(i){var u=s.attributes[i];if(u){t.params=wD(t,a).named;var o=_D(t,u);return t.params=null,o}return t.reportError(new ReferenceError("Unknown attribute: ".concat(i))),new yD("".concat(r,".").concat(i))}t.params=wD(t,a).named;var l=_D(t,s.value);return t.params=null,l}(t,e);case"func":return function(t,e){var n=e.name,i=e.args,a=t.bundle._functions[n];if(!a)return t.reportError(new ReferenceError("Unknown function: ".concat(n,"()"))),new yD("".concat(n,"()"));if("function"!=typeof a)return t.reportError(new TypeError("Function ".concat(n,"() is not callable"))),new yD("".concat(n,"()"));try{var r=wD(t,i);return a(r.positional,r.named)}catch(e){return t.reportError(e),new yD("".concat(n,"()"))}}(t,e);case"select":return function(t,e){var n=e.selector,i=e.variants,a=e.star,r=CD(t,n);if(r instanceof yD)return ED(t,i,a);var s,u=Ue(i);try{for(u.s();!(s=u.n()).done;){var o=s.value;if(kD(t,r,CD(t,o.key)))return _D(t,o.value)}}catch(t){u.e(t)}finally{u.f()}return ED(t,i,a)}(t,e);default:return new yD}}function FD(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new yD;t.dirty.add(e);var n,i=[],a=t.bundle._useIsolating&&e.length>1,r=Ue(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;if("string"!=typeof s){if(t.placeables++,t.placeables>100)throw t.dirty.delete(e),new RangeError("Too many placeables expanded: ".concat(t.placeables,", ")+"max allowed is ".concat(100));a&&i.push("⁨"),i.push(CD(t,s).toString(t)),a&&i.push("⁩")}else i.push(t.bundle._transform(s))}}catch(t){r.e(t)}finally{r.f()}return t.dirty.delete(e),i.join("")}function _D(t,e){return"string"==typeof e?t.bundle._transform(e):FD(t,e)}var xD=function(){return Ke((function t(e,n,i){Qe(this,t),this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=n,this.args=i}),[{key:"reportError",value:function(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}},{key:"memoizeIntlObject",value:function(t,e){var n=this.bundle._intls.get(t);n||(n={},this.bundle._intls.set(t,n));var i=JSON.stringify(e);return n[i]||(n[i]=new t(this.bundle.locales,e)),n[i]}}])}();function SD(t,e){for(var n=Object.create(null),i=0,a=Object.entries(t);i<a.length;i++){var r=He(a[i],2),s=r[0],u=r[1];e.includes(s)&&(n[s]=u.valueOf())}return n}var MD=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function BD(t,e){var n=t[0];if(n instanceof yD)return new yD("NUMBER(".concat(n.valueOf(),")"));if(n instanceof AD)return new AD(n.valueOf(),we(we({},n.opts),SD(e,MD)));if(n instanceof bD)return new AD(n.valueOf(),we({},SD(e,MD)));throw new TypeError("Invalid argument to NUMBER")}var PD=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function LD(t,e){var n=t[0];if(n instanceof yD)return new yD("DATETIME(".concat(n.valueOf(),")"));if(n instanceof bD)return new bD(n.valueOf(),we(we({},n.opts),SD(e,PD)));if(n instanceof AD)return new bD(n.valueOf(),we({},SD(e,PD)));throw new TypeError("Invalid argument to DATETIME")}var TD=new Map;var ID=function(){return Ke((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.functions,a=n.useIsolating,r=void 0===a||a,s=n.transform,u=void 0===s?function(t){return t}:s;Qe(this,t),this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions=we({NUMBER:BD,DATETIME:LD},i),this._useIsolating=r,this._transform=u,this._intls=function(t){var e=Array.isArray(t)?t.join(" "):t,n=TD.get(e);return void 0===n&&(n=new Map,TD.set(e,n)),n}(e)}),[{key:"hasMessage",value:function(t){return this._messages.has(t)}},{key:"getMessage",value:function(t){return this._messages.get(t)}},{key:"addResource",value:function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowOverrides,n=void 0!==e&&e,i=[],a=0;a<t.body.length;a++){var r=t.body[a];if(r.id.startsWith("-")){if(!1===n&&this._terms.has(r.id)){i.push(new Error('Attempt to override an existing term: "'.concat(r.id,'"')));continue}this._terms.set(r.id,r)}else{if(!1===n&&this._messages.has(r.id)){i.push(new Error('Attempt to override an existing message: "'.concat(r.id,'"')));continue}this._messages.set(r.id,r)}}return i}},{key:"formatPattern",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof t)return this._transform(t);var i=new xD(this,n,e);try{return FD(i,t).toString(i)}catch(t){if(i.errors&&t instanceof Error)return i.errors.push(t),(new yD).toString(i);throw t}}}])}(),RD=/^(-?[a-zA-Z][\w-]*) *= */gm,ND=new RegExp("\\.([a-zA-Z][\\w-]*) *= *","y"),OD=new RegExp("\\*?\\[","y"),WD=new RegExp("(-?[0-9]+(?:\\.([0-9]+))?)","y"),jD=new RegExp("([a-zA-Z][\\w-]*)","y"),HD=new RegExp("([$-])?([a-zA-Z][\\w-]*)(?:\\.([a-zA-Z][\\w-]*))?","y"),zD=/^[A-Z][A-Z0-9_-]*$/,VD=new RegExp("([^{}\\n\\r]+)","y"),UD=new RegExp('([^\\\\"\\n\\r]*)',"y"),GD=new RegExp('\\\\([\\\\"])',"y"),qD=new RegExp("\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{6})","y"),XD=/^\n+/,KD=/ +$/,YD=/ *\r?\n/g,QD=/( *)$/,JD=new RegExp("{\\s*","y"),ZD=new RegExp("\\s*}","y"),$D=new RegExp("\\[\\s*","y"),tm=new RegExp("\\s*] *","y"),em=new RegExp("\\s*\\(\\s*","y"),nm=new RegExp("\\s*->\\s*","y"),im=new RegExp("\\s*:\\s*","y"),am=new RegExp("\\s*,?\\s*","y"),rm=new RegExp("\\s+","y"),sm=Ke((function t(e){Qe(this,t),this.body=[],RD.lastIndex=0;for(var n=0;;){var i=RD.exec(e);if(null===i)break;n=RD.lastIndex;try{this.body.push(l(i[1]))}catch(t){if(t instanceof SyntaxError)continue;throw t}}function a(t){return t.lastIndex=n,t.test(e)}function r(t,i){if(e[n]===t)return n++,!0;if(i)throw new i("Expected ".concat(t));return!1}function s(t,e){if(a(t))return n=t.lastIndex,!0;if(e)throw new e("Expected ".concat(t.toString()));return!1}function u(t){t.lastIndex=n;var i=t.exec(e);if(null===i)throw new SyntaxError("Expected ".concat(t.toString()));return n=t.lastIndex,i}function o(t){return u(t)[1]}function l(t){var e=h(),n=function(){var t=Object.create(null);for(;a(ND);){var e=o(ND),n=h();if(null===n)throw new SyntaxError("Expected attribute value");t[e]=n}return t}();if(null===e&&0===Object.keys(n).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:e,attributes:n}}function h(){var t;if(a(VD)&&(t=o(VD)),"{"===e[n]||"}"===e[n])return c(t?[t]:[],1/0);var i=y();return i?t?c([t,i],i.length):(i.value=A(i.value,XD),c([i],i.length)):t?A(t,KD):null}function c(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;;)if(a(VD))t.push(o(VD));else if("{"!==e[n]){if("}"===e[n])throw new SyntaxError("Unbalanced closing brace");var r=y();if(!r)break;t.push(r),i=Math.min(i,r.length)}else t.push(d());var s=t.length-1,u=t[s];"string"==typeof u&&(t[s]=A(u,KD));var l,h=[],c=Ue(t);try{for(c.s();!(l=c.n()).done;){var f=l.value;f instanceof um&&(f=f.value.slice(0,f.value.length-i)),f&&h.push(f)}}catch(t){c.e(t)}finally{c.f()}return h}function d(){s(JD,SyntaxError);var t=f();if(s(ZD))return t;if(s(nm)){var e=function(){var t,e=[],n=0;for(;a(OD);){r("*")&&(t=n);var i=p(),s=h();if(null===s)throw new SyntaxError("Expected variant value");e[n++]={key:i,value:s}}if(0===n)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:e,star:t}}();return s(ZD,SyntaxError),we({type:"select",selector:t},e)}throw new SyntaxError("Unclosed placeable")}function f(){if("{"===e[n])return d();if(a(HD)){var t=He(u(HD),4),i=t[1],r=t[2],o=t[3],l=void 0===o?null:o;if("$"===i)return{type:"var",name:r};if(s(em)){var h=function(){var t=[];for(;;){switch(e[n]){case")":return n++,t;case void 0:throw new SyntaxError("Unclosed argument list")}t.push(v()),s(am)}}();if("-"===i)return{type:"term",name:r,attr:l,args:h};if(zD.test(r))return{type:"func",name:r,args:h};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:r,attr:l,args:[]}:{type:"mesg",name:r,attr:l}}return g()}function v(){var t=f();return"mesg"!==t.type?t:s(im)?{type:"narg",name:t.name,value:g()}:t}function p(){var t;return s($D,SyntaxError),t=a(WD)?D():{type:"str",value:o(jD)},s(tm,SyntaxError),t}function g(){if(a(WD))return D();if('"'===e[n])return function(){r('"',SyntaxError);var t="";for(;;){if(t+=o(UD),"\\"!==e[n]){if(r('"'))return{type:"str",value:t};throw new SyntaxError("Unclosed string literal")}t+=m()}}();throw new SyntaxError("Invalid expression")}function D(){var t=He(u(WD),3),e=t[1],n=t[2],i=(void 0===n?"":n).length;return{type:"num",value:parseFloat(e),precision:i}}function m(){if(a(GD))return o(GD);if(a(qD)){var t=He(u(qD),3),e=t[1],n=t[2],i=parseInt(e||n,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function y(){var t=n;switch(s(rm),e[n]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return b(e.slice(t,n))}return" "===e[n-1]&&b(e.slice(t,n))}function A(t,e){return t.replace(e,"")}function b(t){var e=t.replace(YD,"\n"),n=QD.exec(t)[1].length;return new um(e,n)}})),um=Ke((function t(e,n){Qe(this,t),this.value=e,this.length=n})),om=/<|&#?\w+;/,lm={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},hm={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function cm(t,e){var n=e.value;if("string"==typeof n)if("title"===t.localName&&"http://www.w3.org/1999/xhtml"===t.namespaceURI)t.textContent=n;else if(om.test(n)){var i=t.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=n,function(t,e){var n,i=Ue(t.childNodes);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.nodeType!==a.TEXT_NODE)if(a.hasAttribute("data-l10n-name")){var r=vm(e,a);t.replaceChild(r,a)}else if(Dm(a)){var s=pm(a);t.replaceChild(s,a)}else console.warn('An element of forbidden type "'.concat(a.localName,'" was found in ')+"the translation. Only safe text-level elements and elements with data-l10n-name are allowed."),t.replaceChild(gm(a),a)}}catch(t){i.e(t)}finally{i.f()}e.textContent="",e.appendChild(t)}(i.content,t)}else t.textContent=n;fm(e,t)}function dm(t,e){if(!t)return!1;var n,i=Ue(t);try{for(i.s();!(n=i.n()).done;){if(n.value.name===e)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}function fm(t,e){for(var n=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map((function(t){return t.trim()})):null,i=0,a=Array.from(e.attributes);i<a.length;i++){var r=a[i];mm(r.name,e,n)&&!dm(t.attributes,r.name)&&e.removeAttribute(r.name)}if(t.attributes)for(var s=0,u=Array.from(t.attributes);s<u.length;s++){var o=u[s];mm(o.name,e,n)&&e.getAttribute(o.name)!==o.value&&e.setAttribute(o.name,o.value)}}function vm(t,e){var n=e.getAttribute("data-l10n-name"),i=t.querySelector('[data-l10n-name="'.concat(n,'"]'));return i?i.localName!==e.localName?(console.warn('An element named "'.concat(n,'" was found in the translation ')+"but its type ".concat(e.localName," didn't match the ")+"element found in the source (".concat(i.localName,").")),gm(e)):(t.removeChild(i),ym(e,i.cloneNode(!1))):(console.warn('An element named "'.concat(n,"\" wasn't found in the source.")),gm(e))}function pm(t){var e=t.ownerDocument.createElement(t.localName);return ym(t,e)}function gm(t){return t.ownerDocument.createTextNode(t.textContent)}function Dm(t){var e=lm[t.namespaceURI];return e&&e.includes(t.localName)}function mm(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&n.includes(t))return!0;var i=hm[e.namespaceURI];if(!i)return!1;var a=t.toLowerCase(),r=e.localName;if(i.global.includes(a))return!0;if(!i[r])return!1;if(i[r].includes(a))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===r&&"value"===a){var s=e.type.toLowerCase();if("submit"===s||"button"===s||"reset"===s)return!0}return!1}function ym(t,e){return e.textContent=t.textContent,fm(t,e),e}var Am=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,ke(Array)),Ke(t,null,[{key:"from",value:function(t){return t instanceof this?t:new this(t)}}])}(),bm=function(){function t(e){var n;if(Qe(this,t),n=Je(this,t),Symbol.asyncIterator in Object(e))n.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");n.iterator=e[Symbol.iterator]()}return n}return tn(t,Am),Ke(t,[{key:Symbol.asyncIterator,value:function(){var t=this,e=0;return{next:function(){return Ie(Le().mark((function n(){return Le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.length<=e&&t.push(t.iterator.next()),n.abrupt("return",t[e++]);case 2:case"end":return n.stop()}}),n)})))()}}}},{key:"touchNext",value:(e=Ie(Le().mark((function t(){var e,n,i,a=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1,n=0;case 2:if(!(n++<e)){t.next=14;break}if(i=this[this.length-1],t.t0=i,!t.t0){t.next=9;break}return t.next=8,i;case 8:t.t0=t.sent.done;case 9:if(!t.t0){t.next=11;break}return t.abrupt("break",14);case 11:this.push(this.iterator.next()),t.next=2;break;case 14:return t.abrupt("return",this[this.length-1]);case 15:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]);var e}(),km=function(){return Ke((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;Qe(this,t),this.resourceIds=e,this.generateBundles=n,this.onChange(!0)}),[{key:"addResourceIds",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e=this.resourceIds).push.apply(e,xe(t)),this.onChange(n),this.resourceIds.length}},{key:"removeResourceIds",value:function(t){return this.resourceIds=this.resourceIds.filter((function(e){return!t.includes(e)})),this.onChange(),this.resourceIds.length}},{key:"formatWithFallback",value:(e=Ie(Le().mark((function t(e,n){var i,a,r,s,u,o,l,h,c,d,f;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],a=!1,r=!1,s=!1,t.prev=4,o=on(this.bundles);case 6:return t.next=8,o.next();case 8:if(!(r=!(l=t.sent).done)){t.next=18;break}if(h=l.value,a=!0,0!==(c=Cm(n,h,e,i)).size){t.next=14;break}return t.abrupt("break",18);case 14:"undefined"!=typeof console&&(d=h.locales[0],f=Array.from(c).join(", "),console.warn("[fluent] Missing translations in ".concat(d,": ").concat(f)));case 15:r=!1,t.next=6;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),s=!0,u=t.t0;case 24:if(t.prev=24,t.prev=25,!r||null==o.return){t.next=29;break}return t.next=29,o.return();case 29:if(t.prev=29,!s){t.next=32;break}throw u;case 32:return t.finish(29);case 33:return t.finish(24);case 34:return a||"undefined"==typeof console||console.warn("[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ".concat(JSON.stringify(e),".\n  resourceIds: ").concat(JSON.stringify(this.resourceIds),".")),t.abrupt("return",i);case 36:case"end":return t.stop()}}),t,this,[[4,20,24,34],[25,,29,33]])}))),function(t,n){return e.apply(this,arguments)})},{key:"formatMessages",value:function(t){return this.formatWithFallback(t,wm)}},{key:"formatValues",value:function(t){return this.formatWithFallback(t,Em)}},{key:"formatValue",value:(t=Ie(Le().mark((function t(e,n){var i,a,r;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.formatValues([{id:e,args:n}]);case 2:return i=t.sent,a=He(i,1),r=a[0],t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"handleEvent",value:function(){this.onChange()}},{key:"onChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.bundles=bm.from(this.generateBundles(this.resourceIds)),t&&this.bundles.touchNext(2)}}]);var t,e}();function Em(t,e,n,i){return n.value?t.formatPattern(n.value,i,e):null}function wm(t,e,n,i){var a={value:null,attributes:null};n.value&&(a.value=t.formatPattern(n.value,i,e));var r=Object.keys(n.attributes);if(r.length>0){a.attributes=new Array(r.length);var s,u=Ue(r.entries());try{for(u.s();!(s=u.n()).done;){var o=He(s.value,2),l=o[0],h=o[1],c=t.formatPattern(n.attributes[h],i,e);a.attributes[l]={name:h,value:c}}}catch(t){u.e(t)}finally{u.f()}}return a}function Cm(t,e,n,i){var a=[],r=new Set;return n.forEach((function(n,s){var u=n.id,o=n.args;if(void 0===i[s]){var l=e.getMessage(u);if(l){if(a.length=0,i[s]=t(e,a,l,o),a.length>0&&"undefined"!=typeof console){var h=e.locales[0],c=a.join(", ");console.warn("[fluent][resolver] errors in ".concat(h,"/").concat(u,": ").concat(c,"."))}}else r.add(u)}})),r}var Fm="data-l10n-id",_m="data-l10n-args",xm="[".concat(Fm,"]"),Sm=function(){function t(e,n){var i;return Qe(this,t),(i=Je(this,t,[e,n])).roots=new Set,i.pendingrAF=null,i.pendingElements=new Set,i.windowElement=null,i.mutationObserver=null,i.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Fm,_m]},i}return tn(t,km),Ke(t,[{key:"onChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Fe(t,"onChange",this,3)([e]),this.roots&&this.translateRoots()}},{key:"setAttributes",value:function(t,e,n){return t.setAttribute(Fm,e),n?t.setAttribute(_m,JSON.stringify(n)):t.removeAttribute(_m),t}},{key:"getAttributes",value:function(t){return{id:t.getAttribute(Fm),args:JSON.parse(t.getAttribute(_m)||null)}}},{key:"connectRoot",value:function(t){var e,n=this,i=Ue(this.roots);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(a===t||a.contains(t)||t.contains(a))throw new Error("Cannot add a root that overlaps with existing root.")}}catch(t){i.e(t)}finally{i.f()}if(this.windowElement){if(this.windowElement!==t.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=t.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver((function(t){return n.translateMutations(t)}));this.roots.add(t),this.mutationObserver.observe(t,this.observerConfig)}},{key:"disconnectRoot",value:function(t){return this.roots.delete(t),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}},{key:"translateRoots",value:function(){var t=this,e=Array.from(this.roots);return Promise.all(e.map((function(e){return t.translateFragment(e)})))}},{key:"pauseObserving",value:function(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}},{key:"resumeObserving",value:function(){if(this.mutationObserver){var t,e=Ue(this.roots);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.mutationObserver.observe(n,this.observerConfig)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"translateMutations",value:function(t){var e,n=this,i=Ue(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;switch(a.type){case"attributes":a.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(a.target);break;case"childList":var r,s=Ue(a.addedNodes);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(u.nodeType===u.ELEMENT_NODE)if(u.childElementCount){var o,l=Ue(this.getTranslatables(u));try{for(l.s();!(o=l.n()).done;){var h=o.value;this.pendingElements.add(h)}}catch(t){l.e(t)}finally{l.f()}}else u.hasAttribute(Fm)&&this.pendingElements.add(u)}}catch(t){s.e(t)}finally{s.f()}}}}catch(t){i.e(t)}finally{i.f()}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame((function(){n.translateElements(Array.from(n.pendingElements)),n.pendingElements.clear(),n.pendingrAF=null})))}},{key:"translateFragment",value:function(t){return this.translateElements(this.getTranslatables(t))}},{key:"translateElements",value:(e=Ie(Le().mark((function t(e){var n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return",void 0);case 2:return n=e.map(this.getKeysForElement),t.next=5,this.formatMessages(n);case 5:return i=t.sent,t.abrupt("return",this.applyTranslations(e,i));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"applyTranslations",value:function(t,e){this.pauseObserving();for(var n=0;n<t.length;n++)void 0!==e[n]&&cm(t[n],e[n]);this.resumeObserving()}},{key:"getTranslatables",value:function(t){var e=Array.from(t.querySelectorAll(xm));return"function"==typeof t.hasAttribute&&t.hasAttribute(Fm)&&e.push(t),e}},{key:"getKeysForElement",value:function(t){return{id:t.getAttribute(Fm),args:JSON.parse(t.getAttribute(_m)||null)}}}]);var e}(),Mm=new WeakMap,Bm=new WeakMap,Pm=new WeakMap,Lm=new WeakMap,Tm=function(){return Ke((function t(e){var n=e.lang,i=e.isRTL,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Qe(this,t),Re(this,Mm,void 0),Re(this,Bm,new Set),Re(this,Pm,void 0),Re(this,Lm,void 0),We(Pm,this,Im.call(t,n)),We(Lm,this,a),We(Mm,this,(null!=i?i:Rm.call(t,Oe(Pm,this)))?"rtl":"ltr")}),[{key:"_setL10n",value:function(t){We(Lm,this,t)}},{key:"getLanguage",value:function(){return Oe(Pm,this)}},{key:"getDirection",value:function(){return Oe(Mm,this)}},{key:"get",value:(n=Ie(Le().mark((function t(e){var n,i,a,r,s=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:null,i=s.length>2?s[2]:void 0,!Array.isArray(e)){t.next=8;break}return e=e.map((function(t){return{id:t}})),t.next=6,Oe(Lm,this).formatMessages(e);case 6:return a=t.sent,t.abrupt("return",a.map((function(t){return t.value})));case 8:return t.next=10,Oe(Lm,this).formatMessages([{id:e,args:n}]);case 10:return r=t.sent,t.abrupt("return",(null==r?void 0:r[0].value)||i);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"translate",value:(e=Ie(Le().mark((function t(e){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Oe(Bm,this).add(e),t.prev=1,Oe(Lm,this).connectRoot(e),t.next=5,Oe(Lm,this).translateRoots();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(t){return e.apply(this,arguments)})},{key:"destroy",value:(t=Ie(Le().mark((function t(){var e,n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Ue(Oe(Bm,this));try{for(e.s();!(n=e.n()).done;)i=n.value,Oe(Lm,this).disconnectRoot(i)}catch(t){e.e(t)}finally{e.f()}Oe(Bm,this).clear(),Oe(Lm,this).pauseObserving();case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"pause",value:function(){Oe(Lm,this).pauseObserving()}},{key:"resume",value:function(){Oe(Lm,this).resumeObserving()}}]);var t,e,n}();function Im(t){var e;return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[t=(null===(e=t)||void 0===e?void 0:e.toLowerCase())||"en-us"]||t}function Rm(t){var e=t.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(e)}function Nm(t,e){var n=new sm(e),i=new ID(t),a=i.addResource(n);return a.length&&console.error("L10n errors",a),i}var Om=function(){function t(e){var n;Qe(this,t),n=Je(this,t,[{lang:e}]);var i=e?Wm.bind(t,"en-us",n.getLanguage()):Um.bind(t,n.getLanguage());return n._setL10n(new Sm([],i)),n}return tn(t,Tm),Ke(t)}();function Wm(t,e){var n=this;return rn(Le().mark((function i(){var a,r,s,u,o,l,h,c,d;return Le().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,an(je(Ae,n,zm).call(n));case 2:a=i.sent,r=a.baseURL,s=a.paths,u=[e],t!==e&&((o=e.split("-",1)[0])!==e&&u.push(o),u.push(t)),l=0,h=u;case 8:if(!(l<h.length)){i.next=24;break}return c=h[l],i.next=12,an(je(Ae,n,jm).call(n,c,r,s));case 12:if(!(d=i.sent)){i.next=18;break}return i.next=16,d;case 16:i.next=21;break;case 18:if("en-us"!==c){i.next=21;break}return i.next=21,je(Ae,n,Gm).call(n,c);case 21:l++,i.next=8;break;case 24:case"end":return i.stop()}}),i)})))()}function jm(t,e,n){return Hm.apply(this,arguments)}function Hm(){return(Hm=Ie(Le().mark((function t(e,n,i){var a,r,s;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i[e]){t.next=3;break}return t.abrupt("return",null);case 3:return r=new URL(a,n),t.next=6,Xg(r,"text");case 6:return s=t.sent,t.abrupt("return",Nm(e,s));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function zm(){return Vm.apply(this,arguments)}function Vm(){return(Vm=Ie(Le().mark((function t(){var e,n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=document.querySelector('link[type="application/l10n"]'),n=e.href,t.next=4,Xg(n,"json");case 4:return i=t.sent,t.abrupt("return",{baseURL:n.replace(/[^/]*$/,"")||"./",paths:i});case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",{baseURL:"./",paths:Object.create(null)});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function Um(t){var e=this;return rn(Le().mark((function n(){return Le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,je(Ae,e,Gm).call(e,t);case 2:case"end":return n.stop()}}),n)})))()}function Gm(t){return qm.apply(this,arguments)}function qm(){return(qm=Ie(Le().mark((function t(e){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Nm(e,"pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties…\npdfjs-document-properties-button-label = Document Properties…\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-kb = { $size_kb } KB ({ $size_b } bytes)\npdfjs-document-properties-mb = { $size_mb } MB ({ $size_b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-string = { $date }, { $time }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing…\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document…\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-string = { $date }, { $time }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text =\n    .aria-label = Text Editor\npdfjs-free-text-default-content = Start typing…\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, “A young man sits down at a table to eat a meal”\npdfjs-editor-resizer-label-top-left = Top left corner — resize\npdfjs-editor-resizer-label-top-middle = Top middle — resize\npdfjs-editor-resizer-label-top-right = Top right corner — resize\npdfjs-editor-resizer-label-middle-right = Middle right — resize\npdfjs-editor-resizer-label-bottom-right = Bottom right corner — resize\npdfjs-editor-resizer-label-bottom-middle = Bottom middle — resize\npdfjs-editor-resizer-label-bottom-left = Bottom left corner — resize\npdfjs-editor-resizer-label-middle-left = Middle left — resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all"));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Ae=Om;function Xm(){return document.location.hash}var Km=new WeakMap,Ym=new WeakSet,Qm=function(){return Ke((function t(e){var n=this,i=e.linkService,a=e.eventBus;Qe(this,t),Me(this,Ym),Re(this,Km,null),this.linkService=i,this.eventBus=a,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",(function(){n._isPagesLoaded=!1,n.eventBus._on("pagesloaded",(function(t){n._isPagesLoaded=!!t.pagesCount}),{once:!0})}))}),[{key:"initialize",value:function(t){var e=t.fingerprint,n=t.resetHistory,i=void 0!==n&&n,a=t.updateUrl,r=void 0!==a&&a;if(e&&"string"==typeof e){this._initialized&&this.reset();var s=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===r,this._initialized=!0,je(Ym,this,sy).call(this);var u=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=Xm(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!je(Ym,this,ty).call(this,u,!0)||i){var o=je(Ym,this,ny).call(this,!0),l=o.hash,h=o.page,c=o.rotation;return!l||s||i?void je(Ym,this,Jm).call(this,null,!0):void je(Ym,this,Jm).call(this,{hash:l,page:h,rotation:c},!0)}var d=u.destination;je(Ym,this,ey).call(this,d,u.uid,!0),void 0!==d.rotation&&(this._initialRotation=d.rotation),d.dest?(this._initialBookmark=JSON.stringify(d.dest),this._destination.page=null):d.hash?this._initialBookmark=d.hash:d.page&&(this._initialBookmark="page=".concat(d.page))}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function(){this._initialized&&(je(Ym,this,ry).call(this),this._initialized=!1,je(Ym,this,uy).call(this)),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}},{key:"push",value:function(t){var e=this,n=t.namedDest,i=void 0===n?null:n,a=t.explicitDest,r=t.pageNumber;if(this._initialized)if(i&&"string"!=typeof i)console.error("PDFHistory.push: "+'"'.concat(i,'" is not a valid namedDest parameter.'));else if(Array.isArray(a))if(je(Ym,this,$m).call(this,r)||null===r&&!this._destination){var s=i||JSON.stringify(a);if(s){var u=!1;if(this._destination&&(function(t,e){if("string"!=typeof t||"string"!=typeof e)return!1;if(t===e)return!0;if(kp(t).get("nameddest")===e)return!0;return!1}(this._destination.hash,s)||function(t,e){function n(t,e){if(nn(t)!==nn(e))return!1;if(Array.isArray(t)||Array.isArray(e))return!1;if(null!==t&&"object"===nn(t)&&null!==e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!n(t[i],e[i]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0,a=t.length;i<a;i++)if(!n(t[i],e[i]))return!1;return!0}(this._destination.dest,a))){if(this._destination.page)return;u=!0}this._popStateInProgress&&!u||(je(Ym,this,Jm).call(this,{dest:a,hash:s,page:r,rotation:this.linkService.rotation},u),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){e._popStateInProgress=!1}))))}}else console.error("PDFHistory.push: "+'"'.concat(r,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(a,'" is not a valid explicitDest parameter.'))}},{key:"pushPage",value:function(t){var e,n=this;this._initialized&&(je(Ym,this,$m).call(this,t)?(null===(e=this._destination)||void 0===e?void 0:e.page)!==t&&(this._popStateInProgress||(je(Ym,this,Jm).call(this,{dest:null,hash:"page=".concat(t),page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){n._popStateInProgress=!1}))))):console.error('PDFHistory.pushPage: "'.concat(t,'" is not a valid page number.')))}},{key:"pushCurrentPosition",value:function(){this._initialized&&!this._popStateInProgress&&je(Ym,this,Zm).call(this)}},{key:"back",value:function(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;je(Ym,this,ty).call(this,t)&&t.uid>0&&window.history.back()}}},{key:"forward",value:function(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;je(Ym,this,ty).call(this,t)&&t.uid<this._maxUid&&window.history.forward()}}},{key:"popStateInProgress",get:function(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function(){return this._initialized?this._initialRotation:null}}])}();function Jm(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,i={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:t};if(je(Ym,this,ey).call(this,t,i.uid),this._updateUrl&&null!=t&&t.hash){var a=document.location.href.split("#",1)[0];a.startsWith("file://")||(e="".concat(a,"#").concat(t.hash))}n?window.history.replaceState(i,"",e):window.history.pushState(i,"",e)}function Zm(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var e=this._position;if(t&&((e=Object.assign(Object.create(null),this._position)).temporary=!0),this._destination){if(this._destination.temporary)je(Ym,this,Jm).call(this,e,!0);else if(this._destination.hash!==e.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var n=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(void 0!==this._destination.dest||!this._destination.first)return;n=!0}je(Ym,this,Jm).call(this,e,n)}}else je(Ym,this,Jm).call(this,e)}}function $m(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}function ty(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!e)return!1;if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;var n=He(performance.getEntriesByType("navigation"),1)[0];if("reload"!==(null==n?void 0:n.type))return!1}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"===nn(t.destination))}function ey(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&null!=t&&t.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._maxUid=Math.max(this._maxUid,e),this._numPositionUpdates=0}function ny(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=unescape(Xm()).substring(1),n=kp(e),i=n.get("nameddest")||"",a=0|n.get("page");return(!je(Ym,this,$m).call(this,a)||t&&i.length>0)&&(a=null),{hash:e,page:a,rotation:this.linkService.rotation}}function iy(t){var e=this,n=t.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:n.pdfOpenParams.substring(1),page:this.linkService.page,first:n.pageNumber,rotation:n.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((function(){e._popStateInProgress||je(Ym,e,Zm).call(e,!0),e._updateViewareaTimeout=null}),1e3))}function ay(t){var e=this,n=t.state,i=Xm(),a=this._currentHash!==i;if(this._currentHash=i,n){if(je(Ym,this,ty).call(this,n)){this._popStateInProgress=!0,a&&(this._blockHashChange++,function(t){return pD.apply(this,arguments)}({target:window,name:"hashchange",delay:1e3}).then((function(){e._blockHashChange--})));var r=n.destination;je(Ym,this,ey).call(this,r,n.uid,!0),xp(r.rotation)&&(this.linkService.rotation=r.rotation),r.dest?this.linkService.goToDestination(r.dest):r.hash?this.linkService.setHash(r.hash):r.page&&(this.linkService.page=r.page),Promise.resolve().then((function(){e._popStateInProgress=!1}))}}else{this._uid++;var s=je(Ym,this,ny).call(this),u=s.hash,o=s.page,l=s.rotation;je(Ym,this,Jm).call(this,{hash:u,page:o,rotation:l},!0)}}function ry(){this._destination&&!this._destination.temporary||je(Ym,this,Zm).call(this)}function sy(){if(!Oe(Km,this)){We(Km,this,new AbortController);var t=Oe(Km,this).signal;this.eventBus._on("updateviewarea",je(Ym,this,iy).bind(this),{signal:t}),window.addEventListener("popstate",je(Ym,this,ay).bind(this),{signal:t}),window.addEventListener("pagehide",je(Ym,this,ry).bind(this),{signal:t})}}function uy(){var t;null===(t=Oe(Km,this))||void 0===t||t.abort(),We(Km,this,null)}var oy=new WeakMap,ly=new WeakMap,hy=new WeakMap,cy=new WeakMap,dy=new WeakMap,fy=function(){return Ke((function t(e){Qe(this,t),Re(this,oy,null),Re(this,ly,null),Re(this,hy,null),Re(this,cy,null),Re(this,dy,void 0),this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||(this.l10n=new Om),this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,We(dy,this,e.uiManager),We(oy,this,e.annotationLayer||null),We(cy,this,e.textLayer||null),We(ly,this,e.drawLayer||null),We(hy,this,e.onAppend||null)}),[{key:"render",value:(t=Ie(Le().mark((function t(e){var n,i,a,r,s,u=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("display"===(i=u.length>1&&void 0!==u[1]?u[1]:"display")){t.next=3;break}return t.abrupt("return");case 3:if(!this._cancelled){t.next=5;break}return t.abrupt("return");case 5:if(a=e.clone({dontFlip:!0}),!this.div){t.next=10;break}return this.annotationEditorLayer.update({viewport:a}),this.show(),t.abrupt("return");case 10:(r=this.div=document.createElement("div")).className="annotationEditorLayer",r.hidden=!0,r.dir=Oe(dy,this).direction,null===(n=Oe(hy,this))||void 0===n||n.call(this,r),this.annotationEditorLayer=new jg({uiManager:Oe(dy,this),div:r,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:a,annotationLayer:Oe(oy,this),textLayer:Oe(cy,this),drawLayer:Oe(ly,this)}),s={viewport:a,div:r,annotations:null,intent:i},this.annotationEditorLayer.render(s),this.show();case 19:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}},{key:"show",value:function(){this.div&&!this.annotationEditorLayer.isInvisible&&(this.div.hidden=!1)}}]);var t}(),vy=new Map,py=navigator.userAgent||"",gy=navigator.platform||"",Dy=navigator.maxTouchPoints||1,my=/Android/.test(py);(/\b(iPad|iPhone|iPod)(?=;)/.test(py)||"MacIntel"===gy&&Dy>1||my)&&vy.set("maxCanvasPixels",5242880),my&&vy.set("useSystemFonts",!1);var yy=1,Ay=2,by=4,ky=8,Ey=16,wy=128,Cy={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Fy={allowedGlobalEvents:{value:null,kind:yy},canvasMaxAreaInBytes:{value:-1,kind:yy+by},isInAutomation:{value:!1,kind:yy},localeProperties:{value:{lang:navigator.language||"en-US"},kind:yy},nimbusDataStr:{value:"",kind:yy},supportsCaretBrowsingMode:{value:!1,kind:yy},supportsDocumentFonts:{value:!0,kind:yy},supportsIntegratedFind:{value:!1,kind:yy},supportsMouseWheelZoomCtrlKey:{value:!0,kind:yy},supportsMouseWheelZoomMetaKey:{value:!0,kind:yy},supportsPinchToZoom:{value:!0,kind:yy},toolbarDensity:{value:0,kind:yy+Ey},altTextLearnMoreUrl:{value:"",kind:Ay+wy},annotationEditorMode:{value:0,kind:Ay+wy},annotationMode:{value:2,kind:Ay+wy},cursorToolOnLoad:{value:0,kind:Ay+wy},debuggerSrc:{value:"./debugger.mjs",kind:Ay},defaultZoomDelay:{value:400,kind:Ay+wy},defaultZoomValue:{value:"",kind:Ay+wy},disableHistory:{value:!1,kind:Ay},disablePageLabels:{value:!1,kind:Ay+wy},enableAltText:{value:!1,kind:Ay+wy},enableGuessAltText:{value:!0,kind:Ay+wy},enableHighlightEditor:{value:!1,kind:Ay+wy},enableHighlightFloatingButton:{value:!1,kind:Ay+wy},enablePermissions:{value:!1,kind:Ay+wy},enablePrintAutoRotate:{value:!0,kind:Ay+wy},enableScripting:{value:!0,kind:Ay+wy},enableUpdatedAddImage:{value:!1,kind:Ay+wy},externalLinkRel:{value:"noopener noreferrer nofollow",kind:Ay},externalLinkTarget:{value:0,kind:Ay+wy},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:Ay+wy},historyUpdateUrl:{value:!1,kind:Ay+wy},ignoreDestinationZoom:{value:!1,kind:Ay+wy},imageResourcesPath:{value:"./images/",kind:Ay},maxCanvasPixels:{value:Math.pow(2,25),kind:Ay},forcePageColors:{value:!1,kind:Ay+wy},pageColorsBackground:{value:"Canvas",kind:Ay+wy},pageColorsForeground:{value:"CanvasText",kind:Ay+wy},pdfBugEnabled:{value:!1,kind:Ay+wy},printResolution:{value:150,kind:Ay},sidebarViewOnLoad:{value:-1,kind:Ay+wy},scrollModeOnLoad:{value:-1,kind:Ay+wy},spreadModeOnLoad:{value:-1,kind:Ay+wy},textLayerMode:{value:1,kind:Ay+wy},viewOnLoad:{value:0,kind:Ay+wy},cMapPacked:{value:!0,kind:by},cMapUrl:{value:"../web/cmaps/",kind:by},disableAutoFetch:{value:!1,kind:by+wy},disableFontFace:{value:!1,kind:by+wy},disableRange:{value:!1,kind:by+wy},disableStream:{value:!1,kind:by+wy},docBaseUrl:{value:"",kind:by},enableHWA:{value:!0,kind:by+Ay+wy},enableXfa:{value:!0,kind:by+wy},fontExtraProperties:{value:!1,kind:by},isEvalSupported:{value:!0,kind:by},isOffscreenCanvasSupported:{value:!0,kind:by},maxImageSize:{value:-1,kind:by},pdfBug:{value:!1,kind:by},standardFontDataUrl:{value:"../web/standard_fonts/",kind:by},useSystemFonts:{value:void 0,kind:by,type:Cy.BOOLEAN+Cy.UNDEFINED},verbosity:{value:1,kind:by},workerPort:{value:null,kind:ky},workerSrc:{value:"../build/pdf.worker.mjs",kind:ky}};Fy.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:Ay},Fy.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:Ay},Fy.viewerCssTheme={value:0,kind:Ay+wy},Fy.disablePreferences={value:!1,kind:Ay};var _y,xy=new Map,Sy=Ue(vy);try{for(Sy.s();!(_y=Sy.n()).done;){var My=He(_y.value,2),By=My[0],Py=My[1];xy.set(By,Py)}}catch(t){Sy.e(t)}finally{Sy.f()}var Ly=function(){return Ke((function t(){throw Qe(this,t),new Error("Cannot initialize AppOptions.")}),null,[{key:"get",value:function(t){var e;return xy.has(t)?xy.get(t):null===(e=Fy[t])||void 0===e?void 0:e.value}},{key:"getAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.create(null);for(var i in Fy){var a=Fy[i];(!t||t&a.kind)&&(n[i]=!e&&xy.has(i)?xy.get(i):a.value)}return n}},{key:"set",value:function(t,e){this.setAll(Pe({},t,e))}},{key:"setAll",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in t){var a=Fy[i],r=t[i];if(a&&(nn(r)===nn(a.value)||Cy[nn(r).toUpperCase()]&a.type)){var s=a.kind;(!n||s&yy||s&wy)&&(this.eventBus&&s&Ey&&(e||(e=new Map)).set(i,r),xy.set(i,r))}}if(e){var u,o=Ue(e);try{for(o.s();!(u=o.n()).done;){var l=He(u.value,2),h=l[0],c=l[1];this.eventBus.dispatch(h.toLowerCase(),{source:this,value:c})}}catch(t){o.e(t)}finally{o.f()}}}}])}();Pe(Ly,"eventBus",void 0),Ly._checkDisablePreferences=function(){if(Ly.get("disablePreferences"))return!0;var t,e=Ue(xy);try{for(e.s();!(t=e.n()).done;){var n=He(t.value,1)[0];if(!vy.has(n)){console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.');break}}}catch(t){e.e(t)}finally{e.f()}return!1};var Ty=new WeakMap,Iy=function(){return Ke((function t(e){Qe(this,t),Re(this,Ty,null),this.pageIndex=e.pageIndex}),[{key:"render",value:(t=Ie(Le().mark((function t(){var e=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("display"===(e.length>0&&void 0!==e[0]?e[0]:"display")&&!Oe(Ty,this)&&!this._cancelled){t.next=3;break}return t.abrupt("return");case 3:We(Ty,this,new qg({pageIndex:this.pageIndex}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._cancelled=!0,Oe(Ty,this)&&(Oe(Ty,this).destroy(),We(Ty,this,null))}},{key:"setParent",value:function(t){var e;null===(e=Oe(Ty,this))||void 0===e||e.setParent(t)}},{key:"getDrawLayer",value:function(){return Oe(Ty,this)}}]);var t}(),Ry={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Ny=/^H(\d+)$/,Oy=new WeakMap,Wy=new WeakSet,jy=function(){return Ke((function t(){Qe(this,t),Me(this,Wy),Re(this,Oy,void 0)}),[{key:"renderingDone",get:function(){return void 0!==Oe(Oy,this)}},{key:"render",value:function(t){if(void 0!==Oe(Oy,this))return Oe(Oy,this);var e=je(Wy,this,zy).call(this,t);return null==e||e.classList.add("structTree"),We(Oy,this,e)}},{key:"hide",value:function(){Oe(Oy,this)&&!Oe(Oy,this).hidden&&(Oe(Oy,this).hidden=!0)}},{key:"show",value:function(){var t;null!==(t=Oe(Oy,this))&&void 0!==t&&t.hidden&&(Oe(Oy,this).hidden=!1)}}])}();function Hy(t,e){var n=t.alt,i=t.id,a=t.lang;void 0!==n&&e.setAttribute("aria-label",wp(n)),void 0!==i&&e.setAttribute("aria-owns",i),void 0!==a&&e.setAttribute("lang",wp(a,!0))}function zy(t){if(!t)return null;var e=document.createElement("span");if("role"in t){var n=t.role,i=n.match(Ny);i?(e.setAttribute("role","heading"),e.setAttribute("aria-level",i[1])):Ry[n]&&e.setAttribute("role",Ry[n])}if(je(Wy,this,Hy).call(this,t,e),t.children)if(1===t.children.length&&"id"in t.children[0])je(Wy,this,Hy).call(this,t.children[0],e);else{var a,r=Ue(t.children);try{for(r.s();!(a=r.n()).done;){var s=a.value;e.append(je(Wy,this,zy).call(this,s))}}catch(t){r.e(t)}finally{r.f()}}return e}var Vy=new WeakMap,Uy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,Xy=new WeakSet,Ky=function(){function t(){Qe(this,t),Me(this,Xy),Re(this,Vy,!1),Re(this,Uy,null),Re(this,Gy,new Map),Re(this,qy,new Map)}return Ke(t,[{key:"setTextMapping",value:function(t){We(Uy,this,t)}},{key:"enable",value:function(){if(Oe(Vy,this))throw new Error("TextAccessibilityManager is already enabled.");if(!Oe(Uy,this))throw new Error("Text divs and strings have not been set.");if(We(Vy,this,!0),We(Uy,this,Oe(Uy,this).slice()),Oe(Uy,this).sort(Yy),Oe(Gy,this).size>0){var t,e=Oe(Uy,this),n=Ue(Oe(Gy,this));try{for(n.s();!(t=n.n()).done;){var i=He(t.value,2),a=i[0],r=i[1];document.getElementById(a)?je(Xy,this,Qy).call(this,a,e[r]):Oe(Gy,this).delete(a)}}catch(t){n.e(t)}finally{n.f()}}var s,u=Ue(Oe(qy,this));try{for(u.s();!(s=u.n()).done;){var o=He(s.value,2),l=o[0],h=o[1];this.addPointerInTextLayer(l,h)}}catch(t){u.e(t)}finally{u.f()}Oe(qy,this).clear()}},{key:"disable",value:function(){Oe(Vy,this)&&(Oe(qy,this).clear(),We(Uy,this,null),We(Vy,this,!1))}},{key:"removePointerInTextLayer",value:function(t){var e;if(Oe(Vy,this)){var n=Oe(Uy,this);if(n&&0!==n.length){var i=t.id,a=Oe(Gy,this).get(i);if(void 0!==a){var r=n[a];Oe(Gy,this).delete(i);var s=r.getAttribute("aria-owns");null!==(e=s)&&void 0!==e&&e.includes(i)&&((s=s.split(" ").filter((function(t){return t!==i})).join(" "))?r.setAttribute("aria-owns",s):(r.removeAttribute("aria-owns"),r.setAttribute("role","presentation")))}}}else Oe(qy,this).delete(t)}},{key:"addPointerInTextLayer",value:function(e,n){var i=e.id;if(!i)return null;if(!Oe(Vy,this))return Oe(qy,this).set(e,n),null;n&&this.removePointerInTextLayer(e);var a=Oe(Uy,this);if(!a||0===a.length)return null;var r=Cp(a,(function(n){return Yy.call(t,e,n)<0})),s=Math.max(0,r-1),u=a[s];je(Xy,this,Qy).call(this,i,u),Oe(Gy,this).set(i,s);var o=u.parentNode;return null!=o&&o.classList.contains("markedContent")?o.id:null}},{key:"moveElementInDOM",value:function(e,n,i,a){var r=this.addPointerInTextLayer(i,a);if(!e.hasChildNodes())return e.append(n),r;var s=Array.from(e.childNodes).filter((function(t){return t!==n}));if(0===s.length)return r;var u=i||n,o=Cp(s,(function(e){return Yy.call(t,u,e)<0}));return 0===o?s[0].before(n):s[o-1].after(n),r}}])}();function Yy(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect();if(0===n.width&&0===n.height)return 1;if(0===i.width&&0===i.height)return-1;var a=n.y,r=n.y+n.height,s=n.y+n.height/2,u=i.y,o=i.y+i.height,l=i.y+i.height/2;return s<=u&&l>=r?-1:l<=a&&s>=o?1:n.x+n.width/2-(i.x+i.width/2)}function Qy(t,e){var n=e.getAttribute("aria-owns");null!=n&&n.includes(t)||e.setAttribute("aria-owns",n?"".concat(n," ").concat(t):t),e.removeAttribute("role")}var Jy=new WeakMap,Zy=function(){return Ke((function t(e){var n=e.findController,i=e.eventBus,a=e.pageIndex;Qe(this,t),Re(this,Jy,null),this.findController=n,this.matches=[],this.eventBus=i,this.pageIdx=a,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}),[{key:"setTextMapping",value:function(t,e){this.textDivs=t,this.textContentItemsStr=e}},{key:"enable",value:function(){var t=this;if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,Oe(Jy,this)||(We(Jy,this,new AbortController),this.eventBus._on("updatetextlayermatches",(function(e){e.pageIndex!==t.pageIdx&&-1!==e.pageIndex||t._updateMatches()}),{signal:Oe(Jy,this).signal})),this._updateMatches()}},{key:"disable",value:function(){var t;this.enabled&&(this.enabled=!1,null===(t=Oe(Jy,this))||void 0===t||t.abort(),We(Jy,this,null),this._updateMatches(!0))}},{key:"_convertMatches",value:function(t,e){if(!t)return[];for(var n=this.textContentItemsStr,i=0,a=0,r=n.length-1,s=[],u=0,o=t.length;u<o;u++){for(var l=t[u];i!==r&&l>=a+n[i].length;)a+=n[i].length,i++;i===n.length&&console.error("Could not find a matching mapping");var h={begin:{divIdx:i,offset:l-a}};for(l+=e[u];i!==r&&l>a+n[i].length;)a+=n[i].length,i++;h.end={divIdx:i,offset:l-a},s.push(h)}return s}},{key:"_renderMatches",value:function(t){if(0!==t.length){var e=this.findController,n=this.pageIdx,i=this.textContentItemsStr,a=this.textDivs,r=n===e.selected.pageIdx,s=e.selected.matchIdx,u=null,o={offset:void 0},l=s,h=l+1;if(e.state.highlightAll)l=0,h=t.length;else if(!r)return;for(var c=-1,d=-1,f=l;f<h;f++){var v=t[f],p=v.begin;if(p.divIdx!==c||p.offset!==d){c=p.divIdx,d=p.offset;var g=v.end,D=r&&f===s,m=D?" selected":"",y=0;if(u&&p.divIdx===u.divIdx?E(u.divIdx,u.offset,p.offset):(null!==u&&E(u.divIdx,u.offset,o.offset),k(p)),p.divIdx===g.divIdx)y=E(p.divIdx,p.offset,g.offset,"highlight"+m);else{y=E(p.divIdx,p.offset,o.offset,"highlight begin"+m);for(var A=p.divIdx+1,b=g.divIdx;A<b;A++)a[A].className="highlight middle"+m;k(g,"highlight end"+m)}u=g,D&&e.scrollMatchIntoView({element:a[p.divIdx],selectedLeft:y,pageIndex:n,matchIndex:s})}}u&&E(u.divIdx,u.offset,o.offset)}function k(t,e){var n=t.divIdx;return a[n].textContent="",E(n,0,t.offset,e)}function E(t,e,n,r){var s=a[t];if(s.nodeType===Node.TEXT_NODE){var u=document.createElement("span");s.before(u),u.append(s),a[t]=u,s=u}var o=i[t].substring(e,n),l=document.createTextNode(o);if(r){var h=document.createElement("span");return h.className="".concat(r," appended"),h.append(l),s.append(h),r.includes("selected")?h.offsetLeft:0}return s.append(l),0}}},{key:"_updateMatches",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.enabled||t){var e,n=this.findController,i=this.matches,a=this.pageIdx,r=this.textContentItemsStr,s=this.textDivs,u=-1,o=Ue(i);try{for(o.s();!(e=o.n()).done;){for(var l=e.value,h=Math.max(u,l.begin.divIdx),c=l.end.divIdx;h<=c;h++){var d=s[h];d.textContent=r[h],d.className=""}u=l.end.divIdx+1}}catch(t){o.e(t)}finally{o.f()}if(null!=n&&n.highlightMatches&&!t){var f=n.pageMatches[a]||null,v=n.pageMatchesLength[a]||null;this.matches=this._convertMatches(f,v),this._renderMatches(this.matches)}}}}])}(),$y=new WeakMap,tA=new WeakMap,eA=new WeakMap,nA=new WeakMap,iA=new WeakSet,aA=function(){function t(e){var n=e.pdfPage,i=e.highlighter,a=void 0===i?null:i,r=e.accessibilityManager,s=void 0===r?null:r,u=e.enablePermissions,o=void 0!==u&&u,l=e.onAppend,h=void 0===l?null:l;Qe(this,t),Me(this,iA),Re(this,$y,!1),Re(this,tA,null),Re(this,eA,!1),Re(this,nA,null),this.pdfPage=n,this.highlighter=a,this.accessibilityManager=s,We($y,this,!0===o),We(tA,this,h),this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}return Ke(t,[{key:"render",value:(e=Ie(Le().mark((function t(e){var n,i,a,r,s,u,o,l,h,c,d=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=d.length>1&&void 0!==d[1]?d[1]:null,!Oe(eA,this)||!Oe(nA,this)){t.next=5;break}return Oe(nA,this).update({viewport:e,onBefore:this.hide.bind(this)}),this.show(),t.abrupt("return");case 5:return this.cancel(),We(nA,this,new nD({textContentSource:this.pdfPage.streamTextContent(u||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:e})),o=Oe(nA,this),l=o.textDivs,h=o.textContentItemsStr,null===(n=this.highlighter)||void 0===n||n.setTextMapping(l,h),null===(i=this.accessibilityManager)||void 0===i||i.setTextMapping(l),t.next=12,Oe(nA,this).render();case 12:We(eA,this,!0),(c=document.createElement("div")).className="endOfContent",this.div.append(c),je(iA,this,rA).call(this,c),null===(a=Oe(tA,this))||void 0===a||a.call(this,this.div),null===(r=this.highlighter)||void 0===r||r.enable(),null===(s=this.accessibilityManager)||void 0===s||s.enable();case 20:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"hide",value:function(){var t;!this.div.hidden&&Oe(eA,this)&&(null===(t=this.highlighter)||void 0===t||t.disable(),this.div.hidden=!0)}},{key:"show",value:function(){var t;this.div.hidden&&Oe(eA,this)&&(this.div.hidden=!1,null===(t=this.highlighter)||void 0===t||t.enable())}},{key:"cancel",value:function(){var e,n,i;null===(e=Oe(nA,this))||void 0===e||e.cancel(),We(nA,this,null),null===(n=this.highlighter)||void 0===n||n.disable(),null===(i=this.accessibilityManager)||void 0===i||i.disable(),sA.call(t,this.div)}}]);var e}();function rA(t){var e=this,n=this.div;n.addEventListener("mousedown",(function(e){t.classList.add("active")})),n.addEventListener("copy",(function(t){if(!Oe($y,e)){var n=document.getSelection();t.clipboardData.setData("text/plain",wp(Qg(n.toString())))}t.preventDefault(),t.stopPropagation()})),oA._.set(n,t),uA.call(be)}function sA(t){var e;(je(be,this,oA)._.delete(t),0===je(be,this,oA)._.size)&&(null===(e=je(be,this,lA)._)||void 0===e||e.abort(),lA._=je(be,this,null))}function uA(){var t=this;if(!je(be,this,lA)._){lA._=je(be,this,new AbortController);var e,n,i=je(be,this,lA)._.signal,a=function(t,e){e.append(t),t.style.width="",t.style.height="",t.classList.remove("active")};document.addEventListener("pointerup",(function(){je(be,t,oA)._.forEach(a)}),{signal:i}),document.addEventListener("selectionchange",(function(){var i=document.getSelection();if(0!==i.rangeCount){for(var r=new Set,s=0;s<i.rangeCount;s++){var u,o=i.getRangeAt(s),l=Ue(je(be,t,oA)._.keys());try{for(l.s();!(u=l.n()).done;){var h=u.value;!r.has(h)&&o.intersectsNode(h)&&r.add(h)}}catch(t){l.e(t)}finally{l.f()}}var c,d=Ue(je(be,t,oA)._);try{for(d.s();!(c=d.n()).done;){var f=He(c.value,2),v=f[0],p=f[1];r.has(v)?p.classList.add("active"):a(p,v)}}catch(t){d.e(t)}finally{d.f()}if(null!=e||(e="none"===getComputedStyle(je(be,t,oA)._.values().next().value).getPropertyValue("-moz-user-select")),!e){var g=i.getRangeAt(0),D=n&&(0===g.compareBoundaryPoints(Range.END_TO_END,n)||0===g.compareBoundaryPoints(Range.START_TO_END,n)),m=D?g.startContainer:g.endContainer;m.nodeType===Node.TEXT_NODE&&(m=m.parentNode);var y=m.parentElement.closest(".textLayer"),A=je(be,t,oA)._.get(y);A&&(A.style.width=y.style.width,A.style.height=y.style.height,m.parentElement.insertBefore(A,D?m:m.nextSibling)),n=g.cloneRange()}}else je(be,t,oA)._.forEach(a)}),{signal:i})}}be=aA;var oA={_:new Map},lA={_:null},hA=function(){return Ke((function t(e){var n=e.pdfPage,i=e.annotationStorage,a=void 0===i?null:i,r=e.linkService,s=e.xfaHtml,u=void 0===s?null:s;Qe(this,t),this.pdfPage=n,this.annotationStorage=a,this.linkService=r,this.xfaHtml=u,this.div=null,this._cancelled=!1}),[{key:"render",value:(t=Ie(Le().mark((function t(e){var n,i,a,r,s=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("print"!==(n=s.length>1&&void 0!==s[1]?s[1]:"display")){t.next=6;break}return i={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},this.div=document.createElement("div"),i.div=this.div,t.abrupt("return",aD.render(i));case 6:return t.next=8,this.pdfPage.getXfa();case 8:if(a=t.sent,!this._cancelled&&a){t.next=11;break}return t.abrupt("return",{textDivs:[]});case 11:if(r={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:a,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},!this.div){t.next=14;break}return t.abrupt("return",aD.update(r));case 14:return this.div=document.createElement("div"),r.div=this.div,t.abrupt("return",aD.render(r));case 17:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}}]);var t}(),cA={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new Ng}},dA=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]),fA=new WeakMap,vA=new WeakMap,pA=new WeakMap,gA=new WeakMap,DA=new WeakMap,mA=new WeakMap,yA=new WeakMap,AA=new WeakMap,bA=new WeakMap,kA=new WeakMap,EA=new WeakMap,wA=new WeakMap,CA=new WeakMap,FA=new WeakSet,_A=function(){return Ke((function t(e){var n,i,a,r,s=this;Qe(this,t),Me(this,FA),Re(this,fA,Ug.ENABLE_FORMS),Re(this,vA,!1),Re(this,pA,!1),Re(this,gA,!1),Re(this,DA,null),Re(this,mA,null),Re(this,yA,null),Re(this,AA,null),Re(this,bA,hp.INITIAL),Re(this,kA,gp),Re(this,EA,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0}),Re(this,wA,new WeakMap),Re(this,CA,[null,null,null,null]);var u=e.container,o=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,We(DA,this,e.layerProperties||cA),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||1,this.viewport=o,this.pdfPageRotate=o.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,We(kA,this,null!==(n=e.textLayerMode)&&void 0!==n?n:gp),We(fA,this,null!==(i=e.annotationMode)&&void 0!==i?i:Ug.ENABLE_FORMS),this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=null!==(a=e.maxCanvasPixels)&&void 0!==a?a:Ly.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,We(vA,this,e.enableHWA||!1),this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||(this.l10n=new Om),this.renderTask=null,this.resume=null,this._isStandalone=!(null!==(r=this.renderingQueue)&&void 0!==r&&r.hasViewer()),this._container=u,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;var l=document.createElement("div");if(l.className="page",l.setAttribute("data-page-number",this.id),l.setAttribute("role","region"),l.setAttribute("data-l10n-id","pdfjs-page-landmark"),l.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=l,je(FA,this,SA).call(this),null==u||u.append(l),this._isStandalone){null==u||u.style.setProperty("--scale-factor",this.scale*Zg.PDF_TO_CSS_UNITS);var h=e.optionalContentConfigPromise;h&&h.then((function(t){h===s._optionalContentConfigPromise&&(Oe(EA,s).initialOptionalContent=t.hasInitialVisibility)})),e.l10n||this.l10n.translate(this.div)}}),[{key:"renderingState",get:function(){return Oe(bA,this)},set:function(t){var e=this;if(t!==Oe(bA,this))switch(We(bA,this,t),Oe(mA,this)&&(clearTimeout(Oe(mA,this)),We(mA,this,null)),t){case hp.PAUSED:this.div.classList.remove("loading");break;case hp.RUNNING:this.div.classList.add("loadingIcon"),We(mA,this,setTimeout((function(){e.div.classList.add("loading"),We(mA,e,null)}),0));break;case hp.INITIAL:case hp.FINISHED:this.div.classList.remove("loadingIcon","loading")}}},{key:"setPdfPage",value:function(t){var e,n,i,a;!this._isStandalone||"CanvasText"!==(null===(e=this.pageColors)||void 0===e?void 0:e.foreground)&&"Canvas"!==(null===(n=this.pageColors)||void 0===n?void 0:n.background)||(null===(i=this._container)||void 0===i||i.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),null===(a=this._container)||void 0===a||a.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight")));this.pdfPage=t,this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*Zg.PDF_TO_CSS_UNITS,rotation:r}),je(FA,this,SA).call(this),this.reset()}},{key:"destroy",value:function(){var t;this.reset(),null===(t=this.pdfPage)||void 0===t||t.cleanup()}},{key:"hasEditableAnnotations",value:function(){var t;return!(null===(t=this.annotationLayer)||void 0===t||!t.hasEditableAnnotations())}},{key:"_textHighlighter",get:function(){return eD(this,"_textHighlighter",new Zy({pageIndex:this.id-1,eventBus:this.eventBus,findController:Oe(DA,this).findController}))}},{key:"_resetZoomLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var e=this.zoomLayer.firstChild;Oe(wA,this).delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var t,e,n,i,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.keepZoomLayer,u=void 0!==s&&s,o=r.keepAnnotationLayer,l=void 0!==o&&o,h=r.keepAnnotationEditorLayer,c=void 0!==h&&h,d=r.keepXfaLayer,f=void 0!==d&&d,v=r.keepTextLayer,p=void 0!==v&&v;this.cancelRendering({keepAnnotationLayer:l,keepAnnotationEditorLayer:c,keepXfaLayer:f,keepTextLayer:p}),this.renderingState=hp.INITIAL;for(var g=this.div,D=g.childNodes,m=u&&this.zoomLayer||null,y=l&&(null===(t=this.annotationLayer)||void 0===t?void 0:t.div)||null,A=c&&(null===(e=this.annotationEditorLayer)||void 0===e?void 0:e.div)||null,b=f&&(null===(n=this.xfaLayer)||void 0===n?void 0:n.div)||null,k=p&&(null===(i=this.textLayer)||void 0===i?void 0:i.div)||null,E=D.length-1;E>=0;E--){var w=D[E];switch(w){case m:case y:case A:case b:case k:continue}w.remove();var C=Oe(CA,this).indexOf(w);C>=0&&(Oe(CA,this)[C]=null)}g.removeAttribute("data-loaded"),y&&this.annotationLayer.hide(),A&&this.annotationEditorLayer.hide(),b&&this.xfaLayer.hide(),k&&this.textLayer.hide(),null===(a=this.structTreeLayer)||void 0===a||a.hide(),m||(this.canvas&&(Oe(wA,this).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}},{key:"toggleEditingMode",value:function(t){this.hasEditableAnnotations()&&(We(gA,this,t),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}},{key:"update",value:function(t){var e=this,n=t.scale,i=void 0===n?0:n,a=t.rotation,r=void 0===a?null:a,s=t.optionalContentConfigPromise,u=void 0===s?null:s,o=t.drawingDelay,l=void 0===o?-1:o;this.scale=i||this.scale,"number"==typeof r&&(this.rotation=r),u instanceof Promise&&(this._optionalContentConfigPromise=u,u.then((function(t){u===e._optionalContentConfigPromise&&(Oe(EA,e).initialOptionalContent=t.hasInitialVisibility)}))),Oe(EA,this).directDrawing=!0;var h,c=(this.rotation+this.pdfPageRotate)%360;(this.viewport=this.viewport.clone({scale:this.scale*Zg.PDF_TO_CSS_UNITS,rotation:c}),je(FA,this,SA).call(this),this._isStandalone)&&(null===(h=this._container)||void 0===h||h.style.setProperty("--scale-factor",this.viewport.scale));if(this.canvas){var d=!1;if(Oe(pA,this))if(0===this.maxCanvasPixels)d=!0;else if(this.maxCanvasPixels>0){var f=this.viewport,v=f.width,p=f.height,g=this.outputScale,D=g.sx,m=g.sy;d=(Math.floor(v)*D|0)*(Math.floor(p)*m|0)>this.maxCanvasPixels}var y=l>=0&&l<1e3;if(y||d){if(y&&!d&&this.renderingState!==hp.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:l}),this.renderingState=hp.FINISHED,Oe(EA,this).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!y,hideTextLayer:y}),y)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:Oe(AA,this)})}this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}},{key:"cancelRendering",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.keepAnnotationLayer,i=void 0!==n&&n,a=e.keepAnnotationEditorLayer,r=void 0!==a&&a,s=e.keepXfaLayer,u=void 0!==s&&s,o=e.keepTextLayer,l=void 0!==o&&o,h=e.cancelExtraDelay,c=void 0===h?0:h;(this.renderTask&&(this.renderTask.cancel(c),this.renderTask=null),this.resume=null,!this.textLayer||l&&this.textLayer.div||(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationLayer||i&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.annotationEditorLayer||r&&this.annotationEditorLayer.div||(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||u&&this.xfaLayer.div)||(this.xfaLayer.cancel(),this.xfaLayer=null,null===(t=this._textHighlighter)||void 0===t||t.disable())}},{key:"cssTransform",value:function(t){var e=t.target,n=t.redrawAnnotationLayer,i=void 0!==n&&n,a=t.redrawAnnotationEditorLayer,r=void 0!==a&&a,s=t.redrawXfaLayer,u=void 0!==s&&s,o=t.redrawTextLayer,l=void 0!==o&&o,h=t.hideTextLayer,c=void 0!==h&&h;if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);var d=e.style;d.width=d.height=""}var f,v=Oe(wA,this).get(e);if(this.viewport!==v){var p=this.viewport.rotation-v.rotation,g=Math.abs(p),D=1,m=1;if(90===g||270===g){var y=this.viewport,A=y.width,b=y.height;D=b/A,m=A/b}e.style.transform="rotate(".concat(p,"deg) scale(").concat(D,", ").concat(m,")")}(i&&this.annotationLayer&&je(FA,this,BA).call(this),r&&this.annotationEditorLayer&&(this.drawLayer&&je(FA,this,IA).call(this),je(FA,this,LA).call(this)),u&&this.xfaLayer&&je(FA,this,NA).call(this),this.textLayer)&&(c?(this.textLayer.hide(),null===(f=this.structTreeLayer)||void 0===f||f.hide()):l&&je(FA,this,WA).call(this))}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}},{key:"getPagePoint",value:function(t,e){return this.viewport.convertToPdfPoint(t,e)}},{key:"draw",value:(t=Ie(Le().mark((function t(){var e,n,i,a,r,s,u,o,l,h,c,d,f,v,p,g,D,m,y,A,b,k,E,w,C,F,_,x,S,M,B,P,L,T,I,R=this;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.renderingState!==hp.INITIAL&&(console.error("Must be in new state before drawing"),this.reset()),e=this.div,n=this.l10n,i=this.pageColors,a=this.pdfPage,r=this.viewport,a){t.next=5;break}throw this.renderingState=hp.FINISHED,new Error("pdfPage is not loaded");case 5:return this.renderingState=hp.RUNNING,(s=document.createElement("div")).classList.add("canvasWrapper"),je(FA,this,xA).call(this,s,"canvasWrapper"),this.textLayer||Oe(kA,this)===pp||a.isPureXfa||(this._accessibilityManager||(this._accessibilityManager=new Ky),this.textLayer=new aA({pdfPage:a,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:Oe(kA,this)===Dp,onAppend:function(t){R.l10n.pause(),je(FA,R,xA).call(R,t,"textLayer"),R.l10n.resume()}})),this.annotationLayer||Oe(fA,this)===Ug.DISABLE||(u=Oe(DA,this),o=u.annotationStorage,l=u.annotationEditorUIManager,h=u.downloadManager,c=u.enableScripting,d=u.fieldObjectsPromise,f=u.hasJSActionsPromise,v=u.linkService,this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new oD({pdfPage:a,annotationStorage:o,imageResourcesPath:this.imageResourcesPath,renderForms:Oe(fA,this)===Ug.ENABLE_FORMS,linkService:v,downloadManager:h,enableScripting:c,hasJSActionsPromise:f,fieldObjectsPromise:d,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:l,onAppend:function(t){je(FA,R,xA).call(R,t,"annotationLayer")}})),p=function(t){var e;if(null===(e=A)||void 0===e||e(!1),R.renderingQueue&&!R.renderingQueue.isHighestPriority(R))return R.renderingState=hp.PAUSED,void(R.resume=function(){R.renderingState=hp.RUNNING,t()});t()},g=r.width,D=r.height,(m=document.createElement("canvas")).setAttribute("role","presentation"),m.hidden=!0,y=!(null==i||!i.background||null==i||!i.foreground),A=function(t){y&&!t||(m.hidden=!1,A=null)},s.append(m),this.canvas=m,b=m.getContext("2d",{alpha:!1,willReadFrequently:!Oe(vA,this)}),k=this.outputScale=new Ap,0===this.maxCanvasPixels?(E=1/this.scale,k.sx*=E,k.sy*=E,We(pA,this,!0)):this.maxCanvasPixels>0&&(w=g*D,C=Math.sqrt(this.maxCanvasPixels/w),k.sx>C||k.sy>C?(k.sx=C,k.sy=C,We(pA,this,!0)):We(pA,this,!1)),F=Fp(k.sx),_=Fp(k.sy),m.width=_p(g*k.sx,F[0]),m.height=_p(D*k.sy,_[0]),(x=m.style).width=_p(g,F[1])+"px",x.height=_p(D,_[1])+"px",Oe(wA,this).set(m,r),S=k.scaled?[k.sx,0,0,k.sy,0,0]:null,M={canvasContext:b,transform:S,viewport:r,annotationMode:Oe(fA,this),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:i,isEditing:Oe(gA,this)},(B=this.renderTask=a.render(M)).onContinue=p,P=B.promise.then(Ie(Le().mark((function t(){var e,i,r,u;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=A)||void 0===e||e(!0),t.next=3,je(FA,R,GA).call(R,B);case 3:if(je(FA,R,WA).call(R),!R.annotationLayer){t.next=7;break}return t.next=7,je(FA,R,BA).call(R);case 7:if(i=Oe(DA,R),r=i.annotationEditorUIManager){t.next=10;break}return t.abrupt("return");case 10:return R.drawLayer||(R.drawLayer=new Iy({pageIndex:R.id})),t.next=13,je(FA,R,IA).call(R);case 13:R.drawLayer.setParent(s),R.annotationEditorLayer||(R.annotationEditorLayer=new fy({uiManager:r,pdfPage:a,l10n:n,accessibilityManager:R._accessibilityManager,annotationLayer:null===(u=R.annotationLayer)||void 0===u?void 0:u.annotationLayer,textLayer:R.textLayer,drawLayer:R.drawLayer.getDrawLayer(),onAppend:function(t){je(FA,R,xA).call(R,t,"annotationEditorLayer")}})),je(FA,R,LA).call(R);case 16:case"end":return t.stop()}}),t)}))),(function(t){var e;return t instanceof $g||null===(e=A)||void 0===e||e(!0),je(FA,R,GA).call(R,B,t)})),a.isPureXfa&&(this.xfaLayer||(L=Oe(DA,this),T=L.annotationStorage,I=L.linkService,this.xfaLayer=new hA({pdfPage:a,annotationStorage:T,linkService:I})),je(FA,this,NA).call(this)),e.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),t.abrupt("return",P);case 40:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"setPageLabel",value:function(t){var e;this.pageLabel="string"==typeof t?t:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:null!==(e=this.pageLabel)&&void 0!==e?e:this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"thumbnailCanvas",get:function(){var t=Oe(EA,this),e=t.directDrawing,n=t.initialOptionalContent,i=t.regularAnnotations;return e&&n&&i?this.canvas:null}}]);var t}();function xA(t,e){var n=dA.get(e),i=Oe(CA,this)[n];if(Oe(CA,this)[n]=t,i)i.replaceWith(t);else{for(var a=n-1;a>=0;a--){var r=Oe(CA,this)[a];if(r)return void r.after(t)}this.div.prepend(t)}}function SA(){var t=this.viewport;if(this.pdfPage){if(Oe(yA,this)===t.rotation)return;We(yA,this,t.rotation)}tD(this.div,t,!0,!1)}function MA(t,e){this.eventBus.dispatch(t,{source:this,pageNumber:this.id,error:e})}function BA(){return PA.apply(this,arguments)}function PA(){return(PA=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.annotationLayer.render(this.viewport,"display");case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error('#renderAnnotationLayer: "'.concat(t.t0,'".')),e=t.t0;case 10:return t.prev=10,je(FA,this,MA).call(this,"annotationlayerrendered",e),t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,6,10,13]])})))).apply(this,arguments)}function LA(){return TA.apply(this,arguments)}function TA(){return(TA=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.annotationEditorLayer.render(this.viewport,"display");case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error('#renderAnnotationEditorLayer: "'.concat(t.t0,'".')),e=t.t0;case 10:return t.prev=10,je(FA,this,MA).call(this,"annotationeditorlayerrendered",e),t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,6,10,13]])})))).apply(this,arguments)}function IA(){return RA.apply(this,arguments)}function RA(){return(RA=Ie(Le().mark((function t(){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.drawLayer.render("display");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error('#renderDrawLayer: "'.concat(t.t0,'".'));case 8:case"end":return t.stop()}}),t,this,[[0,5]])})))).apply(this,arguments)}function NA(){return OA.apply(this,arguments)}function OA(){return(OA=Ie(Le().mark((function t(){var e,n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.xfaLayer.render(this.viewport,"display");case 4:null!=(n=t.sent)&&n.textDivs&&this._textHighlighter&&je(FA,this,VA).call(this,n.textDivs),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error('#renderXfaLayer: "'.concat(t.t0,'".')),e=t.t0;case 12:return t.prev=12,null!==(i=this.xfaLayer)&&void 0!==i&&i.div&&(this.l10n.pause(),je(FA,this,xA).call(this,this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),je(FA,this,MA).call(this,"xfalayerrendered",e),t.finish(12);case 16:case"end":return t.stop()}}),t,this,[[1,8,12,16]])})))).apply(this,arguments)}function WA(){return jA.apply(this,arguments)}function jA(){return(jA=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.textLayer){t.next=2;break}return t.abrupt("return");case 2:return e=null,t.prev=3,t.next=6,this.textLayer.render(this.viewport);case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(3),!(t.t0 instanceof Wg)){t.next=12;break}return t.abrupt("return");case 12:console.error('#renderTextLayer: "'.concat(t.t0,'".')),e=t.t0;case 14:je(FA,this,MA).call(this,"textlayerrendered",e),je(FA,this,HA).call(this);case 16:case"end":return t.stop()}}),t,this,[[3,8]])})))).apply(this,arguments)}function HA(){return zA.apply(this,arguments)}function zA(){return(zA=Ie(Le().mark((function t(){var e,n,i,a,r;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.textLayer){t.next=2;break}return t.abrupt("return");case 2:return this.structTreeLayer||(this.structTreeLayer=new jy),t.next=5,this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree();case 5:i=t.sent,(a=null===(e=this.structTreeLayer)||void 0===e?void 0:e.render(i))&&(this.l10n.pause(),null===(r=this.canvas)||void 0===r||r.append(a),this.l10n.resume()),null===(n=this.structTreeLayer)||void 0===n||n.show();case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function VA(t){return UA.apply(this,arguments)}function UA(){return(UA=Ie(Le().mark((function t(e){var n,i,a,r,s;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pdfPage.getTextContent();case 2:n=t.sent,i=[],a=Ue(n.items);try{for(a.s();!(r=a.n()).done;)s=r.value,i.push(s.str)}catch(t){a.e(t)}finally{a.f()}this._textHighlighter.setTextMapping(e,i),this._textHighlighter.enable();case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function GA(t){return qA.apply(this,arguments)}function qA(){return qA=Ie(Le().mark((function t(e){var n,i=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:null,e===this.renderTask&&(this.renderTask=null),!(n instanceof $g)){t.next=5;break}return We(AA,this,null),t.abrupt("return");case 5:if(We(AA,this,n),this.renderingState=hp.FINISHED,this._resetZoomLayer(!0),Oe(EA,this).regularAnnotations=!e.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:Oe(AA,this)}),!n){t.next=12;break}throw n;case 12:case"end":return t.stop()}}),t,this)}))),qA.apply(this,arguments)}function XA(){return XA=Ie(Le().mark((function t(e){var n,i,a,r,s,u,o,l,h;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(n="").split("#",1)[0],t.next=3,e.getMetadata();case 3:if(a=t.sent,r=a.info,s=a.metadata,u=a.contentDispositionFilename,o=a.contentLength){t.next=14;break}return t.next=11,e.getDownloadInfo();case 11:l=t.sent,h=l.length,o=h;case 14:return t.abrupt("return",we(we({},r),{},{baseURL:i,filesize:o,filename:u||Kg(n),metadata:null==s?void 0:s.getRaw(),authors:null==s?void 0:s.get("dc:creator"),numPages:e.numPages,URL:n}));case 15:case"end":return t.stop()}}),t)}))),XA.apply(this,arguments)}var KA=function(){return Ke((function t(e){Qe(this,t),this._ready=new Promise((function(t,n){import(e).then((function(e){t(e.QuickJSSandbox())})).catch(n)}))}),[{key:"createSandbox",value:(n=Ie(Le().mark((function t(e){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready;case 2:t.sent.create(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"dispatchEventInSandbox",value:(e=Ie(Le().mark((function t(e){var n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready;case 2:n=t.sent,setTimeout((function(){return n.dispatchEvent(e)}),0);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"destroySandbox",value:(t=Ie(Le().mark((function t(){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready;case 2:t.sent.nukeSandbox();case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,n}(),YA=new WeakMap,QA=new WeakMap,JA=new WeakMap,ZA=new WeakMap,$A=new WeakMap,tb=new WeakMap,eb=new WeakMap,nb=new WeakMap,ib=new WeakMap,ab=new WeakMap,rb=new WeakMap,sb=new WeakSet,ub=function(){return Ke((function t(e){var n=e.eventBus,i=e.externalServices,a=void 0===i?null:i,r=e.docProperties,s=void 0===r?null:r;Qe(this,t),Me(this,sb),Re(this,YA,null),Re(this,QA,null),Re(this,JA,null),Re(this,ZA,null),Re(this,$A,null),Re(this,tb,null),Re(this,eb,null),Re(this,nb,null),Re(this,ib,!1),Re(this,ab,null),Re(this,rb,null),We($A,this,n),We(tb,this,a),We(JA,this,s)}),[{key:"setViewer",value:function(t){We(nb,this,t)}},{key:"setDocument",value:(a=Ie(Le().mark((function t(e){var n,i,a,r,s,u,o,l,h,c,d=this;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Oe(eb,this)){t.next=3;break}return t.next=3,je(sb,this,pb).call(this);case 3:if(We(eb,this,e),e){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);case 8:if(i=t.sent,a=He(i,3),r=a[0],s=a[1],u=a[2],r||u){t.next=17;break}return t.next=16,je(sb,this,pb).call(this);case 16:return t.abrupt("return");case 17:if(e===Oe(eb,this)){t.next=19;break}return t.abrupt("return");case 19:t.prev=19,We(ab,this,je(sb,this,vb).call(this)),t.next=29;break;case 23:return t.prev=23,t.t0=t.catch(19),console.error('setDocument: "'.concat(t.t0.message,'".')),t.next=28,je(sb,this,pb).call(this);case 28:return t.abrupt("return");case 29:return o=Oe($A,this),We(ZA,this,new AbortController),l=Oe(ZA,this),h=l.signal,o._on("updatefromsandbox",(function(t){(null==t?void 0:t.source)===window&&je(sb,d,ob).call(d,t.detail)}),{signal:h}),o._on("dispatcheventinsandbox",(function(t){var e;null===(e=Oe(ab,d))||void 0===e||e.dispatchEventInSandbox(t.detail)}),{signal:h}),o._on("pagechanging",(function(t){var e=t.pageNumber,n=t.previous;e!==n&&(je(sb,d,db).call(d,n),je(sb,d,hb).call(d,e))}),{signal:h}),o._on("pagerendered",(function(t){var e=t.pageNumber;d._pageOpenPending.has(e)&&e===Oe(nb,d).currentPageNumber&&je(sb,d,hb).call(d,e)}),{signal:h}),o._on("pagesdestroy",Ie(Le().mark((function t(){var e,n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je(sb,d,db).call(d,Oe(nb,d).currentPageNumber);case 2:return t.next=4,null===(e=Oe(ab,d))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"WillClose"});case 4:null===(n=Oe(YA,d))||void 0===n||n.resolve();case 5:case"end":return t.stop()}}),t)}))),{signal:h}),t.prev=37,t.next=40,Oe(JA,this).call(this,e);case 40:if(c=t.sent,e===Oe(eb,this)){t.next=43;break}return t.abrupt("return");case 43:return t.next=45,Oe(ab,this).createSandbox({objects:r,calculationOrder:s,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:we(we({},c),{},{actions:u})});case 45:o.dispatch("sandboxcreated",{source:this}),t.next=54;break;case 48:return t.prev=48,t.t1=t.catch(37),console.error('setDocument: "'.concat(t.t1.message,'".')),t.next=53,je(sb,this,pb).call(this);case 53:return t.abrupt("return");case 54:return t.next=56,null===(n=Oe(ab,this))||void 0===n?void 0:n.dispatchEventInSandbox({id:"doc",name:"Open"});case 56:return t.next=58,je(sb,this,hb).call(this,Oe(nb,this).currentPageNumber,!0);case 58:Promise.resolve().then((function(){e===Oe(eb,d)&&We(ib,d,!0)}));case 59:case"end":return t.stop()}}),t,this,[[19,23],[37,48]])}))),function(t){return a.apply(this,arguments)})},{key:"dispatchWillSave",value:(i=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(e=Oe(ab,this))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"WillSave"}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"dispatchDidSave",value:(n=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(e=Oe(ab,this))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"DidSave"}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"dispatchWillPrint",value:(e=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Oe(ab,this)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,null===(e=Oe(rb,this))||void 0===e?void 0:e.promise;case 4:return We(rb,this,Promise.withResolvers()),t.prev=5,t.next=8,Oe(ab,this).dispatchEventInSandbox({id:"doc",name:"WillPrint"});case 8:t.next=15;break;case 10:throw t.prev=10,t.t0=t.catch(5),Oe(rb,this).resolve(),We(rb,this,null),t.t0;case 15:return t.next=17,Oe(rb,this).promise;case 17:case"end":return t.stop()}}),t,this,[[5,10]])}))),function(){return e.apply(this,arguments)})},{key:"dispatchDidPrint",value:(t=Ie(Le().mark((function t(){var e;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(e=Oe(ab,this))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"DidPrint"}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"destroyPromise",get:function(){var t;return(null===(t=Oe(QA,this))||void 0===t?void 0:t.promise)||null}},{key:"ready",get:function(){return Oe(ib,this)}},{key:"_pageOpenPending",get:function(){return eD(this,"_pageOpenPending",new Set)}},{key:"_visitedPages",get:function(){return eD(this,"_visitedPages",new Map)}}]);var t,e,n,i,a}();function ob(t){return lb.apply(this,arguments)}function lb(){return lb=Ie(Le().mark((function t(e){var n,i,a,r,s,u,o,l,h,c,d,f,v,p;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Oe(nb,this),a=i.isInPresentationMode||i.isChangingPresentationMode,r=e.id,s=e.siblings,u=e.command,o=e.value,r){t.next=41;break}t.t0=u,t.next="clear"===t.t0?7:"error"===t.t0?9:"layout"===t.t0?11:"page-num"===t.t0?13:"print"===t.t0?15:"println"===t.t0?19:"zoom"===t.t0?21:"SaveAs"===t.t0?23:"FirstPage"===t.t0?25:"LastPage"===t.t0?27:"NextPage"===t.t0?29:"PrevPage"===t.t0?31:"ZoomViewIn"===t.t0?33:"ZoomViewOut"===t.t0?35:"WillPrintFinished"===t.t0?37:40;break;case 7:return console.clear(),t.abrupt("break",40);case 9:return console.error(o),t.abrupt("break",40);case 11:return a||(l=Np(o),i.spreadMode=l.spreadMode),t.abrupt("break",40);case 13:return i.currentPageNumber=o+1,t.abrupt("break",40);case 15:return t.next=17,i.pagesPromise;case 17:return Oe($A,this).dispatch("print",{source:this}),t.abrupt("break",40);case 19:return console.log(o),t.abrupt("break",40);case 21:return a||(i.currentScaleValue=o),t.abrupt("break",40);case 23:return Oe($A,this).dispatch("download",{source:this}),t.abrupt("break",40);case 25:return i.currentPageNumber=1,t.abrupt("break",40);case 27:return i.currentPageNumber=i.pagesCount,t.abrupt("break",40);case 29:return i.nextPage(),t.abrupt("break",40);case 31:return i.previousPage(),t.abrupt("break",40);case 33:return a||i.increaseScale(),t.abrupt("break",40);case 35:return a||i.decreaseScale(),t.abrupt("break",40);case 37:return null===(n=Oe(rb,this))||void 0===n||n.resolve(),We(rb,this,null),t.abrupt("break",40);case 40:return t.abrupt("return");case 41:if(!a||!e.focus){t.next=43;break}return t.abrupt("return");case 43:delete e.id,delete e.siblings,h=s?[r].concat(xe(s)):[r],c=Ue(h);try{for(c.s();!(d=c.n()).done;)f=d.value,(v=document.querySelector('[data-element-id="'.concat(f,'"]')))?v.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):null===(p=Oe(eb,this))||void 0===p||p.annotationStorage.setValue(f,e)}catch(t){c.e(t)}finally{c.f()}case 48:case"end":return t.stop()}}),t,this)}))),lb.apply(this,arguments)}function hb(t){return cb.apply(this,arguments)}function cb(){return cb=Ie(Le().mark((function t(e){var n,i,a,r,s,u=this,o=arguments;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],i=Oe(eb,this),a=this._visitedPages,n&&We(YA,this,Promise.withResolvers()),Oe(YA,this)){t.next=5;break}return t.abrupt("return");case 5:if((null==(r=Oe(nb,this).getPageView(e-1))?void 0:r.renderingState)===hp.FINISHED){t.next=9;break}return this._pageOpenPending.add(e),t.abrupt("return");case 9:this._pageOpenPending.delete(e),s=Ie(Le().mark((function t(){var n,s,o;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.has(e)?null:null===(n=r.pdfPage)||void 0===n?void 0:n.getJSActions();case 2:if(o=t.sent,i===Oe(eb,u)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,null===(s=Oe(ab,u))||void 0===s?void 0:s.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:o});case 7:case"end":return t.stop()}}),t)})))(),a.set(e,s);case 12:case"end":return t.stop()}}),t,this)}))),cb.apply(this,arguments)}function db(t){return fb.apply(this,arguments)}function fb(){return(fb=Ie(Le().mark((function t(e){var n,i,a,r;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Oe(eb,this),a=this._visitedPages,Oe(YA,this)){t.next=3;break}return t.abrupt("return");case 3:if(!this._pageOpenPending.has(e)){t.next=5;break}return t.abrupt("return");case 5:if(r=a.get(e)){t.next=8;break}return t.abrupt("return");case 8:return a.set(e,null),t.next=11,r;case 11:if(i===Oe(eb,this)){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,null===(n=Oe(ab,this))||void 0===n?void 0:n.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e});case 15:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function vb(){if(We(QA,this,Promise.withResolvers()),Oe(ab,this))throw new Error("#initScripting: Scripting already exists.");return Oe(tb,this).createScripting()}function pb(){return gb.apply(this,arguments)}function gb(){return(gb=Ie(Le().mark((function t(){var e,n,i,a;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Oe(ab,this)){t.next=4;break}return We(eb,this,null),null===(a=Oe(QA,this))||void 0===a||a.resolve(),t.abrupt("return");case 4:if(!Oe(YA,this)){t.next=8;break}return t.next=7,Promise.race([Oe(YA,this).promise,new Promise((function(t){setTimeout(t,1e3)}))]).catch((function(){}));case 7:We(YA,this,null);case 8:return We(eb,this,null),t.prev=9,t.next=12,Oe(ab,this).destroySandbox();case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:null===(e=Oe(rb,this))||void 0===e||e.reject(new Error("Scripting destroyed.")),We(rb,this,null),null===(n=Oe(ZA,this))||void 0===n||n.abort(),We(ZA,this,null),this._pageOpenPending.clear(),this._visitedPages.clear(),We(ab,this,null),We(ib,this,!1),null===(i=Oe(QA,this))||void 0===i||i.resolve();case 25:case"end":return t.stop()}}),t,this,[[9,14]])})))).apply(this,arguments)}var Db=function(){function t(e){return Qe(this,t),e.externalServices||window.addEventListener("updatefromsandbox",(function(t){e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})})),e.externalServices||(e.externalServices={createScripting:function(){return new KA(e.sandboxBundleSrc)}}),e.docProperties||(e.docProperties=function(t){return function(t){return XA.apply(this,arguments)}(t)}),Je(this,t,[e])}return tn(t,ub),Ke(t)}(),mb=function(){return Ke((function t(){var e=this;Qe(this,t),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:function(){return!!e.pdfViewer}})}),[{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function(t){return this.highestPriorityPage===t.renderingId}},{key:"renderHighestPriority",value:function(t){var e;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&null!==(e=this.pdfThumbnailViewer)&&void 0!==e&&e.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.views,r=a.length;if(0===r)return null;for(var s=0;s<r;s++){var u=a[s].view;if(!this.isViewFinished(u))return u}var o=t.first.id,l=t.last.id;if(l-o+1>r)for(var h=t.ids,c=1,d=l-o;c<d;c++){var f=n?o+c:l-c;if(!h.has(f)){var v=e[f-1];if(!this.isViewFinished(v))return v}}var p=n?l:o-2,g=e[p];return g&&!this.isViewFinished(g)||i&&(g=e[p+=n?1:-1])&&!this.isViewFinished(g)?g:null}},{key:"isViewFinished",value:function(t){return t.renderingState===hp.FINISHED}},{key:"renderView",value:function(t){var e=this;switch(t.renderingState){case hp.FINISHED:return!1;case hp.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case hp.RUNNING:this.highestPriorityPage=t.renderingId;break;case hp.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally((function(){e.renderHighestPriority()})).catch((function(t){t instanceof $g||console.error('renderView: "'.concat(t,'"'))}))}return!0}}])}(),yb=1e4,Ab=5e3,bb=250;function kb(t){return Object.values(Hg).includes(t)&&t!==Hg.DISABLE}var Eb=new WeakMap,wb=new WeakMap,Cb=new WeakSet,Fb=function(){return Ke((function t(e){Qe(this,t),Me(this,Cb),Re(this,Eb,new Set),Re(this,wb,0),We(wb,this,e)}),[{key:"push",value:function(t){var e=Oe(Eb,this);e.has(t)&&e.delete(t),e.add(t),e.size>Oe(wb,this)&&je(Cb,this,_b).call(this)}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;We(wb,this,t);var n=Oe(Eb,this);if(e){var i,a=n.size,r=1,s=Ue(n);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(e.has(u.id)&&(n.delete(u),n.add(u)),++r>a)break}}catch(t){s.e(t)}finally{s.f()}}for(;n.size>Oe(wb,this);)je(Cb,this,_b).call(this)}},{key:"has",value:function(t){return Oe(Eb,this).has(t)}},{key:Symbol.iterator,value:function(){return Oe(Eb,this).keys()}}])}();function _b(){var t=Oe(Eb,this).keys().next().value;null==t||t.destroy(),Oe(Eb,this).delete(t)}var xb=new WeakMap,Sb=new WeakMap,Mb=new WeakMap,Bb=new WeakMap,Pb=new WeakMap,Lb=new WeakMap,Tb=new WeakMap,Ib=new WeakMap,Rb=new WeakMap,Nb=new WeakMap,Ob=new WeakMap,Wb=new WeakMap,jb=new WeakMap,Hb=new WeakMap,zb=new WeakMap,Vb=new WeakMap,Ub=new WeakMap,Gb=new WeakMap,qb=new WeakMap,Xb=new WeakMap,Kb=new WeakMap,Yb=new WeakMap,Qb=new WeakMap,Jb=new WeakSet,Zb=function(){return Ke((function t(e){var n,i,a,r,s,u=this;Qe(this,t),Me(this,Jb),Re(this,xb,null),Re(this,Sb,null),Re(this,Mb,null),Re(this,Bb,Hg.NONE),Re(this,Pb,null),Re(this,Lb,Ug.ENABLE_FORMS),Re(this,Tb,null),Re(this,Ib,!1),Re(this,Rb,!1),Re(this,Nb,!1),Re(this,Ob,!1),Re(this,Wb,null),Re(this,jb,null),Re(this,Hb,null),Re(this,zb,null),Re(this,Vb,!1),Re(this,Ub,null),Re(this,Gb,!1),Re(this,qb,0),Re(this,Xb,new ResizeObserver(je(Jb,this,pk).bind(this))),Re(this,Kb,null),Re(this,Yb,null),Re(this,Qb,gp);var o="4.5.136";if(iD!==o)throw new Error('The API version "'.concat(iD,'" does not match the Viewer version "').concat(o,'".'));if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==(null===(n=this.container)||void 0===n?void 0:n.tagName)||"DIV"!==(null===(i=this.viewer)||void 0===i?void 0:i.tagName))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");Oe(Xb,this).observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new Ng,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,We(Sb,this,e.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=function(t){return u._getVisiblePages().ids.has(t)}),this._scriptingManager=e.scriptingManager||null,We(Qb,this,null!==(a=e.textLayerMode)&&void 0!==a?a:gp),We(Lb,this,null!==(r=e.annotationMode)&&void 0!==r?r:Ug.ENABLE_FORMS),We(Bb,this,null!==(s=e.annotationEditorMode)&&void 0!==s?s:Hg.NONE),We(Mb,this,e.annotationEditorHighlightColors||null),We(Rb,this,!0===e.enableHighlightFloatingButton),We(Ob,this,!0===e.enableUpdatedAddImage),this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||(this.l10n=new Om),We(Nb,this,e.enablePermissions||!1),this.pageColors=e.pageColors||null,We(jb,this,e.mlManager||null),We(Ib,this,e.enableHWA||!1),this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new mb,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;var l=e.abortSignal;null==l||l.addEventListener("abort",(function(){Oe(Xb,u).disconnect(),We(Xb,u,null)}),{once:!0}),this.scroll=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=function(n){r||(r=window.requestAnimationFrame((function(){r=null;var n=t.scrollLeft,i=a.lastX;n!==i&&(a.right=n>i),a.lastX=n;var s=t.scrollTop,u=a.lastY;s!==u&&(a.down=s>u),a.lastY=s,e(a)})))},a={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:i},r=null;return t.addEventListener("scroll",i,{useCapture:!0,signal:n}),null==n||n.addEventListener("abort",(function(){return window.cancelAnimationFrame(r)}),{once:!0}),a}(this.container,this._scrollUpdate.bind(this),l),this.presentationModeState=cp,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),je(Jb,this,vk).call(this),this.eventBus._on("thumbnailrendered",(function(t){var e=t.pageNumber,n=t.pdfPage,i=u._pages[e-1];Oe(xb,u).has(i)||null==n||n.cleanup()})),e.l10n||this.l10n.translate(this.container)}),[{key:"pagesCount",get:function(){return this._pages.length}},{key:"getPageView",value:function(t){return this._pages[t]}},{key:"getCachedPageViews",value:function(){return new Set(Oe(xb,this))}},{key:"pageViewsReady",get:function(){return this._pages.every((function(t){return null==t?void 0:t.pdfPage}))}},{key:"renderForms",get:function(){return Oe(Lb,this)===Ug.ENABLE_FORMS}},{key:"enableScripting",get:function(){return!!this._scriptingManager}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error('currentPageNumber: "'.concat(t,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===t)return i&&je(Jb,this,lk).call(this),!0;if(!(0<t&&t<=this.pagesCount))return!1;var a=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:null!==(e=null===(n=this._pageLabels)||void 0===n?void 0:n[t-1])&&void 0!==e?e:null,previous:a}),i&&je(Jb,this,lk).call(this),!0}},{key:"currentPageLabel",get:function(){var t,e;return null!==(t=null===(e=this._pageLabels)||void 0===e?void 0:e[this._currentPageNumber-1])&&void 0!==t?t:null},set:function(t){if(this.pdfDocument){var e=0|t;if(this._pageLabels){var n=this._pageLabels.indexOf(t);n>=0&&(e=n+1)}this._setCurrentPageNumber(e,!0)||console.error('currentPageLabel: "'.concat(t,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return 0!==this._currentScale?this._currentScale:1},set:function(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&je(Jb,this,ok).call(this,t,{noScroll:!1})}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(t){this.pdfDocument&&je(Jb,this,ok).call(this,t,{noScroll:!1})}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(t){if(!xp(t))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&((t%=360)<0&&(t+=360),this._pagesRotation!==t)){this._pagesRotation=t;var e=this._currentPageNumber;this.refresh(!0,{rotation:t}),this._currentScaleValue&&je(Jb,this,ok).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"_layerProperties",get:function(){var t=this;return eD(this,"_layerProperties",{get annotationEditorUIManager(){return Oe(Pb,t)},get annotationStorage(){var e;return null===(e=t.pdfDocument)||void 0===e?void 0:e.annotationStorage},get downloadManager(){return t.downloadManager},get enableScripting(){return!!t._scriptingManager},get fieldObjectsPromise(){var e;return null===(e=t.pdfDocument)||void 0===e?void 0:e.getFieldObjects()},get findController(){return t.findController},get hasJSActionsPromise(){var e;return null===(e=t.pdfDocument)||void 0===e?void 0:e.hasJSActions()},get linkService(){return t.linkService}})}},{key:"getAllText",value:(t=Ie(Le().mark((function t(){var e,n,i,a,r,s,u,o,l,h;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=[],i=1,a=this.pdfDocument.numPages;case 3:if(!(i<=a)){t.next=20;break}if(!Oe(Gb,this)){t.next=6;break}return t.abrupt("return",null);case 6:return n.length=0,t.next=9,this.pdfDocument.getPage(i);case 9:return r=t.sent,t.next=12,r.getTextContent();case 12:s=t.sent,u=s.items,o=Ue(u);try{for(o.s();!(l=o.n()).done;)(h=l.value).str&&n.push(h.str),h.hasEOL&&n.push("\n")}catch(t){o.e(t)}finally{o.f()}e.push(wp(n.join("")));case 17:++i,t.next=3;break;case 20:return t.abrupt("return",e.join("\n"));case 21:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"setDocument",value:function(t){var e,n,i=this;this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),null===(e=this.findController)||void 0===e||e.setDocument(null),null===(n=this._scriptingManager)||void 0===n||n.setDocument(null),Oe(Pb,this)&&(Oe(Pb,this).destroy(),We(Pb,this,null)));if(this.pdfDocument=t,t){var a=t.numPages,r=t.getPage(1),s=t.getOptionalContentConfig({intent:"display"}),u=Oe(Nb,this)?t.getPermissions():Promise.resolve(),o=this.eventBus,l=this.pageColors,h=this.viewer;We(Wb,this,new AbortController);var c=Oe(Wb,this).signal;if(a>yb){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var d=this._scrollMode=mp.PAGE;o.dispatch("scrollmodechanged",{source:this,mode:d})}this._pagesCapability.promise.then((function(){o.dispatch("pagesloaded",{source:i,pagesCount:a})}),(function(){}));o._on("pagerender",(function(t){var e=i._pages[t.pageNumber-1];e&&Oe(xb,i).push(e)}),{signal:c});var f=function(t){t.cssTransform||(i._onePageRenderedCapability.resolve({timestamp:t.timestamp}),o._off("pagerendered",f))};o._on("pagerendered",f,{signal:c}),Promise.all([r,u]).then((function(e){var n,r=He(e,2),u=r[0],d=r[1];if(t===i.pdfDocument){i._firstPageCapability.resolve(u),i._optionalContentConfigPromise=s;var f=je(Jb,i,$b).call(i,d),v=f.annotationEditorMode,p=f.annotationMode,g=f.textLayerMode;if(g!==pp){var D=We(Ub,i,document.createElement("div"));D.id="hiddenCopyElement",h.before(D)}if(v!==Hg.DISABLE){var m=v;t.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):kb(m)?(We(Pb,i,new zg(i.container,h,Oe(Sb,i),o,t,l,Oe(Mb,i),Oe(Rb,i),Oe(Ob,i),Oe(jb,i))),o.dispatch("annotationeditoruimanager",{source:i,uiManager:Oe(Pb,i)}),m!==Hg.NONE&&Oe(Pb,i).updateMode(m)):console.error("Invalid AnnotationEditor mode: ".concat(m))}var y=i._scrollMode===mp.PAGE?null:h,A=i.currentScale,b=u.getViewport({scale:A*Zg.PDF_TO_CSS_UNITS});h.style.setProperty("--scale-factor",b.scale),"CanvasText"!==(null==l?void 0:l.foreground)&&"Canvas"!==(null==l?void 0:l.background)||(h.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),h.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(var k=1;k<=a;++k){var E=new _A({container:y,eventBus:o,id:k,scale:A,defaultViewport:b.clone(),optionalContentConfigPromise:s,renderingQueue:i.renderingQueue,textLayerMode:g,annotationMode:p,imageResourcesPath:i.imageResourcesPath,maxCanvasPixels:i.maxCanvasPixels,pageColors:l,l10n:i.l10n,layerProperties:i._layerProperties,enableHWA:Oe(Ib,i)});i._pages.push(E)}null===(n=i._pages[0])||void 0===n||n.setPdfPage(u),i._scrollMode===mp.PAGE?je(Jb,i,ik).call(i):i._spreadMode!==yp.NONE&&i._updateSpreadMode(),je(Jb,i,tk).call(i,c).then(Ie(Le().mark((function e(){var n,r,s,u,l;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===i.pdfDocument){e.next=2;break}return e.abrupt("return");case 2:if(null===(n=i.findController)||void 0===n||n.setDocument(t),null===(r=i._scriptingManager)||void 0===r||r.setDocument(t),Oe(Ub,i)&&document.addEventListener("copy",je(Jb,i,nk).bind(i,g),{signal:c}),Oe(Pb,i)&&o.dispatch("annotationeditormodechanged",{source:i,mode:Oe(Bb,i)}),!(t.loadingParams.disableAutoFetch||a>Ab)){e.next=9;break}return i._pagesCapability.resolve(),e.abrupt("return");case 9:if(!((s=a-1)<=0)){e.next=13;break}return i._pagesCapability.resolve(),e.abrupt("return");case 13:u=Le().mark((function e(n){var a;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getPage(n).then((function(t){var e=i._pages[n-1];e.pdfPage||e.setPdfPage(t),0==--s&&i._pagesCapability.resolve()}),(function(t){console.error("Unable to get page ".concat(n," to initialize viewer"),t),0==--s&&i._pagesCapability.resolve()})),n%bb!=0){e.next=4;break}return e.next=4,a;case 4:case"end":return e.stop()}}),e)})),l=2;case 15:if(!(l<=a)){e.next=20;break}return e.delegateYield(u(l),"t0",17);case 17:++l,e.next=15;break;case 20:case"end":return e.stop()}}),e)})))),o.dispatch("pagesinit",{source:i}),t.getMetadata().then((function(e){var n=e.info;t===i.pdfDocument&&n.Language&&(h.lang=n.Language)})),i.defaultRenderingQueue&&i.update()}})).catch((function(t){console.error("Unable to initialize viewer",t),i._pagesCapability.reject(t)}))}}},{key:"setPageLabels",value:function(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var e=0,n=this._pages.length;e<n;e++){var i,a;this._pages[e].setPageLabel(null!==(i=null===(a=this._pageLabels)||void 0===a?void 0:a[e])&&void 0!==i?i:null)}}}},{key:"_resetView",value:function(){var t,e;this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,We(xb,this,new Fb(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=mp.VERTICAL,this._previousScrollMode=mp.UNKNOWN,this._spreadMode=yp.NONE,We(Kb,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),null===(t=Oe(Wb,this))||void 0===t||t.abort(),We(Wb,this,null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),null===(e=Oe(Ub,this))||void 0===e||e.remove(),We(Ub,this,null),je(Jb,this,gk).call(this)}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"pageLabelToPageNumber",value:function(t){if(!this._pageLabels)return null;var e=this._pageLabels.indexOf(t);return e<0?null:e+1}},{key:"scrollPageIntoView",value:function(t){var e=t.pageNumber,n=t.destArray,i=void 0===n?null:n,a=t.allowNegativeOffset,r=void 0!==a&&a,s=t.ignoreDestinationZoom,u=void 0!==s&&s;if(this.pdfDocument){var o=Number.isInteger(e)&&this._pages[e-1];if(o)if(!this.isInPresentationMode&&i){var l,h,c=0,d=0,f=0,v=0,p=o.rotation%180!=0,g=(p?o.height:o.width)/o.scale/Zg.PDF_TO_CSS_UNITS,D=(p?o.width:o.height)/o.scale/Zg.PDF_TO_CSS_UNITS,m=0;switch(i[1].name){case"XYZ":c=i[2],d=i[3],m=i[4],c=null!==c?c:0,d=null!==d?d:D;break;case"Fit":case"FitB":m="page-fit";break;case"FitH":case"FitBH":m="page-width",null===(d=i[2])&&this._location?(c=this._location.left,d=this._location.top):("number"!=typeof d||d<0)&&(d=D);break;case"FitV":case"FitBV":c=i[2],f=g,v=D,m="page-height";break;case"FitR":c=i[2],d=i[3],f=i[4]-c,v=i[5]-d;var y=40,A=5;this.removePageBorders&&(y=A=0),l=(this.container.clientWidth-y)/f/Zg.PDF_TO_CSS_UNITS,h=(this.container.clientHeight-A)/v/Zg.PDF_TO_CSS_UNITS,m=Math.min(Math.abs(l),Math.abs(h));break;default:return void console.error('scrollPageIntoView: "'.concat(i[1].name,'" is not a valid destination type.'))}if(u||(m&&m!==this._currentScale?this.currentScaleValue=m:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"!==m||i[4]){var b=[o.viewport.convertToViewportPoint(c,d),o.viewport.convertToViewportPoint(c+f,d+v)],k=Math.min(b[0][0],b[1][0]),E=Math.min(b[0][1],b[1][1]);r||(k=Math.max(k,0),E=Math.max(E,0)),je(Jb,this,ak).call(this,o,{left:k,top:E})}else je(Jb,this,ak).call(this,o)}else this._setCurrentPageNumber(e,!0);else console.error('scrollPageIntoView: "'.concat(e,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(t){var e=this._currentScale,n=this._currentScaleValue,i=parseFloat(n)===e?Math.round(1e4*e)/100:n,a=t.id,r=this._pages[a-1],s=this.container,u=r.getPagePoint(s.scrollLeft-t.x,s.scrollTop-t.y),o=Math.round(u[0]),l=Math.round(u[1]),h="#page=".concat(a);this.isInPresentationMode||(h+="&zoom=".concat(i,",").concat(o,",").concat(l)),this._location={pageNumber:a,scale:i,top:l,left:o,rotation:this._pagesRotation,pdfOpenParams:h}}},{key:"update",value:function(){var t=this._getVisiblePages(),e=t.views,n=e.length;if(0!==n){var i=Math.max(10,2*n+1);Oe(xb,this).resize(i,t.ids),this.renderingQueue.renderHighestPriority(t);var a,r=this._spreadMode===yp.NONE&&(this._scrollMode===mp.PAGE||this._scrollMode===mp.VERTICAL),s=this._currentPageNumber,u=!1,o=Ue(e);try{for(o.s();!(a=o.n()).done;){var l=a.value;if(l.percent<100)break;if(l.id===s&&r){u=!0;break}}}catch(t){o.e(t)}finally{o.f()}this._setCurrentPageNumber(u?s:e[0].id),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function(t){return this.container.contains(t)}},{key:"focus",value:function(){this.container.focus()}},{key:"_isContainerRtl",get:function(){return"rtl"===getComputedStyle(this.container).direction}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===vp}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===fp}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getVisiblePages",value:function(){var t=this._scrollMode===mp.PAGE?Oe(Kb,this).pages:this._pages,e=this._scrollMode===mp.HORIZONTAL,n=e&&this._isContainerRtl;return function(t){var e=t.scrollEl,n=t.views,i=t.sortByVisibility,a=void 0!==i&&i,r=t.horizontal,s=void 0!==r&&r,u=t.rtl,o=void 0!==u&&u,l=e.scrollTop,h=l+e.clientHeight,c=e.scrollLeft,d=c+e.clientWidth,f=[],v=new Set,p=n.length,g=Cp(n,s?function(t){var e=t.div,n=e.offsetLeft+e.clientLeft,i=n+e.clientWidth;return o?n<d:i>c}:function(t){var e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>l});g>0&&g<p&&!s&&(g=function(t,e,n){if(t<2)return t;var i=e[t].div,a=i.offsetTop+i.clientTop;a>=n&&(a=(i=e[t-1].div).offsetTop+i.clientTop);for(var r=t-2;r>=0&&!((i=e[r].div).offsetTop+i.clientTop+i.clientHeight<=a);--r)t=r;return t}(g,n,l));for(var D=s?d:-1,m=g;m<p;m++){var y=n[m],A=y.div,b=A.offsetLeft+A.clientLeft,k=A.offsetTop+A.clientTop,E=A.clientWidth,w=A.clientHeight,C=b+E,F=k+w;if(-1===D)F>=h&&(D=F);else if((s?b:k)>D)break;if(!(F<=l||k>=h||C<=c||b>=d)){var _=Math.max(0,l-k)+Math.max(0,F-h),x=(E-(Math.max(0,c-b)+Math.max(0,C-d)))/E,S=(w-_)/w*x*100|0;f.push({id:y.id,x:b,y:k,view:y,percent:S,widthPercent:100*x|0}),v.add(y.id)}}var M=f[0],B=f.at(-1);return a&&f.sort((function(t,e){var n=t.percent-e.percent;return Math.abs(n)>.001?-n:t.id-e.id})),{first:M,last:B,views:f,ids:v}}({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:e,rtl:n})}},{key:"cleanup",value:function(){var t,e=Ue(this._pages);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.renderingState!==hp.FINISHED&&n.reset()}}catch(t){e.e(t)}finally{e.f()}}},{key:"_cancelRendering",value:function(){var t,e=Ue(this._pages);try{for(e.s();!(t=e.n()).done;){t.value.cancelRendering()}}catch(t){e.e(t)}finally{e.f()}}},{key:"forceRendering",value:function(t){var e=this,n=t||this._getVisiblePages(),i=je(Jb,this,fk).call(this,n),a=this._spreadMode!==yp.NONE&&this._scrollMode!==mp.HORIZONTAL,r=this.renderingQueue.getHighestPriority(n,this._pages,i,a);return!!r&&(je(Jb,this,ck).call(this,r).then((function(){e.renderingQueue.renderView(r)})),!0)}},{key:"hasEqualPageSizes",get:function(){for(var t=this._pages[0],e=1,n=this._pages.length;e<n;++e){var i=this._pages[e];if(i.width!==t.width||i.height!==t.height)return!1}return!0}},{key:"getPagesOverview",value:function(){var t,e=this;return this._pages.map((function(n){var i=n.pdfPage.getViewport({scale:1}),a=Sp(i);if(void 0===t)t=a;else if(e.enablePrintAutoRotate&&a!==t)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}}))}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)},set:function(t){if(!(t instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(t));this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=t,this.refresh(!1,{optionalContentConfigPromise:t}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t}))}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(t){if(this._scrollMode!==t){if(!function(t){return Number.isInteger(t)&&Object.values(mp).includes(t)&&t!==mp.UNKNOWN}(t))throw new Error("Invalid scroll mode: ".concat(t));this.pagesCount>yb||(this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber))}}},{key:"_updateScrollMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._scrollMode,n=this.viewer;n.classList.toggle("scrollHorizontal",e===mp.HORIZONTAL),n.classList.toggle("scrollWrapped",e===mp.WRAPPED),this.pdfDocument&&t&&(e===mp.PAGE?je(Jb,this,ik).call(this):this._previousScrollMode===mp.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&je(Jb,this,ok).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(t){if(this._spreadMode!==t){if(!function(t){return Number.isInteger(t)&&Object.values(yp).includes(t)&&t!==yp.UNKNOWN}(t))throw new Error("Invalid spread mode: ".concat(t));this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var e=this.viewer,n=this._pages;if(this._scrollMode===mp.PAGE)je(Jb,this,ik).call(this);else if(e.textContent="",this._spreadMode===yp.NONE){var i,a=Ue(this._pages);try{for(a.s();!(i=a.n()).done;){var r=i.value;e.append(r.div)}}catch(t){a.e(t)}finally{a.f()}}else for(var s=this._spreadMode-1,u=null,o=0,l=n.length;o<l;++o)null===u?((u=document.createElement("div")).className="spread",e.append(u)):o%2===s&&(u=u.cloneNode(!1),e.append(u)),u.append(n[o].div);t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&je(Jb,this,ok).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}}},{key:"_getPageAdvance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case mp.WRAPPED:var n,i=this._getVisiblePages().views,a=new Map,r=Ue(i);try{for(r.s();!(n=r.n()).done;){var s=n.value,u=s.id,o=s.y,l=s.percent,h=s.widthPercent;if(!(0===l||h<100)){var c=a.get(o);c||a.set(o,c||(c=[])),c.push(u)}}}catch(t){r.e(t)}finally{r.f()}var d,f=Ue(a.values());try{for(f.s();!(d=f.n()).done;){var v=d.value,p=v.indexOf(t);if(-1!==p){var g=v.length;if(1===g)break;if(e)for(var D=p-1;D>=0;D--){var m=v[D],y=v[D+1]-1;if(m<y)return t-y}else for(var A=p+1,b=g;A<b;A++){var k=v[A],E=v[A-1]+1;if(k>E)return E-t}if(e){var w=v[0];if(w<t)return t-w+1}else{var C=v[g-1];if(C>t)return C-t+1}break}}}catch(t){f.e(t)}finally{f.f()}break;case mp.HORIZONTAL:break;case mp.PAGE:case mp.VERTICAL:if(this._spreadMode===yp.NONE)break;var F=this._spreadMode-1;if(e&&t%2!==F)break;if(!e&&t%2===F)break;var _,x=e?t-1:t+1,S=Ue(this._getVisiblePages().views);try{for(S.s();!(_=S.n()).done;){var M=_.value,B=M.id,P=M.percent,L=M.widthPercent;if(B===x){if(P>0&&100===L)return 2;break}}}catch(t){S.e(t)}finally{S.f()}}return 1}},{key:"nextPage",value:function(){var t=this._currentPageNumber,e=this.pagesCount;if(t>=e)return!1;var n=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+n,e),!0}},{key:"previousPage",value:function(){var t=this._currentPageNumber;if(t<=1)return!1;var e=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-e,1),!0}},{key:"updateScale",value:function(t){var e=t.drawingDelay,n=t.scaleFactor,i=void 0===n?null:n,a=t.steps,r=void 0===a?null:a,s=t.origin;if(null===r&&null===i)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(this.pdfDocument){var u=this._currentScale;if(i>0&&1!==i)u=Math.round(u*i*100)/100;else if(r){var o=r>0?1.1:1/1.1,l=r>0?Math.ceil:Math.floor;r=Math.abs(r);do{u=l(10*(u*o).toFixed(2))/10}while(--r>0)}u=Math.max(.1,Math.min(10,u)),je(Jb,this,ok).call(this,u,{noScroll:!1,drawingDelay:e,origin:s})}}},{key:"increaseScale",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.updateScale(we(we({},e),{},{steps:null!==(t=e.steps)&&void 0!==t?t:1}))}},{key:"decreaseScale",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.updateScale(we(we({},e),{},{steps:-(null!==(t=e.steps)&&void 0!==t?t:1)}))}},{key:"containerTopLeft",get:function(){return Oe(Tb,this)||We(Tb,this,[this.container.offsetTop,this.container.offsetLeft])}},{key:"annotationEditorMode",get:function(){return Oe(Pb,this)?Oe(Bb,this):Hg.DISABLE},set:function(t){var e=this,n=t.mode,i=t.editId,a=void 0===i?null:i,r=t.isFromKeyboard,s=void 0!==r&&r;if(!Oe(Pb,this))throw new Error("The AnnotationEditor is not enabled.");if(Oe(Bb,this)!==n){if(!kb(n))throw new Error("Invalid AnnotationEditor mode: ".concat(n));if(this.pdfDocument){var u=this.eventBus,o=function(){je(Jb,e,gk).call(e),We(Bb,e,n),Oe(Pb,e).updateMode(n,a,s),u.dispatch("annotationeditormodechanged",{source:e,mode:n})};if(n===Hg.NONE||Oe(Bb,this)===Hg.NONE){var l=n!==Hg.NONE;l||this.pdfDocument.annotationStorage.resetModifiedIds();var h,c=Ue(this._pages);try{for(c.s();!(h=c.n()).done;){h.value.toggleEditingMode(l)}}catch(t){c.e(t)}finally{c.f()}var d=je(Jb,this,hk).call(this);if(l&&d){je(Jb,this,gk).call(this),We(Hb,this,(function(t){var n=t.pageNumber;d.delete(n),0===d.size&&We(zb,e,setTimeout(o,0))}));var f=Oe(Wb,this).signal;return void u._on("pagerendered",Oe(Hb,this),{signal:f})}}o()}}}},{key:"annotationEditorParams",set:function(t){var e=t.type,n=t.value;if(!Oe(Pb,this))throw new Error("The AnnotationEditor is not enabled.");Oe(Pb,this).updateParams(e,n)}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null);if(this.pdfDocument){var n,i=Ue(this._pages);try{for(i.s();!(n=i.n()).done;){n.value.update(e)}}catch(t){i.e(t)}finally{i.f()}null!==Oe(Yb,this)&&(clearTimeout(Oe(Yb,this)),We(Yb,this,null)),t||this.update()}}}]);var t}();function $b(t){var e={annotationEditorMode:Oe(Bb,this),annotationMode:Oe(Lb,this),textLayerMode:Oe(Qb,this)};return t?(t.includes(Jg.COPY)||Oe(Qb,this)!==gp||(e.textLayerMode=Dp),t.includes(Jg.MODIFY_CONTENTS)||(e.annotationEditorMode=Hg.DISABLE),t.includes(Jg.MODIFY_ANNOTATIONS)||t.includes(Jg.FILL_INTERACTIVE_FORMS)||Oe(Lb,this)!==Ug.ENABLE_FORMS||(e.annotationMode=Ug.ENABLE),e):e}function tk(t){return ek.apply(this,arguments)}function ek(){return(ek=Ie(Le().mark((function t(e){var n,i;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(){"hidden"===document.visibilityState&&n.resolve()},"hidden"!==document.visibilityState&&this.container.offsetParent&&0!==this._getVisiblePages().views.length){t.next=3;break}return t.abrupt("return");case 3:return n=Promise.withResolvers(),document.addEventListener("visibilitychange",i,{signal:e}),t.next=7,Promise.race([this._onePageRenderedCapability.promise,n.promise]);case 7:document.removeEventListener("visibilitychange",i);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function nk(t,e){var n=this,i=document.getSelection(),a=i.focusNode;if(i.anchorNode&&a&&i.containsNode(Oe(Ub,this))){if(Oe(Vb,this)||t===Dp)return e.preventDefault(),void e.stopPropagation();We(Vb,this,!0);var r=this.viewer.classList;r.add("copyAll");var s=new AbortController;window.addEventListener("keydown",(function(t){return We(Gb,n,"Escape"===t.key)}),{signal:s.signal}),this.getAllText().then(function(){var t=Ie(Le().mark((function t(e){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e){t.next=3;break}return t.next=3,navigator.clipboard.writeText(e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.warn("Something goes wrong when extracting the text: ".concat(t.message))})).finally((function(){We(Vb,n,!1),We(Gb,n,!1),s.abort(),r.remove("copyAll")})),e.preventDefault(),e.stopPropagation()}}function ik(){if(this._scrollMode!==mp.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var t=this._currentPageNumber,e=Oe(Kb,this),n=this.viewer;if(n.textContent="",e.pages.length=0,this._spreadMode!==yp.NONE||this.isInPresentationMode){var i=new Set,a=this._spreadMode-1;-1===a?i.add(t-1):t%2!==a?(i.add(t-1),i.add(t)):(i.add(t-2),i.add(t-1));var r=document.createElement("div");if(r.className="spread",this.isInPresentationMode){var s=document.createElement("div");s.className="dummyPage",r.append(s)}var u,o=Ue(i);try{for(o.s();!(u=o.n()).done;){var l=u.value,h=this._pages[l];h&&(r.append(h.div),e.pages.push(h))}}catch(t){o.e(t)}finally{o.f()}n.append(r)}else{var c=this._pages[t-1];n.append(c.div),e.pages.push(c)}e.scrollDown=t>=e.previousPageNumber,e.previousPageNumber=t}function ak(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.div,i=t.id;if(this._currentPageNumber!==i&&this._setCurrentPageNumber(i),this._scrollMode===mp.PAGE&&(je(Jb,this,ik).call(this),this.update()),!e&&!this.isInPresentationMode){var a=n.offsetLeft+n.clientLeft,r=a+n.clientWidth,s=this.container,u=s.scrollLeft,o=s.clientWidth;(this._scrollMode===mp.HORIZONTAL||a<u||r>u+o)&&(e={left:0,top:0})}bp(n,e),!this._currentScaleValue&&this._location&&(this._location=null)}function rk(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}function sk(t,e,n){var i=this,a=n.noScroll,r=void 0!==a&&a,s=n.preset,u=void 0!==s&&s,o=n.drawingDelay,l=void 0===o?-1:o,h=n.origin,c=void 0===h?null:h;if(this._currentScaleValue=e.toString(),je(Jb,this,rk).call(this,t))u&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e});else{this.viewer.style.setProperty("--scale-factor",t*Zg.PDF_TO_CSS_UNITS);var d=l>=0&&l<1e3;this.refresh(!0,{scale:t,drawingDelay:d?l:-1}),d&&We(Yb,this,setTimeout((function(){We(Yb,i,null),i.refresh()}),l));var f=this._currentScale;if(this._currentScale=t,!r){var v,p=this._currentPageNumber;if(!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(p=this._location.pageNumber,v=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:p,destArray:v,allowNegativeOffset:!0}),Array.isArray(c)){var g=t/f-1,D=He(this.containerTopLeft,2),m=D[0],y=D[1];this.container.scrollLeft+=(c[0]-y)*g,this.container.scrollTop+=(c[1]-m)*g}}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:u?e:void 0}),this.defaultRenderingQueue&&this.update()}}function uk(t){return t._spreadMode!==yp.NONE&&t._scrollMode!==mp.HORIZONTAL?2:1}function ok(t,e){var n=parseFloat(t);if(n>0)e.preset=!1,je(Jb,this,sk).call(this,n,t,e);else{var i=this._pages[this._currentPageNumber-1];if(!i)return;var a=40,r=5;if(this.isInPresentationMode)a=r=4,this._spreadMode!==yp.NONE&&(a*=2);else if(this.removePageBorders)a=r=0;else if(this._scrollMode===mp.HORIZONTAL){var s=[r,a];a=s[0],r=s[1]}var u=(this.container.clientWidth-a)/i.width*i.scale/Be(Jb,this,uk),o=(this.container.clientHeight-r)/i.height*i.scale;switch(t){case"page-actual":n=1;break;case"page-width":n=u;break;case"page-height":n=o;break;case"page-fit":n=Math.min(u,o);break;case"auto":var l=Sp(i)?u:Math.min(o,u);n=Math.min(1.25,l);break;default:return void console.error('#setScale: "'.concat(t,'" is an unknown zoom value.'))}e.preset=!0,je(Jb,this,sk).call(this,n,t,e)}}function lk(){var t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&je(Jb,this,ok).call(this,this._currentScaleValue,{noScroll:!0}),je(Jb,this,ak).call(this,t)}function hk(){var t,e=this._getVisiblePages(),n=[],i=e.ids,a=Ue(e.views);try{for(a.s();!(t=a.n()).done;){var r=t.value,s=r.view;s.hasEditableAnnotations()?n.push(r):i.delete(s.id)}}catch(t){a.e(t)}finally{a.f()}return 0===n.length?null:(this.renderingQueue.renderHighestPriority({first:n[0],last:n.at(-1),views:n,ids:i}),i)}function ck(t){return dk.apply(this,arguments)}function dk(){return(dk=Ie(Le().mark((function t(e){var n;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pdfPage){t.next=2;break}return t.abrupt("return",e.pdfPage);case 2:return t.prev=2,t.next=5,this.pdfDocument.getPage(e.id);case 5:return n=t.sent,e.pdfPage||e.setPdfPage(n),t.abrupt("return",n);case 10:return t.prev=10,t.t0=t.catch(2),console.error("Unable to get page for page view",t.t0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[2,10]])})))).apply(this,arguments)}function fk(t){var e,n;if(1===(null===(e=t.first)||void 0===e?void 0:e.id))return!0;if((null===(n=t.last)||void 0===n?void 0:n.id)===this.pagesCount)return!1;switch(this._scrollMode){case mp.PAGE:return Oe(Kb,this).scrollDown;case mp.HORIZONTAL:return this.scroll.right}return this.scroll.down}function vk(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container.clientHeight;t!==Oe(qb,this)&&(We(qb,this,t),Mp.setProperty("--viewer-container-height","".concat(t,"px")))}function pk(t){var e,n=Ue(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.target===this.container){je(Jb,this,vk).call(this,Math.floor(i.borderBoxSize[0].blockSize)),We(Tb,this,null);break}}}catch(t){n.e(t)}finally{n.f()}}function gk(){Oe(Hb,this)&&(this.eventBus._off("pagerendered",Oe(Hb,this)),We(Hb,this,null)),null!==Oe(zb,this)&&(clearTimeout(Oe(zb,this)),We(zb,this,null))}var Dk=function(){function t(){return Qe(this,t),Je(this,t,arguments)}return tn(t,Zb),Ke(t,[{key:"_resetView",value:function(){Fe(t,"_resetView",this,3)([]),this._scrollMode=mp.PAGE,this._spreadMode=yp.NONE}},{key:"scrollMode",set:function(t){}},{key:"_updateScrollMode",value:function(){}},{key:"spreadMode",set:function(t){}},{key:"_updateSpreadMode",value:function(){}}])}(),mk=lp.EventBus,yk=lp.GenericL10n,Ak=lp.PDFHistory,bk=lp.PDFLinkService,kk=lp.PDFViewer,Ek=function(){return Ke((function t(e,n){var i=this;Qe(this,t),this.startDistance=0,this._zoomIn=function(){return i.zoomIn()},this._zoomOut=function(){return i.zoomOut()},this._previousClick=function(){return i.page--},this._nextClick=function(){return i.page++},this._touchstart=function(t){2===t.touches.length&&(i.startDistance=wk(t.touches),console.log("touchstart startDistance",i.startDistance),t.preventDefault())},this._touchmove=function(t){if(2===t.touches.length){var e=wk(t.touches);if(Math.abs(e-i.startDistance)>10){var n=e/i.startDistance;i.startDistance=e;var a=(r=t.touches,s=(r[0].clientX+r[1].clientX)/2,u=(r[0].clientY+r[1].clientY)/2,[s,u]);n>1?i.zoomIn(a):i.zoomOut(a)}t.preventDefault()}var r,s,u},this._wheel=function(t){if(t.ctrlKey){t.preventDefault();var e=[t.clientX,t.clientY];t.deltaY<0?i.zoomIn(e):i.zoomOut(e)}},this.container=e,this.maxCanvasPixels=n,this.previous=e.querySelector(".previous"),this.next=e.querySelector(".next"),this.zoomInBtn=e.querySelector(".zoomIn"),this.zoomOutBtn=e.querySelector(".zoomOut"),this.viewerDiv=this.container.firstElementChild,this.pagination=e.querySelector(".pagination"),this.pdfLoadingTask=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this.pdfLinkService=null,this.eventBus=null,this.value=0}),[{key:"open",value:(e=Ie(Le().mark((function t(e){var n,i,a,r;return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pdfLoadingTask){t.next=2;break}return t.abrupt("return",this.close().then(function(){return this.open(e)}.bind(this)));case 2:return n=this,i=sp({url:e,maxImageSize:1048576}),this.pdfLoadingTask=i,i.onProgress=function(t){n.progress(t.loaded/t.total)},t.prev=6,t.next=9,i.promise;case 9:a=t.sent,this.pdfDocument=a,this.pdfViewer.setDocument(a),this.pdfLinkService.setDocument(a),this.pdfHistory.initialize({fingerprint:a.fingerprints[0]}),t.next=21;break;case 16:t.prev=16,t.t0=t.catch(6),r="pdfjs-loading-error",t.t0 instanceof np?r="pdfjs-invalid-file-error":t.t0 instanceof ip?r="pdfjs-missing-file-error":t.t0 instanceof ap&&(r="pdfjs-unexpected-response-error"),n.l10n.get(r,null,null).then((function(e){n.error(e,{message:null===t.t0||void 0===t.t0?void 0:t.t0.message})}));case 21:case"end":return t.stop()}}),t,this,[[6,16]])}))),function(t){return e.apply(this,arguments)})},{key:"close",value:(t=Ie(Le().mark((function t(){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pdfLoadingTask){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.pdfLoadingTask.destroy();case 4:this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfHistory&&this.pdfHistory.reset());case 6:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"error",value:function(t,e){var n=["PDF.js v".concat(up||"?"," (build: ").concat(rp||"?",")")];e&&(n.push("Message: ".concat(e.message)),e.stack?n.push("Stack: ".concat(e.stack)):(e.filename&&n.push("File: ".concat(e.filename)),e.lineNumber&&n.push("Line: ".concat(e.lineNumber)))),console.error("".concat(t,"\n\n").concat(n.join("\n")))}},{key:"progress",value:function(t){}},{key:"pagesCount",get:function(){return this.pdfDocument.numPages}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(t){this.pdfViewer.currentPageNumber=t}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.pdfViewer.updateScale({scaleFactor:1.1,origin:t})}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.pdfViewer.updateScale({scaleFactor:.9,origin:t})}},{key:"initUI",value:function(){var t=this,e=new mk;this.eventBus=e;var n=new bk({eventBus:e});this.pdfLinkService=n,this.l10n=new yk(null);var i=new kk({container:this.container,eventBus:e,linkService:n,l10n:this.l10n,maxCanvasPixels:this.maxCanvasPixels,textLayerMode:0});this.pdfViewer=i,n.setViewer(i),this.pdfHistory=new Ak({eventBus:e,linkService:n}),n.setHistory(this.pdfHistory),e.on("pagesinit",(function(){i.currentScaleValue="auto",t.pagination&&(t.pagination.textContent="".concat(i.currentPageNumber," / ").concat(t.pagesCount))})),e.on("pagechanging",(function(e){var n=e.pageNumber,i=t.pagesCount;t.pagination&&(t.pagination.textContent="".concat(n," / ").concat(i))}),!0),this.container.addEventListener("touchstart",this._touchstart,{passive:!1}),this.container.addEventListener("touchmove",this._touchmove,{passive:!1}),this.viewerDiv.addEventListener("wheel",this._wheel),this.previous&&this.previous.addEventListener("click",this._previousClick),this.next&&this.next.addEventListener("click",this._nextClick),this.zoomInBtn&&this.zoomInBtn.addEventListener("click",this._zoomIn),this.zoomOutBtn&&this.zoomOutBtn.addEventListener("click",this._zoomOut)}},{key:"destroy",value:function(){this.container.removeEventListener("touchstart",this._touchstart),this.container.removeEventListener("touchmove",this._touchmove),this.viewerDiv.removeEventListener("wheel",this._wheel),this.previous&&this.previous.removeEventListener("click",this._previousClick),this.next&&this.next.removeEventListener("click",this._nextClick),this.zoomInBtn&&this.zoomInBtn.removeEventListener("click",this._zoomIn),this.zoomOutBtn&&this.zoomOutBtn.removeEventListener("click",this._zoomOut)}}]);var t,e}();function wk(t){var e=t[0].pageX-t[1].pageX,n=t[0].pageY-t[1].pageY;return Math.sqrt(e*e+n*n)}function Ck(t,e){var n=new Ek(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return ep.workerSrc=new URL("./pdf.worker.js",import.meta.url).toString(),n.initUI(),n.open(e),n}export{Ck as init};
