{"version":3,"file":"MConfigurableTable.razor.js","sources":["../Masa.Blazor.JS/src/components/configurable-table/index.ts"],"sourcesContent":["export function resizableDataTable(dataTable: HTMLElement) {\n  const table = dataTable.querySelector(\"table\");\n  const header = table.querySelector(\"thead\").getElementsByTagName(\"tr\")[0];\n  const cols = header ? header.children : [];\n  if (!cols) return;\n\n  for (var i = 0; i < cols.length; i++) {\n    const col: any = cols[i];\n    const colResizeDiv: HTMLDivElement = col.querySelector(\n      \".masa-table-viewer__header-column-resize\"\n    );\n    if (!colResizeDiv) continue;\n\n    setListeners(colResizeDiv);\n  }\n\n  function setListeners(div: HTMLDivElement) {\n    let pageX: number;\n    let curCol: HTMLElement;\n    let nxtCol: HTMLElement;\n    let curColWidth: number;\n    let nxtColWidth: number;\n    let tableWidth: number;\n\n    div.addEventListener(\"click\", (e) => e.stopPropagation());\n\n    div.addEventListener(\"mousedown\", function (e) {\n      curCol = (e.target as HTMLElement).parentElement;\n      nxtCol = curCol.nextElementSibling as HTMLElement;\n      pageX = e.pageX;\n\n      tableWidth = table.offsetWidth;\n\n      var padding = paddingDiff(curCol);\n\n      curColWidth = curCol.offsetWidth - padding;\n      if (nxtCol) nxtColWidth = nxtCol.offsetWidth - padding;\n    });\n\n    document.addEventListener(\"mousemove\", function (e) {\n      if (curCol) {\n        let diffX = e.pageX - pageX;\n\n        const isRtl = dataTable.classList.contains(\"m-data-table--rtl\");\n        if (isRtl) {\n          diffX = 0 - diffX;\n        }\n\n        let newCurColWidth = curColWidth + diffX;\n\n        const minWidth = getComputedStyle(curCol).minWidth;\n        if (minWidth && newCurColWidth < parseInt(minWidth)) {\n          newCurColWidth = parseInt(minWidth);\n          diffX = newCurColWidth - curColWidth;\n        }\n\n        const maxWidth = 300;\n        if (newCurColWidth > maxWidth) {\n          newCurColWidth = maxWidth;\n          diffX = newCurColWidth - curColWidth;\n        }\n\n        curCol.style.width = newCurColWidth + \"px\";\n        table.style.width = tableWidth + diffX + \"px\";\n      }\n    });\n\n    document.addEventListener(\"mouseup\", function (e) {\n      if (curCol) {\n        for (let i = 0; i < cols.length; i++) {\n          const col: any = cols[i];\n          col.style.width = col[\"offsetWidth\"] + \"px\";\n        }\n      }\n      curCol = undefined;\n      nxtCol = undefined;\n      pageX = undefined;\n      nxtColWidth = undefined;\n      curColWidth = undefined;\n      tableWidth = undefined;\n    });\n  }\n\n  function paddingDiff(col) {\n    if (getStyleVal(col, \"box-sizing\") == \"border-box\") {\n      return 0;\n    }\n\n    var padLeft = getStyleVal(col, \"padding-left\");\n    var padRight = getStyleVal(col, \"padding-right\");\n    return parseInt(padLeft) + parseInt(padRight);\n  }\n\n  function getStyleVal(elm, css) {\n    return window.getComputedStyle(elm, null).getPropertyValue(css);\n  }\n}\n"],"names":[],"mappings":"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"}