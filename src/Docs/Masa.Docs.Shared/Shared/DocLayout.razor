@layout BaseLayout
@inherits LayoutComponentBase

<NavigationDrawer Value="_showDrawer"
                  ValueChanged="OnNavDrawerValueChanged" />

<MMain>@Body</MMain>

<Toc />

@code {

    [CascadingParameter]
    private BaseLayout BaseLayout { get; set; } = null!;

    private bool _showDrawer;

    protected override void OnInitialized()
    {
        base.OnInitialized();

        BaseLayout.OnAppBarNavIconClick = EventCallback.Factory.Create<bool>(this, val => { _showDrawer = val; });
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);

        BaseLayout.ShowAppBarNavIcon();
    }

    private void OnNavDrawerValueChanged(bool val)
    {
        _showDrawer = val;
        BaseLayout.ShowDrawer = val;
    }

}
