@namespace Masa.Blazor.Components.TemplateTable.Actions

<MTooltip Top Disabled="@(Tooltip is null)">
    <ActivatorContent>
        <MButton IconName="@Icon"
                 Small
                 OnClick="@HandleOnClick"
                 @attributes="@context.Attrs">
        </MButton>
    </ActivatorContent>
    <ChildContent>
        @Tooltip
    </ChildContent>
</MTooltip>

@code {

    [CascadingParameter(Name = "RowData")] public IReadOnlyDictionary<string, JsonElement>? Data { get; set; }

    [Parameter] public string? Tooltip { get; set; }

    [Parameter] [EditorRequired] public string? Icon { get; set; }

    [Parameter] [EditorRequired] public EventCallback<IReadOnlyDictionary<string, JsonElement>> OnClick { get; set; }

    private async Task HandleOnClick()
    {
        if (Data is null)
        {
            return;
        }

        await OnClick.InvokeAsync(Data);
    }

}