import{u as e}from"../../chunks/touch-5a32c5ea.js";import"../../chunks/tslib.es6-68144fbe.js";function t(t,n={}){const{threshold:o=.5,duration:i=300,disabled:r=!1}=n,a=e();let c={offset:0,position:"center",dragging:!1},s=0,u=0,g=null,d=!1;function f(){const e=t.querySelector(".m-swipe-cell__left"),n=t.querySelector(".m-swipe-cell__right");return{leftWidth:e?e.offsetWidth:0,rightWidth:n?n.offsetWidth:0}}function l(e,n=!1){const o=t.style;o.transform=`translate3d(${e}px, 0, 0)`,o.transitionDuration=n?`${i}ms`:"0ms",c.offset=e}function h(e,t){const{leftWidth:n,rightWidth:i}=f(),r=Math.abs(e),a=e>0?1:-1;return Math.abs(t)>500?t>0&&n>0?n:t<0&&i>0?-i:0:a>0&&n>0?r>n*o?n:0:a<0&&i>0&&r>i*o?-i:0}function m(e){let t="center";e>0?t="left":e<0&&(t="right"),c.position!==t&&(c.position=t)}function p(e){if(r||1!==e.touches.length)return;const t=e.touches[0];g=t.identifier,s=t.clientX,u=c.offset,c.dragging=!0,a.addMovement(e),console.log("Touch start:",t.clientX,t.clientY),e.preventDefault()}function v(e){if(r||!c.dragging||null===g)return;a.addMovement(e);const t=Array.from(e.touches).find((e=>e.identifier===g));if(!t)return;const n=t.clientX-s;let o=u+n;const{leftWidth:i,rightWidth:d}=f();o=o>0?i<=0?0:Math.min(o,i):d<=0?0:Math.max(o,-d),l(o,!1),e.preventDefault()}function X(e){if(!r&&c.dragging&&null!==g){c.dragging=!1;try{const e=a.getVelocity(g),t=h(c.offset,e.x);l(t,!0),m(t)}catch(e){const t=h(c.offset,0);l(t,!0),m(t)}a.endTouch(e),g=null}}function Y(e){if(r||!c.dragging)return;c.dragging=!1,a.endTouch(e),g=null;const t=h(c.offset,0);l(t,!0),m(t)}function E(e){if(r||0!==e.button||d)return;d=!0,s=e.clientX,u=c.offset,c.dragging=!0;const t={identifier:0,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[t],changedTouches:[t],targetTouches:[t],preventDefault:()=>{},stopPropagation:()=>{}};a.addMovement(n),console.log("Mouse down:",e.clientX,e.clientY),e.preventDefault()}function L(e){if(r||!c.dragging||!d)return;const t={identifier:0,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[t],changedTouches:[t],targetTouches:[t],preventDefault:()=>{},stopPropagation:()=>{}};a.addMovement(n);const o=e.clientX-s;let i=u+o;const{leftWidth:g,rightWidth:h}=f();i=i>0?g<=0?0:Math.min(i,g):h<=0?0:Math.max(i,-h),l(i,!1),e.preventDefault()}function T(e){if(r||!c.dragging||!d)return;c.dragging=!1,d=!1;try{const e=a.getVelocity(0),t=h(c.offset,e.x);l(t,!0),m(t)}catch(e){const t=h(c.offset,0);l(t,!0),m(t)}const t={identifier:0,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[t],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};a.endTouch(n)}function D(e){if(r||!c.dragging||!d)return;c.dragging=!1,d=!1;const t={identifier:0,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:e.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[t],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};a.endTouch(n);const o=h(c.offset,0);l(o,!0),m(o)}return{bindEvents:function(){console.log("Binding touch and mouse events"),t.addEventListener("touchstart",p,{passive:!1}),t.addEventListener("touchmove",v,{passive:!1}),t.addEventListener("touchend",X),t.addEventListener("touchcancel",Y),t.addEventListener("mousedown",E),document.addEventListener("mousemove",L),document.addEventListener("mouseup",T),t.addEventListener("mouseleave",D)},unbindEvents:function(){t.removeEventListener("touchstart",p),t.removeEventListener("touchmove",v),t.removeEventListener("touchend",X),t.removeEventListener("touchcancel",Y),t.removeEventListener("mousedown",E),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",T),t.removeEventListener("mouseleave",D)},open:function(e){if(r)return;const{leftWidth:t,rightWidth:n}=f();let o=0;"left"===e&&t>0?o=t:"right"===e&&n>0&&(o=-n),l(o,!0),m(o)},close:function(){r||(l(0,!0),m(0))},getState:function(){return Object.assign({},c)},setTransform:l}}export{t as useTouch};
//# sourceMappingURL=index-56f32094.js.map
