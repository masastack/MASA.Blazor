import{b as e}from"../../chunks/tslib.es6.js";import{c as t}from"../../chunks/helper.js";const s={},o={},l={};let c=0;function r(t){const r=c,a=t=>function(t,o){return e(this,void 0,void 0,(function*(){const e=s[t];if(null===e)return;const l=o.target.closest("a");if(!l)return;const c=l.getAttribute("href");if(!c)return;let r=l.getAttribute("data-page-stack-strategy");r=null===r?null:r.toLowerCase(),""!==r&&"true"!==r&&"push"!==r||(document.querySelector("[page-stack-id]")||n(),yield e.invokeMethodAsync("Push",c))}))}(r,t),i=()=>t.invokeMethodAsync("Popstate",window.location.pathname);return o[r]=a,l[r]=i,s[r]=t,document.addEventListener("click",a),window.addEventListener("popstate",i),c++}function n(){const e=document.documentElement;e.classList.contains("m-page-stack-scroll-blocked")||(e.style.setProperty("--m-page-stack-scroll-x",t(-e.scrollLeft)),e.style.setProperty("--m-page-stack-scroll-y",t(-e.scrollTop)),e.classList.add("m-page-stack-scroll-blocked"))}function a(){const e=document.documentElement;if(!e.classList.contains("m-page-stack-scroll-blocked"))return;const t=parseFloat(e.style.getPropertyValue("--m-page-stack-scroll-x")),s=parseFloat(e.style.getPropertyValue("--m-page-stack-scroll-y")),o=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--m-page-stack-scroll-x"),e.style.removeProperty("--m-page-stack-scroll-y"),e.classList.remove("m-page-stack-scroll-blocked"),e.scrollLeft=-t,e.scrollTop=-s,e.style.scrollBehavior=o}function i(e){const t=o[e];t&&document.removeEventListener("click",t);const c=l[e];c&&window.removeEventListener("popstate",c),s[e]&&s[e].dispose(),delete o[e],delete l[e],delete s[e]}export{r as attachListener,n as blockScroll,i as detachListener,a as unblockScroll};
//# sourceMappingURL=index.js.map
