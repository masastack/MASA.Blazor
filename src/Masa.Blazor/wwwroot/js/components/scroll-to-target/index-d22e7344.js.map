{"version":3,"file":"index-d22e7344.js","sources":["../../../../../Masa.Blazor.JS/node_modules/.pnpm/just-debounce-it@3.2.0/node_modules/just-debounce-it/index.mjs","../../../../../Masa.Blazor.JS/src/components/scroll-to-target/index.ts"],"sourcesContent":["var functionDebounce = debounce;\n\nfunction debounce(fn, wait, callFirst) {\n  var timeout = null;\n  var debouncedFn = null;\n\n  var clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n\n      debouncedFn = null;\n      timeout = null;\n    }\n  };\n\n  var flush = function() {\n    var call = debouncedFn;\n    clear();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var debounceWrapper = function() {\n    if (!wait) {\n      return fn.apply(this, arguments);\n    }\n\n    var context = this;\n    var args = arguments;\n    var callNow = callFirst && !timeout;\n    clear();\n\n    debouncedFn = function() {\n      fn.apply(context, args);\n    };\n\n    timeout = setTimeout(function() {\n      timeout = null;\n\n      if (!callNow) {\n        var call = debouncedFn;\n        debouncedFn = null;\n\n        return call();\n      }\n    }, wait);\n\n    if (callNow) {\n      return debouncedFn();\n    }\n  };\n\n  debounceWrapper.cancel = clear;\n  debounceWrapper.flush = flush;\n\n  return debounceWrapper;\n}\n\nexport {functionDebounce as default};\n","import debounceIt from \"just-debounce-it\";\r\n\r\nimport { formatToStandardOptions, IntersectionObserverOptions } from \"../../mixins/intersect\";\r\n\r\nclass ScrollToTargetJSInterop {\r\n  activeStack: string[] = [];\r\n  handle: DotNet.DotNetObject;\r\n  options?: IntersectionObserverInit | null;\r\n  debouncedUpdate: () => void;\r\n\r\n  constructor(\r\n    handle: DotNet.DotNetObject,\r\n    options?: IntersectionObserverOptions\r\n  ) {\r\n    this.handle = handle;\r\n    this.options = formatToStandardOptions(options);\r\n\r\n    this.debouncedUpdate = debounceIt(async () => {\r\n      await this.handle.invokeMethodAsync(\r\n        \"UpdateActiveTarget\",\r\n        this.activeStack[this.activeStack.length - 1]\r\n      );\r\n    }, 16);\r\n  }\r\n\r\n  observe(id: string) {\r\n    const el = document.getElementById(id);\r\n    if (!el) {\r\n      console.warn(`[ScrollToTarget] Element with id '${id}' not found`);\r\n      return;\r\n    }\r\n\r\n    if (el[\"_intersectForScrollToTarget\"]) {\r\n      return;\r\n    }\r\n\r\n    const observer = new IntersectionObserver(\r\n      async (\r\n        entries: IntersectionObserverEntry[] = [],\r\n        observer: IntersectionObserver\r\n      ) => {\r\n        const isIntersecting = entries.some((e) => e.isIntersecting);\r\n        if (isIntersecting) {\r\n          this.activeStack.push(id);\r\n        } else if (this.activeStack.includes(id)) {\r\n          this.activeStack.splice(this.activeStack.indexOf(id), 1);\r\n        }\r\n\r\n        this.debouncedUpdate();\r\n      },\r\n      this.options\r\n    );\r\n\r\n    el[\"_intersectForScrollToTarget\"] = Object(el[\"_intersectForScrollToTarget\"]);\r\n    el[\"_intersectForScrollToTarget\"] = { handle: this.handle, observer };\r\n\r\n    observer.observe(el);\r\n  }\r\n\r\n  unobserve(id: string) {\r\n    const el = document.getElementById(id);\r\n    if (!el) return;\r\n\r\n    const observe = el[\"_intersectForScrollToTarget\"];\r\n    if (!observe) return;\r\n\r\n    observe.observer.unobserve(el);\r\n    delete el[\"_intersectForScrollToTarget\"];\r\n  }\r\n\r\n  dispose() {\r\n    if (this.handle) {\r\n      this.handle.dispose();\r\n      this.handle = null\r\n    }\r\n  }\r\n}\r\n\r\nfunction init(\r\n  handle: DotNet.DotNetObject,\r\n  options?: IntersectionObserverOptions\r\n) {\r\n  return new ScrollToTargetJSInterop(handle, options);\r\n}\r\n\r\nexport { init };\r\n"],"names":["functionDebounce","fn","wait","callFirst","timeout","debouncedFn","clear","clearTimeout","debounceWrapper","apply","this","arguments","context","args","callNow","setTimeout","call","cancel","flush","ScrollToTargetJSInterop","constructor","handle","options","activeStack","formatToStandardOptions","debouncedUpdate","debounceIt","__awaiter","invokeMethodAsync","length","observe","id","el","document","getElementById","console","warn","observer","IntersectionObserver","entries","some","e","isIntersecting","push","includes","splice","indexOf","Object","unobserve","dispose","init"],"mappings":"kLAAA,IAAIA,EAEJ,SAAkBC,EAAIC,EAAMC,GAC1B,IAAIC,EAAU,KACVC,EAAc,KAEdC,EAAQ,WACNF,IACFG,aAAaH,GAEbC,EAAc,KACdD,EAAU,KAEhB,EAWMI,EAAkB,WACpB,IAAKN,EACH,OAAOD,EAAGQ,MAAMC,KAAMC,WAGxB,IAAIC,EAAUF,KACVG,EAAOF,UACPG,EAAUX,IAAcC,EAkB5B,OAjBAE,IAEAD,EAAc,WACZJ,EAAGQ,MAAMG,EAASC,EACxB,EAEIT,EAAUW,YAAW,WAGnB,GAFAX,EAAU,MAELU,EAAS,CACZ,IAAIE,EAAOX,EAGX,OAFAA,EAAc,KAEPW,GACR,CACF,GAAEd,GAECY,EACKT,SADT,CAGJ,EAKE,OAHAG,EAAgBS,OAASX,EACzBE,EAAgBU,MAxCJ,WACV,IAAIF,EAAOX,EACXC,IAEIU,GACFA,GAEN,EAmCSR,CACT,ECtDA,MAAMW,EAMJ,WAAAC,CACEC,EACAC,GAPFZ,KAAWa,YAAa,GAStBb,KAAKW,OAASA,EACdX,KAAKY,QAAUE,EAAwBF,GAEvCZ,KAAKe,gBAAkBC,GAAW,IAAWC,EAAAjB,UAAA,OAAA,GAAA,kBACrCA,KAAKW,OAAOO,kBAChB,qBACAlB,KAAKa,YAAYb,KAAKa,YAAYM,OAAS,GAE/C,KAAG,GACJ,CAED,OAAAC,CAAQC,GACN,MAAMC,EAAKC,SAASC,eAAeH,GACnC,IAAKC,EAEH,YADAG,QAAQC,KAAK,qCAAqCL,gBAIpD,GAAIC,EAAgC,4BAClC,OAGF,MAAMK,EAAW,IAAIC,sBACnB,CACEC,EAAuC,GACvCF,IACEV,EAAAjB,UAAA,OAAA,GAAA,YACqB6B,EAAQC,MAAMC,GAAMA,EAAEC,iBAE3ChC,KAAKa,YAAYoB,KAAKZ,GACbrB,KAAKa,YAAYqB,SAASb,IACnCrB,KAAKa,YAAYsB,OAAOnC,KAAKa,YAAYuB,QAAQf,GAAK,GAGxDrB,KAAKe,iBACP,KACAf,KAAKY,SAGPU,EAAgC,4BAAIe,OAAOf,EAAgC,6BAC3EA,EAAgC,4BAAI,CAAEX,OAAQX,KAAKW,OAAQgB,YAE3DA,EAASP,QAAQE,EAClB,CAED,SAAAgB,CAAUjB,GACR,MAAMC,EAAKC,SAASC,eAAeH,GACnC,IAAKC,EAAI,OAET,MAAMF,EAAUE,EAAgC,4BAC3CF,IAELA,EAAQO,SAASW,UAAUhB,UACpBA,EAAgC,4BACxC,CAED,OAAAiB,GACMvC,KAAKW,SACPX,KAAKW,OAAO4B,UACZvC,KAAKW,OAAS,KAEjB,EAGH,SAAS6B,EACP7B,EACAC,GAEA,OAAO,IAAIH,EAAwBE,EAAQC,EAC7C"}