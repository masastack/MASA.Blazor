import{u as t}from"../../chunks/touch-5a32c5ea.js";import"../../chunks/tslib.es6-68144fbe.js";function e(e,n={}){const{threshold:o=.5,duration:i=300,disabled:r=!1,minSwipeDistance:a=10}=n,s=t();let c={offset:0,position:"center",dragging:!1},u=0,g=0,d=null,f=!1,l=!1;function h(){const t=e.querySelector(".m-swipe-actions__left"),n=e.querySelector(".m-swipe-actions__right");return{leftWidth:t?t.offsetWidth:0,rightWidth:n?n.offsetWidth:0}}function p(t,n=!1){const o=e.style;o.transform=`translate3d(${t}px, 0, 0)`,o.transitionDuration=n?`${i}ms`:"0ms",c.offset=t}function m(t,e){const{leftWidth:n,rightWidth:i}=h(),r=Math.abs(t),a=t>0?1:-1;return Math.abs(e)>500?e>0&&n>0?n:e<0&&i>0?-i:0:a>0&&n>0?r>n*o?n:0:a<0&&i>0&&r>i*o?-i:0}function v(t){let e="center";t>0?e="left":t<0&&(e="right"),c.position!==e&&(c.position=e)}function X(t){if(r||1!==t.touches.length)return;t.stopPropagation();const e=t.touches[0];d=e.identifier,u=e.clientX,g=c.offset,c.dragging=!1,l=!1,s.addMovement(t)}function Y(t){if(r||null===d)return;s.addMovement(t);const e=Array.from(t.touches).find(t=>t.identifier===d);if(!e)return;const n=e.clientX-u;if(Math.abs(n)<a)return;l||(l=!0,c.dragging=!0,t.preventDefault(),t.stopPropagation());let o=g+n;const{leftWidth:i,rightWidth:f}=h();o=o>0?i<=0?0:Math.min(o,i):f<=0?0:Math.max(o,-f),p(o,!1),t.preventDefault()}function E(t){if(!r&&null!==d){t.stopPropagation(),c.dragging=!1,l=!1;try{const t=s.getVelocity(d),e=m(c.offset,t.x);p(e,!0),v(e)}catch(t){const e=m(c.offset,0);p(e,!0),v(e)}s.endTouch(t),d=null}}function L(t){if(r)return;t.stopPropagation(),c.dragging=!1,l=!1,s.endTouch(t),d=null;const e=m(c.offset,0);p(e,!0),v(e)}function D(t){if(r||0!==t.button||f)return;f=!0,u=t.clientX,g=c.offset,c.dragging=!0;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[e],changedTouches:[e],targetTouches:[e],preventDefault:()=>{},stopPropagation:()=>{}};s.addMovement(n),t.preventDefault()}function T(t){if(r||!c.dragging||!f)return;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[e],changedTouches:[e],targetTouches:[e],preventDefault:()=>{},stopPropagation:()=>{}};s.addMovement(n);const o=t.clientX-u;let i=g+o;const{leftWidth:a,rightWidth:d}=h();i=i>0?a<=0?0:Math.min(i,a):d<=0?0:Math.max(i,-d),p(i,!1),t.preventDefault()}function W(t){if(r||!c.dragging||!f)return;c.dragging=!1,f=!1;try{const t=s.getVelocity(0),e=m(c.offset,t.x);p(e,!0),v(e)}catch(t){const e=m(c.offset,0);p(e,!0),v(e)}const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[e],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};s.endTouch(n)}function M(t){if(r||!c.dragging||!f)return;c.dragging=!1,f=!1;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[e],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};s.endTouch(n);const o=m(c.offset,0);p(o,!0),v(o)}return{bindEvents:function(){e.addEventListener("touchstart",X,{passive:!1}),e.addEventListener("touchmove",Y,{passive:!1}),e.addEventListener("touchend",E),e.addEventListener("touchcancel",L),e.addEventListener("mousedown",D),document.addEventListener("mousemove",T),document.addEventListener("mouseup",W),e.addEventListener("mouseleave",M)},unbindEvents:function(){e.removeEventListener("touchstart",X),e.removeEventListener("touchmove",Y),e.removeEventListener("touchend",E),e.removeEventListener("touchcancel",L),e.removeEventListener("mousedown",D),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",W),e.removeEventListener("mouseleave",M)},open:function(t){if(r)return;const{leftWidth:e,rightWidth:n}=h();let o=0;"left"===t&&e>0?o=e:"right"===t&&n>0&&(o=-n),p(o,!0),v(o)},close:function(){r||(p(0,!0),v(0))},getState:function(){return Object.assign({},c)},setTransform:p}}export{e as useTouch};
//# sourceMappingURL=index-e445ec99.js.map
