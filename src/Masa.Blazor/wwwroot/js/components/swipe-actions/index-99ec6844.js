import{u as t}from"../../chunks/touch-5a32c5ea.js";import"../../chunks/tslib.es6-68144fbe.js";function e(e,n={}){const{threshold:o=.5,duration:i=300,disabled:r=!1,minSwipeDistance:a=10}=n,c=t();let s={offset:0,position:"center",dragging:!1},u=0,g=0,d=null,f=!1,l=!1;function h(){const t=e.querySelector(".m-swipe-actions__left"),n=e.querySelector(".m-swipe-actions__right");return{leftWidth:t?t.offsetWidth:0,rightWidth:n?n.offsetWidth:0}}function m(t,n=!1){const o=e.style;o.transform=`translate3d(${t}px, 0, 0)`,o.transitionDuration=n?`${i}ms`:"0ms",s.offset=t}function p(t,e){const{leftWidth:n,rightWidth:i}=h(),r=Math.abs(t),a=t>0?1:-1;return Math.abs(e)>500?e>0&&n>0?n:e<0&&i>0?-i:0:a>0&&n>0?r>n*o?n:0:a<0&&i>0&&r>i*o?-i:0}function v(t){let e="center";t>0?e="left":t<0&&(e="right"),s.position!==e&&(s.position=e)}function X(t){if(r||1!==t.touches.length)return;const e=t.touches[0];d=e.identifier,u=e.clientX,g=s.offset,s.dragging=!1,l=!1,c.addMovement(t),console.log("Touch start:",e.clientX,e.clientY)}function Y(t){if(r||null===d)return;c.addMovement(t);const e=Array.from(t.touches).find(t=>t.identifier===d);if(!e)return;const n=e.clientX-u;if(Math.abs(n)<a)return;l||(l=!0,s.dragging=!0,t.preventDefault());let o=g+n;const{leftWidth:i,rightWidth:f}=h();o=o>0?i<=0?0:Math.min(o,i):f<=0?0:Math.max(o,-f),m(o,!1),t.preventDefault()}function E(t){if(!r&&null!==d){s.dragging=!1,l=!1;try{const t=c.getVelocity(d),e=p(s.offset,t.x);m(e,!0),v(e)}catch(t){const e=p(s.offset,0);m(e,!0),v(e)}c.endTouch(t),d=null}}function L(t){if(r)return;s.dragging=!1,l=!1,c.endTouch(t),d=null;const e=p(s.offset,0);m(e,!0),v(e)}function D(t){if(r||0!==t.button||f)return;f=!0,u=t.clientX,g=s.offset,s.dragging=!0;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[e],changedTouches:[e],targetTouches:[e],preventDefault:()=>{},stopPropagation:()=>{}};c.addMovement(n),console.log("Mouse down:",t.clientX,t.clientY),t.preventDefault()}function T(t){if(r||!s.dragging||!f)return;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[e],changedTouches:[e],targetTouches:[e],preventDefault:()=>{},stopPropagation:()=>{}};c.addMovement(n);const o=t.clientX-u;let i=g+o;const{leftWidth:a,rightWidth:d}=h();i=i>0?a<=0?0:Math.min(i,a):d<=0?0:Math.max(i,-d),m(i,!1),t.preventDefault()}function M(t){if(r||!s.dragging||!f)return;s.dragging=!1,f=!1;try{const t=c.getVelocity(0),e=p(s.offset,t.x);m(e,!0),v(e)}catch(t){const e=p(s.offset,0);m(e,!0),v(e)}const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[e],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};c.endTouch(n)}function W(t){if(r||!s.dragging||!f)return;s.dragging=!1,f=!1;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[e],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};c.endTouch(n);const o=p(s.offset,0);m(o,!0),v(o)}return{bindEvents:function(){console.log("Binding touch and mouse events"),e.addEventListener("touchstart",X,{passive:!1}),e.addEventListener("touchmove",Y,{passive:!1}),e.addEventListener("touchend",E),e.addEventListener("touchcancel",L),e.addEventListener("mousedown",D),document.addEventListener("mousemove",T),document.addEventListener("mouseup",M),e.addEventListener("mouseleave",W)},unbindEvents:function(){e.removeEventListener("touchstart",X),e.removeEventListener("touchmove",Y),e.removeEventListener("touchend",E),e.removeEventListener("touchcancel",L),e.removeEventListener("mousedown",D),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M),e.removeEventListener("mouseleave",W)},open:function(t){if(r)return;const{leftWidth:e,rightWidth:n}=h();let o=0;"left"===t&&e>0?o=e:"right"===t&&n>0&&(o=-n),m(o,!0),v(o)},close:function(){r||(m(0,!0),v(0))},getState:function(){return Object.assign({},s)},setTransform:m}}export{e as useTouch};
//# sourceMappingURL=index-99ec6844.js.map
