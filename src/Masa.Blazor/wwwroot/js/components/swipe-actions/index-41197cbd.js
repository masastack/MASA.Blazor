import{u as t}from"../../chunks/touch-5a32c5ea.js";import"../../chunks/tslib.es6-68144fbe.js";function e(e,n={}){const{threshold:o=.5,duration:i=300,disabled:r=!1}=n,a=t();let c={offset:0,position:"center",dragging:!1},s=0,u=0,g=null,d=!1;function f(){const t=e.querySelector(".m-swipe-actions__left"),n=e.querySelector(".m-swipe-actions__right");return{leftWidth:t?t.offsetWidth:0,rightWidth:n?n.offsetWidth:0}}function l(t,n=!1){const o=e.style;o.transform=`translate3d(${t}px, 0, 0)`,o.transitionDuration=n?`${i}ms`:"0ms",c.offset=t}function h(t,e){const{leftWidth:n,rightWidth:i}=f(),r=Math.abs(t),a=t>0?1:-1;return Math.abs(e)>500?e>0&&n>0?n:e<0&&i>0?-i:0:a>0&&n>0?r>n*o?n:0:a<0&&i>0&&r>i*o?-i:0}function m(t){let e="center";t>0?e="left":t<0&&(e="right"),c.position!==e&&(c.position=e)}function p(t){if(r||1!==t.touches.length)return;const e=t.touches[0];g=e.identifier,s=e.clientX,u=c.offset,c.dragging=!0,a.addMovement(t),console.log("Touch start:",e.clientX,e.clientY),t.preventDefault()}function v(t){if(r||!c.dragging||null===g)return;a.addMovement(t);const e=Array.from(t.touches).find(t=>t.identifier===g);if(!e)return;const n=e.clientX-s;let o=u+n;const{leftWidth:i,rightWidth:d}=f();o=o>0?i<=0?0:Math.min(o,i):d<=0?0:Math.max(o,-d),l(o,!1),t.preventDefault()}function X(t){if(!r&&c.dragging&&null!==g){c.dragging=!1;try{const t=a.getVelocity(g),e=h(c.offset,t.x);l(e,!0),m(e)}catch(t){const e=h(c.offset,0);l(e,!0),m(e)}a.endTouch(t),g=null}}function Y(t){if(r||!c.dragging)return;c.dragging=!1,a.endTouch(t),g=null;const e=h(c.offset,0);l(e,!0),m(e)}function E(t){if(r||0!==t.button||d)return;d=!0,s=t.clientX,u=c.offset,c.dragging=!0;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[e],changedTouches:[e],targetTouches:[e],preventDefault:()=>{},stopPropagation:()=>{}};a.addMovement(n),console.log("Mouse down:",t.clientX,t.clientY),t.preventDefault()}function L(t){if(r||!c.dragging||!d)return;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[e],changedTouches:[e],targetTouches:[e],preventDefault:()=>{},stopPropagation:()=>{}};a.addMovement(n);const o=t.clientX-s;let i=u+o;const{leftWidth:g,rightWidth:h}=f();i=i>0?g<=0?0:Math.min(i,g):h<=0?0:Math.max(i,-h),l(i,!1),t.preventDefault()}function T(t){if(r||!c.dragging||!d)return;c.dragging=!1,d=!1;try{const t=a.getVelocity(0),e=h(c.offset,t.x);l(e,!0),m(e)}catch(t){const e=h(c.offset,0);l(e,!0),m(e)}const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[e],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};a.endTouch(n)}function D(t){if(r||!c.dragging||!d)return;c.dragging=!1,d=!1;const e={identifier:0,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,radiusX:0,radiusY:0,rotationAngle:0,force:1},n={timeStamp:Date.now(),touches:[],changedTouches:[e],targetTouches:[],preventDefault:()=>{},stopPropagation:()=>{}};a.endTouch(n);const o=h(c.offset,0);l(o,!0),m(o)}return{bindEvents:function(){console.log("Binding touch and mouse events"),e.addEventListener("touchstart",p,{passive:!1}),e.addEventListener("touchmove",v,{passive:!1}),e.addEventListener("touchend",X),e.addEventListener("touchcancel",Y),e.addEventListener("mousedown",E),document.addEventListener("mousemove",L),document.addEventListener("mouseup",T),e.addEventListener("mouseleave",D)},unbindEvents:function(){e.removeEventListener("touchstart",p),e.removeEventListener("touchmove",v),e.removeEventListener("touchend",X),e.removeEventListener("touchcancel",Y),e.removeEventListener("mousedown",E),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",T),e.removeEventListener("mouseleave",D)},open:function(t){if(r)return;const{leftWidth:e,rightWidth:n}=f();let o=0;"left"===t&&e>0?o=e:"right"===t&&n>0&&(o=-n),l(o,!0),m(o)},close:function(){r||(l(0,!0),m(0))},getState:function(){return Object.assign({},c)},setTransform:l}}export{e as useTouch};
//# sourceMappingURL=index-41197cbd.js.map
