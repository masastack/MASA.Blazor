import{u as t}from"../../chunks/touch.js";import{a as o}from"../../chunks/helper.js";import"../../chunks/tslib.es6.js";function n(n,i,s){var c,r;const l=o(n);if(!l)return console.warn("The root element of MNavigationDrawer component is not found, touching to open/close will not work."),{};window.addEventListener("touchstart",b,{passive:!0}),window.addEventListener("touchmove",T,{passive:!1}),window.addEventListener("touchend",x,{passive:!0});const d=["left","right"].includes(s.position),{addMovement:u,endTouch:h,getVelocity:a}=t();let m,p=!1,v=!1,f=0,w=0,g=null!==(c=l.style.transform)&&void 0!==c?c:null,y=null!==(r=l.style.transition)&&void 0!==r?r:null;function E(t,o){return("left"===s.position?t:"right"===s.position?document.documentElement.clientWidth-t:"top"===s.position?t:"bottom"===s.position?document.documentElement.clientHeight-t:e())-(o?s.width:0)}function M(t,o=!0){const n="left"===s.position?(t-w)/s.width:"right"===s.position?(document.documentElement.clientWidth-t-w)/s.width:"top"===s.position?(t-w)/s.width:"bottom"===s.position?(document.documentElement.clientHeight-t-w)/s.width:e();return o?Math.max(0,Math.min(1,n)):n}function b(t){var o,n;if(s.touchless)return;g=null!==(o=l.style.transform)&&void 0!==o?o:null,y=null!==(n=l.style.transition)&&void 0!==n?n:null;const i=t.changedTouches[0].clientX,c=t.changedTouches[0].clientY,r="left"===s.position?i<25:"right"===s.position?i>document.documentElement.clientWidth-25:"top"===s.position?c<25:"bottom"===s.position?c>document.documentElement.clientHeight-25:e(),a=s.isActive&&("left"===s.position?i<s.width:"right"===s.position?i>document.documentElement.clientWidth-s.width:"top"===s.position?c<s.width:"bottom"===s.position?c>document.documentElement.clientHeight-s.width:e());(r||a||s.isActive&&s.isTemporary)&&(m=[i,c],w=E(d?i:c,s.isActive),f=M(d?i:c),p=w>-20&&w<80,h(t),u(t))}function T(t){if(s.touchless)return;const o=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY;if(p){if(!t.cancelable)return void(p=!1);const e=Math.abs(o-m[0]),i=Math.abs(n-m[1]);(d?e>i&&e>3:i>e&&i>3)?(v=!0,p=!1):(d?i:e)>3&&(p=!1)}if(A(),!v)return;t.preventDefault(),u(t);const e=M(d?o:n,!1);f=Math.max(0,Math.min(1,e)),e>1?w=E(d?o:n,!0):e<0&&(w=E(d?o:n,!1)),i.invokeMethodAsync("TouchMove",v,f)}function x(t){if(p=!1,s.touchless||!v)return;u(t),v=!1,A();const o=a(t.changedTouches[0].identifier),n=Math.abs(o.x),c=Math.abs(o.y),r=d?n>c&&n>400:c>n&&c>3;s.isActive=r?o.direction===({left:"right",right:"left",top:"down",bottom:"up"}[s.position]||e()):f>.5,i.invokeMethodAsync("TouchEnd",s.isActive)}const A=()=>{const t=v?{transform:"left"===s.position?`translateX(calc(-100% + ${f*s.width}px))`:"right"===s.position?`translateX(calc(100% - ${f*s.width}px))`:"top"===s.position?`translateY(calc(-100% + ${f*s.width}px))`:"bottom"===s.position?`translateY(calc(100% - ${f*s.width}px))`:e(),transition:"none"}:void 0;v?(l.style.setProperty("transform",(null==t?void 0:t.transform)||"none"),l.style.setProperty("transition",(null==t?void 0:t.transition)||null)):(l.style.setProperty("transform",g),l.style.setProperty("transition",y))};return{syncState:t=>{s=t},dispose:()=>{i.dispose(),window.removeEventListener("touchstart",b),window.removeEventListener("touchmove",T),window.removeEventListener("touchend",x)}}}function e(){throw new Error}export{n as useTouch};
//# sourceMappingURL=touch.js.map
