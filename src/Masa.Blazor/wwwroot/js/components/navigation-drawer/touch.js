import{u as t}from"../../touch-3b3af175.js";import{a as n}from"../../helper-a14278a5.js";import"../../tslib.es6-c8ddd84a.js";function o(o,i,s){var c,r;const d=n(o);d||e(),window.addEventListener("touchstart",M,{passive:!0}),window.addEventListener("touchmove",T,{passive:!1}),window.addEventListener("touchend",x,{passive:!0});const l=["left","right"].includes(s.position),{addMovement:a,endTouch:h,getVelocity:u}=t();let m,p=!1,v=!1,f=0,w=0,g=null!==(c=d.style.transform)&&void 0!==c?c:null,y=null!==(r=d.style.transition)&&void 0!==r?r:null;function E(t,n){return("left"===s.position?t:"right"===s.position?document.documentElement.clientWidth-t:"top"===s.position?t:"bottom"===s.position?document.documentElement.clientHeight-t:e())-(n?s.width:0)}function b(t,n=!0){const o="left"===s.position?(t-w)/s.width:"right"===s.position?(document.documentElement.clientWidth-t-w)/s.width:"top"===s.position?(t-w)/s.width:"bottom"===s.position?(document.documentElement.clientHeight-t-w)/s.width:e();return n?Math.max(0,Math.min(1,o)):o}function M(t){var n,o;if(s.touchless)return;g=null!==(n=d.style.transform)&&void 0!==n?n:null,y=null!==(o=d.style.transition)&&void 0!==o?o:null;const i=t.changedTouches[0].clientX,c=t.changedTouches[0].clientY,r="left"===s.position?i<25:"right"===s.position?i>document.documentElement.clientWidth-25:"top"===s.position?c<25:"bottom"===s.position?c>document.documentElement.clientHeight-25:e(),u=s.isActive&&("left"===s.position?i<s.width:"right"===s.position?i>document.documentElement.clientWidth-s.width:"top"===s.position?c<s.width:"bottom"===s.position?c>document.documentElement.clientHeight-s.width:e());(r||u||s.isActive&&s.isTemporary)&&(m=[i,c],w=E(l?i:c,s.isActive),f=b(l?i:c),p=w>-20&&w<80,h(t),a(t))}function T(t){const n=t.changedTouches[0].clientX,o=t.changedTouches[0].clientY;if(p){if(!t.cancelable)return void(p=!1);const e=Math.abs(n-m[0]),i=Math.abs(o-m[1]);(l?e>i&&e>3:i>e&&i>3)?(v=!0,p=!1):(l?i:e)>3&&(p=!1)}if(A(),!v)return;t.preventDefault(),a(t);const e=b(l?n:o,!1);f=Math.max(0,Math.min(1,e)),e>1?w=E(l?n:o,!0):e<0&&(w=E(l?n:o,!1)),i.invokeMethodAsync("TouchMove",v,f)}function x(t){if(p=!1,!v)return;a(t),v=!1,A();const n=u(t.changedTouches[0].identifier),o=Math.abs(n.x),c=Math.abs(n.y),r=l?o>c&&o>400:c>o&&c>3;s.isActive=r?n.direction===({left:"right",right:"left",top:"down",bottom:"up"}[s.position]||e()):f>.5,i.invokeMethodAsync("TouchEnd",s.isActive)}const A=()=>{const t=v?{transform:"left"===s.position?`translateX(calc(-100% + ${f*s.width}px))`:"right"===s.position?`translateX(calc(100% - ${f*s.width}px))`:"top"===s.position?`translateY(calc(-100% + ${f*s.width}px))`:"bottom"===s.position?`translateY(calc(100% - ${f*s.width}px))`:e(),transition:"none"}:void 0;v?(d.style.setProperty("transform",(null==t?void 0:t.transform)||"none"),d.style.setProperty("transition",(null==t?void 0:t.transition)||null)):(d.style.setProperty("transform",g),d.style.setProperty("transition",y))};return{syncState:t=>{s=t},dispose:()=>{i.dispose(),window.removeEventListener("touchstart",M),window.removeEventListener("touchmove",T),window.removeEventListener("touchend",x)}}}function e(){throw new Error}export{o as useTouch};
//# sourceMappingURL=touch.js.map
