function e(e,o){const l=[];if(o&&e&&!o.contains(e))return l;for(;e&&(t(e)&&l.push(e),e!==o);)e=e.parentElement;return l}function t(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return"scroll"===t.overflowY||"auto"===t.overflowY&&e.scrollHeight>e.clientHeight}let o=!1;try{if("undefined"!=typeof window){const e=Object.defineProperty({},"passive",{get:()=>{o=!0}});window.addEventListener("testListener",e,e),window.removeEventListener("testListener",e,e)}}catch(e){console.warn(e)}function l(e,t="px"){return null==e||""===e?void 0:isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${t}`:void 0}Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});class s{constructor(e,t,o){e&&(this.root=e,this.contentEl=t,this.options=o)}bind(){"block"===this.options.strategy&&(this._prepareBlock(),this._blockScroll())}unbind(){"block"===this.options.strategy&&this._unblockScroll()}_prepareBlock(){const o=this.root.offsetParent;var l;this.scrollElements=[...new Set([...e(this.contentEl,this.options.contained?o:void 0)])],this.scrollableParent=t(l=o||document.documentElement)&&l}_blockScroll(){this.scrollableParent&&this.root.classList.add("m-overlay--scroll-blocked");const e=window.innerWidth-document.documentElement.offsetWidth;this.scrollElements.filter((e=>!e.classList.contains("m-overlay-scroll-blocked"))).forEach(((t,o)=>{t.style.setProperty("--m-body-scroll-x",l(-t.scrollLeft)),t.style.setProperty("--m-body-scroll-y",l(-t.scrollTop)),t!==document.documentElement&&t.style.setProperty("--m-scrollbar-offset",l(e)),t.classList.add("m-overlay-scroll-blocked")}))}_unblockScroll(){this.scrollElements.filter((e=>e.classList.contains("m-overlay-scroll-blocked"))).forEach(((e,t)=>{const o=parseFloat(e.style.getPropertyValue("--m-body-scroll-x")),l=parseFloat(e.style.getPropertyValue("--m-body-scroll-y")),s=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--m-body-scroll-x"),e.style.removeProperty("--m-body-scroll-y"),e.style.removeProperty("--m-scrollbar-offset"),e.classList.remove("m-overlay-scroll-blocked"),e.scrollLeft=-o,e.scrollTop=-l,e.style.scrollBehavior=s})),this.scrollableParent&&this.root.classList.remove("m-overlay--scroll-blocked")}}function r(e,t,o){return new s(e,t,o)}export{r as init};
//# sourceMappingURL=scrollStrategies.js.map
