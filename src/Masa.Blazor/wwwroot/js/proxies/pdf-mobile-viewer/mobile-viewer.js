var t,e,n,i,a,r,s,o,u,l,h,c,d,f;function v(t){var e="function"==typeof Map?new Map:void 0;return v=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(U())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var a=new(t.bind.apply(t,i));return n&&X(a,n.prototype),a}(t,arguments,G(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),X(n,t)},v(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){e||(e=[]);var i=e.length++;return Object.defineProperty({},"_",{set:function(a){e[i]=a,t.apply(n,e)}})}function D(t,e,n,i){var a=y(G(1&i?t.prototype:t),e,n);return 2&i?function(t){return a.apply(n,t)}:a}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},y.apply(null,arguments)}function A(t){return function(t){if(Array.isArray(t))return O(t)}(t)||b(t)||N(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function k(t,e){S(t,e),e.add(t)}function E(t,e,n){return n(B(t,e))}function w(t,e,n){return(e=H(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */C=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var r=e&&e.prototype instanceof m?e:m,s=Object.create(r.prototype),o=new P(i||[]);return a(s,"_invoke",{value:_(t,n,o)}),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",f="suspendedYield",v="executing",p="completed",g={};function m(){}function D(){}function y(){}var A={};l(A,s,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(B([])));k&&k!==n&&i.call(k,s)&&(A=k);var E=y.prototype=m.prototype=Object.create(A);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function F(t,e){function n(a,r,s,o){var u=c(t[a],t,r);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==K(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,s,o)}),(function(t){n("throw",t,s,o)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,o)}))}o(u.arg)}var r;a(this,"_invoke",{value:function(t,i){function a(){return new e((function(e,a){n(t,i,e,a)}))}return r=r?r.then(a,a):a()}})}function _(e,n,i){var a=d;return function(r,s){if(a===v)throw Error("Generator is already running");if(a===p){if("throw"===r)throw s;return{value:t,done:!0}}for(i.method=r,i.arg=s;;){var o=i.delegate;if(o){var u=x(o,i);if(u){if(u===g)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===d)throw a=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=v;var l=c(e,n,i);if("normal"===l.type){if(a=i.done?p:f,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(a=p,i.method="throw",i.arg=l.arg)}}}function x(e,n){var i=n.method,a=e.iterator[i];if(a===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=c(a,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var s=r.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function B(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function n(){for(;++a<e.length;)if(i.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(K(e)+" is not iterable")}return D.prototype=y,a(E,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:D,configurable:!0}),D.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===D||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},w(F.prototype),l(F.prototype,o,(function(){return this})),e.AsyncIterator=F,e.async=function(t,n,i,a,r){void 0===r&&(r=Promise);var s=new F(h(t,n,i,a),r);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(E),l(E,u,"Generator"),l(E,s,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=B,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(i,a){return o.type="throw",o.arg=e,n.next=i,a&&(n.method="next",n.arg=t),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;M(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:B(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}function F(t,e,n,i,a,r,s){try{var o=t[r](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(i,a)}function _(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var r=t.apply(e,n);function s(t){F(r,i,a,s,o,"next",t)}function o(t){F(r,i,a,s,o,"throw",t)}s(void 0)}))}}function x(t,e,n){S(t,e),e.set(t,n)}function S(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(t,e){return t.get(B(t,e))}function P(t,e,n){return t.set(B(t,e),n),n}function B(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function L(t,e){return I(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,a,r,s,o=[],u=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=r.call(n)).done)&&(o.push(i.value),o.length!==e);u=!0);}catch(t){l=!0,a=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}(t,e)||N(t,e)||T()}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(t){if(Array.isArray(t))return t}function R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=N(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function N(t,e){if(t){if("string"==typeof t)return O(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,H(i.key),i)}}function W(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function H(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=K(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K(e)?e:e+""}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e,n){return e=G(e),function(t,e){if(e&&("object"==K(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U()?Reflect.construct(e,n||[],G(t).constructor):e.apply(t,n))}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U=function(){return!!t})()}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}function q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Y(t){return new J(t,0)}function Q(t){return function(){return new $(t.apply(this,arguments))}}function $(t){var e,n;function i(e,n){try{var r=t[e](n),s=r.value,o=s instanceof J;Promise.resolve(o?s.v:s).then((function(n){if(o){var u="return"===e?"return":"next";if(!s.k||n.done)return i(u,n);n=t[u](n).value}a(r.done?"return":"normal",n)}),(function(t){i("throw",t)}))}catch(t){a("throw",t)}}function a(t,a){switch(t){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,a){return new Promise((function(r,s){var o={key:t,arg:a,resolve:r,reject:s,next:null};n?n=n.next=o:(e=n=o,i(t,a))}))},"function"!=typeof t.return&&(this.return=void 0)}function J(t,e){this.v=t,this.k=e}function Z(t){var e,n,i,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);a--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new tt(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function tt(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return tt=function(t){this.s=t,this.n=t.next},tt.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new tt(t)}$.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},$.prototype.next=function(t){return this._invoke("next",t)},$.prototype.throw=function(t){return this._invoke("throw",t)},$.prototype.return=function(t){return this._invoke("return",t)};import"./es.promise.with-resolvers-1c8ab4c1.js";function et(t,e,n,i){return new(n||(n=Promise))((function(a,r){function s(t){try{u(i.next(t))}catch(t){r(t)}}function o(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){t.done?a(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(s,o)}u((i=i.apply(t,e||[])).next())}))}
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2024 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */var nt={d:function(t,e){for(var n in e)nt.o(e,n)&&!nt.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},it=globalThis.pdfjsLib={};nt.d(it,{AbortException:function(){return ge},AnnotationEditorLayer:function(){return Lv},AnnotationEditorParamsType:function(){return Dt},AnnotationEditorType:function(){return mt},AnnotationEditorUIManager:function(){return pa},AnnotationLayer:function(){return Hh},AnnotationMode:function(){return gt},CMapCompressionType:function(){return $t},ColorPicker:function(){return pd},DOMSVGFactory:function(){return yn},DrawLayer:function(){return Gv},FeatureTest:function(){return Ae},GlobalWorkerOptions:function(){return Rs},ImageKind:function(){return Ft},InvalidPDFException:function(){return de},MissingPDFException:function(){return fe},OPS:function(){return Jt},PDFDataRangeTransport:function(){return xu},PDFDateString:function(){return Mn},PDFWorker:function(){return Hu},PasswordResponses:function(){return Zt},PermissionFlag:function(){return yt},PixelsPerInch:function(){return Ge},RenderingCancelledException:function(){return bn},TextLayer:function(){return su},UnexpectedResponseException:function(){return ve},Util:function(){return ke},VerbosityLevel:function(){return Qt},XfaLayer:function(){return vl},build:function(){return hl},createValidAbsoluteUrl:function(){return oe},fetchData:function(){return pn},getDocument:function(){return wu},getFilenameFromUrl:function(){return wn},getPdfFilenameFromUrl:function(){return Cn},getXfaPageViewport:function(){return Pn},isDataScheme:function(){return kn},isPdfFile:function(){return En},noContextMenu:function(){return Sn},normalizeUnicode:function(){return _e},setLayerDimensions:function(){return In},shadow:function(){return ue},version:function(){return ll}});var at=!("object"!==("undefined"==typeof process?"undefined":K(process))||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),rt=[1,0,0,1,0,0],st=[.001,0,0,.001,0,0],ot=1.35,ut=1,lt=2,ht=4,ct=16,dt=32,ft=64,vt=128,pt=256,gt={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Dt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},yt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},At=0,bt=1,kt=2,Et=3,wt=3,Ct=4,Ft={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},_t=1,xt=2,St=3,Mt=4,Pt=5,Bt=6,Lt=7,Tt=8,It=9,Rt=10,Nt=11,Ot=12,jt=13,Wt=14,Ht=15,zt=16,Vt=17,Ut=20,Gt=1,qt=2,Xt=3,Kt=4,Yt=5,Qt={ERRORS:0,WARNINGS:1,INFOS:5},$t={NONE:0,BINARY:1},Jt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Zt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},te=Qt.WARNINGS;function ee(t){Number.isInteger(t)&&(te=t)}function ne(){return te}function ie(t){te>=Qt.INFOS&&console.log("Info: ".concat(t))}function ae(t){te>=Qt.WARNINGS&&console.log("Warning: ".concat(t))}function re(t){throw new Error(t)}function se(t,e){t||re(e)}function oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){var i=t.match(/\./g);(null==i?void 0:i.length)>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch(t){}}var a=e?new URL(t,e):new URL(t);if(function(t){switch(null==t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch(t){}return null}function ue(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}var le=function(){function t(e,n){this.constructor===t&&re("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}(),he=function(t){function e(t,n){var i;return z(this,e),(i=V(this,e,[t,"PasswordException"])).code=n,i}return q(e,le),W(e)}(),ce=function(t){function e(t,n){var i;return z(this,e),(i=V(this,e,[t,"UnknownErrorException"])).details=n,i}return q(e,le),W(e)}(),de=function(t){function e(t){return z(this,e),V(this,e,[t,"InvalidPDFException"])}return q(e,le),W(e)}(),fe=function(t){function e(t){return z(this,e),V(this,e,[t,"MissingPDFException"])}return q(e,le),W(e)}(),ve=function(t){function e(t,n){var i;return z(this,e),(i=V(this,e,[t,"UnexpectedResponseException"])).status=n,i}return q(e,le),W(e)}(),pe=function(t){function e(t){return z(this,e),V(this,e,[t,"FormatError"])}return q(e,le),W(e)}(),ge=function(t){function e(t){return z(this,e),V(this,e,[t,"AbortException"])}return q(e,le),W(e)}();function me(t){"object"===K(t)&&void 0!==(null==t?void 0:t.length)||re("Invalid argument for bytesToString");var e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);for(var i=[],a=0;a<e;a+=n){var r=Math.min(a+n,e),s=t.subarray(a,r);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function De(t){"string"!=typeof t&&re("Invalid argument for stringToBytes");for(var e=t.length,n=new Uint8Array(e),i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}function ye(t){var e,n=Object.create(null),i=R(t);try{for(i.s();!(e=i.n()).done;){var a=L(e.value,2),r=a[0],s=a[1];n[r]=s}}catch(t){i.e(t)}finally{i.f()}return n}var Ae=function(){return W((function t(){z(this,t)}),null,[{key:"isLittleEndian",get:function(){return ue(this,"isLittleEndian",((t=new Uint8Array(4))[0]=1,1===new Uint32Array(t.buffer,0,1)[0]));var t}},{key:"isEvalSupported",get:function(){return ue(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return ue(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}},{key:"platform",get:function(){var t;return"undefined"!=typeof navigator&&"string"==typeof(null===(t=navigator)||void 0===t?void 0:t.platform)?ue(this,"platform",{isMac:navigator.platform.includes("Mac")}):ue(this,"platform",{isMac:!1})}},{key:"isCSSRoundSupported",get:function(){var t,e;return ue(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}])}(),be=Array.from(Array(256).keys(),(function(t){return t.toString(16).padStart(2,"0")})),ke=function(){function t(){z(this,t)}return W(t,null,[{key:"makeHexColor",value:function(t,e,n){return"#".concat(be[t]).concat(be[e]).concat(be[n])}},{key:"scaleMinMax",value:function(t,e){var n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}},{key:"transform",value:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}},{key:"applyTransform",value:function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}},{key:"applyInverseTransform",value:function(t,e){var n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}},{key:"getAxialAlignedBoundingBox",value:function(t,e){var n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],a[0],r[0]),Math.min(n[1],i[1],a[1],r[1]),Math.max(n[0],i[0],a[0],r[0]),Math.max(n[1],i[1],a[1],r[1])]}},{key:"inverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}},{key:"singularValueDecompose2dScale",value:function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],s=(n+r)/2,o=Math.sqrt(Math.pow(n+r,2)-4*(n*r-a*i))/2,u=s+o||1,l=s-o||1;return[Math.sqrt(u),Math.sqrt(l)]}},{key:"normalizeRect",value:function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}},{key:"intersect",value:function(t,e){var n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;var a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>r?null:[n,a,i,r]}},{key:"bezierBoundingBox",value:function(e,n,i,a,r,s,o,u,l){return l?(l[0]=Math.min(l[0],e,o),l[1]=Math.min(l[1],n,u),l[2]=Math.max(l[2],e,o),l[3]=Math.max(l[3],n,u)):l=[Math.min(e,o),Math.min(n,u),Math.max(e,o),Math.max(n,u)],B(t,this,we).call(this,e,i,r,o,n,a,s,u,3*(3*(i-r)-e+o),6*(e-2*i+r),3*(i-e),l),B(t,this,we).call(this,e,i,r,o,n,a,s,u,3*(3*(a-s)-n+u),6*(n-2*a+s),3*(a-n),l),l}}])}();function Ee(t,e,n,i,a,r,s,o,u,l){if(!(u<=0||u>=1)){var h=1-u,c=u*u,d=c*u,f=h*(h*(h*t+3*u*e)+3*c*n)+d*i,v=h*(h*(h*a+3*u*r)+3*c*s)+d*o;l[0]=Math.min(l[0],f),l[1]=Math.min(l[1],v),l[2]=Math.max(l[2],f),l[3]=Math.max(l[3],v)}}function we(e,n,i,a,r,s,o,u,l,h,c,d){if(Math.abs(l)<1e-12)Math.abs(h)>=1e-12&&B(t,this,Ee).call(this,e,n,i,a,r,s,o,u,-c/h,d);else{var f=Math.pow(h,2)-4*c*l;if(!(f<0)){var v=Math.sqrt(f),p=2*l;B(t,this,Ee).call(this,e,n,i,a,r,s,o,u,(-h+v)/p,d),B(t,this,Ee).call(this,e,n,i,a,r,s,o,u,(-h-v)/p,d)}}}t=ke;var Ce=null,Fe=null;function _e(t){return Ce||(Ce=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Fe=new Map([["ﬅ","ſt"]])),t.replaceAll(Ce,(function(t,e,n){return e?e.normalize("NFKC"):Fe.get(n)}))}var xe="pdfjs_internal_id_",Se=0,Me=1,Pe=2,Be=3,Le=4,Te=5,Ie=6,Re=7,Ne=8,Oe=function(){return W((function t(){z(this,t),this.constructor===t&&re("Cannot initialize BaseFilterFactory.")}),[{key:"addFilter",value:function(t){return"none"}},{key:"addHCMFilter",value:function(t,e){return"none"}},{key:"addAlphaFilter",value:function(t){return"none"}},{key:"addLuminosityFilter",value:function(t){return"none"}},{key:"addHighlightHCMFilter",value:function(t,e,n,i,a){return"none"}},{key:"destroy",value:function(){}}])}(),je=new WeakMap,We=function(){return W((function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).enableHWA,n=void 0!==e&&e;z(this,t),x(this,je,!1),this.constructor===t&&re("Cannot initialize BaseCanvasFactory."),P(je,this,n)}),[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");var n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!M(je,this)})}}},{key:"reset",value:function(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},{key:"_createCanvas",value:function(t,e){re("Abstract method `_createCanvas` called.")}}])}(),He=function(){return W((function t(e){var n=e.baseUrl,i=void 0===n?null:n,a=e.isCompressed,r=void 0===a||a;z(this,t),this.constructor===t&&re("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=i,this.isCompressed=r}),[{key:"fetch",value:(t=_(C().mark((function t(e){var n,i,a,r=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name,this.baseUrl){t.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(n){t.next=5;break}throw new Error("CMap name must be specified.");case 5:return i=this.baseUrl+n+(this.isCompressed?".bcmap":""),a=this.isCompressed?$t.BINARY:$t.NONE,t.abrupt("return",this._fetchData(i,a).catch((function(t){throw new Error("Unable to load ".concat(r.isCompressed?"binary ":"","CMap at: ").concat(i))})));case 8:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"_fetchData",value:function(t,e){re("Abstract method `_fetchData` called.")}}]);var t}(),ze=function(){return W((function t(e){var n=e.baseUrl,i=void 0===n?null:n;z(this,t),this.constructor===t&&re("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=i}),[{key:"fetch",value:(t=_(C().mark((function t(e){var n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.filename,this.baseUrl){t.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(n){t.next=5;break}throw new Error("Font filename must be specified.");case 5:return i="".concat(this.baseUrl).concat(n),t.abrupt("return",this._fetchData(i).catch((function(t){throw new Error("Unable to load font data at: ".concat(i))})));case 7:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"_fetchData",value:function(t){re("Abstract method `_fetchData` called.")}}]);var t}(),Ve=function(){return W((function t(){z(this,t),this.constructor===t&&re("Cannot initialize BaseSVGFactory.")}),[{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");var i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(e,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),i}},{key:"createElement",value:function(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}},{key:"_createSVG",value:function(t){re("Abstract method `_createSVG` called.")}}])}(),Ue="http://www.w3.org/2000/svg",Ge=W((function t(){z(this,t)}));e=Ge,w(Ge,"CSS",96),w(Ge,"PDF",72),w(Ge,"PDF_TO_CSS_UNITS",e.CSS/e.PDF);var qe=new WeakMap,Xe=new WeakMap,Ke=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,$e=new WeakMap,Je=new WeakMap,Ze=new WeakSet,tn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.docId,a=n.ownerDocument,r=void 0===a?globalThis.document:a;return z(this,e),k(t=V(this,e),Ze),x(t,qe,void 0),x(t,Xe,void 0),x(t,Ke,void 0),x(t,Ye,void 0),x(t,Qe,void 0),x(t,$e,void 0),x(t,Je,0),P(Ye,t,i),P(Qe,t,r),t}return q(e,Oe),W(e,[{key:"addFilter",value:function(t){var e,n;if(!t)return"none";var i=E(Ze,this,en).get(t);if(i)return i;var a=L(B(Ze,this,rn).call(this,t),3),r=a[0],s=a[1],o=a[2],u=1===t.length?r:"".concat(r).concat(s).concat(o);if(i=E(Ze,this,en).get(u))return E(Ze,this,en).set(t,i),i;var l="g_".concat(M(Ye,this),"_transfer_map_").concat((P(Je,this,(e=M(Je,this),n=e++,e)),n)),h=B(Ze,this,sn).call(this,l);E(Ze,this,en).set(t,h),E(Ze,this,en).set(u,h);var c=B(Ze,this,ln).call(this,l);return B(Ze,this,cn).call(this,r,s,o,c),h}},{key:"addHCMFilter",value:function(t,e){var n,i,a="".concat(t,"-").concat(e),r="base",s=E(Ze,this,nn).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===a)return s.url;s?(null===(i=s.filter)||void 0===i||i.remove(),s.key=a,s.url="none",s.filter=null):(s={key:a,url:"none",filter:null},E(Ze,this,nn).set(r,s));if(!t||!e)return s.url;var o=B(Ze,this,fn).call(this,t);t=ke.makeHexColor.apply(ke,A(o));var u=B(Ze,this,fn).call(this,e);if(e=ke.makeHexColor.apply(ke,A(u)),E(Ze,this,an).style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;for(var l=new Array(256),h=0;h<=255;h++){var c=h/255;l[h]=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4)}var d=l.join(","),f="g_".concat(M(Ye,this),"_hcm_filter"),v=s.filter=B(Ze,this,ln).call(this,f);B(Ze,this,cn).call(this,d,d,d,v),B(Ze,this,un).call(this,v);var p=function(t,e){for(var n=o[t]/255,i=u[t]/255,a=new Array(e+1),r=0;r<=e;r++)a[r]=n+r/e*(i-n);return a.join(",")};return B(Ze,this,cn).call(this,p(0,5),p(1,5),p(2,5),v),s.url=B(Ze,this,sn).call(this,f),s.url}},{key:"addAlphaFilter",value:function(t){var e,n,i=E(Ze,this,en).get(t);if(i)return i;var a=L(B(Ze,this,rn).call(this,[t]),1)[0],r="alpha_".concat(a);if(i=E(Ze,this,en).get(r))return E(Ze,this,en).set(t,i),i;var s="g_".concat(M(Ye,this),"_alpha_map_").concat((P(Je,this,(e=M(Je,this),n=e++,e)),n)),o=B(Ze,this,sn).call(this,s);E(Ze,this,en).set(t,o),E(Ze,this,en).set(r,o);var u=B(Ze,this,ln).call(this,s);return B(Ze,this,dn).call(this,a,u),o}},{key:"addLuminosityFilter",value:function(t){var e,n,i,a,r=E(Ze,this,en).get(t||"luminosity");if(r)return r;t?(i=L(B(Ze,this,rn).call(this,[t]),1)[0],a="luminosity_".concat(i)):a="luminosity";if(r=E(Ze,this,en).get(a))return E(Ze,this,en).set(t,r),r;var s="g_".concat(M(Ye,this),"_luminosity_map_").concat((P(Je,this,(e=M(Je,this),n=e++,e)),n)),o=B(Ze,this,sn).call(this,s);E(Ze,this,en).set(t,o),E(Ze,this,en).set(a,o);var u=B(Ze,this,ln).call(this,s);return B(Ze,this,on).call(this,u),t&&B(Ze,this,dn).call(this,i,u),o}},{key:"addHighlightHCMFilter",value:function(t,e,n,i,a){var r,s,o="".concat(e,"-").concat(n,"-").concat(i,"-").concat(a),u=E(Ze,this,nn).get(t);if((null===(r=u)||void 0===r?void 0:r.key)===o)return u.url;u?(null===(s=u.filter)||void 0===s||s.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},E(Ze,this,nn).set(t,u));if(!e||!n)return u.url;var l=L([e,n].map(B(Ze,this,fn).bind(this)),2),h=l[0],c=l[1],d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),v=L([i,a].map(B(Ze,this,fn).bind(this)),2),p=v[0],g=v[1];if(f<d){var m=[f,d,g,p];d=m[0],f=m[1],p=m[2],g=m[3]}E(Ze,this,an).style.color="";var D=function(t,e,n){for(var i=new Array(256),a=(f-d)/n,r=t/255,s=(e-t)/(255*n),o=0,u=0;u<=n;u++){for(var l=Math.round(d+u*a),h=r+u*s,c=o;c<=l;c++)i[c]=h;o=l+1}for(var v=o;v<256;v++)i[v]=i[o-1];return i.join(",")},y="g_".concat(M(Ye,this),"_hcm_").concat(t,"_filter"),A=u.filter=B(Ze,this,ln).call(this,y);return B(Ze,this,un).call(this,A),B(Ze,this,cn).call(this,D(p[0],g[0],5),D(p[1],g[1],5),D(p[2],g[2],5),A),u.url=B(Ze,this,sn).call(this,y),u.url}},{key:"destroy",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==E(Ze,this,nn).size||(M(Ke,this)&&(M(Ke,this).parentNode.parentNode.remove(),P(Ke,this,null)),M(Xe,this)&&(M(Xe,this).clear(),P(Xe,this,null)),P(Je,this,0))}}])}();function en(t){return M(Xe,t)||P(Xe,t,new Map)}function nn(t){return M($e,t)||P($e,t,new Map)}function an(t){if(!M(Ke,t)){var e=M(Qe,t).createElement("div"),n=e.style;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;var i=M(Qe,t).createElementNS(Ue,"svg");i.setAttribute("width",0),i.setAttribute("height",0),P(Ke,t,M(Qe,t).createElementNS(Ue,"defs")),e.append(i),i.append(M(Ke,t)),M(Qe,t).body.append(e)}return M(Ke,t)}function rn(t){if(1===t.length){for(var e=t[0],n=new Array(256),i=0;i<256;i++)n[i]=e[i]/255;var a=n.join(",");return[a,a,a]}for(var r=L(t,3),s=r[0],o=r[1],u=r[2],l=new Array(256),h=new Array(256),c=new Array(256),d=0;d<256;d++)l[d]=s[d]/255,h[d]=o[d]/255,c[d]=u[d]/255;return[l.join(","),h.join(","),c.join(",")]}function sn(t){if(void 0===M(qe,this)){P(qe,this,"");var e=M(Qe,this).URL;e!==M(Qe,this).baseURI&&(kn(e)?ae('#createUrl: ignore "data:"-URL for performance reasons.'):P(qe,this,e.split("#",1)[0]))}return"url(".concat(M(qe,this),"#").concat(t,")")}function on(t){var e=M(Qe,this).createElementNS(Ue,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}function un(t){var e=M(Qe,this).createElementNS(Ue,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}function ln(t){var e=M(Qe,this).createElementNS(Ue,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),E(Ze,this,an).append(e),e}function hn(t,e,n){var i=M(Qe,this).createElementNS(Ue,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}function cn(t,e,n,i){var a=M(Qe,this).createElementNS(Ue,"feComponentTransfer");i.append(a),B(Ze,this,hn).call(this,a,"feFuncR",t),B(Ze,this,hn).call(this,a,"feFuncG",e),B(Ze,this,hn).call(this,a,"feFuncB",n)}function dn(t,e){var n=M(Qe,this).createElementNS(Ue,"feComponentTransfer");e.append(n),B(Ze,this,hn).call(this,n,"feFuncA",t)}function fn(t){return E(Ze,this,an).style.color=t,Bn(getComputedStyle(E(Ze,this,an)).getPropertyValue("color"))}var vn=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.ownerDocument,a=void 0===i?globalThis.document:i,r=n.enableHWA,s=void 0!==r&&r;return z(this,e),(t=V(this,e,[{enableHWA:s}]))._document=a,t}return q(e,We),W(e,[{key:"_createCanvas",value:function(t,e){var n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}])}();function pn(t){return gn.apply(this,arguments)}function gn(){return gn=_(C().mark((function t(e){var n,i,a=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:"text",!xn(e,document.baseURI)){t.next=14;break}return t.next=4,fetch(e);case 4:if((i=t.sent).ok){t.next=7;break}throw new Error(i.statusText);case 7:t.t0=n,t.next="arraybuffer"===t.t0?10:"blob"===t.t0?11:"json"===t.t0?12:13;break;case 10:return t.abrupt("return",i.arrayBuffer());case 11:return t.abrupt("return",i.blob());case 12:return t.abrupt("return",i.json());case 13:return t.abrupt("return",i.text());case 14:return t.abrupt("return",new Promise((function(t,i){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=n,a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200!==a.status&&0!==a.status)i(new Error(a.statusText));else{switch(n){case"arraybuffer":case"blob":case"json":return void t(a.response)}t(a.responseText)}},a.send(null)})));case 15:case"end":return t.stop()}}),t)}))),gn.apply(this,arguments)}var mn=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,He),W(e,[{key:"_fetchData",value:function(t,e){return pn(t,this.isCompressed?"arraybuffer":"text").then((function(t){return{cMapData:t instanceof ArrayBuffer?new Uint8Array(t):De(t),compressionType:e}}))}}])}(),Dn=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,ze),W(e,[{key:"_fetchData",value:function(t){return pn(t,"arraybuffer").then((function(t){return new Uint8Array(t)}))}}])}(),yn=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,Ve),W(e,[{key:"_createSVG",value:function(t){return document.createElementNS(Ue,t)}}])}(),An=function(){function t(e){var n=e.viewBox,i=e.scale,a=e.rotation,r=e.offsetX,s=void 0===r?0:r,o=e.offsetY,u=void 0===o?0:o,l=e.dontFlip,h=void 0!==l&&l;z(this,t),this.viewBox=n,this.scale=i,this.rotation=a,this.offsetX=s,this.offsetY=u;var c,d,f,v,p,g,m,D,y=(n[2]+n[0])/2,A=(n[3]+n[1])/2;switch((a%=360)<0&&(a+=360),a){case 180:c=-1,d=0,f=0,v=1;break;case 90:c=0,d=1,f=1,v=0;break;case 270:c=0,d=-1,f=-1,v=0;break;case 0:c=1,d=0,f=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(f=-f,v=-v),0===c?(p=Math.abs(A-n[1])*i+s,g=Math.abs(y-n[0])*i+u,m=(n[3]-n[1])*i,D=(n[2]-n[0])*i):(p=Math.abs(y-n[0])*i+s,g=Math.abs(A-n[1])*i+u,m=(n[2]-n[0])*i,D=(n[3]-n[1])*i),this.transform=[c*i,d*i,f*i,v*i,p-c*i*y-f*i*A,g-d*i*y-v*i*A],this.width=m,this.height=D}return W(t,[{key:"rawDims",get:function(){var t=this.viewBox;return ue(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.scale,i=void 0===n?this.scale:n,a=e.rotation,r=void 0===a?this.rotation:a,s=e.offsetX,o=void 0===s?this.offsetX:s,u=e.offsetY,l=void 0===u?this.offsetY:u,h=e.dontFlip,c=void 0!==h&&h;return new t({viewBox:this.viewBox.slice(),scale:i,rotation:r,offsetX:o,offsetY:l,dontFlip:c})}},{key:"convertToViewportPoint",value:function(t,e){return ke.applyTransform([t,e],this.transform)}},{key:"convertToViewportRectangle",value:function(t){var e=ke.applyTransform([t[0],t[1]],this.transform),n=ke.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(t,e){return ke.applyInverseTransform([t,e],this.transform)}}])}(),bn=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return z(this,e),(n=V(this,e,[t,"RenderingCancelledException"])).extraDelay=i,n}return q(e,le),W(e)}();function kn(t){for(var e=t.length,n=0;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function En(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function wn(t){var e=t.split(/[#?]/,1);return(t=L(e,1)[0]).substring(t.lastIndexOf("/")+1)}function Cn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return e;if(kn(t))return ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;var n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0]).includes("%"))try{a=n.exec(decodeURIComponent(a))[0]}catch(t){}return a||e}var Fn,_n=function(){return W((function t(){z(this,t),w(this,"started",Object.create(null)),w(this,"times",[])}),[{key:"time",value:function(t){t in this.started&&ae("Timer is already running for ".concat(t)),this.started[t]=Date.now()}},{key:"timeEnd",value:function(t){t in this.started||ae("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}},{key:"toString",value:function(){var t,e=[],n=0,i=R(this.times);try{for(i.s();!(t=i.n()).done;){var a=t.value.name;n=Math.max(a.length,n)}}catch(t){i.e(t)}finally{i.f()}var r,s=R(this.times);try{for(s.s();!(r=s.n()).done;){var o=r.value,u=o.name,l=o.start,h=o.end;e.push("".concat(u.padEnd(n)," ").concat(h-l,"ms\n"))}}catch(t){s.e(t)}finally{s.f()}return e.join("")}}])}();function xn(t,e){try{var n=(e?new URL(t,e):new URL(t)).protocol;return"http:"===n||"https:"===n}catch(t){return!1}}function Sn(t){t.preventDefault()}var Mn=function(){return W((function t(){z(this,t)}),null,[{key:"toDateObject",value:function(t){if(!t||"string"!=typeof t)return null;Fn||(Fn=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var e=Fn.exec(t);if(!e)return null;var n=parseInt(e[1],10),i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;var a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;var r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;var s=parseInt(e[5],10);s=s>=0&&s<=59?s:0;var o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;var u=e[7]||"Z",l=parseInt(e[8],10);l=l>=0&&l<=23?l:0;var h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===u?(r+=l,s+=h):"+"===u&&(r-=l,s-=h),new Date(Date.UTC(n,i,a,r,s,o))}}])}();function Pn(t,e){var n=e.scale,i=void 0===n?1:n,a=e.rotation,r=void 0===a?0:a,s=t.attributes.style,o=s.width,u=s.height,l=[0,0,parseInt(o),parseInt(u)];return new An({viewBox:l,scale:i,rotation:r})}function Bn(t){if(t.startsWith("#")){var e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((function(t){return parseInt(t)})):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((function(t){return parseInt(t)})).slice(0,3):(ae('Not a valid color format: "'.concat(t,'"')),[0,0,0])}function Ln(t){var e=t.getTransform();return[e.a,e.b,e.c,e.d,e.e,e.f]}function Tn(t){var e=t.getTransform().invertSelf();return[e.a,e.b,e.c,e.d,e.e,e.f]}function In(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof An){var a=e.rawDims,r=a.pageWidth,s=a.pageHeight,o=t.style,u=Ae.isCSSRoundSupported,l="var(--scale-factor) * ".concat(r,"px"),h="var(--scale-factor) * ".concat(s,"px"),c=u?"round(".concat(l,", 1px)"):"calc(".concat(l,")"),d=u?"round(".concat(h,", 1px)"):"calc(".concat(h,")");n&&e.rotation%180!=0?(o.width=d,o.height=c):(o.width=c,o.height=d)}i&&t.setAttribute("data-main-rotation",e.rotation)}var Rn=new WeakMap,Nn=new WeakMap,On=new WeakMap,jn=new WeakMap,Wn=new WeakSet,Hn=function(){return W((function t(e){z(this,t),k(this,Wn),x(this,Rn,null),x(this,Nn,null),x(this,On,void 0),x(this,jn,null),P(On,this,e)}),[{key:"render",value:function(){var t=P(Rn,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");var e=M(On,this)._uiManager._signal;t.addEventListener("contextmenu",Sn,{signal:e}),t.addEventListener("pointerdown",zn,{signal:e});var n=P(jn,this,document.createElement("div"));n.className="buttons",t.append(n);var i=M(On,this).toolbarPosition;if(i){var a=t.style,r="ltr"===M(On,this)._uiManager.direction?1-i[0]:i[0];a.insetInlineEnd="".concat(100*r,"%"),a.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return B(Wn,this,qn).call(this),t}},{key:"hide",value:function(){var t;M(Rn,this).classList.add("hidden"),null===(t=M(Nn,this))||void 0===t||t.hideDropdown()}},{key:"show",value:function(){M(Rn,this).classList.remove("hidden")}},{key:"addAltTextButton",value:function(t){B(Wn,this,Gn).call(this,t),M(jn,this).prepend(t,E(Wn,this,Xn))}},{key:"addColorPicker",value:function(t){P(Nn,this,t);var e=t.renderButton();B(Wn,this,Gn).call(this,e),M(jn,this).prepend(e,E(Wn,this,Xn))}},{key:"remove",value:function(){var t;M(Rn,this).remove(),null===(t=M(Nn,this))||void 0===t||t.destroy(),P(Nn,this,null)}}])}();function zn(t){t.stopPropagation()}function Vn(t){M(On,this)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}function Un(t){M(On,this)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}function Gn(t){var e=M(On,this)._uiManager._signal;t.addEventListener("focusin",B(Wn,this,Vn).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",B(Wn,this,Un).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Sn,{signal:e})}function qn(){var t=this,e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-editor-remove-".concat(M(On,this).editorType,"-button")),B(Wn,this,Gn).call(this,e),e.addEventListener("click",(function(e){M(On,t)._uiManager.delete()}),{signal:M(On,this)._uiManager._signal}),M(jn,this).append(e)}function Xn(t){var e=document.createElement("div");return e.className="divider",e}var Kn=new WeakMap,Yn=new WeakMap,Qn=new WeakMap,$n=new WeakSet,Jn=function(){return W((function t(e){z(this,t),k(this,$n),x(this,Kn,null),x(this,Yn,null),x(this,Qn,void 0),P(Qn,this,e)}),[{key:"show",value:function(t,e,n){var i=L(B($n,this,ti).call(this,e,n),2),a=i[0],r=i[1],s=(M(Yn,this)||P(Yn,this,B($n,this,Zn).call(this))).style;t.append(M(Yn,this)),s.insetInlineEnd="".concat(100*a,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}},{key:"hide",value:function(){M(Yn,this).remove()}}])}();function Zn(){var t=P(Yn,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Sn,{signal:M(Qn,this)._signal});var e=P(Kn,this,document.createElement("div"));return e.className="buttons",t.append(e),B($n,this,ei).call(this),t}function ti(t,e){var n,i=0,a=0,r=R(t);try{for(r.s();!(n=r.n()).done;){var s=n.value,o=s.y+s.height;if(!(o<i)){var u=s.x+(e?s.width:0);o>i?(a=u,i=o):e?u>a&&(a=u):u<a&&(a=u)}}}catch(t){r.e(t)}finally{r.f()}return[e?1-a:a,i]}function ei(){var t=this,e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");var n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");var i=M(Qn,this)._signal;e.addEventListener("contextmenu",Sn,{signal:i}),e.addEventListener("click",(function(){M(Qn,t).highlightSelection("floating_button")}),{signal:i}),M(Kn,this).append(e)}function ni(t,e,n){var i,a=R(n);try{for(a.s();!(i=a.n()).done;){var r=i.value;e.addEventListener(r,t[r].bind(t))}}catch(t){a.e(t)}finally{a.f()}}var ii=new WeakMap,ai=function(){return W((function t(){z(this,t),x(this,ii,0)}),[{key:"id",get:function(){var t,e;return"".concat("pdfjs_internal_editor_").concat((P(ii,this,(t=M(ii,this),e=t++,t)),e))}}])}(),ri=new WeakMap,si=new WeakMap,oi=new WeakMap,ui=new WeakSet,li=function(){return W((function t(){z(this,t),k(this,ui),x(this,ri,function(){var t,e;if("undefined"!=typeof crypto&&"function"==typeof(null===(t=crypto)||void 0===t?void 0:t.randomUUID))return crypto.randomUUID();var n=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof(null===(e=crypto)||void 0===e?void 0:e.getRandomValues))crypto.getRandomValues(n);else for(var i=0;i<32;i++)n[i]=Math.floor(255*Math.random());return me(n)}()),x(this,si,0),x(this,oi,null)}),[{key:"getFromFile",value:(n=_(C().mark((function t(e){var n,i,a,r;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.lastModified,i=e.name,a=e.size,r=e.type,t.abrupt("return",B(ui,this,hi).call(this,"".concat(n,"_").concat(i,"_").concat(a,"_").concat(r),e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getFromUrl",value:(e=_(C().mark((function t(e){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",B(ui,this,hi).call(this,e,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getFromId",value:(t=_(C().mark((function t(e){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M(oi,this)||P(oi,this,new Map),n=M(oi,this).get(e)){t.next=4;break}return t.abrupt("return",null);case 4:if(!n.bitmap){t.next=7;break}return n.refCounter+=1,t.abrupt("return",n);case 7:if(!n.file){t.next=9;break}return t.abrupt("return",this.getFromFile(n.file));case 9:return t.abrupt("return",this.getFromUrl(n.url));case 10:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"getSvgUrl",value:function(t){var e=M(oi,this).get(t);return null!=e&&e.isSvg?e.svgUrl:null}},{key:"deleteId",value:function(t){M(oi,this)||P(oi,this,new Map);var e=M(oi,this).get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}},{key:"isValidId",value:function(t){return t.startsWith("image_".concat(M(ri,this),"_"))}}],[{key:"_isSVGFittingCanvas",get:function(){var t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ue(this,"_isSVGFittingCanvas",e.decode().then((function(){return t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]})))}}]);var t,e,n}();function hi(t,e){return ci.apply(this,arguments)}function ci(){return(ci=_(C().mark((function t(e,i){var a,r,s,o,u,l,h,c,d;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M(oi,this)||P(oi,this,new Map),null!==(r=M(oi,this).get(e))){t.next=4;break}return t.abrupt("return",null);case 4:if(null===(a=r)||void 0===a||!a.bitmap){t.next=7;break}return r.refCounter+=1,t.abrupt("return",r);case 7:if(t.prev=7,r||(r={bitmap:null,id:"image_".concat(M(ri,this),"_").concat((P(si,this,(s=M(si,this),o=s++,s)),o)),refCounter:0,isSvg:!1}),"string"!=typeof i){t.next=16;break}return r.url=i,t.next=13,pn(i,"blob");case 13:u=t.sent,t.next=17;break;case 16:u=r.file=i;case 17:if("image/svg+xml"!==u.type){t.next=27;break}return l=n._isSVGFittingCanvas,h=new FileReader,c=new Image,d=new Promise((function(t,e){c.onload=function(){r.bitmap=c,r.isSvg=!0,t()},h.onload=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.svgUrl=h.result,t.next=3,l;case 3:if(!t.sent){t.next=7;break}t.t0="".concat(e,"#svgView(preserveAspectRatio(none))"),t.next=8;break;case 7:t.t0=e;case 8:c.src=t.t0;case 9:case"end":return t.stop()}}),t)}))),c.onerror=h.onerror=e})),h.readAsDataURL(u),t.next=25,d;case 25:t.next=30;break;case 27:return t.next=29,createImageBitmap(u);case 29:r.bitmap=t.sent;case 30:r.refCounter=1,t.next=37;break;case 33:t.prev=33,t.t0=t.catch(7),console.error(t.t0),r=null;case 37:return M(oi,this).set(e,r),r&&M(oi,this).set(r.id,r),t.abrupt("return",r);case 40:case"end":return t.stop()}}),t,this,[[7,33]])})))).apply(this,arguments)}n=li;var di=new WeakMap,fi=new WeakMap,vi=new WeakMap,pi=new WeakMap,gi=function(){return W((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;z(this,t),x(this,di,[]),x(this,fi,!1),x(this,vi,void 0),x(this,pi,-1),P(vi,this,e)}),[{key:"add",value:function(t){var e=t.cmd,n=t.undo,i=t.post,a=t.mustExec,r=t.type,s=void 0===r?NaN:r,o=t.overwriteIfSameType,u=void 0!==o&&o,l=t.keepUndo,h=void 0!==l&&l;if(a&&e(),!M(fi,this)){var c={cmd:e,undo:n,post:i,type:s};if(-1===M(pi,this))return M(di,this).length>0&&(M(di,this).length=0),P(pi,this,0),void M(di,this).push(c);if(u&&M(di,this)[M(pi,this)].type===s)return h&&(c.undo=M(di,this)[M(pi,this)].undo),void(M(di,this)[M(pi,this)]=c);var d=M(pi,this)+1;d===M(vi,this)?M(di,this).splice(0,1):(P(pi,this,d),d<M(di,this).length&&M(di,this).splice(d)),M(di,this).push(c)}}},{key:"undo",value:function(){if(-1!==M(pi,this)){P(fi,this,!0);var t=M(di,this)[M(pi,this)],e=t.undo,n=t.post;e(),null==n||n(),P(fi,this,!1),P(pi,this,M(pi,this)-1)}}},{key:"redo",value:function(){if(M(pi,this)<M(di,this).length-1){P(pi,this,M(pi,this)+1),P(fi,this,!0);var t=M(di,this)[M(pi,this)],e=t.cmd,n=t.post;e(),null==n||n(),P(fi,this,!1)}}},{key:"hasSomethingToUndo",value:function(){return-1!==M(pi,this)}},{key:"hasSomethingToRedo",value:function(){return M(pi,this)<M(di,this).length-1}},{key:"destroy",value:function(){P(di,this,null)}}])}(),mi=new WeakSet,Di=function(){return W((function t(e){z(this,t),k(this,mi),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var n,i=Ae.platform.isMac,a=R(e);try{for(a.s();!(n=a.n()).done;){var r,s=L(n.value,3),o=s[0],u=s[1],l=s[2],h=void 0===l?{}:l,c=R(o);try{for(c.s();!(r=c.n()).done;){var d=r.value,f=d.startsWith("mac+");i&&f?(this.callbacks.set(d.slice(4),{callback:u,options:h}),this.allKeys.add(d.split("+").at(-1))):i||f||(this.callbacks.set(d,{callback:u,options:h}),this.allKeys.add(d.split("+").at(-1)))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}}),[{key:"exec",value:function(t,e){if(this.allKeys.has(e.key)){var n=this.callbacks.get(B(mi,this,yi).call(this,e));if(n){var i=n.callback,a=n.options,r=a.bubbles,s=void 0!==r&&r,o=a.args,u=void 0===o?[]:o,l=a.checker,h=void 0===l?null:l;h&&!h(t,e)||(i.bind.apply(i,[t].concat(A(u),[e]))(),s||(e.stopPropagation(),e.preventDefault()))}}}}])}();function yi(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);var e=this.buffer.join("+");return this.buffer.length=0,e}var Ai=function(){function t(){z(this,t)}return W(t,[{key:"_colors",get:function(){var t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){var e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);var n,i=R(t.keys());try{for(i.s();!(n=i.n()).done;){var a=n.value;e.style.color=a;var r=window.getComputedStyle(e).color;t.set(a,Bn(r))}}catch(t){i.e(t)}finally{i.f()}e.remove()}(t),ue(this,"_colors",t)}},{key:"convert",value:function(e){var n=Bn(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;var i,a=R(this._colors);try{for(a.s();!(i=a.n()).done;){var r=L(i.value,2),s=r[0];if(r[1].every((function(t,e){return t===n[e]})))return t._colorsMapping.get(s)}}catch(t){a.e(t)}finally{a.f()}return n}},{key:"getHexCode",value:function(t){var e=this._colors.get(t);return e?ke.makeHexColor.apply(ke,A(e)):t}}])}();w(Ai,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var bi=new WeakMap,ki=new WeakMap,Ei=new WeakMap,wi=new WeakMap,Ci=new WeakMap,Fi=new WeakMap,_i=new WeakMap,xi=new WeakMap,Si=new WeakMap,Mi=new WeakMap,Pi=new WeakMap,Bi=new WeakMap,Li=new WeakMap,Ti=new WeakMap,Ii=new WeakMap,Ri=new WeakMap,Ni=new WeakMap,Oi=new WeakMap,ji=new WeakMap,Wi=new WeakMap,Hi=new WeakMap,zi=new WeakMap,Vi=new WeakMap,Ui=new WeakMap,Gi=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Ki=new WeakMap,Yi=new WeakMap,Qi=new WeakMap,$i=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,ta=new WeakMap,ea=new WeakMap,na=new WeakMap,ia=new WeakMap,aa=new WeakMap,ra=new WeakMap,sa=new WeakMap,oa=new WeakMap,ua=new WeakMap,la=new WeakMap,ha=new WeakMap,ca=new WeakMap,da=new WeakMap,fa=new WeakMap,va=new WeakSet,pa=function(){function t(e,n,i,a,r,s,o,u,l,h){z(this,t),k(this,va),x(this,bi,new AbortController),x(this,ki,null),x(this,Ei,new Map),x(this,wi,new Map),x(this,Ci,null),x(this,Fi,null),x(this,_i,null),x(this,xi,new gi),x(this,Si,0),x(this,Mi,new Set),x(this,Pi,null),x(this,Bi,null),x(this,Li,new Set),x(this,Ti,!1),x(this,Ii,!1),x(this,Ri,null),x(this,Ni,null),x(this,Oi,null),x(this,ji,!1),x(this,Wi,null),x(this,Hi,new ai),x(this,zi,!1),x(this,Vi,!1),x(this,Ui,null),x(this,Gi,null),x(this,qi,null),x(this,Xi,mt.NONE),x(this,Ki,new Set),x(this,Yi,null),x(this,Qi,null),x(this,$i,null),x(this,Ji,this.blur.bind(this)),x(this,Zi,this.focus.bind(this)),x(this,ta,this.copy.bind(this)),x(this,ea,this.cut.bind(this)),x(this,na,this.paste.bind(this)),x(this,ia,this.keydown.bind(this)),x(this,aa,this.keyup.bind(this)),x(this,ra,this.onEditingAction.bind(this)),x(this,sa,this.onPageChanging.bind(this)),x(this,oa,this.onScaleChanging.bind(this)),x(this,ua,this.onRotationChanging.bind(this)),x(this,la,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),x(this,ha,[0,0]),x(this,ca,null),x(this,da,null),x(this,fa,null),this._signal=M(bi,this).signal,P(da,this,e),P(fa,this,n),P(Ci,this,i),this._eventBus=a,this._eventBus._on("editingaction",M(ra,this)),this._eventBus._on("pagechanging",M(sa,this)),this._eventBus._on("scalechanging",M(oa,this)),this._eventBus._on("rotationchanging",M(ua,this)),B(va,this,ba).call(this),B(va,this,xa).call(this),B(va,this,wa).call(this),P(Fi,this,r.annotationStorage),P(Ri,this,r.filterFactory),P(Qi,this,s),P(Oi,this,o||null),P(Ti,this,u),P(Ii,this,l),P(qi,this,h||null),this.viewParameters={realScale:Ge.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}return W(t,[{key:"destroy",value:function(){var t,e,n;null===(t=M(bi,this))||void 0===t||t.abort(),P(bi,this,null),this._signal=null,this._eventBus._off("editingaction",M(ra,this)),this._eventBus._off("pagechanging",M(sa,this)),this._eventBus._off("scalechanging",M(oa,this)),this._eventBus._off("rotationchanging",M(ua,this));var i,a=R(M(wi,this).values());try{for(a.s();!(i=a.n()).done;){i.value.destroy()}}catch(t){a.e(t)}finally{a.f()}M(wi,this).clear(),M(Ei,this).clear(),M(Li,this).clear(),P(ki,this,null),M(Ki,this).clear(),M(xi,this).destroy(),null===(e=M(Ci,this))||void 0===e||e.destroy(),null===(n=M(Wi,this))||void 0===n||n.hide(),P(Wi,this,null),M(Ni,this)&&(clearTimeout(M(Ni,this)),P(Ni,this,null)),M(ca,this)&&(clearTimeout(M(ca,this)),P(ca,this,null))}},{key:"mlGuess",value:(n=_(C().mark((function t(e){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(null===(n=M(qi,this))||void 0===n?void 0:n.guess(e))||null);case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"isMLEnabledFor",value:(e=_(C().mark((function t(e){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=M(qi,this))||void 0===n?void 0:n.isEnabledFor(e);case 2:return t.abrupt("return",!!t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"useNewAltTextFlow",get:function(){return M(Ii,this)}},{key:"hcmFilter",get:function(){return ue(this,"hcmFilter",M(Qi,this)?M(Ri,this).addHCMFilter(M(Qi,this).foreground,M(Qi,this).background):"none")}},{key:"direction",get:function(){return ue(this,"direction",getComputedStyle(M(da,this)).direction)}},{key:"highlightColors",get:function(){return ue(this,"highlightColors",M(Oi,this)?new Map(M(Oi,this).split(",").map((function(t){return t.split("=").map((function(t){return t.trim()}))}))):null)}},{key:"highlightColorNames",get:function(){return ue(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(function(t){return t.reverse()}))):null)}},{key:"setMainHighlightColorPicker",value:function(t){P(Gi,this,t)}},{key:"editAltText",value:function(t){var e;null===(e=M(Ci,this))||void 0===e||e.editAltText(this,t)}},{key:"switchToMode",value:function(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}},{key:"setPreference",value:function(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}},{key:"onPageChanging",value:function(t){var e=t.pageNumber;P(Si,this,e-1)}},{key:"focusMainContainer",value:function(){M(da,this).focus()}},{key:"findParent",value:function(t,e){var n,i=R(M(wi,this).values());try{for(i.s();!(n=i.n()).done;){var a=n.value,r=a.div.getBoundingClientRect(),s=r.x,o=r.y,u=r.width,l=r.height;if(t>=s&&t<=s+u&&e>=o&&e<=o+l)return a}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"disableUserSelect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];M(fa,this).classList.toggle("noUserSelect",t)}},{key:"addShouldRescale",value:function(t){M(Li,this).add(t)}},{key:"removeShouldRescale",value:function(t){M(Li,this).delete(t)}},{key:"onScaleChanging",value:function(t){var e=t.scale;this.commitOrRemove(),this.viewParameters.realScale=e*Ge.PDF_TO_CSS_UNITS;var n,i=R(M(Li,this));try{for(i.s();!(n=i.n()).done;){n.value.onScaleChanging()}}catch(t){i.e(t)}finally{i.f()}}},{key:"onRotationChanging",value:function(t){var e=t.pagesRotation;this.commitOrRemove(),this.viewParameters.rotation=e}},{key:"highlightSelection",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=document.getSelection();if(n&&!n.isCollapsed){var i=n.anchorNode,a=n.anchorOffset,r=n.focusNode,s=n.focusOffset,o=n.toString(),u=B(va,this,ga).call(this,n).closest(".textLayer"),l=this.getSelectionBoxes(u);if(l){n.empty();var h=B(va,this,ma).call(this,u),c=M(Xi,this)===mt.NONE,d=function(){null==h||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:i,anchorOffset:a,focusNode:r,focusOffset:s,text:o}),c&&t.showAllEditors("highlight",!0,!0)};c?this.switchToMode(mt.HIGHLIGHT,d):d()}}}},{key:"addToAnnotationStorage",value:function(t){t.isEmpty()||!M(Fi,this)||M(Fi,this).has(t.id)||M(Fi,this).setValue(t.id,t)}},{key:"blur",value:function(){if(this.isShiftKeyDown=!1,M(ji,this)&&(P(ji,this,!1),B(va,this,Aa).call(this,"main_toolbar")),this.hasSelection){var t,e=document.activeElement,n=R(M(Ki,this));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.div.contains(e)){P(Ui,this,[i,e]),i._focusEventsAllowed=!1;break}}}catch(t){n.e(t)}finally{n.f()}}}},{key:"focus",value:function(){if(M(Ui,this)){var t=L(M(Ui,this),2),e=t[0],n=t[1];P(Ui,this,null),n.addEventListener("focusin",(function(){e._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),n.focus()}}},{key:"addEditListeners",value:function(){B(va,this,wa).call(this),B(va,this,Fa).call(this)}},{key:"removeEditListeners",value:function(){B(va,this,Ca).call(this),B(va,this,_a).call(this)}},{key:"dragOver",value:function(t){var e,n=R(t.dataTransfer.items);try{for(n.s();!(e=n.n()).done;){var i,a=e.value.type,r=R(M(Bi,this));try{for(r.s();!(i=r.n()).done;){if(i.value.isHandlingMimeForPasting(a))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}}catch(t){r.e(t)}finally{r.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"drop",value:function(t){var e,n=R(t.dataTransfer.items);try{for(n.s();!(e=n.n()).done;){var i,a=e.value,r=R(M(Bi,this));try{for(r.s();!(i=r.n()).done;){var s=i.value;if(s.isHandlingMimeForPasting(a.type))return s.paste(a,this.currentLayer),void t.preventDefault()}}catch(t){r.e(t)}finally{r.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"copy",value:function(t){var e;if(t.preventDefault(),null===(e=M(ki,this))||void 0===e||e.commitOrRemove(),this.hasSelection){var n,i=[],a=R(M(Ki,this));try{for(a.s();!(n=a.n()).done;){var r=n.value.serialize(!0);r&&i.push(r)}}catch(t){a.e(t)}finally{a.f()}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}}},{key:"cut",value:function(t){this.copy(t),this.delete()}},{key:"paste",value:function(t){var e=this;t.preventDefault();var n,i=t.clipboardData,a=R(i.items);try{for(a.s();!(n=a.n()).done;){var r,s=n.value,o=R(M(Bi,this));try{for(o.s();!(r=o.n()).done;){var u=r.value;if(u.isHandlingMimeForPasting(s.type))return void u.paste(s,this.currentLayer)}}catch(t){o.e(t)}finally{o.f()}}}catch(t){a.e(t)}finally{a.f()}var l=i.getData("application/pdfjs");if(l){try{l=JSON.parse(l)}catch(t){return void ae('paste: "'.concat(t.message,'".'))}if(Array.isArray(l)){this.unselectAll();var h=this.currentLayer;try{var c,d=[],f=R(l);try{for(f.s();!(c=f.n()).done;){var v=c.value,p=h.deserialize(v);if(!p)return;d.push(p)}}catch(t){f.e(t)}finally{f.f()}this.addCommands({cmd:function(){for(var t=0,n=d;t<n.length;t++){var i=n[t];B(va,e,La).call(e,i)}B(va,e,Ra).call(e,d)},undo:function(){for(var t=0,e=d;t<e.length;t++){e[t].remove()}},mustExec:!0})}catch(t){ae('paste: "'.concat(t.message,'".'))}}}}},{key:"keydown",value:function(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),M(Xi,this)===mt.NONE||this.isEditorHandlingKeyboard||t._keyboardManager.exec(this,e)}},{key:"keyup",value:function(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,M(ji,this)&&(P(ji,this,!1),B(va,this,Aa).call(this,"main_toolbar")))}},{key:"onEditingAction",value:function(t){var e=t.name;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}},{key:"setEditingState",value:function(t){t?(B(va,this,ka).call(this),B(va,this,Fa).call(this),B(va,this,Sa).call(this,{isEditing:M(Xi,this)!==mt.NONE,isEmpty:B(va,this,Ia).call(this),hasSomethingToUndo:M(xi,this).hasSomethingToUndo(),hasSomethingToRedo:M(xi,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(B(va,this,Ea).call(this),B(va,this,_a).call(this),B(va,this,Sa).call(this,{isEditing:!1}),this.disableUserSelect(!1))}},{key:"registerEditorTypes",value:function(t){if(!M(Bi,this)){P(Bi,this,t);var e,n=R(M(Bi,this));try{for(n.s();!(e=n.n()).done;){var i=e.value;B(va,this,Ma).call(this,i.defaultPropertiesToUpdate)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getId",value:function(){return M(Hi,this).id}},{key:"currentLayer",get:function(){return M(wi,this).get(M(Si,this))}},{key:"getLayer",value:function(t){return M(wi,this).get(t)}},{key:"currentPageIndex",get:function(){return M(Si,this)}},{key:"addLayer",value:function(t){M(wi,this).set(t.pageIndex,t),M(zi,this)?t.enable():t.disable()}},{key:"removeLayer",value:function(t){M(wi,this).delete(t.pageIndex)}},{key:"updateMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(M(Xi,this)!==t){if(P(Xi,this,t),t===mt.NONE)return this.setEditingState(!1),void B(va,this,Ba).call(this);this.setEditingState(!0),B(va,this,Pa).call(this),this.unselectAll();var i,a=R(M(wi,this).values());try{for(a.s();!(i=a.n()).done;){i.value.updateMode(t)}}catch(t){a.e(t)}finally{a.f()}if(e||!n){if(e){var r,s=R(M(Ei,this).values());try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.annotationElementId===e){this.setSelected(o),o.enterInEditMode();break}}}catch(t){s.e(t)}finally{s.f()}}}else this.addNewEditorFromKeyboard()}}},{key:"addNewEditorFromKeyboard",value:function(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}},{key:"updateToolbar",value:function(t){t!==M(Xi,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}},{key:"updateParams",value:function(t,e){var n;if(M(Bi,this)){switch(t){case Dt.CREATE:return void this.currentLayer.addNewEditor();case Dt.HIGHLIGHT_DEFAULT_COLOR:null===(n=M(Gi,this))||void 0===n||n.updateColor(e);break;case Dt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(M($i,this)||P($i,this,new Map)).set(t,e),this.showAllEditors("highlight",e)}var i,a=R(M(Ki,this));try{for(a.s();!(i=a.n()).done;){i.value.updateParams(t,e)}}catch(t){a.e(t)}finally{a.f()}var r,s=R(M(Bi,this));try{for(s.s();!(r=s.n()).done;){r.value.updateDefaultParams(t,e)}}catch(t){s.e(t)}finally{s.f()}}}},{key:"showAllEditors",value:function(t,e){var n,i,a,r=R(M(Ei,this).values());try{for(r.s();!(a=r.n()).done;){var s=a.value;s.editorType===t&&s.show(e)}}catch(t){r.e(t)}finally{r.f()}(null===(n=null===(i=M($i,this))||void 0===i?void 0:i.get(Dt.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==e&&B(va,this,Ma).call(this,[[Dt.HIGHLIGHT_SHOW_ALL,e]])}},{key:"enableWaiting",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(M(Vi,this)!==t){P(Vi,this,t);var e,n=R(M(wi,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"getEditors",value:function(t){var e,n=[],i=R(M(Ei,this).values());try{for(i.s();!(e=i.n()).done;){var a=e.value;a.pageIndex===t&&n.push(a)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"getEditor",value:function(t){return M(Ei,this).get(t)}},{key:"addEditor",value:function(t){M(Ei,this).set(t.id,t)}},{key:"removeEditor",value:function(t){var e,n=this;(t.div.contains(document.activeElement)&&(M(Ni,this)&&clearTimeout(M(Ni,this)),P(Ni,this,setTimeout((function(){n.focusMainContainer(),P(Ni,n,null)}),0))),M(Ei,this).delete(t.id),this.unselect(t),t.annotationElementId&&M(Mi,this).has(t.annotationElementId))||(null===(e=M(Fi,this))||void 0===e||e.remove(t.id))}},{key:"addDeletedAnnotationElement",value:function(t){M(Mi,this).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}},{key:"isDeletedAnnotationElement",value:function(t){return M(Mi,this).has(t)}},{key:"removeDeletedAnnotationElement",value:function(t){M(Mi,this).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}},{key:"setActiveEditor",value:function(t){M(ki,this)!==t&&(P(ki,this,t),t&&B(va,this,Ma).call(this,t.propertiesToUpdate))}},{key:"updateUI",value:function(t){E(va,this,Ta)===t&&B(va,this,Ma).call(this,t.propertiesToUpdate)}},{key:"toggleSelected",value:function(t){if(M(Ki,this).has(t))return M(Ki,this).delete(t),t.unselect(),void B(va,this,Sa).call(this,{hasSelectedEditor:this.hasSelection});M(Ki,this).add(t),t.select(),B(va,this,Ma).call(this,t.propertiesToUpdate),B(va,this,Sa).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(t){var e,n=R(M(Ki,this));try{for(n.s();!(e=n.n()).done;){var i=e.value;i!==t&&i.unselect()}}catch(t){n.e(t)}finally{n.f()}M(Ki,this).clear(),M(Ki,this).add(t),t.select(),B(va,this,Ma).call(this,t.propertiesToUpdate),B(va,this,Sa).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(t){return M(Ki,this).has(t)}},{key:"firstSelectedEditor",get:function(){return M(Ki,this).values().next().value}},{key:"unselect",value:function(t){t.unselect(),M(Ki,this).delete(t),B(va,this,Sa).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return 0!==M(Ki,this).size}},{key:"isEnterHandled",get:function(){return 1===M(Ki,this).size&&this.firstSelectedEditor.isEnterHandled}},{key:"undo",value:function(){M(xi,this).undo(),B(va,this,Sa).call(this,{hasSomethingToUndo:M(xi,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:B(va,this,Ia).call(this)})}},{key:"redo",value:function(){M(xi,this).redo(),B(va,this,Sa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:M(xi,this).hasSomethingToRedo(),isEmpty:B(va,this,Ia).call(this)})}},{key:"addCommands",value:function(t){M(xi,this).add(t),B(va,this,Sa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:B(va,this,Ia).call(this)})}},{key:"delete",value:function(){var t=this;if(this.commitOrRemove(),this.hasSelection){var e=A(M(Ki,this));this.addCommands({cmd:function(){var t,n=R(e);try{for(n.s();!(t=n.n()).done;){t.value.remove()}}catch(t){n.e(t)}finally{n.f()}},undo:function(){var n,i=R(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;B(va,t,La).call(t,a)}}catch(t){i.e(t)}finally{i.f()}},mustExec:!0})}}},{key:"commitOrRemove",value:function(){var t;null===(t=M(ki,this))||void 0===t||t.commitOrRemove()}},{key:"hasSomethingToControl",value:function(){return M(ki,this)||this.hasSelection}},{key:"selectAll",value:function(){var t,e=R(M(Ki,this));try{for(e.s();!(t=e.n()).done;){t.value.commit()}}catch(t){e.e(t)}finally{e.f()}B(va,this,Ra).call(this,M(Ei,this).values())}},{key:"unselectAll",value:function(){if((!M(ki,this)||(M(ki,this).commitOrRemove(),M(Xi,this)===mt.NONE))&&this.hasSelection){var t,e=R(M(Ki,this));try{for(e.s();!(t=e.n()).done;){t.value.unselect()}}catch(t){e.e(t)}finally{e.f()}M(Ki,this).clear(),B(va,this,Sa).call(this,{hasSelectedEditor:!1})}}},{key:"translateSelectedEditors",value:function(t,e){var n=this;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),this.hasSelection){M(ha,this)[0]+=t,M(ha,this)[1]+=e;var i=L(M(ha,this),2),a=i[0],r=i[1],s=A(M(Ki,this));M(ca,this)&&clearTimeout(M(ca,this)),P(ca,this,setTimeout((function(){P(ca,n,null),M(ha,n)[0]=M(ha,n)[1]=0,n.addCommands({cmd:function(){var t,e=R(s);try{for(e.s();!(t=e.n()).done;){var i=t.value;M(Ei,n).has(i.id)&&i.translateInPage(a,r)}}catch(t){e.e(t)}finally{e.f()}},undo:function(){var t,e=R(s);try{for(e.s();!(t=e.n()).done;){var i=t.value;M(Ei,n).has(i.id)&&i.translateInPage(-a,-r)}}catch(t){e.e(t)}finally{e.f()}},mustExec:!1})}),1e3));var o,u=R(s);try{for(u.s();!(o=u.n()).done;){o.value.translateInPage(t,e)}}catch(t){u.e(t)}finally{u.f()}}}},{key:"setUpDragSession",value:function(){if(this.hasSelection){this.disableUserSelect(!0),P(Pi,this,new Map);var t,e=R(M(Ki,this));try{for(e.s();!(t=e.n()).done;){var n=t.value;M(Pi,this).set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}catch(t){e.e(t)}finally{e.f()}}}},{key:"endDragSession",value:function(){var t=this;if(!M(Pi,this))return!1;this.disableUserSelect(!1);var e=M(Pi,this);P(Pi,this,null);var n,i=!1,a=R(e);try{for(a.s();!(n=a.n()).done;){var r=L(n.value,2),s=r[0],o=s.x,u=s.y,l=s.pageIndex,h=r[1];h.newX=o,h.newY=u,h.newPageIndex=l,i||(i=o!==h.savedX||u!==h.savedY||l!==h.savedPageIndex)}}catch(t){a.e(t)}finally{a.f()}if(!i)return!1;var c=function(e,n,i,a){if(M(Ei,t).has(e.id)){var r=M(wi,t).get(a);r?e._setParentAndPosition(r,n,i):(e.pageIndex=a,e.x=n,e.y=i)}};return this.addCommands({cmd:function(){var t,n=R(e);try{for(n.s();!(t=n.n()).done;){var i=L(t.value,2),a=i[0],r=i[1],s=r.newX,o=r.newY,u=r.newPageIndex;c(a,s,o,u)}}catch(t){n.e(t)}finally{n.f()}},undo:function(){var t,n=R(e);try{for(n.s();!(t=n.n()).done;){var i=L(t.value,2),a=i[0],r=i[1],s=r.savedX,o=r.savedY,u=r.savedPageIndex;c(a,s,o,u)}}catch(t){n.e(t)}finally{n.f()}},mustExec:!0}),!0}},{key:"dragSelectedEditors",value:function(t,e){if(M(Pi,this)){var n,i=R(M(Pi,this).keys());try{for(i.s();!(n=i.n()).done;){n.value.drag(t,e)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"rebuild",value:function(t){if(null===t.parent){var e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}},{key:"isEditorHandlingKeyboard",get:function(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===M(Ki,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}},{key:"isActive",value:function(t){return M(ki,this)===t}},{key:"getActive",value:function(){return M(ki,this)}},{key:"getMode",value:function(){return M(Xi,this)}},{key:"imageManager",get:function(){return ue(this,"imageManager",new li)}},{key:"getSelectionBoxes",value:function(t){if(!t)return null;for(var e=document.getSelection(),n=0,i=e.rangeCount;n<i;n++)if(!t.contains(e.getRangeAt(n).commonAncestorContainer))return null;var a,r=t.getBoundingClientRect(),s=r.x,o=r.y,u=r.width,l=r.height;switch(t.getAttribute("data-main-rotation")){case"90":a=function(t,e,n,i){return{x:(e-o)/l,y:1-(t+n-s)/u,width:i/l,height:n/u}};break;case"180":a=function(t,e,n,i){return{x:1-(t+n-s)/u,y:1-(e+i-o)/l,width:n/u,height:i/l}};break;case"270":a=function(t,e,n,i){return{x:1-(e+i-o)/l,y:(t-s)/u,width:i/l,height:n/u}};break;default:a=function(t,e,n,i){return{x:(t-s)/u,y:(e-o)/l,width:n/u,height:i/l}}}for(var h=[],c=0,d=e.rangeCount;c<d;c++){var f=e.getRangeAt(c);if(!f.collapsed){var v,p=R(f.getClientRects());try{for(p.s();!(v=p.n()).done;){var g=v.value,m=g.x,D=g.y,y=g.width,A=g.height;0!==y&&0!==A&&h.push(a(m,D,y,A))}}catch(t){p.e(t)}finally{p.f()}}}return 0===h.length?null:h}},{key:"addChangedExistingAnnotation",value:function(t){var e=t.annotationElementId,n=t.id;(M(_i,this)||P(_i,this,new Map)).set(e,n)}},{key:"removeChangedExistingAnnotation",value:function(t){var e,n=t.annotationElementId;null===(e=M(_i,this))||void 0===e||e.delete(n)}},{key:"renderAnnotationElement",value:function(t){var e,n=null===(e=M(_i,this))||void 0===e?void 0:e.get(t.data.id);if(n){var i=M(Fi,this).getRawValue(n);i&&(M(Xi,this)!==mt.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}}],[{key:"_keyboardManager",get:function(){var e=t.prototype,n=function(t){return M(da,t).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl()},i=function(t,e){var n=e.target;if(n instanceof HTMLInputElement){var i=n.type;return"text"!==i&&"number"!==i}return!0},a=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ue(this,"_keyboardManager",new Di([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:function(t,e){var n=e.target;return!(n instanceof HTMLButtonElement)&&M(da,t).contains(n)&&!t.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:function(t,e){return!(e.target instanceof HTMLButtonElement)&&M(da,t).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}]]))}}]);var e,n}();function ga(t){var e=t.anchorNode;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}function ma(t){var e=this.currentLayer;if(e.hasTextLayer(t))return e;var n,i=R(M(wi,this).values());try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.hasTextLayer(t))return a}}catch(t){i.e(t)}finally{i.f()}return null}function Da(){var t=document.getSelection();if(t&&!t.isCollapsed){var e=B(va,this,ga).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(M(Wi,this)||P(Wi,this,new Jn(this)),M(Wi,this).show(e,n,"ltr"===this.direction))}}function ya(){var t,e=this,n=document.getSelection();if(n&&!n.isCollapsed){var i=n.anchorNode;if(i!==M(Yi,this)){var a,r=B(va,this,ga).call(this,n).closest(".textLayer");if(r){if(null===(t=M(Wi,this))||void 0===t||t.hide(),P(Yi,this,i),B(va,this,Sa).call(this,{hasSelectedText:!0}),(M(Xi,this)===mt.HIGHLIGHT||M(Xi,this)===mt.NONE)&&(M(Xi,this)===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),P(ji,this,this.isShiftKeyDown),!this.isShiftKeyDown)){var s=M(Xi,this)===mt.HIGHLIGHT?B(va,this,ma).call(this,r):null;null==s||s.toggleDrawing();var o=this._signal,u=function(t){"pointerup"===t.type&&0!==t.button||(null==s||s.toggleDrawing(!0),window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),"pointerup"===t.type&&B(va,e,Aa).call(e,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})}}else M(Yi,this)&&(null===(a=M(Wi,this))||void 0===a||a.hide(),P(Yi,this,null),B(va,this,Sa).call(this,{hasSelectedText:!1}))}}else{var l;M(Yi,this)&&(null===(l=M(Wi,this))||void 0===l||l.hide(),P(Yi,this,null),B(va,this,Sa).call(this,{hasSelectedText:!1}))}}function Aa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";M(Xi,this)===mt.HIGHLIGHT?this.highlightSelection(t):M(Ti,this)&&B(va,this,Da).call(this)}function ba(){document.addEventListener("selectionchange",B(va,this,ya).bind(this),{signal:this._signal})}function ka(){var t=this._signal;window.addEventListener("focus",M(Zi,this),{signal:t}),window.addEventListener("blur",M(Ji,this),{signal:t})}function Ea(){window.removeEventListener("focus",M(Zi,this)),window.removeEventListener("blur",M(Ji,this))}function wa(){var t=this._signal;window.addEventListener("keydown",M(ia,this),{signal:t}),window.addEventListener("keyup",M(aa,this),{signal:t})}function Ca(){window.removeEventListener("keydown",M(ia,this)),window.removeEventListener("keyup",M(aa,this))}function Fa(){var t=this._signal;document.addEventListener("copy",M(ta,this),{signal:t}),document.addEventListener("cut",M(ea,this),{signal:t}),document.addEventListener("paste",M(na,this),{signal:t})}function _a(){document.removeEventListener("copy",M(ta,this)),document.removeEventListener("cut",M(ea,this)),document.removeEventListener("paste",M(na,this))}function xa(){var t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}function Sa(t){var e=this,n=Object.entries(t).some((function(t){var n=L(t,2),i=n[0],a=n[1];return M(la,e)[i]!==a}));n&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(M(la,this),t)}),M(Xi,this)===mt.HIGHLIGHT&&!1===t.hasSelectedEditor&&B(va,this,Ma).call(this,[[Dt.HIGHLIGHT_FREE,!0]]))}function Ma(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}function Pa(){if(!M(zi,this)){P(zi,this,!0);var t,e=R(M(wi,this).values());try{for(e.s();!(t=e.n()).done;){t.value.enable()}}catch(t){e.e(t)}finally{e.f()}var n,i=R(M(Ei,this).values());try{for(i.s();!(n=i.n()).done;){n.value.enable()}}catch(t){i.e(t)}finally{i.f()}}}function Ba(){if(this.unselectAll(),M(zi,this)){P(zi,this,!1);var t,e=R(M(wi,this).values());try{for(e.s();!(t=e.n()).done;){t.value.disable()}}catch(t){e.e(t)}finally{e.f()}var n,i=R(M(Ei,this).values());try{for(i.s();!(n=i.n()).done;){n.value.disable()}}catch(t){i.e(t)}finally{i.f()}}}function La(t){var e=M(wi,this).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}function Ta(t){var e,n=null,i=R(M(Ki,t));try{for(i.s();!(e=i.n()).done;)n=e.value}catch(t){i.e(t)}finally{i.f()}return n}function Ia(){if(0===M(Ei,this).size)return!0;if(1===M(Ei,this).size){var t,e=R(M(Ei,this).values());try{for(e.s();!(t=e.n()).done;){return t.value.isEmpty()}}catch(t){e.e(t)}finally{e.f()}}return!1}function Ra(t){var e,n=R(M(Ki,this));try{for(n.s();!(e=n.n()).done;){e.value.unselect()}}catch(t){n.e(t)}finally{n.f()}M(Ki,this).clear();var i,a=R(t);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.isEmpty()||(M(Ki,this).add(r),r.select())}}catch(t){a.e(t)}finally{a.f()}B(va,this,Sa).call(this,{hasSelectedEditor:this.hasSelection})}w(pa,"TRANSLATE_SMALL",1),w(pa,"TRANSLATE_BIG",10);var Na=new WeakMap,Oa=new WeakMap,ja=new WeakMap,Wa=new WeakMap,Ha=new WeakMap,za=new WeakMap,Va=new WeakMap,Ua=new WeakSet,Ga=function(){function t(e){z(this,t),k(this,Ua),x(this,Na,""),x(this,Oa,!1),x(this,ja,null),x(this,Wa,null),x(this,Ha,null),x(this,za,!1),x(this,Va,null),P(Va,this,e)}return W(t,[{key:"render",value:(e=_(C().mark((function e(){var n,i,a,r,s=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=P(ja,this,document.createElement("button"))).className="altText",e.next=4,t._l10nPromise.get("pdfjs-editor-alt-text-button-label");case 4:return i=e.sent,n.textContent=i,n.setAttribute("aria-label",i),n.tabIndex="0",a=M(Va,this)._uiManager._signal,n.addEventListener("contextmenu",Sn,{signal:a}),n.addEventListener("pointerdown",(function(t){return t.stopPropagation()}),{signal:a}),r=function(t){t.preventDefault(),M(Va,s)._uiManager.editAltText(M(Va,s))},n.addEventListener("click",r,{capture:!0,signal:a}),n.addEventListener("keydown",(function(t){t.target===n&&"Enter"===t.key&&(P(za,s,!0),r(t))}),{signal:a}),e.next=16,B(Ua,this,qa).call(this);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"finish",value:function(){M(ja,this)&&(M(ja,this).focus({focusVisible:M(za,this)}),P(za,this,!1))}},{key:"isEmpty",value:function(){return!M(Na,this)&&!M(Oa,this)}},{key:"data",get:function(){return{altText:M(Na,this),decorative:M(Oa,this)}},set:function(t){var e=t.altText,n=t.decorative;M(Na,this)===e&&M(Oa,this)===n||(P(Na,this,e),P(Oa,this,n),B(Ua,this,qa).call(this))}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];M(ja,this)&&(!t&&M(Ha,this)&&(clearTimeout(M(Ha,this)),P(Ha,this,null)),M(ja,this).disabled=!t)}},{key:"destroy",value:function(){var t;null===(t=M(ja,this))||void 0===t||t.remove(),P(ja,this,null),P(Wa,this,null)}}],[{key:"initialize",value:function(e){t._l10nPromise||(t._l10nPromise=e)}}]);var e}();function qa(){return Xa.apply(this,arguments)}function Xa(){return(Xa=_(C().mark((function t(){var e,n,a,r,s,o,u=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=M(ja,this)){t.next=3;break}return t.abrupt("return");case 3:if(M(Na,this)||M(Oa,this)){t.next=7;break}return e.classList.remove("done"),null===(n=M(Wa,this))||void 0===n||n.remove(),t.abrupt("return");case 7:if(e.classList.add("done"),i._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((function(t){e.setAttribute("aria-label",t)})),(a=M(Wa,this))||(P(Wa,this,a=document.createElement("span")),a.className="tooltip",a.setAttribute("role","tooltip"),r=a.id="alt-text-tooltip-".concat(M(Va,this).id),e.setAttribute("aria-describedby",r),100,(s=M(Va,this)._uiManager._signal).addEventListener("abort",(function(){clearTimeout(M(Ha,u)),P(Ha,u,null)}),{once:!0}),e.addEventListener("mouseenter",(function(){P(Ha,u,setTimeout((function(){P(Ha,u,null),M(Wa,u).classList.add("show"),M(Va,u)._reportTelemetry({action:"alt_text_tooltip"})}),100))}),{signal:s}),e.addEventListener("mouseleave",(function(){var t;M(Ha,u)&&(clearTimeout(M(Ha,u)),P(Ha,u,null)),null===(t=M(Wa,u))||void 0===t||t.classList.remove("show")}),{signal:s})),!M(Oa,this)){t.next=17;break}return t.next=14,i._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip");case 14:t.t0=t.sent,t.next=18;break;case 17:t.t0=M(Na,this);case 18:a.innerText=t.t0,a.parentNode||e.append(a),null==(o=M(Va,this).getImageForAltText())||o.setAttribute("aria-describedby",a.id);case 22:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}i=Ga,w(Ga,"_l10nPromise",null);var Ka=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,$a=new WeakMap,Ja=new WeakMap,Za=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,ir=new WeakMap,ar=new WeakMap,rr=new WeakMap,sr=new WeakMap,or=new WeakMap,ur=new WeakMap,lr=new WeakMap,hr=new WeakMap,cr=new WeakMap,dr=new WeakMap,fr=new WeakMap,vr=new WeakMap,pr=new WeakMap,gr=new WeakSet,mr=function(){function t(e){z(this,t),k(this,gr),x(this,Ka,null),x(this,Ya,null),x(this,Qa,null),x(this,$a,!1),x(this,Ja,!1),x(this,Za,null),x(this,tr,null),x(this,er,this.focusin.bind(this)),x(this,nr,this.focusout.bind(this)),x(this,ir,null),x(this,ar,""),x(this,rr,!1),x(this,sr,null),x(this,or,!1),x(this,ur,!1),x(this,lr,!1),x(this,hr,null),x(this,cr,0),x(this,dr,0),x(this,fr,null),w(this,"_initialOptions",Object.create(null)),w(this,"_isVisible",!0),w(this,"_uiManager",null),w(this,"_focusEventsAllowed",!0),w(this,"_l10nPromise",null),x(this,vr,!1),x(this,pr,t._zIndex++),this.constructor===t&&re("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;var n=this.parent.viewport,i=n.rotation,a=n.rawDims,r=a.pageWidth,s=a.pageHeight,o=a.pageX,u=a.pageY;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[o,u];var l=L(this.parentDimensions,2),h=l[0],c=l[1];this.x=e.x/h,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}return W(t,[{key:"editorType",get:function(){return Object.getPrototypeOf(this).constructor._type}},{key:"propertiesToUpdate",get:function(){return[]}},{key:"_isDraggable",get:function(){return M(vr,this)},set:function(t){var e;P(vr,this,t),null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}},{key:"isEnterHandled",get:function(){return!0}},{key:"center",value:function(){var t=L(this.pageDimensions,2),e=t[0],n=t[1];switch(this.parentRotation){case 90:this.x-=this.height*n/(2*e),this.y+=this.width*e/(2*n);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(2*e),this.y-=this.width*e/(2*n);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}},{key:"addCommands",value:function(t){this._uiManager.addCommands(t)}},{key:"currentLayer",get:function(){return this._uiManager.currentLayer}},{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=M(pr,this)}},{key:"setParent",value:function(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):B(gr,this,Pr).call(this),this.parent=t}},{key:"focusin",value:function(t){this._focusEventsAllowed&&(M(rr,this)?P(rr,this,!1):this.parent.setSelected(this))}},{key:"focusout",value:function(t){var e;if(this._focusEventsAllowed&&this.isAttachedToDOM){var n=t.relatedTarget;null!=n&&n.closest("#".concat(this.id))||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.addToAnnotationStorage()}},{key:"addToAnnotationStorage",value:function(){this._uiManager.addToAnnotationStorage(this)}},{key:"setAt",value:function(t,e,n,i){var a=L(this.parentDimensions,2),r=a[0],s=a[1],o=L(this.screenToPageTranslation(n,i),2);n=o[0],i=o[1],this.x=(t+n)/r,this.y=(e+i)/s,this.fixAndSetPosition()}},{key:"translate",value:function(t,e){B(gr,this,Dr).call(this,this.parentDimensions,t,e)}},{key:"translateInPage",value:function(t,e){M(sr,this)||P(sr,this,[this.x,this.y]),B(gr,this,Dr).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}},{key:"drag",value:function(t,e){M(sr,this)||P(sr,this,[this.x,this.y]);var n=L(this.parentDimensions,2),i=n[0],a=n[1];if(this.x+=t/i,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){var r=this.div.getBoundingClientRect(),s=r.x,o=r.y;this.parent.findNewParent(this,s,o)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}var u=this.x,l=this.y,h=L(this.getBaseTranslation(),2);u+=h[0],l+=h[1],this.div.style.left="".concat((100*u).toFixed(2),"%"),this.div.style.top="".concat((100*l).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}},{key:"_hasBeenMoved",get:function(){return!!M(sr,this)&&(M(sr,this)[0]!==this.x||M(sr,this)[1]!==this.y)}},{key:"getBaseTranslation",value:function(){var e=L(this.parentDimensions,2),n=e[0],i=e[1],a=t._borderLineWidth,r=a/n,s=a/i;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}},{key:"_mustFixPosition",get:function(){return!0}},{key:"fixAndSetPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation,e=L(this.pageDimensions,2),n=e[0],i=e[1],a=this.x,r=this.y,s=this.width,o=this.height;if(s*=n,o*=i,a*=n,r*=i,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-s,a)),r=Math.max(0,Math.min(i-o,r));break;case 90:a=Math.max(0,Math.min(n-o,a)),r=Math.min(i,Math.max(s,r));break;case 180:a=Math.min(n,Math.max(s,a)),r=Math.min(i,Math.max(o,r));break;case 270:a=Math.min(n,Math.max(o,a)),r=Math.max(0,Math.min(i-s,r))}this.x=a/=n,this.y=r/=i;var u=L(this.getBaseTranslation(),2);a+=u[0],r+=u[1];var l=this.div.style;l.left="".concat((100*a).toFixed(2),"%"),l.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}},{key:"screenToPageTranslation",value:function(e,n){return yr.call(t,e,n,this.parentRotation)}},{key:"pageTranslationToScreen",value:function(e,n){return yr.call(t,e,n,360-this.parentRotation)}},{key:"parentScale",get:function(){return this._uiManager.viewParameters.realScale}},{key:"parentRotation",get:function(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}},{key:"parentDimensions",get:function(){var t=this.parentScale,e=L(this.pageDimensions,2),n=e[0]*t,i=e[1]*t;return Ae.isCSSRoundSupported?[Math.round(n),Math.round(i)]:[n,i]}},{key:"setDims",value:function(t,e){var n=L(this.parentDimensions,2),i=n[0],a=n[1];this.div.style.width="".concat((100*t/i).toFixed(2),"%"),M(Ja,this)||(this.div.style.height="".concat((100*e/a).toFixed(2),"%"))}},{key:"fixDims",value:function(){var t=this.div.style,e=t.height,n=t.width,i=n.endsWith("%"),a=!M(Ja,this)&&e.endsWith("%");if(!i||!a){var r=L(this.parentDimensions,2),s=r[0],o=r[1];i||(t.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),M(Ja,this)||a||(t.height="".concat((100*parseFloat(e)/o).toFixed(2),"%"))}}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"altTextFinish",value:function(){var t;null===(t=M(Qa,this))||void 0===t||t.finish()}},{key:"addEditToolbar",value:(n=_(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M(ir,this)&&!M(ur,this)){t.next=2;break}return t.abrupt("return",M(ir,this));case 2:if(P(ir,this,new Hn(this)),this.div.append(M(ir,this).render()),!M(Qa,this)){t.next=10;break}return t.t0=M(ir,this),t.next=8,M(Qa,this).render();case 8:t.t1=t.sent,t.t0.addAltTextButton.call(t.t0,t.t1);case 10:return t.abrupt("return",M(ir,this));case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"removeEditToolbar",value:function(){var t;M(ir,this)&&(M(ir,this).remove(),P(ir,this,null),null===(t=M(Qa,this))||void 0===t||t.destroy())}},{key:"getClientDimensions",value:function(){return this.div.getBoundingClientRect()}},{key:"addAltTextButton",value:(e=_(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M(Qa,this)){e.next=2;break}return e.abrupt("return");case 2:return Ga.initialize(t._l10nPromise),P(Qa,this,new Ga(this)),M(Ka,this)&&(M(Qa,this).data=M(Ka,this),P(Ka,this,null)),e.next=7,this.addEditToolbar();case 7:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"altTextData",get:function(){var t;return null===(t=M(Qa,this))||void 0===t?void 0:t.data},set:function(t){M(Qa,this)&&(M(Qa,this).data=t)}},{key:"hasAltText",value:function(){var t;return!(null!==(t=M(Qa,this))&&void 0!==t&&t.isEmpty())}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=M($a,this)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();var t=this._uiManager._signal;this.div.addEventListener("focusin",M(er,this),{signal:t}),this.div.addEventListener("focusout",M(nr,this),{signal:t});var e=L(this.parentDimensions,2),n=e[0],i=e[1];this.parentRotation%180!=0&&(this.div.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));var a=L(this.getInitialTranslation(),2),r=a[0],s=a[1];return this.translate(r,s),ni(this,this.div,["pointerdown"]),this.div}},{key:"pointerdown",value:function(t){var e=Ae.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(P(rr,this,!0),this._isDraggable?B(gr,this,Fr).call(this,t):B(gr,this,Cr).call(this,t))}},{key:"moveInDOM",value:function(){var t=this;M(hr,this)&&clearTimeout(M(hr,this)),P(hr,this,setTimeout((function(){var e;P(hr,t,null),null===(e=t.parent)||void 0===e||e.moveEditorInDOM(t)}),0))}},{key:"_setParentAndPosition",value:function(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}},{key:"getRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation,i=this.parentScale,a=L(this.pageDimensions,2),r=a[0],s=a[1],o=L(this.pageTranslation,2),u=o[0],l=o[1],h=t/i,c=e/i,d=this.x*r,f=this.y*s,v=this.width*r,p=this.height*s;switch(n){case 0:return[d+h+u,s-f-c-p+l,d+h+v+u,s-f-c+l];case 90:return[d+c+u,s-f+h+l,d+c+p+u,s-f+h+v+l];case 180:return[d-h-v+u,s-f+c+l,d-h+u,s-f+c+p+l];case 270:return[d-c-p+u,s-f-h-v+l,d-c+u,s-f-h+l];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(t,e){var n=L(t,4),i=n[0],a=n[1],r=n[2],s=n[3],o=r-i,u=s-a;switch(this.rotation){case 0:return[i,e-s,o,u];case 90:return[i,e-a,u,o];case 180:return[r,e-a,o,u];case 270:return[r,e-s,u,o];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){P(ur,this,!0)}},{key:"disableEditMode",value:function(){P(ur,this,!1)}},{key:"isInEditMode",value:function(){return M(ur,this)}},{key:"shouldGetKeyboardEvents",value:function(){return M(lr,this)}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var t,e,n=this._uiManager._signal;null===(t=this.div)||void 0===t||t.addEventListener("focusin",M(er,this),{signal:n}),null===(e=this.div)||void 0===e||e.addEventListener("focusout",M(nr,this),{signal:n})}},{key:"rotate",value:function(t){}},{key:"serialize",value:function(){re("An editor must be serializable")}},{key:"hasBeenModified",get:function(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}},{key:"remove",value:function(){if(this.div.removeEventListener("focusin",M(er,this)),this.div.removeEventListener("focusout",M(nr,this)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),M(hr,this)&&(clearTimeout(M(hr,this)),P(hr,this,null)),B(gr,this,Pr).call(this),this.removeEditToolbar(),M(fr,this)){var t,e=R(M(fr,this).values());try{for(e.s();!(t=e.n()).done;){var n=t.value;clearTimeout(n)}}catch(t){e.e(t)}finally{e.f()}P(fr,this,null)}this.parent=null}},{key:"isResizable",get:function(){return!1}},{key:"makeResizable",value:function(){this.isResizable&&(B(gr,this,br).call(this),M(Za,this).classList.remove("hidden"),ni(this,this.div,["keydown"]))}},{key:"toolbarPosition",get:function(){return null}},{key:"keydown",value:function(e){var n=this;if(this.isResizable&&e.target===this.div&&"Enter"===e.key){this._uiManager.setSelected(this),P(tr,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});var i=M(Za,this).children;if(!M(Ya,this)){P(Ya,this,Array.from(i));var a,r=B(gr,this,_r).bind(this),s=B(gr,this,xr).bind(this),o=this._uiManager._signal,u=R(M(Ya,this));try{var l=function(){var e=a.value,i=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",r,{signal:o}),e.addEventListener("blur",s,{signal:o}),e.addEventListener("focus",B(gr,n,Sr).bind(n,i),{signal:o}),t._l10nPromise.get("pdfjs-editor-resizer-label-".concat(i)).then((function(t){return e.setAttribute("aria-label",t)}))};for(u.s();!(a=u.n()).done;)l()}catch(t){u.e(t)}finally{u.f()}}var h,c=M(Ya,this)[0],d=0,f=R(i);try{for(f.s();!(h=f.n()).done;){if(h.value===c)break;d++}}catch(t){f.e(t)}finally{f.f()}var v=(360-this.rotation+this.parentRotation)%360/90*(M(Ya,this).length/4);if(v!==d){if(v<d)for(var p=0;p<d-v;p++)M(Za,this).append(M(Za,this).firstChild);else if(v>d)for(var g=0;g<v-d;g++)M(Za,this).firstChild.before(M(Za,this).lastChild);var m,D=0,y=R(i);try{var A=function(){var e=m.value,i=M(Ya,n)[D++].getAttribute("data-resizer-name");t._l10nPromise.get("pdfjs-editor-resizer-label-".concat(i)).then((function(t){return e.setAttribute("aria-label",t)}))};for(y.s();!(m=y.n()).done;)A()}catch(t){y.e(t)}finally{y.f()}}B(gr,this,Mr).call(this,0),P(lr,this,!0),M(Za,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}}},{key:"_resizeWithKeyboard",value:function(t,e){M(lr,this)&&B(gr,this,wr).call(this,M(ar,this),{movementX:t,movementY:e})}},{key:"_stopResizingWithKeyboard",value:function(){B(gr,this,Pr).call(this),this.div.focus()}},{key:"select",value:function(){var t,e,n=this;this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),M(ir,this)?null===(e=M(ir,this))||void 0===e||e.show():this.addEditToolbar().then((function(){var t,e;null!==(t=n.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=M(ir,n))||void 0===e||e.show())}))}},{key:"unselect",value:function(){var t,e,n,i;null===(t=M(Za,this))||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=M(ir,this))||void 0===i||i.hide()}},{key:"updateParams",value:function(t,e){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"enterInEditMode",value:function(){}},{key:"getImageForAltText",value:function(){return null}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return M(or,this)},set:function(t){P(or,this,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}},{key:"setAspectRatio",value:function(t,e){P(Ja,this,!0);var n=t/e,i=this.div.style;i.aspectRatio=n,i.height="auto"}},{key:"telemetryInitialData",get:function(){return{action:"added"}}},{key:"telemetryFinalData",get:function(){return null}},{key:"_reportTelemetry",value:function(e){var n=this;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){M(fr,this)||P(fr,this,new Map);var i=e.action,a=M(fr,this).get(i);return a&&clearTimeout(a),a=setTimeout((function(){n._reportTelemetry(e),M(fr,n).delete(i),0===M(fr,n).size&&P(fr,n,null)}),t._telemetryTimeout),void M(fr,this).set(i,a)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}},{key:"enable",value:function(){this.div&&(this.div.tabIndex=0),P($a,this,!1)}},{key:"disable",value:function(){this.div&&(this.div.tabIndex=-1),P($a,this,!0)}},{key:"renderAnnotationElement",value:function(t){var e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){var n=e;(e=document.createElement("div")).classList.add("annotationContent",this.editorType),n.before(e)}}else(e=document.createElement("div")).classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}},{key:"resetAnnotationElement",value:function(t){var e=t.container.firstChild;"DIV"===e.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}],[{key:"_resizerKeyboardManager",get:function(){var e=t.prototype._resizeWithKeyboard,n=pa.TRANSLATE_SMALL,i=pa.TRANSLATE_BIG;return ue(this,"_resizerKeyboardManager",new Di([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],t.prototype._stopResizingWithKeyboard]]))}},{key:"_defaultLineColor",get:function(){return ue(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deleteAnnotationElement",value:function(t){var e=new Br({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}},{key:"initialize",value:function(e,n,i){if(t._l10nPromise||(t._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((function(t){return[t,e.get(t.replaceAll(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())})))]})))),null!=i&&i.strings){var a,r=R(i.strings);try{for(r.s();!(a=r.n()).done;){var s=a.value;t._l10nPromise.set(s,e.get(s))}}catch(t){r.e(t)}finally{r.f()}}if(-1===t._borderLineWidth){var o=getComputedStyle(document.documentElement);t._borderLineWidth=parseFloat(o.getPropertyValue("--outline-width"))||0}}},{key:"updateDefaultParams",value:function(t,e){}},{key:"defaultPropertiesToUpdate",get:function(){return[]}},{key:"isHandlingMimeForPasting",value:function(t){return!1}},{key:"paste",value:function(t,e){re("Not implemented")}},{key:"deserialize",value:function(t,e,n){var i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,P(Ka,i,t.accessibilityData);var a=L(i.pageDimensions,2),r=a[0],s=a[1],o=L(i.getRectInCurrentCoords(t.rect,s),4),u=o[0],l=o[1],h=o[2],c=o[3];return i.x=u/r,i.y=l/s,i.width=h/r,i.height=c/s,i}},{key:"MIN_SIZE",get:function(){return 16}},{key:"canCreateNewEmptyEditor",value:function(){return!0}}]);var e,n}();function Dr(t,e,n){var i=L(t,2),a=i[0],r=i[1],s=L(this.screenToPageTranslation(e,n),2);e=s[0],n=s[1],this.x+=e/a,this.y+=n/r,this.fixAndSetPosition()}function yr(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}function Ar(t){switch(t){case 90:var e=L(this.pageDimensions,2),n=e[0],i=e[1];return[0,-n/i,i/n,0];case 180:return[-1,0,0,-1];case 270:var a=L(this.pageDimensions,2),r=a[0],s=a[1];return[0,r/s,-s/r,0];default:return[1,0,0,1]}}function br(){if(!M(Za,this)){P(Za,this,document.createElement("div")),M(Za,this).classList.add("resizers");for(var t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal,n=0,i=t;n<i.length;n++){var a=i[n],r=document.createElement("div");M(Za,this).append(r),r.classList.add("resizer",a),r.setAttribute("data-resizer-name",a),r.addEventListener("pointerdown",B(gr,this,kr).bind(this,a),{signal:e}),r.addEventListener("contextmenu",Sn,{signal:e}),r.tabIndex=-1}this.div.prepend(M(Za,this))}}function kr(t,e){var n,i=this;e.preventDefault();var a=Ae.platform.isMac;if(!(0!==e.button||e.ctrlKey&&a)){null===(n=M(Qa,this))||void 0===n||n.toggle(!1);var r=B(gr,this,wr).bind(this,t),s=this._isDraggable;this._isDraggable=!1;var o=this._uiManager._signal,u={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,u),window.addEventListener("contextmenu",Sn,{signal:o});var l=this.x,h=this.y,c=this.width,d=this.height,f=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;var p=function(){var t;i.parent.togglePointerEvents(!0),null===(t=M(Qa,i))||void 0===t||t.toggle(!0),i._isDraggable=s,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",r,u),window.removeEventListener("contextmenu",Sn),i.parent.div.style.cursor=f,i.div.style.cursor=v,B(gr,i,Er).call(i,l,h,c,d)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})}}function Er(t,e,n,i){var a=this,r=this.x,s=this.y,o=this.width,u=this.height;r===t&&s===e&&o===n&&u===i||this.addCommands({cmd:function(){a.width=o,a.height=u,a.x=r,a.y=s;var t=L(a.parentDimensions,2),e=t[0],n=t[1];a.setDims(e*o,n*u),a.fixAndSetPosition()},undo:function(){a.width=n,a.height=i,a.x=t,a.y=e;var r=L(a.parentDimensions,2),s=r[0],o=r[1];a.setDims(s*n,o*i),a.fixAndSetPosition()},mustExec:!0})}function wr(t,e){var n,i,r=L(this.parentDimensions,2),s=r[0],o=r[1],u=this.x,l=this.y,h=this.width,c=this.height,d=a.MIN_SIZE/s,f=a.MIN_SIZE/o,v=function(t){return Math.round(1e4*t)/1e4},p=B(gr,this,Ar).call(this,this.rotation),g=function(t,e){return[p[0]*t+p[2]*e,p[1]*t+p[3]*e]},m=B(gr,this,Ar).call(this,360-this.rotation),D=!1,y=!1;switch(t){case"topLeft":D=!0,n=function(t,e){return[0,0]},i=function(t,e){return[t,e]};break;case"topMiddle":n=function(t,e){return[t/2,0]},i=function(t,e){return[t/2,e]};break;case"topRight":D=!0,n=function(t,e){return[t,0]},i=function(t,e){return[0,e]};break;case"middleRight":y=!0,n=function(t,e){return[t,e/2]},i=function(t,e){return[0,e/2]};break;case"bottomRight":D=!0,n=function(t,e){return[t,e]},i=function(t,e){return[0,0]};break;case"bottomMiddle":n=function(t,e){return[t/2,e]},i=function(t,e){return[t/2,0]};break;case"bottomLeft":D=!0,n=function(t,e){return[0,e]},i=function(t,e){return[t,0]};break;case"middleLeft":y=!0,n=function(t,e){return[0,e/2]},i=function(t,e){return[t,e/2]}}var b,k,E=n(h,c),w=i(h,c),C=g.apply(void 0,A(w)),F=v(u+C[0]),_=v(l+C[1]),x=1,S=1,M=L(this.screenToPageTranslation(e.movementX,e.movementY),2),P=M[0],T=M[1],I=L((b=P/s,k=T/o,[m[0]*b+m[2]*k,m[1]*b+m[3]*k]),2);if(P=I[0],T=I[1],D){var R=Math.hypot(h,c);x=S=Math.max(Math.min(Math.hypot(w[0]-E[0]-P,w[1]-E[1]-T)/R,1/h,1/c),d/h,f/c)}else y?x=Math.max(d,Math.min(1,Math.abs(w[0]-E[0]-P)))/h:S=Math.max(f,Math.min(1,Math.abs(w[1]-E[1]-T)))/c;var N=v(h*x),O=v(c*S),j=F-(C=g.apply(void 0,A(i(N,O))))[0],W=_-C[1];this.width=N,this.height=O,this.x=j,this.y=W,this.setDims(s*N,o*O),this.fixAndSetPosition()}function Cr(t){var e=Ae.platform.isMac;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Fr(t){var e,n,i=this,a=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();var r=this._uiManager._signal;a&&(this.div.classList.add("moving"),e={passive:!0,capture:!0,signal:r},P(cr,this,t.clientX),P(dr,this,t.clientY),n=function(t){var e=t.clientX,n=t.clientY,a=L(i.screenToPageTranslation(e-M(cr,i),n-M(dr,i)),2),r=a[0],s=a[1];P(cr,i,e),P(dr,i,n),i._uiManager.dragSelectedEditors(r,s)},window.addEventListener("pointermove",n,e));var s=function(){window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),a&&(i.div.classList.remove("moving"),window.removeEventListener("pointermove",n,e)),P(rr,i,!1),i._uiManager.endDragSession()||B(gr,i,Cr).call(i,t)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})}function _r(t){a._resizerKeyboardManager.exec(this,t)}function xr(t){var e;M(lr,this)&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==M(Za,this)&&B(gr,this,Pr).call(this)}function Sr(t){P(ar,this,M(lr,this)?t:"")}function Mr(t){if(M(Ya,this)){var e,n=R(M(Ya,this));try{for(n.s();!(e=n.n()).done;){e.value.tabIndex=t}}catch(t){n.e(t)}finally{n.f()}}}function Pr(){if(P(lr,this,!1),B(gr,this,Mr).call(this,-1),M(tr,this)){var t=M(tr,this),e=t.savedX,n=t.savedY,i=t.savedWidth,a=t.savedHeight;B(gr,this,Er).call(this,e,n,i,a),P(tr,this,null)}}a=mr,w(mr,"_borderLineWidth",-1),w(mr,"_colorManager",new Ai),w(mr,"_zIndex",1),w(mr,"_telemetryTimeout",1e3);var Br=function(t){function e(t){var n;return z(this,e),(n=V(this,e,[t])).annotationElementId=t.annotationElementId,n.deleted=!0,n}return q(e,mr),W(e,[{key:"serialize",value:function(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}])}(),Lr=3285377520,Tr=4294901760,Ir=65535,Rr=function(){return W((function t(e){z(this,t),this.h1=e?4294967295&e:Lr,this.h2=e?4294967295&e:Lr}),[{key:"update",value:function(t){var e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(var i=0,a=t.length;i<a;i++){var r=t.charCodeAt(i);r<=255?e[n++]=r:(e[n++]=r>>>8,e[n++]=255&r)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");n=(e=t.slice()).byteLength}for(var s=n>>2,o=n-4*s,u=new Uint32Array(e.buffer,0,s),l=0,h=0,c=this.h1,d=this.h2,f=3432918353,v=461845907,p=11601,g=13715,m=0;m<s;m++)1&m?c=5*(c=(c^=l=(l=(l=(l=u[m])*f&Tr|l*p&Ir)<<15|l>>>17)*v&Tr|l*g&Ir)<<13|c>>>19)+3864292196:d=5*(d=(d^=h=(h=(h=(h=u[m])*f&Tr|h*p&Ir)<<15|h>>>17)*v&Tr|h*g&Ir)<<13|d>>>19)+3864292196;switch(l=0,o){case 3:l^=e[4*s+2]<<16;case 2:l^=e[4*s+1]<<8;case 1:l=(l=(l=(l^=e[4*s])*f&Tr|l*p&Ir)<<15|l>>>17)*v&Tr|l*g&Ir,1&s?c^=l:d^=l}this.h1=c,this.h2=d}},{key:"hexdigest",value:function(){var t=this.h1,e=this.h2;return t=3981806797*(t^=e>>>1)&Tr|36045*t&Ir,t=444984403*(t^=(e=4283543511*e&Tr|(2950163797*(e<<16|t>>>16)&Tr)>>>16)>>>1)&Tr|60499*t&Ir,((t^=(e=3301882366*e&Tr|(3120437893*(e<<16|t>>>16)&Tr)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}])}(),Nr=Object.freeze({map:null,hash:"",transfer:void 0}),Or=new WeakMap,jr=new WeakMap,Wr=new WeakMap,Hr=new WeakSet,zr=function(){return W((function t(){z(this,t),k(this,Hr),x(this,Or,!1),x(this,jr,null),x(this,Wr,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}),[{key:"getValue",value:function(t,e){var n=M(Wr,this).get(t);return void 0===n?e:Object.assign(e,n)}},{key:"getRawValue",value:function(t){return M(Wr,this).get(t)}},{key:"remove",value:function(t){if(M(Wr,this).delete(t),0===M(Wr,this).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){var e,n=R(M(Wr,this).values());try{for(n.s();!(e=n.n()).done;){if(e.value instanceof mr)return}}catch(t){n.e(t)}finally{n.f()}this.onAnnotationEditor(null)}}},{key:"setValue",value:function(t,e){var n=M(Wr,this).get(t),i=!1;if(void 0!==n)for(var a=0,r=Object.entries(e);a<r.length;a++){var s=L(r[a],2),o=s[0],u=s[1];n[o]!==u&&(i=!0,n[o]=u)}else i=!0,M(Wr,this).set(t,e);i&&B(Hr,this,Vr).call(this),e instanceof mr&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}},{key:"has",value:function(t){return M(Wr,this).has(t)}},{key:"getAll",value:function(){return M(Wr,this).size>0?ye(M(Wr,this)):null}},{key:"setAll",value:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var i=L(n[e],2),a=i[0],r=i[1];this.setValue(a,r)}}},{key:"size",get:function(){return M(Wr,this).size}},{key:"resetModified",value:function(){M(Or,this)&&(P(Or,this,!1),"function"==typeof this.onResetModified&&this.onResetModified())}},{key:"print",get:function(){return new Gr(this)}},{key:"serializable",get:function(){if(0===M(Wr,this).size)return Nr;var t,e=new Map,n=new Rr,i=[],a=Object.create(null),r=!1,s=R(M(Wr,this));try{for(s.s();!(t=s.n()).done;){var o=L(t.value,2),u=o[0],l=o[1],h=l instanceof mr?l.serialize(!1,a):l;h&&(e.set(u,h),n.update("".concat(u,":").concat(JSON.stringify(h))),r||(r=!!h.bitmap))}}catch(t){s.e(t)}finally{s.f()}if(r){var c,d=R(e.values());try{for(d.s();!(c=d.n()).done;){var f=c.value;f.bitmap&&i.push(f.bitmap)}}catch(t){d.e(t)}finally{d.f()}}return e.size>0?{map:e,hash:n.hexdigest(),transfer:i}:Nr}},{key:"editorStats",get:function(){var t,e=null,n=new Map,i=R(M(Wr,this).values());try{for(i.s();!(t=i.n()).done;){var a,r=t.value;if(r instanceof mr){var s=r.telemetryFinalData;if(s){var o=s.type;n.has(o)||n.set(o,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));for(var u=(a=e)[o]||(a[o]=new Map),l=0,h=Object.entries(s);l<h.length;l++){var c,d=L(h[l],2),f=d[0],v=d[1];if("type"!==f){var p=u.get(f);p||(p=new Map,u.set(f,p));var g=null!==(c=p.get(v))&&void 0!==c?c:0;p.set(v,g+1)}}}}}}catch(t){i.e(t)}finally{i.f()}var m,D=R(n);try{for(D.s();!(m=D.n()).done;){var y=L(m.value,2),A=y[0],b=y[1];e[A]=b.computeTelemetryFinalData(e[A])}}catch(t){D.e(t)}finally{D.f()}return e}},{key:"resetModifiedIds",value:function(){P(jr,this,null)}},{key:"modifiedIds",get:function(){if(M(jr,this))return M(jr,this);var t,e=[],n=R(M(Wr,this).values());try{for(n.s();!(t=n.n()).done;){var i=t.value;i instanceof mr&&i.annotationElementId&&i.serialize()&&e.push(i.annotationElementId)}}catch(t){n.e(t)}finally{n.f()}return P(jr,this,{ids:new Set(e),hash:e.join(",")})}}])}();function Vr(){M(Or,this)||(P(Or,this,!0),"function"==typeof this.onSetModified&&this.onSetModified())}var Ur=new WeakMap,Gr=function(t){function e(t){var n;z(this,e),x(n=V(this,e),Ur,void 0);var i=t.serializable,a=i.map,r=i.hash,s=i.transfer,o=structuredClone(a,s?{transfer:s}:null);return P(Ur,n,{map:o,hash:r,transfer:s}),n}return q(e,zr),W(e,[{key:"print",get:function(){re("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return M(Ur,this)}},{key:"modifiedIds",get:function(){return ue(this,"modifiedIds",{ids:new Set,hash:""})}}])}(),qr=new WeakMap,Xr=function(){return W((function t(e){var n=e.ownerDocument,i=void 0===n?globalThis.document:n;e.styleElement,z(this,t),x(this,qr,new Set),this._document=i,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}),[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}},{key:"removeNativeFontFace",value:function(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}},{key:"insertRule",value:function(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}},{key:"clear",value:function(){var t,e=R(this.nativeFontFaces);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._document.fonts.delete(n)}}catch(t){e.e(t)}finally{e.f()}this.nativeFontFaces.clear(),M(qr,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"loadSystemFont",value:(e=_(C().mark((function t(e){var n,i,a,r,s,o;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.systemFontInfo,i=e._inspectFont,n&&!M(qr,this).has(n.loadedName)){t.next=3;break}return t.abrupt("return");case 3:if(se(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),!this.isFontLoadingAPISupported){t.next=20;break}return a=n.loadedName,r=n.src,s=n.style,o=new FontFace(a,r,s),this.addNativeFontFace(o),t.prev=8,t.next=11,o.load();case 11:M(qr,this).add(a),null==i||i(n),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(8),ae("Cannot load system font: ".concat(n.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(o);case 19:return t.abrupt("return");case 20:re("Not implemented: loadSystemFont without the Font Loading API.");case 21:case"end":return t.stop()}}),t,this,[[8,15]])}))),function(t){return e.apply(this,arguments)})},{key:"bind",value:(t=_(C().mark((function t(e){var n,i,a=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.attached||e.missingFile&&!e.systemFontInfo)){t.next=2;break}return t.abrupt("return");case 2:if(e.attached=!0,!e.systemFontInfo){t.next=7;break}return t.next=6,this.loadSystemFont(e);case 6:case 21:return t.abrupt("return");case 7:if(!this.isFontLoadingAPISupported){t.next=22;break}if(!(n=e.createNativeFontFace())){t.next=21;break}return this.addNativeFontFace(n),t.prev=11,t.next=14,n.loaded;case 14:t.next=21;break;case 16:throw t.prev=16,t.t0=t.catch(11),ae("Failed to load font '".concat(n.family,"': '").concat(t.t0,"'.")),e.disableFontFace=!0,t.t0;case 22:if(!(i=e.createFontFaceRule())){t.next=29;break}if(this.insertRule(i),!this.isSyncFontLoadingSupported){t.next=27;break}return t.abrupt("return");case 27:return t.next=29,new Promise((function(t){var n=a._queueLoadingCallback(t);a._prepareFontLoadEvent(e,n)}));case 29:case"end":return t.stop()}}),t,this,[[11,16]])}))),function(e){return t.apply(this,arguments)})},{key:"isFontLoadingAPISupported",get:function(){var t;return ue(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}},{key:"isSyncFontLoadingSupported",get:function(){var t,e=!1;return(at||"undefined"!=typeof navigator&&"string"==typeof(null===(t=navigator)||void 0===t?void 0:t.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ue(this,"isSyncFontLoadingSupported",e)}},{key:"_queueLoadingCallback",value:function(t){var e=this.loadingRequests,n={done:!1,complete:function(){for(se(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){var t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}},{key:"_loadTestFont",get:function(){return ue(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}var a,r,s=this._document.createElement("canvas");s.width=1,s.height=1;var o=s.getContext("2d"),u=0;var l="lt".concat(Date.now()).concat(this.loadTestFontId++),h=this._loadTestFont,c=1482184792,d=n(h=i(h,976,l.length,l),16);for(a=0,r=l.length-3;a<r;a+=4)d=d-c+n(l,a)|0;a<l.length&&(d=d-c+n(l+"XXX",a)|0),h=i(h,16,4,function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}(d));var f="url(data:font/opentype;base64,".concat(btoa(h),");"),v='@font-face {font-family:"'.concat(l,'";src:').concat(f,"}");this.insertRule(v);var p=this._document.createElement("div");p.style.visibility="hidden",p.style.width=p.style.height="10px",p.style.position="absolute",p.style.top=p.style.left="0px";for(var g=0,m=[t.loadedName,l];g<m.length;g++){var D=m[g],y=this._document.createElement("span");y.textContent="Hi",y.style.fontFamily=D,p.append(y)}this._document.body.append(p),function t(e,n){if(++u>30)return ae("Load test font never loaded."),void n();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(l,(function(){p.remove(),e.complete()}))}}]);var t,e}(),Kr=function(){return W((function t(e,n){var i=n.disableFontFace,a=void 0!==i&&i,r=n.inspectFont,s=void 0===r?null:r;for(var o in z(this,t),this.compiledGlyphs=Object.create(null),e)this[o]=e[o];this.disableFontFace=!0===a,this._inspectFont=s}),[{key:"createNativeFontFace",value:function(){var t,e;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}},{key:"createFontFaceRule",value:function(){var t;if(!this.data||this.disableFontFace)return null;var e,n=me(this.data),i="url(data:".concat(this.mimetype,";base64,").concat(btoa(n),");");if(this.cssFontInfo){var a="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(a+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),e='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(a,"src:").concat(i,"}")}else e='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(i,"}");return null===(t=this._inspectFont)||void 0===t||t.call(this,this,i),e}},{key:"getPathGenerator",value:function(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];var n;try{n=t.get(this.loadedName+"_path_"+e)}catch(t){ae('getPathGenerator - ignoring character: "'.concat(t,'".'))}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[e]=function(t,e){};for(var i=[],a=function(t){switch(n[t++]){case Se:var e=L(n.slice(t,t+6),6),a=e[0],s=e[1],o=e[2],u=e[3],l=e[4],h=e[5];i.push((function(t){return t.bezierCurveTo(a,s,o,u,l,h)})),t+=6;break;case Me:var c=L(n.slice(t,t+2),2),d=c[0],f=c[1];i.push((function(t){return t.moveTo(d,f)})),t+=2;break;case Pe:var v=L(n.slice(t,t+2),2),p=v[0],g=v[1];i.push((function(t){return t.lineTo(p,g)})),t+=2;break;case Be:var m=L(n.slice(t,t+4),4),D=m[0],y=m[1],A=m[2],b=m[3];i.push((function(t){return t.quadraticCurveTo(D,y,A,b)})),t+=4;break;case Le:i.push((function(t){return t.restore()}));break;case Te:i.push((function(t){return t.save()}));break;case Ie:se(2===i.length,"Scale command is only valid at the third position.");break;case Re:var k=L(n.slice(t,t+6),6),E=k[0],w=k[1],C=k[2],F=k[3],_=k[4],x=k[5];i.push((function(t){return t.transform(E,w,C,F,_,x)})),t+=6;break;case Ne:var S=L(n.slice(t,t+2),2),M=S[0],P=S[1];i.push((function(t){return t.translate(M,P)})),t+=2}r=t},r=0,s=n.length;r<s;)a(r);return this.compiledGlyphs[e]=function(t,e){i[0](t),i[1](t),t.scale(e,-e);for(var n=2,a=i.length;n<a;n++)i[n](t)}}}])}();if(at){var Yr=Promise.withResolvers(),Qr=null;(function(){var t=_(C().mark((function t(){var e,n,i,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,import("fs");case 2:return e=t.sent,t.next=5,import("http");case 5:return n=t.sent,t.next=8,import("https");case 8:return i=t.sent,t.next=11,import("url");case 11:return a=t.sent,t.abrupt("return",new Map(Object.entries({fs:e,http:n,https:i,url:a,canvas:undefined,path2d:undefined})));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().then((function(t){Qr=t,Yr.resolve()}),(function(t){ae("loadPackages: ".concat(t)),Qr=new Map,Yr.resolve()}))}var $r=function(){return W((function t(){z(this,t)}),null,[{key:"promise",get:function(){return Yr.promise}},{key:"get",value:function(t){var e;return null===(e=Qr)||void 0===e?void 0:e.get(t)}}])}(),Jr=function(t){return $r.get("fs").promises.readFile(t).then((function(t){return new Uint8Array(t)}))},Zr=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,Oe),W(e)}(),ts=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,We),W(e,[{key:"_createCanvas",value:function(t,e){return $r.get("canvas").createCanvas(t,e)}}])}(),es=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,He),W(e,[{key:"_fetchData",value:function(t,e){return Jr(t).then((function(t){return{cMapData:t,compressionType:e}}))}}])}(),ns=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,ze),W(e,[{key:"_fetchData",value:function(t){return Jr(t)}}])}(),is="Fill",as="Stroke",rs="Shading";function ss(t,e){if(e){var n=e[2]-e[0],i=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],n,i),t.clip(a)}}var os=function(){return W((function t(){z(this,t),this.constructor===t&&re("Cannot initialize BaseShadingPattern.")}),[{key:"getPattern",value:function(){re("Abstract method `getPattern` called.")}}])}(),us=function(t){function e(t){var n;return z(this,e),(n=V(this,e))._type=t[1],n._bbox=t[2],n._colorStops=t[3],n._p0=t[4],n._p1=t[5],n._r0=t[6],n._r1=t[7],n.matrix=null,n}return q(e,os),W(e,[{key:"_createGradient",value:function(t){var e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var n,i=R(this._colorStops);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.addColorStop(a[0],a[1])}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"getPattern",value:function(t,e,n,i){var a;if(i===as||i===is){var r=e.current.getClippedPathBoundingBox(i,Ln(t))||[0,0,0,0],s=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,u=e.cachedCanvases.getCanvas("pattern",s,o,!0),l=u.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-r[0],-r[1]),n=ke.transform(n,[1,0,0,1,r[0],r[1]]),l.transform.apply(l,A(e.baseTransform)),this.matrix&&l.transform.apply(l,A(this.matrix)),ss(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),a=t.createPattern(u.canvas,"no-repeat");var h=new DOMMatrix(n);a.setTransform(h)}else ss(t,this._bbox),a=this._createGradient(t);return a}}])}();function ls(t,e,n,i,a,r,s,o){var u,l=e.coords,h=e.colors,c=t.data,d=4*t.width;l[n+1]>l[i+1]&&(u=n,n=i,i=u,u=r,r=s,s=u),l[i+1]>l[a+1]&&(u=i,i=a,a=u,u=s,s=o,o=u),l[n+1]>l[i+1]&&(u=n,n=i,i=u,u=r,r=s,s=u);var f=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY,p=(l[i]+e.offsetX)*e.scaleX,g=(l[i+1]+e.offsetY)*e.scaleY,m=(l[a]+e.offsetX)*e.scaleX,D=(l[a+1]+e.offsetY)*e.scaleY;if(!(v>=D))for(var y,A,b,k,E,w,C,F,_=h[r],x=h[r+1],S=h[r+2],M=h[s],P=h[s+1],B=h[s+2],L=h[o],T=h[o+1],I=h[o+2],R=Math.round(v),N=Math.round(D),O=R;O<=N;O++){if(O<g){var j=O<v?0:(v-O)/(v-g);y=f-(f-p)*j,A=_-(_-M)*j,b=x-(x-P)*j,k=S-(S-B)*j}else{var W=void 0;y=p-(p-m)*(W=O>D?1:g===D?0:(g-O)/(g-D)),A=M-(M-L)*W,b=P-(P-T)*W,k=B-(B-I)*W}var H=void 0;E=f-(f-m)*(H=O<v?0:O>D?1:(v-O)/(v-D)),w=_-(_-L)*H,C=x-(x-T)*H,F=S-(S-I)*H;for(var z=Math.round(Math.min(y,E)),V=Math.round(Math.max(y,E)),U=d*O+4*z,G=z;G<=V;G++)(H=(y-G)/(y-E))<0?H=0:H>1&&(H=1),c[U++]=A-(A-w)*H|0,c[U++]=b-(b-C)*H|0,c[U++]=k-(k-F)*H|0,c[U++]=255}}function hs(t,e,n){var i,a,r=e.coords,s=e.colors;switch(e.type){case"lattice":var o=e.verticesPerRow,u=Math.floor(r.length/o)-1,l=o-1;for(i=0;i<u;i++)for(var h=i*o,c=0;c<l;c++,h++)ls(t,n,r[h],r[h+1],r[h+o],s[h],s[h+1],s[h+o]),ls(t,n,r[h+o+1],r[h+1],r[h+o],s[h+o+1],s[h+1],s[h+o]);break;case"triangles":for(i=0,a=r.length;i<a;i+=3)ls(t,n,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}var cs=function(t){function e(t){var n;return z(this,e),(n=V(this,e))._coords=t[2],n._colors=t[3],n._figures=t[4],n._bounds=t[5],n._bbox=t[7],n._background=t[8],n.matrix=null,n}return q(e,os),W(e,[{key:"_createMeshCanvas",value:function(t,e,n){var i=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,s=Math.ceil(this._bounds[3])-a,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(s*t[1]*1.1)),3e3),l=r/o,h=s/u,c={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-a,scaleX:1/l,scaleY:1/h},d=o+4,f=u+4,v=n.getCanvas("mesh",d,f,!1),p=v.context,g=p.createImageData(o,u);if(e)for(var m=g.data,D=0,y=m.length;D<y;D+=4)m[D]=e[0],m[D+1]=e[1],m[D+2]=e[2],m[D+3]=255;var A,b=R(this._figures);try{for(b.s();!(A=b.n()).done;){hs(g,A.value,c)}}catch(t){b.e(t)}finally{b.f()}return p.putImageData(g,2,2),{canvas:v.canvas,offsetX:i-2*l,offsetY:a-2*h,scaleX:l,scaleY:h}}},{key:"getPattern",value:function(t,e,n,i){var a;if(ss(t,this._bbox),i===rs)a=ke.singularValueDecompose2dScale(Ln(t));else if(a=ke.singularValueDecompose2dScale(e.baseTransform),this.matrix){var r=ke.singularValueDecompose2dScale(this.matrix);a=[a[0]*r[0],a[1]*r[1]]}var s=this._createMeshCanvas(a,i===rs?null:this._background,e.cachedCanvases);return i!==rs&&(t.setTransform.apply(t,A(e.baseTransform)),this.matrix&&t.transform.apply(t,A(this.matrix))),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}}])}(),ds=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,os),W(e,[{key:"getPattern",value:function(){return"hotpink"}}])}();var fs=1,vs=2,ps=function(){function t(e,n,i,a,r){z(this,t),this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=n,this.ctx=i,this.canvasGraphicsFactory=a,this.baseTransform=r}return W(t,[{key:"createPatternCanvas",value:function(t){var e=this.operatorList,n=this.bbox,i=this.xstep,a=this.ystep,r=this.paintType,s=this.tilingType,o=this.color,u=this.canvasGraphicsFactory;ie("TilingType: "+s);var l=n[0],h=n[1],c=n[2],d=n[3],f=ke.singularValueDecompose2dScale(this.matrix),v=ke.singularValueDecompose2dScale(this.baseTransform),p=[f[0]*v[0],f[1]*v[1]],g=this.getSizeAndScale(i,this.ctx.canvas.width,p[0]),m=this.getSizeAndScale(a,this.ctx.canvas.height,p[1]),D=t.cachedCanvases.getCanvas("pattern",g.size,m.size,!0),y=D.context,A=u.createCanvasGraphics(y);A.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(A,r,o);var b=l,k=h,E=c,w=d;return l<0&&(b=0,E+=Math.abs(l)),h<0&&(k=0,w+=Math.abs(h)),y.translate(-g.scale*b,-m.scale*k),A.transform(g.scale,0,0,m.scale,0,0),y.save(),this.clipBbox(A,b,k,E,w),A.baseTransform=Ln(A.ctx),A.executeOperatorList(e),A.endDrawing(),{canvas:D.canvas,scaleX:g.scale,scaleY:m.scale,offsetX:b,offsetY:k}}},{key:"getSizeAndScale",value:function(e,n,i){e=Math.abs(e);var a=Math.max(t.MAX_PATTERN_SIZE,n),r=Math.ceil(e*i);return r>=a?r=a:i=r/e,{scale:i,size:r}}},{key:"clipBbox",value:function(t,e,n,i,a){var r=i-e,s=a-n;t.ctx.rect(e,n,r,s),t.current.updateRectMinMax(Ln(t.ctx),[e,n,i,a]),t.clip(),t.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(t,e,n){var i=t.ctx,a=t.current;switch(e){case fs:var r=this.ctx;i.fillStyle=r.fillStyle,i.strokeStyle=r.strokeStyle,a.fillColor=r.fillStyle,a.strokeColor=r.strokeStyle;break;case vs:var s=ke.makeHexColor(n[0],n[1],n[2]);i.fillStyle=s,i.strokeStyle=s,a.fillColor=s,a.strokeColor=s;break;default:throw new pe("Unsupported paint type: ".concat(e))}}},{key:"getPattern",value:function(t,e,n,i){var a=n;i!==rs&&(a=ke.transform(a,e.baseTransform),this.matrix&&(a=ke.transform(a,this.matrix)));var r=this.createPatternCanvas(e),s=new DOMMatrix(a);s=(s=s.translate(r.offsetX,r.offsetY)).scale(1/r.scaleX,1/r.scaleY);var o=t.createPattern(r.canvas,"repeat");return o.setTransform(s),o}}])}();function gs(t){var e=t.src,n=t.srcPos,i=void 0===n?0:n,a=t.dest,r=t.width,s=t.height,o=t.nonBlackColor,u=void 0===o?4294967295:o,l=t.inverseDecode,h=void 0!==l&&l,c=Ae.isLittleEndian?4278190080:255,d=L(h?[u,c]:[c,u],2),f=d[0],v=d[1],p=r>>3,g=7&r,m=e.length;a=new Uint32Array(a.buffer);for(var D=0,y=0;y<s;y++){for(var A=i+p;i<A;i++){var b=i<m?e[i]:255;a[D++]=128&b?v:f,a[D++]=64&b?v:f,a[D++]=32&b?v:f,a[D++]=16&b?v:f,a[D++]=8&b?v:f,a[D++]=4&b?v:f,a[D++]=2&b?v:f,a[D++]=1&b?v:f}if(0!==g)for(var k=i<m?e[i++]:255,E=0;E<g;E++)a[D++]=k&1<<7-E?v:f}return{srcPos:i,destPos:D}}w(ps,"MAX_PATTERN_SIZE",3e3);var ms=1e3,Ds=16;var ys=function(){return W((function t(e){z(this,t),this.canvasFactory=e,this.cache=Object.create(null)}),[{key:"getCanvas",value:function(t,e,n){var i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}},{key:"delete",value:function(t){delete this.cache[t]}},{key:"clear",value:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}])}();function As(t,e,n,i,a,r,s,o,u,l){var h=L(Ln(t),6),c=h[0],d=h[1],f=h[2],v=h[3],p=h[4],g=h[5];if(0===d&&0===f){var m=s*c+p,D=Math.round(m),y=o*v+g,A=Math.round(y),b=(s+u)*c+p,k=Math.abs(Math.round(b)-D)||1,E=(o+l)*v+g,w=Math.abs(Math.round(E)-A)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(v),D,A),t.drawImage(e,n,i,a,r,0,0,k,w),t.setTransform(c,d,f,v,p,g),[k,w]}if(0===c&&0===v){var C=o*f+p,F=Math.round(C),_=s*d+g,x=Math.round(_),S=(o+l)*f+p,M=Math.abs(Math.round(S)-F)||1,P=(s+u)*d+g,B=Math.abs(Math.round(P)-x)||1;return t.setTransform(0,Math.sign(d),Math.sign(f),0,F,x),t.drawImage(e,n,i,a,r,0,0,B,M),t.setTransform(c,d,f,v,p,g),[B,M]}return t.drawImage(e,n,i,a,r,s,o,u,l),[Math.hypot(c,d)*u,Math.hypot(f,v)*l]}var bs=function(){return W((function t(e,n){z(this,t),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=rt,this.textMatrixScale=1,this.fontMatrix=st,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=At,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,n])}),[{key:"clone",value:function(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}},{key:"setCurrentPoint",value:function(t,e){this.x=t,this.y=e}},{key:"updatePathMinMax",value:function(t,e,n){var i=L(ke.applyTransform([e,n],t),2);e=i[0],n=i[1],this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}},{key:"updateRectMinMax",value:function(t,e){var n=ke.applyTransform(e,t),i=ke.applyTransform(e.slice(2),t),a=ke.applyTransform([e[0],e[3]],t),r=ke.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],a[0],r[0]),this.minY=Math.min(this.minY,n[1],i[1],a[1],r[1]),this.maxX=Math.max(this.maxX,n[0],i[0],a[0],r[0]),this.maxY=Math.max(this.maxY,n[1],i[1],a[1],r[1])}},{key:"updateScalingPathMinMax",value:function(t,e){ke.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}},{key:"updateCurvePathMinMax",value:function(t,e,n,i,a,r,s,o,u,l){var h=ke.bezierBoundingBox(e,n,i,a,r,s,o,u,l);l||this.updateRectMinMax(t,h)}},{key:"getPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:is,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[this.minX,this.minY,this.maxX,this.maxY];if(t===as){e||re("Stroke bounding box must include transform.");var i=ke.singularValueDecompose2dScale(e),a=i[0]*this.lineWidth/2,r=i[1]*this.lineWidth/2;n[0]-=a,n[1]-=r,n[2]+=a,n[3]+=r}return n}},{key:"updateClipFromPath",value:function(){var t=ke.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:is,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ke.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}])}();function ks(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var n,i,a,r,s,o=e.height,u=e.width,l=o%Ds,h=(o-l)/Ds,c=0===l?h:h+1,d=t.createImageData(u,Ds),f=0,v=e.data,p=d.data;if(e.kind===Ft.GRAYSCALE_1BPP){var g=v.byteLength,m=new Uint32Array(p.buffer,0,p.byteLength>>2),D=m.length,y=u+7>>3,A=4294967295,b=Ae.isLittleEndian?4278190080:255;for(i=0;i<c;i++){for(r=i<h?Ds:l,n=0,a=0;a<r;a++){for(var k=g-f,E=0,w=k>y?u:8*k-7,C=-8&w,F=0,_=0;E<C;E+=8)_=v[f++],m[n++]=128&_?A:b,m[n++]=64&_?A:b,m[n++]=32&_?A:b,m[n++]=16&_?A:b,m[n++]=8&_?A:b,m[n++]=4&_?A:b,m[n++]=2&_?A:b,m[n++]=1&_?A:b;for(;E<w;E++)0===F&&(_=v[f++],F=128),m[n++]=_&F?A:b,F>>=1}for(;n<D;)m[n++]=0;t.putImageData(d,0,i*Ds)}}else if(e.kind===Ft.RGBA_32BPP){for(a=0,s=u*Ds*4,i=0;i<h;i++)p.set(v.subarray(f,f+s)),f+=s,t.putImageData(d,0,a),a+=Ds;i<c&&(s=u*l*4,p.set(v.subarray(f,f+s)),t.putImageData(d,0,a))}else{if(e.kind!==Ft.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(s=u*(r=Ds),i=0;i<c;i++){for(i>=h&&(s=u*(r=l)),n=0,a=s;a--;)p[n++]=v[f++],p[n++]=v[f++],p[n++]=v[f++],p[n++]=255;t.putImageData(d,0,i*Ds)}}}}function Es(t,e){if(e.bitmap)t.drawImage(e.bitmap,0,0);else for(var n=e.height,i=e.width,a=n%Ds,r=(n-a)/Ds,s=0===a?r:r+1,o=t.createImageData(i,Ds),u=0,l=e.data,h=o.data,c=0;c<s;c++){u=gs({src:l,srcPos:u,dest:h,width:i,height:c<r?Ds:a,nonBlackColor:0}).srcPos,t.putImageData(o,0,c*Ds)}}function ws(t,e){for(var n=0,i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];n<i.length;n++){var a=i[n];void 0!==t[a]&&(e[a]=t[a])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Cs(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!at){var e=t.filter;"none"!==e&&""!==e&&(t.filter="none")}}function Fs(t,e){if(e)return!0;var n=ke.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);var i=Math.fround((globalThis.devicePixelRatio||1)*Ge.PDF_TO_CSS_UNITS);return n[0]<=i&&n[1]<=i}var _s=["butt","round","square"],xs=["miter","round","bevel"],Ss={},Ms={},Ps=new WeakSet,Bs=function(){function t(e,n,i,a,r,s,o,u){var l=s.optionalContentConfig,h=s.markedContentStack,c=void 0===h?null:h;z(this,t),k(this,Ps),this.ctx=e,this.current=new bs(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=a,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new ys(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return W(t,[{key:"getObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}},{key:"beginDrawing",value:function(t){var e,n,i=t.transform,a=t.viewport,r=t.transparency,s=void 0!==r&&r,o=t.background,u=void 0===o?null:o,l=this.ctx.canvas.width,h=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=u||"#ffffff",this.ctx.fillRect(0,0,l,h),this.ctx.fillStyle=c,s){var d,f=this.cachedCanvases.getCanvas("transparent",l,h);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),(d=this.ctx).transform.apply(d,A(Ln(this.compositeCtx)))}(this.ctx.save(),Cs(this.ctx),i)&&((n=this.ctx).transform.apply(n,A(i)),this.outputScaleX=i[0],this.outputScaleY=i[0]);(e=this.ctx).transform.apply(e,A(a.transform)),this.viewportScale=a.scale,this.baseTransform=Ln(this.ctx)}},{key:"executeOperatorList",value:function(t,e,n,i){var a=t.argsArray,r=t.fnArray,s=e||0,o=a.length;if(o===s)return s;for(var u,l=o-s>10&&"function"==typeof n,h=l?Date.now()+15:0,c=0,d=this.commonObjs,f=this.objs;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,n),s;if((u=r[s])!==Jt.dependency)this[u].apply(this,a[s]);else{var v,p=R(a[s]);try{for(p.s();!(v=p.n()).done;){var g=v.value,m=g.startsWith("g_")?d:f;if(!m.has(g))return m.get(g,n),s}}catch(t){p.e(t)}finally{p.f()}}if(++s===o)return s;if(l&&++c>10){if(Date.now()>h)return n(),s;c=0}}}},{key:"endDrawing",value:function(){B(Ps,this,Ls).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var t,e=R(this._cachedBitmapsMap.values());try{for(e.s();!(t=e.n()).done;){var n,i=t.value,a=R(i.values());try{for(a.s();!(n=a.n()).done;){var r=n.value;"undefined"!=typeof HTMLCanvasElement&&r instanceof HTMLCanvasElement&&(r.width=r.height=0)}}catch(t){a.e(t)}finally{a.f()}i.clear()}}catch(t){e.e(t)}finally{e.f()}this._cachedBitmapsMap.clear(),B(Ps,this,Ts).call(this)}},{key:"_scaleImage",value:function(t,e){for(var n,i,a=t.width,r=t.height,s=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),u=a,l=r,h="prescale1";s>2&&u>1||o>2&&l>1;){var c=u,d=l;s>2&&u>1&&(s/=u/(c=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2))),o>2&&l>1&&(o/=l/(d=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2)),(i=(n=this.cachedCanvases.getCanvas(h,c,d)).context).clearRect(0,0,c,d),i.drawImage(t,0,0,u,l,0,0,c,d),t=n.canvas,u=c,l=d,h="prescale1"===h?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:l}}},{key:"_createMaskCanvas",value:function(t){var e,n,i,a,r=this.ctx,s=t.width,o=t.height,u=this.current.fillColor,l=this.current.patternFill,h=Ln(r);if((t.bitmap||t.data)&&t.count>1){var c=t.bitmap||t.data.buffer;n=JSON.stringify(l?h:[h.slice(0,4),u]),(e=this._cachedBitmapsMap.get(c))||(e=new Map,this._cachedBitmapsMap.set(c,e));var d=e.get(n);if(d&&!l)return{canvas:d,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])};i=d}i||Es((a=this.cachedCanvases.getCanvas("maskCanvas",s,o)).context,t);var f=ke.transform(h,[1/s,0,0,-1/o,0,0]);f=ke.transform(f,[1,0,0,1,0,-o]);var v=L(ke.getAxialAlignedBoundingBox([0,0,s,o],f),4),p=v[0],g=v[1],m=v[2],D=v[3],y=Math.round(m-p)||1,b=Math.round(D-g)||1,k=this.cachedCanvases.getCanvas("fillCanvas",y,b),E=k.context,w=p,C=g;E.translate(-w,-C),E.transform.apply(E,A(f)),i||(i=(i=this._scaleImage(a.canvas,Tn(E))).img,e&&l&&e.set(n,i)),E.imageSmoothingEnabled=Fs(Ln(E),t.interpolate),As(E,i,0,0,i.width,i.height,0,0,s,o),E.globalCompositeOperation="source-in";var F=ke.transform(Tn(E),[1,0,0,1,-w,-C]);return E.fillStyle=l?u.getPattern(r,this,F,is):u,E.fillRect(0,0,s,o),e&&!l&&(this.cachedCanvases.delete("fillCanvas"),e.set(n,k.canvas)),{canvas:k.canvas,offsetX:Math.round(w),offsetY:Math.round(C)}}},{key:"setLineWidth",value:function(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}},{key:"setLineCap",value:function(t){this.ctx.lineCap=_s[t]}},{key:"setLineJoin",value:function(t){this.ctx.lineJoin=xs[t]}},{key:"setMiterLimit",value:function(t){this.ctx.miterLimit=t}},{key:"setDash",value:function(t,e){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}},{key:"setRenderingIntent",value:function(t){}},{key:"setFlatness",value:function(t){}},{key:"setGState",value:function(t){var e,n=R(t);try{for(n.s();!(e=n.n()).done;){var i=L(e.value,2),a=i[0],r=i[1];switch(a){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r)}}}catch(t){n.e(t)}finally{n.f()}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;var a=this.ctx;a.setTransform.apply(a,A(Ln(this.suspendedCtx))),ws(this.suspendedCtx,a),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=function(){t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,a,r,s){e.transform(t,n,i,a,r,s),this.__originalTransform(t,n,i,a,r,s)},t.setTransform=function(t,n,i,a,r,s){e.setTransform(t,n,i,a,r,s),this.__originalSetTransform(t,n,i,a,r,s)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,a,r,s){e.bezierCurveTo(t,n,i,a,r,s),this.__originalBezierCurveTo(t,n,i,a,r,s)},t.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ws(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(t){if(this.current.activeSMask){t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"composeSMask",value:function(t,e,n,i){var a=i[0],r=i[1],s=i[2]-a,o=i[3]-r;0!==s&&0!==o&&(this.genericComposeSMask(e.context,n,s,o,e.subtype,e.backdrop,e.transferMap,a,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}},{key:"genericComposeSMask",value:function(t,e,n,i,a,r,s,o,u,l,h){var c=t.canvas,d=o-l,f=u-h;if(r)if(d<0||f<0||d+n>c.width||f+i>c.height){var v=this.cachedCanvases.getCanvas("maskExtension",n,i),p=v.context;p.drawImage(c,-d,-f),r.some((function(t){return 0!==t}))&&(p.globalCompositeOperation="destination-atop",p.fillStyle=ke.makeHexColor.apply(ke,A(r)),p.fillRect(0,0,n,i),p.globalCompositeOperation="source-over"),c=v.canvas,d=f=0}else if(r.some((function(t){return 0!==t}))){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);var g=new Path2D;g.rect(d,f,n,i),t.clip(g),t.globalCompositeOperation="destination-atop",t.fillStyle=ke.makeHexColor.apply(ke,A(r)),t.fillRect(d,f,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===a&&s?e.filter=this.filterFactory.addAlphaFilter(s):"Luminosity"===a&&(e.filter=this.filterFactory.addLuminosityFilter(s));var m=new Path2D;m.rect(o,u,n,i),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(c,d,f,n,i,o,u,n,i),e.restore()}},{key:"save",value:function(){this.inSMaskMode?(ws(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ws(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(t,e,n,i,a,r){this.ctx.transform(t,e,n,i,a,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(t,e,n){for(var i,a,r=this.ctx,s=this.current,o=s.x,u=s.y,l=Ln(r),h=0===l[0]&&0===l[3]||0===l[1]&&0===l[2],c=h?n.slice(0):null,d=0,f=0,v=t.length;d<v;d++)switch(0|t[d]){case Jt.rectangle:o=e[f++],u=e[f++];var p=e[f++],g=e[f++],m=o+p,D=u+g;r.moveTo(o,u),0===p||0===g?r.lineTo(m,D):(r.lineTo(m,u),r.lineTo(m,D),r.lineTo(o,D)),h||s.updateRectMinMax(l,[o,u,m,D]),r.closePath();break;case Jt.moveTo:o=e[f++],u=e[f++],r.moveTo(o,u),h||s.updatePathMinMax(l,o,u);break;case Jt.lineTo:o=e[f++],u=e[f++],r.lineTo(o,u),h||s.updatePathMinMax(l,o,u);break;case Jt.curveTo:i=o,a=u,o=e[f+4],u=e[f+5],r.bezierCurveTo(e[f],e[f+1],e[f+2],e[f+3],o,u),s.updateCurvePathMinMax(l,i,a,e[f],e[f+1],e[f+2],e[f+3],o,u,c),f+=6;break;case Jt.curveTo2:i=o,a=u,r.bezierCurveTo(o,u,e[f],e[f+1],e[f+2],e[f+3]),s.updateCurvePathMinMax(l,i,a,o,u,e[f],e[f+1],e[f+2],e[f+3],c),o=e[f+2],u=e[f+3],f+=4;break;case Jt.curveTo3:i=o,a=u,o=e[f+2],u=e[f+3],r.bezierCurveTo(e[f],e[f+1],o,u,o,u),s.updateCurvePathMinMax(l,i,a,e[f],e[f+1],o,u,o,u,c),f+=4;break;case Jt.closePath:r.closePath()}h&&s.updateScalingPathMinMax(l,c),s.setCurrentPoint(o,u)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===K(n)&&null!=n&&n.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,Tn(e),as),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.ctx,n=this.current.fillColor,i=!1;this.current.patternFill&&(e.save(),e.fillStyle=n.getPattern(e,this,Tn(e),is),i=!0);var a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),i&&e.restore(),t&&this.consumePath(a)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=Ss}},{key:"eoClip",value:function(){this.pendingClip=Ms}},{key:"beginText",value:function(){this.current.textMatrix=rt,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();var n,i=R(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.setTransform.apply(e,A(a.transform)),e.translate(a.x,a.y),a.addToPath(e,a.fontSize)}}catch(t){i.e(t)}finally{i.f()}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setFont",value:function(t,e){var n,i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=i.fontMatrix||st,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||ae("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=e,!i.isType3Font){var r=i.loadedName||"sans-serif",s=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(r,'", ').concat(i.fallbackName),o="normal";i.black?o="900":i.bold&&(o="bold");var u=i.italic?"italic":"normal",l=e;e<16?l=16:e>100&&(l=100),this.current.fontSizeScale=e/l,this.ctx.font="".concat(u," ").concat(o," ").concat(l,"px ").concat(s)}}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"moveText",value:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}},{key:"setLeadingMoveText",value:function(t,e){this.setLeading(-e),this.moveText(t,e)}},{key:"setTextMatrix",value:function(t,e,n,i,a,r){this.current.textMatrix=[t,e,n,i,a,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(t,e,n,i){var a,r=this.ctx,s=this.current,o=s.font,u=s.textRenderingMode,l=s.fontSize/s.fontSizeScale,h=u&wt,c=!!(u&Ct),d=s.patternFill&&!o.missingFile;((o.disableFontFace||c||d)&&(a=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||d?(r.save(),r.translate(e,n),r.beginPath(),a(r,l),i&&r.setTransform.apply(r,A(i)),h!==At&&h!==kt||r.fill(),h!==bt&&h!==kt||r.stroke(),r.restore()):(h!==At&&h!==kt||r.fillText(t,e,n),h!==bt&&h!==kt||r.strokeText(t,e,n)),c)&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ln(r),x:e,y:n,fontSize:l,addToPath:a})}},{key:"isFontSubpixelAAEnabled",get:function(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,n=!1,i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return ue(this,"isFontSubpixelAAEnabled",n)}},{key:"showText",value:function(t){var e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);var i=e.fontSize;if(0!==i){var a,r=this.ctx,s=e.fontSizeScale,o=e.charSpacing,u=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,c=t.length,d=n.vertical,f=d?1:-1,v=n.defaultVMetrics,p=i*e.fontMatrix[0],g=e.textRenderingMode===At&&!n.disableFontFace&&!e.patternFill;if(r.save(),r.transform.apply(r,A(e.textMatrix)),r.translate(e.x,e.y+e.textRise),l>0?r.scale(h,-1):r.scale(h,1),e.patternFill){r.save();var m=e.fillColor.getPattern(r,this,Tn(r),is);a=Ln(r),r.restore(),r.fillStyle=m}var D=e.lineWidth,y=e.textMatrixScale;if(0===y||0===D){var b=e.textRenderingMode&wt;b!==bt&&b!==kt||(D=this.getSinglePixelWidth())}else D/=y;if(1!==s&&(r.scale(s,s),D/=s),r.lineWidth=D,n.isInvalidPDFjsFont){var k,E=[],w=0,C=R(t);try{for(C.s();!(k=C.n()).done;){var F=k.value;E.push(F.unicode),w+=F.width}}catch(t){C.e(t)}finally{C.f()}return r.fillText(E.join(""),0,0),e.x+=w*p*h,r.restore(),void this.compose()}var _,x=0;for(_=0;_<c;++_){var S=t[_];if("number"!=typeof S){var M=!1,P=(S.isSpace?u:0)+o,B=S.fontChar,L=S.accent,T=void 0,I=void 0,N=S.width;if(d){var O=S.vmetric||v,j=-(S.vmetric?O[1]:.5*N)*p,W=O[2]*p;N=O?-O[0]:N,T=j/s,I=(x+W)/s}else T=x/s,I=0;if(n.remeasure&&N>0){var H=1e3*r.measureText(B).width/i*s;if(N<H&&this.isFontSubpixelAAEnabled){var z=N/H;M=!0,r.save(),r.scale(z,1),T/=z}else N!==H&&(T+=(N-H)/2e3*i/s)}if(this.contentVisible&&(S.isInFont||n.missingFile))if(g&&!L)r.fillText(B,T,I);else if(this.paintChar(B,T,I,a),L){var V=T+i*L.offset.x/s,U=I-i*L.offset.y/s;this.paintChar(L.fontChar,V,U,a)}x+=d?N*p-P*l:N*p+P*l,M&&r.restore()}else x+=f*S*i/1e3}d?e.y-=x:e.x+=x*h,r.restore(),this.compose()}}},{key:"showType3Text",value:function(t){var e,n,i,a,r=this.ctx,s=this.current,o=s.font,u=s.fontSize,l=s.fontDirection,h=o.vertical?1:-1,c=s.charSpacing,d=s.wordSpacing,f=s.textHScale*l,v=s.fontMatrix||st,p=t.length;if(!(s.textRenderingMode===Et)&&0!==u){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform.apply(r,A(s.textMatrix)),r.translate(s.x,s.y),r.scale(f,l),e=0;e<p;++e)if("number"!=typeof(n=t[e])){var g=(n.isSpace?d:0)+c,m=o.charProcOperatorList[n.operatorListId];if(m)this.contentVisible&&(this.processingType3=n,this.save(),r.scale(u,u),r.transform.apply(r,A(v)),this.executeOperatorList(m),this.restore()),i=ke.applyTransform([n.width,0],v)[0]*u+g,r.translate(i,0),s.x+=i*f;else ae('Type3 character "'.concat(n.operatorListId,'" is not available.'))}else a=h*n*u/1e3,this.ctx.translate(a,0),s.x+=a*f;r.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(t,e){}},{key:"setCharWidthAndBounds",value:function(t,e,n,i,a,r){this.ctx.rect(n,i,a-n,r-i),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(e){var n,i=this;if("TilingPattern"===e[0]){var a=e[1],r=this.baseTransform||Ln(this.ctx),s={createCanvasGraphics:function(e){return new t(e,i.commonObjs,i.objs,i.canvasFactory,i.filterFactory,{optionalContentConfig:i.optionalContentConfig,markedContentStack:i.markedContentStack})}};n=new ps(e,a,this.ctx,s,r)}else n=this._getPattern(e[1],e[2]);return n}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=ke.makeHexColor(t,e,n)}},{key:"setStrokeTransparent",value:function(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}},{key:"setFillRGBColor",value:function(t,e,n){this.ctx.fillStyle=this.current.fillColor=ke.makeHexColor(t,e,n),this.current.patternFill=!1}},{key:"setFillTransparent",value:function(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}},{key:"_getPattern",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new us(t);case"Mesh":return new cs(t);case"Dummy":return new ds}throw new Error("Unknown IR type: ".concat(t[0]))}(this.getObject(t)),this.cachedPatterns.set(t,e)),n&&(e.matrix=n),e}},{key:"shadingFill",value:function(t){if(this.contentVisible){var e=this.ctx;this.save();var n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Tn(e),rs);var i=Tn(e);if(i){var a=e.canvas,r=a.width,s=a.height,o=L(ke.getAxialAlignedBoundingBox([0,0,r,s],i),4),u=o[0],l=o[1],h=o[2],c=o[3];this.ctx.fillRect(u,l,h-u,c-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){re("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){re("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform.apply(this,A(t)),this.baseTransform=Ln(this.ctx),e)){var n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(Ln(this.ctx),e),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var e=this.ctx;t.isolated||ie("TODO: Support non-isolated groups."),t.knockout&&ae("Knockout groups not supported.");var n=Ln(e);if(t.matrix&&e.transform.apply(e,A(t.matrix)),!t.bbox)throw new Error("Bounding box is required.");var i=ke.getAxialAlignedBoundingBox(t.bbox,Ln(e)),a=[0,0,e.canvas.width,e.canvas.height];i=ke.intersect(i,a)||[0,0,0,0];var r=Math.floor(i[0]),s=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-r,1),u=Math.max(Math.ceil(i[3])-s,1);this.current.startNewPathAndClipBox([0,0,o,u]);var l="groupAt"+this.groupLevel;t.smask&&(l+="_smask_"+this.smaskCounter++%2);var h=this.cachedCanvases.getCanvas(l,o,u),c=h.context;c.translate(-r,-s),c.transform.apply(c,A(n)),t.smask?this.smaskStack.push({canvas:h.canvas,context:c,offsetX:r,offsetY:s,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,s),e.save()),ws(e,c),this.ctx=c,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}}},{key:"endGroup",value:function(t){if(this.contentVisible){this.groupLevel--;var e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{var i;this.ctx.restore();var a=Ln(this.ctx);this.restore(),this.ctx.save(),(i=this.ctx).setTransform.apply(i,A(a));var r=ke.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}}},{key:"beginAnnotation",value:function(t,e,n,i,a){var r;(B(Ps,this,Ls).call(this),Cs(this.ctx),this.ctx.save(),this.save(),this.baseTransform)&&(r=this.ctx).setTransform.apply(r,A(this.baseTransform));if(e){var s=e[2]-e[0],o=e[3]-e[1];if(a&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=s,e[3]=o;var u=L(ke.singularValueDecompose2dScale(Ln(this.ctx)),2),l=u[0],h=u[1],c=this.viewportScale,d=Math.ceil(s*this.outputScaleX*c),f=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,f);var v=this.annotationCanvas,p=v.canvas,g=v.context;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-h,0,o*h),Cs(this.ctx)}else Cs(this.ctx),this.ctx.rect(e[0],e[1],s,o),this.ctx.clip(),this.endPath()}this.current=new bs(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,A(n)),this.transform.apply(this,A(i))}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx.restore(),B(Ps,this,Ts).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(t){if(this.contentVisible){var e=t.count;(t=this.getObject(t.data,t)).count=e;var n=this.ctx,i=this.processingType3;if(i&&(void 0===i.compiled&&(i.compiled=function(t){var e=t.width,n=t.height;if(e>ms||n>ms)return null;var i,a,r,s,o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=e+1,l=new Uint8Array(u*(n+1)),h=e+7&-8,c=new Uint8Array(h*n),d=0,f=R(t.data);try{for(f.s();!(s=f.n()).done;)for(var v=s.value,p=128;p>0;)c[d++]=v&p?0:255,p>>=1}catch(t){f.e(t)}finally{f.f()}var g=0;for(0!==c[d=0]&&(l[0]=1,++g),a=1;a<e;a++)c[d]!==c[d+1]&&(l[a]=c[d]?2:1,++g),d++;for(0!==c[d]&&(l[a]=2,++g),i=1;i<n;i++){r=i*u,c[(d=i*h)-h]!==c[d]&&(l[r]=c[d]?1:8,++g);var m=(c[d]?4:0)+(c[d-h]?8:0);for(a=1;a<e;a++)o[m=(m>>2)+(c[d+1]?4:0)+(c[d-h+1]?8:0)]&&(l[r+a]=o[m],++g),d++;if(c[d-h]!==c[d]&&(l[r+a]=c[d]?2:4,++g),g>1e3)return null}for(r=i*u,0!==c[d=h*(n-1)]&&(l[r]=8,++g),a=1;a<e;a++)c[d]!==c[d+1]&&(l[r+a]=c[d]?4:8,++g),d++;if(0!==c[d]&&(l[r+a]=4,++g),g>1e3)return null;var D=new Int32Array([0,u,-1,0,-u,0,0,0,1]),y=new Path2D;for(i=0;g&&i<=n;i++){for(var A=i*u,b=A+e;A<b&&!l[A];)A++;if(A!==b){y.moveTo(A%u,i);var k=A,E=l[A];do{var w=D[E];do{A+=w}while(!l[A]);var C=l[A];5!==C&&10!==C?(E=C,l[A]=0):(E=C&51*E>>4,l[A]&=E>>2|E<<2),y.lineTo(A%u,A/u|0),l[A]||--g}while(k!==A);--i}}return c=null,l=null,function(t){t.save(),t.scale(1/e,-1/n),t.translate(0,-n),t.fill(y),t.beginPath(),t.restore()}}(t)),i.compiled))i.compiled(n);else{var a=this._createMaskCanvas(t),r=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,a.offsetX,a.offsetY),n.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){t=this.getObject(t.data,t);var s=this.ctx;s.save();var o=Ln(s);s.transform(e,n,i,a,0,0);var u=this._createMaskCanvas(t);s.setTransform(1,0,0,1,u.offsetX-o[4],u.offsetY-o[5]);for(var l=0,h=r.length;l<h;l+=2){var c=ke.transform(o,[e,n,i,a,r[l],r[l+1]]),d=L(ke.applyTransform([0,0],c),2),f=d[0],v=d[1];s.drawImage(u.canvas,f,v)}s.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(t){if(this.contentVisible){var e,n=this.ctx,i=this.current.fillColor,a=this.current.patternFill,r=R(t);try{for(r.s();!(e=r.n()).done;){var s=e.value,o=s.data,u=s.width,l=s.height,h=s.transform,c=this.cachedCanvases.getCanvas("maskCanvas",u,l),d=c.context;d.save(),Es(d,this.getObject(o,s)),d.globalCompositeOperation="source-in",d.fillStyle=a?i.getPattern(d,this,Tn(n),is):i,d.fillRect(0,0,u,l),d.restore(),n.save(),n.transform.apply(n,A(h)),n.scale(1,-1),As(n,c.canvas,0,0,u,l,0,-1,1,1),n.restore()}}catch(t){r.e(t)}finally{r.f()}this.compose()}}},{key:"paintImageXObject",value:function(t){if(this.contentVisible){var e=this.getObject(t);e?this.paintInlineImageXObject(e):ae("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(t,e,n,i){if(this.contentVisible){var a=this.getObject(t);if(a){for(var r=a.width,s=a.height,o=[],u=0,l=i.length;u<l;u+=2)o.push({transform:[e,0,0,n,i[u],i[u+1]],x:0,y:0,w:r,h:s});this.paintInlineImageXObjectGroup(a,o)}else ae("Dependent image isn't ready yet")}}},{key:"applyTransferMapsToCanvas",value:function(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}},{key:"applyTransferMapsToBitmap",value:function(t){if("none"===this.current.transferMaps)return t.bitmap;var e=t.bitmap,n=t.width,i=t.height,a=this.cachedCanvases.getCanvas("inlineImage",n,i),r=a.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",a.canvas}},{key:"paintInlineImageXObject",value:function(t){if(this.contentVisible){var e,n=t.width,i=t.height,a=this.ctx;if(this.save(),!at){var r=a.filter;"none"!==r&&""!==r&&(a.filter="none")}if(a.scale(1/n,-1/i),t.bitmap)e=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)e=t;else{var s=this.cachedCanvases.getCanvas("inlineImage",n,i).context;ks(s,t),e=this.applyTransferMapsToCanvas(s)}var o=this._scaleImage(e,Tn(a));a.imageSmoothingEnabled=Fs(Ln(a),t.interpolate),As(a,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,n,i),this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(t,e){if(this.contentVisible){var n,i=this.ctx;if(t.bitmap)n=t.bitmap;else{var a=t.width,r=t.height,s=this.cachedCanvases.getCanvas("inlineImage",a,r).context;ks(s,t),n=this.applyTransferMapsToCanvas(s)}var o,u=R(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;i.save(),i.transform.apply(i,A(l.transform)),i.scale(1,-1),As(i,n,l.x,l.y,l.w,l.h,0,-1,1,1),i.restore()}}catch(t){u.e(t)}finally{u.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(t){}},{key:"markPointProps",value:function(t,e){}},{key:"beginMarkedContent",value:function(t){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(t){var e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);var n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Ms?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var t=Ln(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{var e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(-1===this._cachedScaleForStroking[0]){var t,e,n=this.current.lineWidth,i=this.ctx.getTransform(),a=i.a,r=i.b,s=i.c,o=i.d;if(0===r&&0===s){var u=Math.abs(a),l=Math.abs(o);if(u===l)if(0===n)t=e=1/u;else{var h=u*n;t=e=h<1?1/h:1}else if(0===n)t=1/u,e=1/l;else{var c=u*n,d=l*n;t=c<1?1/c:1,e=d<1?1/d:1}}else{var f=Math.abs(a*o-r*s),v=Math.hypot(a,r),p=Math.hypot(s,o);if(0===n)t=p/f,e=v/f;else{var g=n*f;t=p>g?p/g:1,e=v>g?v/g:1}}this._cachedScaleForStroking[0]=t,this._cachedScaleForStroking[1]=e}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(t){var e=this.ctx,n=this.current.lineWidth,i=L(this.getScaleForStroking(),2),a=i[0],r=i[1];if(e.lineWidth=n||1,1!==a||1!==r){var s=e.getLineDash();if(t&&e.save(),e.scale(a,r),s.length>0){var o=Math.max(a,r);e.setLineDash(s.map((function(t){return t/o}))),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}else e.stroke()}},{key:"isContentVisible",value:function(){for(var t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}])}();function Ls(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Ts(){if(this.pageColors){var t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){var e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}for(var Is in Jt)void 0!==Bs.prototype[Is]&&(Bs.prototype[Jt[Is]]=Bs.prototype[Is]);var Rs=function(){function t(){z(this,t)}return W(t,null,[{key:"workerPort",get:function(){return B(t,this,Ns)._},set:function(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Ns._=B(t,this,e)}},{key:"workerSrc",get:function(){return B(t,this,Os)._},set:function(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");Os._=B(t,this,e)}}])}(),Ns={_:null},Os={_:""},js=1,Ws=2,Hs={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function zs(t){switch(t instanceof Error||"object"===K(t)&&null!==t||re('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new ge(t.message);case"MissingPDFException":return new fe(t.message);case"PasswordException":return new he(t.message,t.code);case"UnexpectedResponseException":return new ve(t.message,t.status);case"UnknownErrorException":return new ce(t.message,t.details);default:return new ce(t.message,t.toString())}}var Vs=new WeakSet,Us=function(){return W((function t(e,n,i){var a=this;z(this,t),k(this,Vs),this.sourceName=e,this.targetName=n,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===a.sourceName)if(e.stream)B(Vs,a,qs).call(a,e);else if(e.callback){var n=e.callbackId,r=a.callbackCapabilities[n];if(!r)throw new Error("Cannot resolve callback ".concat(n));if(delete a.callbackCapabilities[n],e.callback===js)r.resolve(e.data);else{if(e.callback!==Ws)throw new Error("Unexpected callback case");r.reject(zs(e.reason))}}else{var s=a.actionHandler[e.action];if(!s)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){var o=a.sourceName,u=e.sourceName;new Promise((function(t){t(s(e.data))})).then((function(t){i.postMessage({sourceName:o,targetName:u,callback:js,callbackId:e.callbackId,data:t})}),(function(t){i.postMessage({sourceName:o,targetName:u,callback:Ws,callbackId:e.callbackId,reason:zs(t)})}))}else e.streamId?B(Vs,a,Gs).call(a,e):s(e.data)}},i.addEventListener("message",this._onComObjOnMessage)}),[{key:"on",value:function(t,e){var n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}},{key:"send",value:function(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}},{key:"sendWithPromise",value:function(t,e,n){var i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(t){a.reject(t)}return a.promise}},{key:"sendWithStream",value:function(t,e,n,i){var a=this,r=this.streamId++,s=this.sourceName,o=this.targetName,u=this.comObj;return new ReadableStream({start:function(n){var l=Promise.withResolvers();return a.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:o,action:t,streamId:r,data:e,desiredSize:n.desiredSize},i),l.promise},pull:function(t){var e=Promise.withResolvers();return a.streamControllers[r].pullCall=e,u.postMessage({sourceName:s,targetName:o,stream:Hs.PULL,streamId:r,desiredSize:t.desiredSize}),e.promise},cancel:function(t){se(t instanceof Error,"cancel must have a valid reason");var e=Promise.withResolvers();return a.streamControllers[r].cancelCall=e,a.streamControllers[r].isClosed=!0,u.postMessage({sourceName:s,targetName:o,stream:Hs.CANCEL,streamId:r,reason:zs(t)}),e.promise}},n)}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}])}();function Gs(t){var e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,r=this,s=this.actionHandler[t.action],o={enqueue:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Hs.ENQUEUE,streamId:e,chunk:t},s)}},close:function(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Hs.CLOSE,streamId:e}),delete r.streamSinks[e])},error:function(t){se(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Hs.ERROR,streamId:e,reason:zs(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,new Promise((function(e){e(s(t.data,o))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:Hs.START_COMPLETE,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:n,targetName:i,stream:Hs.START_COMPLETE,streamId:e,reason:zs(t)})}))}function qs(t){var e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,r=this.streamControllers[e],s=this.streamSinks[e];switch(t.stream){case Hs.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(zs(t.reason));break;case Hs.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(zs(t.reason));break;case Hs.PULL:if(!s){a.postMessage({sourceName:n,targetName:i,stream:Hs.PULL_COMPLETE,streamId:e,success:!0});break}s.desiredSize<=0&&t.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=t.desiredSize,new Promise((function(t){var e;t(null===(e=s.onPull)||void 0===e?void 0:e.call(s))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:Hs.PULL_COMPLETE,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:n,targetName:i,stream:Hs.PULL_COMPLETE,streamId:e,reason:zs(t)})}));break;case Hs.ENQUEUE:if(se(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case Hs.CLOSE:if(se(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),B(Vs,this,Xs).call(this,r,e);break;case Hs.ERROR:se(r,"error should have stream controller"),r.controller.error(zs(t.reason)),B(Vs,this,Xs).call(this,r,e);break;case Hs.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(zs(t.reason)),B(Vs,this,Xs).call(this,r,e);break;case Hs.CANCEL:if(!s)break;new Promise((function(e){var n;e(null===(n=s.onCancel)||void 0===n?void 0:n.call(s,zs(t.reason)))})).then((function(){a.postMessage({sourceName:n,targetName:i,stream:Hs.CANCEL_COMPLETE,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:n,targetName:i,stream:Hs.CANCEL_COMPLETE,streamId:e,reason:zs(t)})})),s.sinkCapability.reject(zs(t.reason)),s.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}function Xs(t,e){return Ks.apply(this,arguments)}function Ks(){return(Ks=_(C().mark((function t(e,n){var i,a,r;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([null===(i=e.startCall)||void 0===i?void 0:i.promise,null===(a=e.pullCall)||void 0===a?void 0:a.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]);case 2:delete this.streamControllers[n];case 3:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var Ys=new WeakMap,Qs=new WeakMap,$s=function(){return W((function t(e){var n=e.parsedData,i=e.rawData;z(this,t),x(this,Ys,void 0),x(this,Qs,void 0),P(Ys,this,n),P(Qs,this,i)}),[{key:"getRaw",value:function(){return M(Qs,this)}},{key:"get",value:function(t){var e;return null!==(e=M(Ys,this).get(t))&&void 0!==e?e:null}},{key:"getAll",value:function(){return ye(M(Ys,this))}},{key:"has",value:function(t){return M(Ys,this).has(t)}}])}(),Js=Symbol("INTERNAL"),Zs=new WeakMap,to=new WeakMap,eo=new WeakMap,no=new WeakMap,io=function(){return W((function t(e,n){var i=n.name,a=n.intent,r=n.usage;z(this,t),x(this,Zs,!1),x(this,to,!1),x(this,eo,!1),x(this,no,!0),P(Zs,this,!!(e&lt)),P(to,this,!!(e&ht)),this.name=i,this.intent=a,this.usage=r}),[{key:"visible",get:function(){if(M(eo,this))return M(no,this);if(!M(no,this))return!1;var t=this.usage,e=t.print,n=t.view;return M(Zs,this)?"OFF"!==(null==n?void 0:n.viewState):!M(to,this)||"OFF"!==(null==e?void 0:e.printState)}},{key:"_setVisible",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==Js&&re("Internal method `_setVisible` called."),P(eo,this,n),P(no,this,e)}}])}(),ao=new WeakMap,ro=new WeakMap,so=new WeakMap,oo=new WeakMap,uo=new WeakSet,lo=function(){return W((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;if(z(this,t),k(this,uo),x(this,ao,null),x(this,ro,new Map),x(this,so,null),x(this,oo,null),this.renderingIntent=n,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,P(oo,this,e.order);var i,a=R(e.groups);try{for(a.s();!(i=a.n()).done;){var r=i.value;M(ro,this).set(r.id,new io(n,r))}}catch(t){a.e(t)}finally{a.f()}if("OFF"===e.baseState){var s,o=R(M(ro,this).values());try{for(o.s();!(s=o.n()).done;){s.value._setVisible(Js,!1)}}catch(t){o.e(t)}finally{o.f()}}var u,l=R(e.on);try{for(l.s();!(u=l.n()).done;){var h=u.value;M(ro,this).get(h)._setVisible(Js,!0)}}catch(t){l.e(t)}finally{l.f()}var c,d=R(e.off);try{for(d.s();!(c=d.n()).done;){var f=c.value;M(ro,this).get(f)._setVisible(Js,!1)}}catch(t){d.e(t)}finally{d.f()}P(so,this,this.getHash())}}),[{key:"isVisible",value:function(t){if(0===M(ro,this).size)return!0;if(!t)return ie("Optional content group not defined."),!0;if("OCG"===t.type)return M(ro,this).has(t.id)?M(ro,this).get(t.id).visible:(ae("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return B(uo,this,ho).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){var e,n=R(t.ids);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(!M(ro,this).has(i))return ae("Optional content group not found: ".concat(i)),!0;if(M(ro,this).get(i).visible)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}if("AllOn"===t.policy){var a,r=R(t.ids);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(!M(ro,this).has(s))return ae("Optional content group not found: ".concat(s)),!0;if(!M(ro,this).get(s).visible)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}if("AnyOff"===t.policy){var o,u=R(t.ids);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(!M(ro,this).has(l))return ae("Optional content group not found: ".concat(l)),!0;if(!M(ro,this).get(l).visible)return!0}}catch(t){u.e(t)}finally{u.f()}return!1}if("AllOff"===t.policy){var h,c=R(t.ids);try{for(c.s();!(h=c.n()).done;){var d=h.value;if(!M(ro,this).has(d))return ae("Optional content group not found: ".concat(d)),!0;if(M(ro,this).get(d).visible)return!1}}catch(t){c.e(t)}finally{c.f()}return!0}return ae("Unknown optional content policy ".concat(t.policy,".")),!0}return ae("Unknown group type ".concat(t.type,".")),!0}},{key:"setVisibility",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=M(ro,this).get(t);n?(n._setVisible(Js,!!e,!0),P(ao,this,null)):ae("Optional content group not found: ".concat(t))}},{key:"setOCGState",value:function(t){var e,n,i=t.state,a=(t.preserveRB,R(i));try{for(a.s();!(n=a.n()).done;){var r=n.value;switch(r){case"ON":case"OFF":case"Toggle":e=r;continue}var s=M(ro,this).get(r);if(s)switch(e){case"ON":s._setVisible(Js,!0);break;case"OFF":s._setVisible(Js,!1);break;case"Toggle":s._setVisible(Js,!s.visible)}}}catch(t){a.e(t)}finally{a.f()}P(ao,this,null)}},{key:"hasInitialVisibility",get:function(){return null===M(so,this)||this.getHash()===M(so,this)}},{key:"getOrder",value:function(){return M(ro,this).size?M(oo,this)?M(oo,this).slice():A(M(ro,this).keys()):null}},{key:"getGroups",value:function(){return M(ro,this).size>0?ye(M(ro,this)):null}},{key:"getGroup",value:function(t){return M(ro,this).get(t)||null}},{key:"getHash",value:function(){if(null!==M(ao,this))return M(ao,this);var t,e=new Rr,n=R(M(ro,this));try{for(n.s();!(t=n.n()).done;){var i=L(t.value,2),a=i[0],r=i[1];e.update("".concat(a,":").concat(r.visible))}}catch(t){n.e(t)}finally{n.f()}return P(ao,this,e.hexdigest())}}])}();function ho(t){var e=t.length;if(e<2)return!0;for(var n=t[0],i=1;i<e;i++){var a=t[i],r=void 0;if(Array.isArray(a))r=B(uo,this,ho).call(this,a);else{if(!M(ro,this).has(a))return ae("Optional content group not found: ".concat(a)),!0;r=M(ro,this).get(a).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}var co=function(){return W((function t(e,n){var i=this,a=n.disableRange,r=void 0!==a&&a,s=n.disableStream,o=void 0!==s&&s;z(this,t),se(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');var u=e.length,l=e.initialData,h=e.progressiveDone,c=e.contentDispositionFilename;if(this._queuedChunks=[],this._progressiveDone=h,this._contentDispositionFilename=c,(null==l?void 0:l.length)>0){var d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!o,this._isRangeSupported=!r,this._contentLength=u,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((function(t,e){i._onReceiveData({begin:t,chunk:e})})),e.addProgressListener((function(t,e){i._onProgress({loaded:t,total:e})})),e.addProgressiveReadListener((function(t){i._onReceiveData({chunk:t})})),e.addProgressiveDoneListener((function(){i._onProgressiveDone()})),e.transportReady()}),[{key:"_onReceiveData",value:function(t){var e=t.begin,n=t.chunk,i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):se(this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}},{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"_onProgress",value:function(t){var e,n,i,a;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(a=i.onProgress)||void 0===a||a.call(i,{loaded:t.loaded,total:t.total})}},{key:"_onProgressiveDone",value:function(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}},{key:"getFullReader",value:function(){se(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new fo(this,t,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new vo(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=R(this._rangeReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}this._pdfDataRangeTransport.abort()}}])}(),fo=function(){return W((function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;z(this,t),this._stream=e,this._done=i||!1,this._filename=En(a)?a:null,this._queuedChunks=n||[],this._loaded=0;var r,s=R(this._queuedChunks);try{for(s.s();!(r=s.n()).done;){var o=r.value;this._loaded+=o.byteLength}}catch(t){s.e(t)}finally{s.f()}this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}),[{key:"_enqueue",value:function(t){if(!this._done){if(this._requests.length>0)this._requests.shift().resolve({value:t,done:!1});else this._queuedChunks.push(t);this._loaded+=t.byteLength}}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(t=_(C().mark((function t(){var e,n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._queuedChunks.length>0)){t.next=3;break}return e=this._queuedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 3:if(!this._done){t.next=5;break}return t.abrupt("return",{value:void 0,done:!0});case 5:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 8:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]);var t}(),vo=function(){return W((function t(e,n,i){z(this,t),this._stream=e,this._begin=n,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}),[{key:"_enqueue",value:function(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=_(C().mark((function t(){var e,n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 9:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]);var t}();function po(t){var e=t.getResponseHeader,n=t.isHttp,i=t.rangeChunkSize,a=t.disableRange,r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(e("Content-Length"),10);return Number.isInteger(s)?(r.suggestedLength=s,s<=2*i||a||!n||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r):r}function go(t){var e=t("Content-Disposition");if(e){var n=function(t){var e=!0,n=r("filename\\*","i").exec(t);if(n){var i=u(n=n[1]);return o(i=h(i=l(i=unescape(i))))}if(n=function(t){for(var e,n=[],i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(e=i.exec(t));){var a=L(e,4),s=a[1],o=a[2],h=a[3];if((s=parseInt(s,10))in n){if(0===s)break}else n[s]=[o,h]}for(var c=[],d=0;d<n.length&&d in n;++d){var f=L(n[d],2),v=f[0],p=f[1];p=u(p),v&&(p=unescape(p),0===d&&(p=l(p))),c.push(p)}return c.join("")}(t),n)return o(h(n));if(n=r("filename","i").exec(t)){var a=u(n=n[1]);return o(a=h(a))}function r(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var i=new TextDecoder(t,{fatal:!0}),a=De(n);n=i.decode(a),e=!1}catch(t){}}return n}function o(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function u(t){if(t.startsWith('"')){for(var e=t.slice(1).split('\\"'),n=0;n<e.length;++n){var i=e[n].indexOf('"');-1!==i&&(e[n]=e[n].slice(0,i),e.length=n+1),e[n]=e[n].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){var e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function h(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,n,i){if("q"===n||"Q"===n)return s(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{i=atob(i)}catch(t){}return s(e,i)}))}return""}(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch(t){}if(En(n))return n}return null}function mo(t,e){return 404===t||0===t&&e.startsWith("file:")?new fe('Missing PDF "'+e+'".'):new ve("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t)}function Do(t){return 200===t||206===t}function yo(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Ao(t){var e=new Headers;for(var n in t){var i=t[n];void 0!==i&&e.append(n,i)}return e}function bo(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ae("getArrayBuffer - unexpected data format: ".concat(t)),new Uint8Array(t).buffer)}var ko=function(){return W((function t(e){z(this,t),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}),[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return se(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Eo(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=new wo(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=R(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),Eo=function(){return W((function t(e){var n=this;z(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var i=e.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._headers=Ao(this._stream.httpHeaders);var a=i.url;fetch(a,yo(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!Do(t.status))throw mo(t.status,a);n._reader=t.body.getReader(),n._headersCapability.resolve();var e=function(e){return t.headers.get(e)},i=po({getResponseHeader:e,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),r=i.allowRangeRequests,s=i.suggestedLength;n._isRangeSupported=r,n._contentLength=s||n._contentLength,n._filename=go(e),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new ge("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}),[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=_(C().mark((function t(){var e,n,i,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._headersCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(n=t.sent,i=n.value,!(a=n.done)){t.next=9;break}return t.abrupt("return",{value:i,done:a});case 9:return this._loaded+=i.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),t.abrupt("return",{value:bo(i),done:!1});case 12:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}]);var t}(),wo=function(){return W((function t(e,n,i){var a=this;z(this,t),this._stream=e,this._reader=null,this._loaded=0;var r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=Ao(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(n,"-").concat(i-1));var s=r.url;fetch(s,yo(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!Do(t.status))throw mo(t.status,s);a._readCapability.resolve(),a._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}),[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=_(C().mark((function t(){var e,n,i,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(n=t.sent,i=n.value,!(a=n.done)){t.next=9;break}return t.abrupt("return",{value:i,done:a});case 9:return this._loaded+=i.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),t.abrupt("return",{value:bo(i),done:!1});case 12:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}]);var t}();var Co=function(){return W((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};z(this,t),this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}),[{key:"requestRange",value:function(t,e,n){var i={begin:t,end:e};for(var a in n)i[a]=n[a];return this.request(i)}},{key:"requestFull",value:function(t){return this.request(t)}},{key:"request",value:function(t){var e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};for(var a in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var r=this.httpHeaders[a];void 0!==r&&e.setRequestHeader(a,r)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}},{key:"onProgress",value:function(t,e){var n,i=this.pendingRequests[t];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,e))}},{key:"onStateChange",value:function(t,e){var n=this.pendingRequests[t];if(n){var i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===i.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===i.status&&this.isHttp){var a;null===(a=n.onError)||void 0===a||a.call(n,i.status)}else{var r=i.status||200;if(200===r&&206===n.expectedStatus||r===n.expectedStatus){var s=function(t){var e=t.response;return"string"!=typeof e?e:De(e).buffer}(i);if(206===r){var o=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(o);n.onDone({begin:parseInt(u[1],10),chunk:s})}else if(s)n.onDone({begin:0,chunk:s});else{var l;null===(l=n.onError)||void 0===l||l.call(n,i.status)}}else{var h;null===(h=n.onError)||void 0===h||h.call(n,i.status)}}}}},{key:"getRequestXhr",value:function(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function(t){return t in this.pendingRequests}},{key:"abortRequest",value:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}])}(),Fo=function(){return W((function t(e){z(this,t),this._source=e,this._manager=new Co(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}),[{key:"_onRangeRequestReaderClosed",value:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}},{key:"getFullReader",value:function(){return se(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new _o(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var n=new xo(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=R(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),_o=function(){return W((function t(e,n){z(this,t),this._manager=e;var i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}),[{key:"_onHeadersReceived",value:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=function(t){return e.getResponseHeader(t)},i=po({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),a=i.allowRangeRequests,r=i.suggestedLength;a&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=go(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk));if(this._done=!0,!(this._cachedChunks.length>0)){var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0}}},{key:"_onError",value:function(t){this._storedError=mo(t,this._url),this._headersReceivedCapability.reject(this._storedError);var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.reject(this._storedError)}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(t=_(C().mark((function t(){var e,n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){t.next=5;break}return e=this._cachedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 5:if(!this._done){t.next=7;break}return t.abrupt("return",{value:void 0,done:!0});case 7:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 10:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._headersReceivedCapability.reject(t);var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]);var t}(),xo=function(){return W((function t(e,n,i){z(this,t),this._manager=e;var a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(n,i,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}),[{key:"_close",value:function(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}},{key:"_onDone",value:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e;this._done=!0;var n,i=R(this._requests);try{for(i.s();!(n=i.n()).done;){n.value.resolve({value:void 0,done:!0})}}catch(t){i.e(t)}finally{i.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(t){this._storedError=mo(t,this._url);var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.reject(this._storedError)}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(t=_(C().mark((function t(){var e,n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){t.next=6;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 6:if(!this._done){t.next=8;break}return t.abrupt("return",{value:void 0,done:!0});case 8:return n=Promise.withResolvers(),this._requests.push(n),t.abrupt("return",n.promise);case 11:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0;var e,n=R(this._requests);try{for(n.s();!(e=n.n()).done;){e.value.resolve({value:void 0,done:!0})}}catch(t){n.e(t)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]);var t}(),So=/^file:\/\/\/[a-zA-Z]:\//;var Mo=function(){return W((function t(e){var n,i,a;z(this,t),this.source=e,this.url=(n=e.url,i=$r.get("url"),"file:"===(a=i.parse(n)).protocol||a.host?a:/^[a-z]:[/\\]/i.test(n)?i.parse("file:///".concat(n)):(a.host||(a.protocol="file:"),a)),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}),[{key:"_progressiveDataLength",get:function(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}},{key:"getFullReader",value:function(){return se(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ro(this):new To(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var n=this.isFsUrl?new No(this,t,e):new Io(this,t,e);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);var n,i=R(this._rangeRequestReaders.slice(0));try{for(i.s();!(n=i.n()).done;){n.value.cancel(t)}}catch(t){i.e(t)}finally{i.f()}}}])}(),Po=function(){return W((function t(e){z(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;var n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}),[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=_(C().mark((function t(){var e,n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(n=this._readableStream.read())){t.next=10;break}return this._readCapability=Promise.withResolvers(),t.abrupt("return",this.read());case 10:return this._loaded+=n.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),i=new Uint8Array(n).buffer,t.abrupt("return",{value:i,done:!1});case 14:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ge("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t}(),Bo=function(){return W((function t(e){z(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();var n=e.source;this._isStreamingSupported=!n.disableStream}),[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(t=_(C().mark((function t(){var e,n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(n=this._readableStream.read())){t.next=10;break}return this._readCapability=Promise.withResolvers(),t.abrupt("return",this.read());case 10:return this._loaded+=n.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),i=new Uint8Array(n).buffer,t.abrupt("return",{value:i,done:!1});case 14:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var t}();function Lo(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}var To=function(t){function e(t){var n;z(this,e);var i=function(e){if(404===e.statusCode){var i=new fe('Missing PDF "'.concat(n._url,'".'));return n._storedError=i,void n._headersCapability.reject(i)}n._headersCapability.resolve(),n._setReadableStream(e);var a=function(t){return n._readableStream.headers[t.toLowerCase()]},r=po({getResponseHeader:a,isHttp:t.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=r.allowRangeRequests,o=r.suggestedLength;n._isRangeSupported=s,n._contentLength=o||n._contentLength,n._filename=go(a)};if((n=V(this,e,[t]))._request=null,"http:"===n._url.protocol){var a=$r.get("http");n._request=a.request(Lo(n._url,t.httpHeaders),i)}else{var r=$r.get("https");n._request=r.request(Lo(n._url,t.httpHeaders),i)}return n._request.on("error",(function(t){n._storedError=t,n._headersCapability.reject(t)})),n._request.end(),n}return q(e,Po),W(e)}(),Io=function(t){function e(t,n,i){var a;for(var r in z(this,e),(a=V(this,e,[t]))._httpHeaders={},t.httpHeaders){var s=t.httpHeaders[r];void 0!==s&&(a._httpHeaders[r]=s)}a._httpHeaders.Range="bytes=".concat(n,"-").concat(i-1);var o=function(t){if(404!==t.statusCode)a._setReadableStream(t);else{var e=new fe('Missing PDF "'.concat(a._url,'".'));a._storedError=e}};if(a._request=null,"http:"===a._url.protocol){var u=$r.get("http");a._request=u.request(Lo(a._url,a._httpHeaders),o)}else{var l=$r.get("https");a._request=l.request(Lo(a._url,a._httpHeaders),o)}return a._request.on("error",(function(t){a._storedError=t})),a._request.end(),a}return q(e,Bo),W(e)}(),Ro=function(t){function e(t){var n;z(this,e),n=V(this,e,[t]);var i=decodeURIComponent(n._url.path);So.test(n._url.href)&&(i=i.replace(/^\//,""));var a=$r.get("fs");return a.promises.lstat(i).then((function(t){n._contentLength=t.size,n._setReadableStream(a.createReadStream(i)),n._headersCapability.resolve()}),(function(t){"ENOENT"===t.code&&(t=new fe('Missing PDF "'.concat(i,'".'))),n._storedError=t,n._headersCapability.reject(t)})),n}return q(e,Po),W(e)}(),No=function(t){function e(t,n,i){var a;z(this,e),a=V(this,e,[t]);var r=decodeURIComponent(a._url.path);So.test(a._url.href)&&(r=r.replace(/^\//,""));var s=$r.get("fs");return a._setReadableStream(s.createReadStream(r,{start:n,end:i-1})),a}return q(e,Bo),W(e)}(),Oo=1e5,jo=30,Wo=.8,Ho=new WeakMap,zo=new WeakMap,Vo=new WeakMap,Uo=new WeakMap,Go=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,$o=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,tu=new WeakMap,eu=new WeakMap,nu=new WeakMap,iu=new WeakMap,au=new WeakMap,ru=new WeakSet,su=function(){function t(e){var n,i=this,a=e.textContentSource,r=e.container,s=e.viewport;if(z(this,t),k(this,ru),x(this,Ho,Promise.withResolvers()),x(this,zo,null),x(this,Vo,!1),x(this,Uo,!(null===(n=globalThis.FontInspector)||void 0===n||!n.enabled)),x(this,Go,null),x(this,qo,null),x(this,Xo,0),x(this,Ko,0),x(this,Yo,null),x(this,Qo,null),x(this,$o,0),x(this,Jo,0),x(this,Zo,Object.create(null)),x(this,tu,[]),x(this,eu,null),x(this,nu,[]),x(this,iu,new WeakMap),x(this,au,null),a instanceof ReadableStream)P(eu,this,a);else{if("object"!==K(a))throw new Error('No "textContentSource" parameter specified.');P(eu,this,new ReadableStream({start:function(t){t.enqueue(a),t.close()}}))}P(zo,this,P(Qo,this,r)),P(Jo,this,s.scale*(globalThis.devicePixelRatio||1)),P($o,this,s.rotation),P(qo,this,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});var o=s.rawDims,u=o.pageWidth,l=o.pageHeight,h=o.pageX,c=o.pageY;P(au,this,[1,0,0,-1,-h,c+l]),P(Ko,this,u),P(Xo,this,l),cu.call(t),In(r,s),M(Ho,this).promise.catch((function(){})).then((function(){gu._.delete(i),P(qo,i,null),P(Zo,i,null)}))}return W(t,[{key:"render",value:function(){var t=this,e=function(){M(Yo,t).read().then((function(n){var i,a=n.value;n.done?M(Ho,t).resolve():(null!==(i=M(Go,t))&&void 0!==i||P(Go,t,a.lang),Object.assign(M(Zo,t),a.styles),B(ru,t,ou).call(t,a.items),e())}),M(Ho,t).reject)};return P(Yo,this,M(eu,this).getReader()),gu._.add(this),e(),M(Ho,this).promise}},{key:"update",value:function(e){var n=e.viewport,i=e.onBefore,a=void 0===i?null:i,r=n.scale*(globalThis.devicePixelRatio||1),s=n.rotation;if(s!==M($o,this)&&(null==a||a(),P($o,this,s),In(M(Qo,this),{rotation:s})),r!==M(Jo,this)){null==a||a(),P(Jo,this,r);var o,u={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:hu.call(t,M(Go,this))},l=R(M(nu,this));try{for(l.s();!(o=l.n()).done;){var h=o.value;u.properties=M(iu,this).get(h),u.div=h,B(ru,this,lu).call(this,u)}}catch(t){l.e(t)}finally{l.f()}}}},{key:"cancel",value:function(){var t,e=new ge("TextLayer task cancelled.");null===(t=M(Yo,this))||void 0===t||t.cancel(e).catch((function(){})),P(Yo,this,null),M(Ho,this).reject(e)}},{key:"textDivs",get:function(){return M(nu,this)}},{key:"textContentItemsStr",get:function(){return M(tu,this)}}],[{key:"cleanup",value:function(){if(!(B(t,this,gu)._.size>0)){B(t,this,fu)._.clear();var e,n=R(B(t,this,vu)._.values());try{for(n.s();!(e=n.n()).done;){e.value.canvas.remove()}}catch(t){n.e(t)}finally{n.f()}B(t,this,vu)._.clear()}}}])}();function ou(t){var e,n;if(!M(Vo,this)){null!==(n=(e=M(qo,this)).ctx)&&void 0!==n||(e.ctx=hu.call(r,M(Go,this)));var i,a=M(nu,this),s=M(tu,this),o=R(t);try{for(o.s();!(i=o.n()).done;){var u=i.value;if(a.length>Oo)return ae("Ignoring additional textDivs for performance reasons."),void P(Vo,this,!0);if(void 0!==u.str)s.push(u.str),B(ru,this,uu).call(this,u);else if("beginMarkedContentProps"===u.type||"beginMarkedContent"===u.type){var l=M(zo,this);P(zo,this,document.createElement("span")),M(zo,this).classList.add("markedContent"),null!==u.id&&M(zo,this).setAttribute("id","".concat(u.id)),l.append(M(zo,this))}else"endMarkedContent"===u.type&&P(zo,this,M(zo,this).parentNode)}}catch(t){o.e(t)}finally{o.f()}}}function uu(t){var e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};M(nu,this).push(e);var i=ke.transform(M(au,this),t.transform),a=Math.atan2(i[1],i[0]),s=M(Zo,this)[t.fontName];s.vertical&&(a+=Math.PI/2);var o,u,l=M(Uo,this)&&s.fontSubstitution||s.fontFamily,h=Math.hypot(i[2],i[3]),c=h*du.call(r,l,M(Go,this));0===a?(o=i[4],u=i[5]-c):(o=i[4]+c*Math.sin(a),u=i[5]-c*Math.cos(a));var d="calc(var(--scale-factor)*",f=e.style;M(zo,this)===M(Qo,this)?(f.left="".concat((100*o/M(Ko,this)).toFixed(2),"%"),f.top="".concat((100*u/M(Xo,this)).toFixed(2),"%")):(f.left="".concat(d).concat(o.toFixed(2),"px)"),f.top="".concat(d).concat(u.toFixed(2),"px)")),f.fontSize="".concat(d).concat((pu._*h).toFixed(2),"px)"),f.fontFamily=l,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,M(Uo,this)&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),0!==a&&(n.angle=a*(180/Math.PI));var v=!1;if(t.str.length>1)v=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){var p=Math.abs(t.transform[0]),g=Math.abs(t.transform[3]);p!==g&&Math.max(p,g)/Math.min(p,g)>1.5&&(v=!0)}if(v&&(n.canvasWidth=s.vertical?t.height:t.width),M(iu,this).set(e,n),M(qo,this).div=e,M(qo,this).properties=n,B(ru,this,lu).call(this,M(qo,this)),n.hasText&&M(zo,this).append(e),n.hasEOL){var m=document.createElement("br");m.setAttribute("role","presentation"),M(zo,this).append(m)}}function lu(t){var e=t.div,n=t.properties,i=t.ctx,a=t.prevFontSize,r=t.prevFontFamily,s=e.style,o="";if(pu._>1&&(o="scale(".concat(1/pu._,")")),0!==n.canvasWidth&&n.hasText){var u=s.fontFamily,l=n.canvasWidth,h=n.fontSize;a===h&&r===u||(i.font="".concat(h*M(Jo,this),"px ").concat(u),t.prevFontSize=h,t.prevFontFamily=u);var c=i.measureText(e.textContent).width;c>0&&(o="scaleX(".concat(l*M(Jo,this)/c,") ").concat(o))}0!==n.angle&&(o="rotate(".concat(n.angle,"deg) ").concat(o)),o.length>0&&(s.transform=o)}function hu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=B(r,this,vu)._.get(t||(t=""));if(!e){var n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),B(r,this,vu)._.set(t,e)}return e}function cu(){if(null===B(r,this,pu)._){var t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),pu._=B(r,this,t.getBoundingClientRect().height),t.remove()}}function du(t,e){var n=B(r,this,fu)._.get(t);if(n)return n;var i=B(r,this,hu).call(this,e),a=i.font;i.canvas.width=i.canvas.height=jo,i.font="".concat(jo,"px ").concat(t);var s=i.measureText(""),o=s.fontBoundingBoxAscent,u=Math.abs(s.fontBoundingBoxDescent);if(o){var l=o/(o+u);return B(r,this,fu)._.set(t,l),i.canvas.width=i.canvas.height=0,i.font=a,l}i.strokeStyle="red",i.clearRect(0,0,jo,jo),i.strokeText("g",0,0);var h=i.getImageData(0,0,jo,jo).data;u=0;for(var c=h.length-1-3;c>=0;c-=4)if(h[c]>0){u=Math.ceil(c/4/jo);break}i.clearRect(0,0,jo,jo),i.strokeText("A",0,jo),o=0;for(var d=0,f=(h=i.getImageData(0,0,jo,jo).data).length;d<f;d+=4)if(h[d]>0){o=jo-Math.floor(d/4/jo);break}i.canvas.width=i.canvas.height=0,i.font=a;var v=o?o/(o+u):Wo;return B(r,this,fu)._.set(t,v),v}r=su;var fu={_:new Map},vu={_:new Map},pu={_:null},gu={_:new Set},mu=function(){function t(){z(this,t)}return W(t,null,[{key:"textContent",value:function(e){var n=[],i={items:n,styles:Object.create(null)};return function e(i){var a;if(i){var r=null,s=i.name;if("#text"===s)r=i.value;else{if(!t.shouldBuildText(s))return;null!=i&&null!==(a=i.attributes)&&void 0!==a&&a.textContent?r=i.attributes.textContent:i.value&&(r=i.value)}if(null!==r&&n.push({str:r}),i.children){var o,u=R(i.children);try{for(u.s();!(o=u.n()).done;){e(o.value)}}catch(t){u.e(t)}finally{u.f()}}}}(e),i}},{key:"shouldBuildText",value:function(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}])}(),Du=65536,yu=5e3,Au=at?ts:vn,bu=at?es:mn,ku=at?Zr:tn,Eu=at?ns:Dn;function wu(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});var i=new Fu,a=i.docId,r=n.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch(e){if(at&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,s=n.data?function(t){if(at&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return De(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===K(t)&&!isNaN(null==t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,u=!0===n.withCredentials,l=null!==(t=n.password)&&void 0!==t?t:null,h=n.range instanceof xu?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Du,d=n.worker instanceof Hu?n.worker:null,f=n.verbosity,v="string"!=typeof n.docBaseUrl||kn(n.docBaseUrl)?null:n.docBaseUrl,p="string"==typeof n.cMapUrl?n.cMapUrl:null,g=!1!==n.cMapPacked,m=n.CMapReaderFactory||bu,D="string"==typeof n.standardFontDataUrl?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||Eu,A=!0!==n.stopAtErrors,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=!1!==n.isEvalSupported,E="boolean"==typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!at,w=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,C="boolean"==typeof n.disableFontFace?n.disableFontFace:at,F=!0===n.fontExtraProperties,_=!0===n.enableXfa,x=n.ownerDocument||globalThis.document,S=!0===n.disableRange,M=!0===n.disableStream,P=!0===n.disableAutoFetch,B=!0===n.pdfBug,L=!0===n.enableHWA,T=h?h.length:null!==(e=n.length)&&void 0!==e?e:NaN,I="boolean"==typeof n.useSystemFonts?n.useSystemFonts:!at&&!C,R="boolean"==typeof n.useWorkerFetch?n.useWorkerFetch:m===mn&&y===Dn&&p&&D&&xn(p,document.baseURI)&&xn(D,document.baseURI),N=n.canvasFactory||new Au({ownerDocument:x,enableHWA:L}),O=n.filterFactory||new ku({docId:a,ownerDocument:x});ee(f);var j={canvasFactory:N,filterFactory:O};if(R||(j.cMapReaderFactory=new m({baseUrl:p,isCompressed:g}),j.standardFontDataFactory=new y({baseUrl:D})),!d){var W={verbosity:f,port:Rs.workerPort};d=W.port?Hu.fromPort(W):new Hu(W),i._worker=d}var H={docId:a,apiVersion:"4.5.136",data:s,password:l,disableAutoFetch:P,rangeChunkSize:c,length:T,docBaseUrl:v,enableXfa:_,evaluatorOptions:{maxImageSize:b,disableFontFace:C,ignoreErrors:A,isEvalSupported:k,isOffscreenCanvasSupported:E,canvasMaxAreaInBytes:w,fontExtraProperties:F,useSystemFonts:I,cMapUrl:R?p:null,standardFontDataUrl:R?D:null}},z={disableFontFace:C,fontExtraProperties:F,ownerDocument:x,pdfBug:B,styleElement:null,loadingParams:{disableAutoFetch:P,enableXfa:_}};return d.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");var t,e=d.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);if(h)t=new co(h,{disableRange:S,disableStream:M});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");t=function(t){if(at){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&xn(t.url)?new ko(t):new Mo(t)}return xn(t.url)?new ko(t):new Fo(t)}({url:r,length:T,httpHeaders:o,withCredentials:u,rangeChunkSize:c,disableRange:S,disableStream:M})}return e.then((function(e){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");var n=new Us(a,e,d.port),r=new $u(n,i,t,z,j);i._transport=r,n.send("Ready",null)}))})).catch(i._capability.reject),i}function Cu(t){return"object"===K(t)&&Number.isInteger(null==t?void 0:t.num)&&t.num>=0&&Number.isInteger(null==t?void 0:t.gen)&&t.gen>=0}var Fu=function(){return W((function t(){var e,n;z(this,t),this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((_u._=(e=_u._,n=e++,e),n)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}),[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(t=_(C().mark((function t(){var e,n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyed=!0,t.prev=1,null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),t.next=5,null===(n=this._transport)||void 0===n?void 0:n.destroy();case 5:t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(1),null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,t.t0;case 11:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 13:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(){return t.apply(this,arguments)})}]);var t}(),_u={_:0},xu=function(){return W((function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;z(this,t),this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}),[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function(t,e){var n,i=R(this._rangeListeners);try{for(i.s();!(n=i.n()).done;){(0,n.value)(t,e)}}catch(t){i.e(t)}finally{i.f()}}},{key:"onDataProgress",value:function(t,e){var n=this;this._readyCapability.promise.then((function(){var i,a=R(n._progressListeners);try{for(a.s();!(i=a.n()).done;){(0,i.value)(t,e)}}catch(t){a.e(t)}finally{a.f()}}))}},{key:"onDataProgressiveRead",value:function(t){var e=this;this._readyCapability.promise.then((function(){var n,i=R(e._progressiveReadListeners);try{for(i.s();!(n=i.n()).done;){(0,n.value)(t)}}catch(t){i.e(t)}finally{i.f()}}))}},{key:"onDataProgressiveDone",value:function(){var t=this;this._readyCapability.promise.then((function(){var e,n=R(t._progressiveDoneListeners);try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(t){n.e(t)}finally{n.f()}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(t,e){re("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}])}(),Su=function(){return W((function t(e,n){z(this,t),this._pdfInfo=e,this._transport=n}),[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?"display":t,n=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getOptionalContentConfig(n)}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"saveDocument",value:function(){return this._transport.saveDocument()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"cachedPageNumber",value:function(t){return this._transport.cachedPageNumber(t)}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}])}(),Mu=new WeakMap,Pu=new WeakMap,Bu=new WeakSet,Lu=function(){return W((function t(e,n,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];z(this,t),k(this,Bu),x(this,Mu,null),x(this,Pu,!1),this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=a?new _n:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new nl,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}),[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scale,n=t.rotation,i=void 0===n?this.rotate:n,a=t.offsetX,r=void 0===a?0:a,s=t.offsetY,o=void 0===s?0:s,u=t.dontFlip,l=void 0!==u&&u;return new An({viewBox:this.view,scale:e,rotation:i,offsetX:r,offsetY:o,dontFlip:l})}},{key:"getAnnotations",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intent,e=void 0===t?"display":t,n=this._transport.getRenderingIntent(e).renderingIntent;return this._transport.getAnnotations(this._pageIndex,n)}},{key:"getJSActions",value:function(){return this._transport.getPageJSActions(this._pageIndex)}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"isPureXfa",get:function(){return ue(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"getXfa",value:(t=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null);case 1:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(t){var e,n,i=this,a=t.canvasContext,r=t.viewport,s=t.intent,o=void 0===s?"display":s,u=t.annotationMode,l=void 0===u?gt.ENABLE:u,h=t.transform,c=void 0===h?null:h,d=t.background,f=void 0===d?null:d,v=t.optionalContentConfigPromise,p=void 0===v?null:v,g=t.annotationCanvasMap,m=void 0===g?null:g,D=t.pageColors,y=void 0===D?null:D,A=t.printAnnotationStorage,b=void 0===A?null:A,k=t.isEditing,E=void 0!==k&&k;null===(e=this._stats)||void 0===e||e.time("Overall");var w=this._transport.getRenderingIntent(o,l,b,E),C=w.renderingIntent,F=w.cacheKey;P(Pu,this,!1),B(Bu,this,Iu).call(this),p||(p=this._transport.getOptionalContentConfig(C));var _=this._intentStates.get(F);_||(_=Object.create(null),this._intentStates.set(F,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);var x,S=!!(C&ht);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(x=this._stats)||void 0===x||x.time("Page Request"),this._pumpOperatorList(w));var M=function(t){var e;(_.renderTasks.delete(T),(i._maybeCleanupAfterRender||S)&&P(Pu,i,!0),B(Bu,i,Tu).call(i,!S),t?(T.capability.reject(t),i._abortOperatorList({intentState:_,reason:t instanceof Error?t:new Error(t)})):T.capability.resolve(),i._stats)&&(i._stats.timeEnd("Rendering"),i._stats.timeEnd("Overall"),null!==(e=globalThis.Stats)&&void 0!==e&&e.enabled&&globalThis.Stats.add(i.pageNumber,i._stats))},T=new ol({callback:M,params:{canvasContext:a,viewport:r,transform:c,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:m,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:y});((n=_).renderTasks||(n.renderTasks=new Set)).add(T);var I=T.task;return Promise.all([_.displayReadyCapability.promise,p]).then((function(t){var e,n=L(t,2),a=n[0],r=n[1];if(i.destroyed)M();else{if(null===(e=i._stats)||void 0===e||e.time("Rendering"),!(r.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:a,optionalContentConfig:r}),T.operatorListChanged()}})).catch(M),I}},{key:"getOperatorList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.intent,n=void 0===e?"display":e,i=t.annotationMode,a=void 0===i?gt.ENABLE:i,r=t.printAnnotationStorage,s=void 0===r?null:r,o=t.isEditing,u=void 0!==o&&o;var l,h,c,d=this._transport.getRenderingIntent(n,a,s,u,!0),f=this._intentStates.get(d.cacheKey);(f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f)),f.opListReadCapability)||((l=Object.create(null)).operatorListChanged=function(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(l))},f.opListReadCapability=Promise.withResolvers(),((h=f).renderTasks||(h.renderTasks=new Set)).add(l),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(c=this._stats)||void 0===c||c.time("Page Request"),this._pumpOperatorList(d));return f.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.includeMarkedContent,n=void 0!==e&&e,i=t.disableNormalization,a=void 0!==i&&i;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===n,disableNormalization:!0===a},{highWaterMark:100,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(t){return mu.textContent(t)}));var e=this.streamTextContent(t);return new Promise((function(t,n){var i=e.getReader(),a={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then((function(n){var i,r,s=n.value;n.done?t(a):(null!==(i=a.lang)&&void 0!==i||(a.lang=s.lang),Object.assign(a.styles,s.styles),(r=a.items).push.apply(r,A(s.items)),e())}),n)}()}))}},{key:"getStructTree",value:function(){return this._transport.getStructTree(this._pageIndex)}},{key:"_destroy",value:function(){this.destroyed=!0;var t,e=[],n=R(this._intentStates.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability){var a,r=R(i.renderTasks);try{for(r.s();!(a=r.n()).done;){var s=a.value;e.push(s.completed),s.cancel()}}catch(t){r.e(t)}finally{r.f()}}}}catch(t){n.e(t)}finally{n.f()}return this.objs.clear(),P(Pu,this,!1),B(Bu,this,Iu).call(this),Promise.all(e)}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];P(Pu,this,!0);var e=B(Bu,this,Tu).call(this,!1);return t&&e&&this._stats&&(this._stats=new _n),e}},{key:"_startRenderPage",value:function(t,e){var n,i,a=this._intentStates.get(e);a&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=a.displayReadyCapability)||void 0===i||i.resolve(t))}},{key:"_renderPageChunk",value:function(t,e){for(var n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;var a,r=R(e.renderTasks);try{for(r.s();!(a=r.n()).done;){a.value.operatorListChanged()}}catch(t){r.e(t)}finally{r.f()}t.lastChunk&&B(Bu,this,Tu).call(this,!0)}},{key:"_pumpOperatorList",value:function(t){var e=this,n=t.renderingIntent,i=t.cacheKey,a=t.annotationStorageSerializable,r=t.modifiedIds,s=a.map,o=a.transfer,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:i,annotationStorage:s,modifiedIds:r},o).getReader(),l=this._intentStates.get(i);l.streamReader=u;var h=function(){u.read().then((function(t){var n=t.value;t.done?l.streamReader=null:e._transport.destroyed||(e._renderPageChunk(n,l),h())}),(function(t){if(l.streamReader=null,!e._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;var n,i=R(l.renderTasks);try{for(i.s();!(n=i.n()).done;){n.value.operatorListChanged()}}catch(t){i.e(t)}finally{i.f()}B(Bu,e,Tu).call(e,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(t);else{if(!l.opListReadCapability)throw t;l.opListReadCapability.reject(t)}}}))};h()}},{key:"_abortOperatorList",value:function(t){var e=this,n=t.intentState,i=t.reason,a=t.force,r=void 0!==a&&a;if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!r){if(n.renderTasks.size>0)return;if(i instanceof bn){var s=100;return i.extraDelay>0&&i.extraDelay<1e3&&(s+=i.extraDelay),void(n.streamReaderCancelTimeout=setTimeout((function(){n.streamReaderCancelTimeout=null,e._abortOperatorList({intentState:n,reason:i,force:!0})}),s))}}if(n.streamReader.cancel(new ge(i.message)).catch((function(){})),n.streamReader=null,!this._transport.destroyed){var o,u=R(this._intentStates);try{for(u.s();!(o=u.n()).done;){var l=L(o.value,2),h=l[0];if(l[1]===n){this._intentStates.delete(h);break}}}catch(t){u.e(t)}finally{u.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]);var t}();function Tu(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(B(Bu,this,Iu).call(this),!M(Pu,this)||this.destroyed)return!1;if(e)return P(Mu,this,setTimeout((function(){P(Mu,t,null),B(Bu,t,Tu).call(t,!1)}),yu)),!1;var n,i=R(this._intentStates.values());try{for(i.s();!(n=i.n()).done;){var a=n.value,r=a.renderTasks,s=a.operatorList;if(r.size>0||!s.lastChunk)return!1}}catch(t){i.e(t)}finally{i.f()}return this._intentStates.clear(),this.objs.clear(),P(Pu,this,!1),!0}function Iu(){M(Mu,this)&&(clearTimeout(M(Mu,this)),P(Mu,this,null))}var Ru=new WeakMap,Nu=new WeakMap,Ou=function(){return W((function t(){z(this,t),x(this,Ru,new Set),x(this,Nu,Promise.resolve())}),[{key:"postMessage",value:function(t,e){var n=this,i={data:structuredClone(t,e?{transfer:e}:null)};M(Nu,this).then((function(){var t,e=R(M(Ru,n));try{for(e.s();!(t=e.n()).done;){t.value.call(n,i)}}catch(t){e.e(t)}finally{e.f()}}))}},{key:"addEventListener",value:function(t,e){M(Ru,this).add(e)}},{key:"removeEventListener",value:function(t,e){M(Ru,this).delete(e)}},{key:"terminate",value:function(){M(Ru,this).clear()}}])}(),ju={isWorkerDisabled:!1,fakeWorkerId:0};at&&(ju.isWorkerDisabled=!0,Rs.workerSrc||(Rs.workerSrc="./pdf.worker.mjs")),ju.isSameOrigin=function(t,e){var n;try{if(!(n=new URL(t)).origin||"null"===n.origin)return!1}catch(t){return!1}var i=new URL(e,n);return n.origin===i.origin},ju.createCDNWrapper=function(t){var e='await import("'.concat(t,'");');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Wu=new WeakSet,Hu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,i=void 0===n?null:n,a=e.port,r=void 0===a?null:a,s=e.verbosity,o=void 0===s?ne():s;if(z(this,t),k(this,Wu),this.name=i,this.destroyed=!1,this.verbosity=o,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,r){var u;if(null!==(u=Uu._)&&void 0!==u&&u.has(r))throw new Error("Cannot use more than one PDFWorker per port.");return(Uu._||(Uu._=new WeakMap)).set(r,this),void this._initializeFromPort(r)}this._initialize()}return W(t,[{key:"promise",get:function(){return at?Promise.all([$r.promise,this._readyCapability.promise]):this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(t){this._port=t,this._messageHandler=new Us("main","worker",t),this._messageHandler.on("ready",(function(){})),B(Wu,this,zu).call(this)}},{key:"_initialize",value:function(){var e=this;if(ju.isWorkerDisabled||Vu(t))this._setupFakeWorker();else{var n=t.workerSrc;try{ju.isSameOrigin(window.location.href,n)||(n=ju.createCDNWrapper(new URL(n,window.location).href));var i=new Worker(n,{type:"module"}),a=new Us("main","worker",i),r=function(){s.abort(),a.destroy(),i.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},s=new AbortController;i.addEventListener("error",(function(){e._webWorker||r()}),{signal:s.signal}),a.on("test",(function(t){s.abort(),!e.destroyed&&t?(e._messageHandler=a,e._port=i,e._webWorker=i,B(Wu,e,zu).call(e)):r()})),a.on("ready",(function(t){if(s.abort(),e.destroyed)r();else try{o()}catch(t){e._setupFakeWorker()}}));var o=function(){var t=new Uint8Array;a.send("test",t,[t.buffer])};return void o()}catch(t){ie("The worker has been disabled.")}this._setupFakeWorker()}}},{key:"_setupFakeWorker",value:function(){var e=this;ju.isWorkerDisabled||(ae("Setting up fake worker."),ju.isWorkerDisabled=!0),t._setupFakeWorkerGlobal.then((function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var n=new Ou;e._port=n;var i="fake".concat(ju.fakeWorkerId++),a=new Us(i+"_worker",i,n);t.setup(a,n),e._messageHandler=new Us(i,i+"_worker",n),B(Wu,e,zu).call(e)}})).catch((function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}},{key:"destroy",value:function(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(t=Uu._)||void 0===t||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(e){var n;if(null==e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");var i=null===(n=B(t,this,Uu)._)||void 0===n?void 0:n.get(e.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new t(e)}},{key:"workerSrc",get:function(){if(Rs.workerSrc)return Rs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_setupFakeWorkerGlobal",get:function(){var e=this,n=function(){var n=_(C().mark((function n(){var i;return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!E(t,e,Vu)){n.next=2;break}return n.abrupt("return",E(t,e,Vu));case 2:return n.next=4,import(e.workerSrc);case 4:return i=n.sent,n.abrupt("return",i.WorkerMessageHandler);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return ue(this,"_setupFakeWorkerGlobal",n())}}])}();function zu(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}function Vu(t){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(t){return null}}var Uu={_:void 0},Gu=new WeakMap,qu=new WeakMap,Xu=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,Qu=new WeakSet,$u=function(){return W((function t(e,n,i,a,r){z(this,t),k(this,Qu),x(this,Gu,new Map),x(this,qu,new Map),x(this,Xu,new Map),x(this,Ku,new Map),x(this,Yu,null),this.messageHandler=e,this.loadingTask=n,this.commonObjs=new nl,this.fontLoader=new Xr({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}),[{key:"annotationStorage",get:function(){return ue(this,"annotationStorage",new zr)}},{key:"getRenderingIntent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=lt,s=Nr;switch(t){case"any":r=ut;break;case"display":break;case"print":r=ht;break;default:ae("getRenderingIntent - invalid intent: ".concat(t))}var o=r&ht&&n instanceof Gr?n:this.annotationStorage;switch(e){case gt.DISABLE:r+=ft;break;case gt.ENABLE:break;case gt.ENABLE_FORMS:r+=ct;break;case gt.ENABLE_STORAGE:r+=dt,s=o.serializable;break;default:ae("getRenderingIntent - invalid annotationMode: ".concat(e))}i&&(r+=vt),a&&(r+=pt);var u=o.modifiedIds,l=u.ids,h=u.hash;return{renderingIntent:r,cacheKey:[r,s.hash,h].join("_"),annotationStorageSerializable:s,modifiedIds:l}}},{key:"destroy",value:function(){var t,e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=M(Yu,this))||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));var n,i=[],a=R(M(qu,this).values());try{for(a.s();!(n=a.n()).done;){var r=n.value;i.push(r._destroy())}}catch(t){a.e(t)}finally{a.f()}M(qu,this).clear(),M(Xu,this).clear(),M(Ku,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var s=this.messageHandler.sendWithPromise("Terminate",null);return i.push(s),Promise.all(i).then((function(){var t;e.commonObjs.clear(),e.fontLoader.clear(),M(Gu,e).clear(),e.filterFactory.destroy(),su.cleanup(),null===(t=e._networkStream)||void 0===t||t.cancelAllRequests(new ge("Worker was terminated.")),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this,e=this.messageHandler,n=this.loadingTask;e.on("GetReader",(function(e,n){se(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(e){t._lastProgress={loaded:e.loaded,total:e.total}},n.onPull=function(){t._fullReader.read().then((function(t){var e=t.value;t.done?n.close():(se(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))})).catch((function(t){n.error(t)}))},n.onCancel=function(e){t._fullReader.cancel(e),n.ready.catch((function(e){if(!t.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(function(e){var i=Promise.withResolvers(),a=t._fullReader;return a.headersReady.then((function(){if(!a.isStreamingSupported||!a.isRangeSupported){var e;if(t._lastProgress)null===(e=n.onProgress)||void 0===e||e.call(n,t._lastProgress);a.onProgress=function(t){var e;null===(e=n.onProgress)||void 0===e||e.call(n,{loaded:t.loaded,total:t.total})}}i.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})}),i.reject),i.promise})),e.on("GetRangeReader",(function(e,n){se(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var i=t._networkStream.getRangeReader(e.begin,e.end);i?(n.onPull=function(){i.read().then((function(t){var e=t.value;t.done?n.close():(se(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(e),1,[e]))})).catch((function(t){n.error(t)}))},n.onCancel=function(e){i.cancel(e),n.ready.catch((function(e){if(!t.destroyed)throw e}))}):n.close()})),e.on("GetDoc",(function(e){var i=e.pdfInfo;t._numPages=i.numPages,t._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new Su(i,t))})),e.on("DocException",(function(t){var e;switch(t.name){case"PasswordException":e=new he(t.message,t.code);break;case"InvalidPDFException":e=new de(t.message);break;case"MissingPDFException":e=new fe(t.message);break;case"UnexpectedResponseException":e=new ve(t.message,t.status);break;case"UnknownErrorException":e=new ce(t.message,t.details);break;default:re("DocException - expected a valid Error.")}n._capability.reject(e)})),e.on("PasswordRequest",(function(e){if(P(Yu,t,Promise.withResolvers()),n.onPassword){try{n.onPassword((function(e){e instanceof Error?M(Yu,t).reject(e):M(Yu,t).resolve({password:e})}),e.code)}catch(e){M(Yu,t).reject(e)}}else M(Yu,t).reject(new he(e.message,e.code));return M(Yu,t).promise})),e.on("DataLoaded",(function(e){var i;null===(i=n.onProgress)||void 0===i||i.call(n,{loaded:e.length,total:e.length}),t.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(function(e){t.destroyed||M(qu,t).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(function(n){var i,a=L(n,3),r=a[0],s=a[1],o=a[2];if(t.destroyed)return null;if(t.commonObjs.has(r))return null;switch(s){case"Font":var u=t._params,l=u.disableFontFace,h=u.fontExtraProperties,c=u.pdfBug;if("error"in o){var d=o.error;ae("Error during font loading: ".concat(d)),t.commonObjs.resolve(r,d);break}var f=c&&null!==(i=globalThis.FontInspector)&&void 0!==i&&i.enabled?function(t,e){return globalThis.FontInspector.fontAdded(t,e)}:null,v=new Kr(o,{disableFontFace:l,inspectFont:f});t.fontLoader.bind(v).catch((function(){return e.sendWithPromise("FontFallback",{id:r})})).finally((function(){!h&&v.data&&(v.data=null),t.commonObjs.resolve(r,v)}));break;case"CopyLocalImage":var p=o.imageRef;se(p,"The imageRef must be defined.");var g,m=R(M(qu,t).values());try{for(m.s();!(g=m.n()).done;){var D,y=R(g.value.objs);try{for(y.s();!(D=y.n()).done;){var A=L(D.value,2)[1];if((null==A?void 0:A.ref)===p)return A.dataLen?(t.commonObjs.resolve(r,structuredClone(A)),A.dataLen):null}}catch(t){y.e(t)}finally{y.f()}}}catch(t){m.e(t)}finally{m.f()}break;case"FontPath":case"Image":case"Pattern":t.commonObjs.resolve(r,o);break;default:throw new Error("Got unknown common object type ".concat(s))}return null})),e.on("obj",(function(e){var n=L(e,4),i=n[0],a=n[1],r=n[2],s=n[3];if(!t.destroyed){var o,u=M(qu,t).get(a);if(!u.objs.has(i))if(0!==u._intentStates.size)switch(r){case"Image":u.objs.resolve(i,s),(null==s?void 0:s.dataLen)>1e7&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(i,s);break;default:throw new Error("Got unknown object type ".concat(r))}else null==s||null===(o=s.bitmap)||void 0===o||o.close()}})),e.on("DocProgress",(function(e){var i;t.destroyed||null===(i=n.onProgress)||void 0===i||i.call(n,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.cMapReaderFactory?t.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))})),e.on("FetchStandardFontData",(function(e){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.standardFontDataFactory?t.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"saveDocument",value:function(){var t,e,n=this;this.annotationStorage.size<=0&&ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");var i=this.annotationStorage.serializable,a=i.map,r=i.transfer;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null},r).finally((function(){n.annotationStorage.resetModified()}))}},{key:"getPage",value:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var n=t-1,i=M(Xu,this).get(n);if(i)return i;var a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then((function(i){if(e.destroyed)throw new Error("Transport destroyed");i.refStr&&M(Ku,e).set(i.refStr,t);var a=new Lu(n,i,e,e._params.pdfBug);return M(qu,e).set(n,a),a}));return M(Xu,this).set(n,a),a}},{key:"getPageIndex",value:function(t){return Cu(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}},{key:"getAnnotations",value:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}},{key:"getFieldObjects",value:function(){return B(Qu,this,Ju).call(this,"GetFieldObjects")}},{key:"hasJSActions",value:function(){return B(Qu,this,Ju).call(this,"HasJSActions")}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getDocJSActions",value:function(){return B(Qu,this,Ju).call(this,"GetDocJSActions")}},{key:"getPageJSActions",value:function(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(t){return B(Qu,this,Ju).call(this,"GetOptionalContentConfig").then((function(e){return new lo(e,t)}))}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this,e="GetMetadata",n=M(Gu,this).get(e);if(n)return n;var i=this.messageHandler.sendWithPromise(e,null).then((function(e){var n,i,a,r;return{info:e[0],metadata:e[1]?new $s(e[1]):null,contentDispositionFilename:null!==(n=null===(i=t._fullReader)||void 0===i?void 0:i.filename)&&void 0!==n?n:null,contentLength:null!==(a=null===(r=t._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==a?a:null}}));return M(Gu,this).set(e,i),i}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(t=_(C().mark((function t(){var e,n,i,a,r=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]&&r[0],!this.destroyed){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.messageHandler.sendWithPromise("Cleanup",null);case 5:n=R(M(qu,this).values()),t.prev=6,n.s();case 8:if((i=n.n()).done){t.next=15;break}if((a=i.value).cleanup()){t.next=13;break}throw new Error("startCleanup: Page ".concat(a.pageNumber," is currently rendering."));case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:this.commonObjs.clear(),e||this.fontLoader.clear(),M(Gu,this).clear(),this.filterFactory.destroy(!0),su.cleanup();case 28:case"end":return t.stop()}}),t,this,[[6,17,20,23]])}))),function(){return t.apply(this,arguments)})},{key:"cachedPageNumber",value:function(t){var e;if(!Cu(t))return null;var n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return null!==(e=M(Ku,this).get(n))&&void 0!==e?e:null}}]);var t}();function Ju(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=M(Gu,this).get(t);if(n)return n;var i=this.messageHandler.sendWithPromise(t,e);return M(Gu,this).set(t,i),i}var Zu=Symbol("INITIAL_DATA"),tl=new WeakMap,el=new WeakSet,nl=function(){return W((function t(){z(this,t),k(this,el),x(this,tl,Object.create(null))}),[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n=B(el,this,il).call(this,t);return n.promise.then((function(){return e(n.data)})),null}var i=M(tl,this)[t];if(!i||i.data===Zu)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return i.data}},{key:"has",value:function(t){var e=M(tl,this)[t];return!!e&&e.data!==Zu}},{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=B(el,this,il).call(this,t);n.data=e,n.resolve()}},{key:"clear",value:function(){for(var t in M(tl,this)){var e,n=M(tl,this)[t].data;null==n||null===(e=n.bitmap)||void 0===e||e.close()}P(tl,this,Object.create(null))}},{key:Symbol.iterator,value:C().mark((function t(){var e,n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=C().keys(M(tl,this));case 1:if((t.t1=t.t0()).done){t.next=10;break}if(e=t.t1.value,(n=M(tl,this)[e].data)!==Zu){t.next=6;break}return t.abrupt("continue",1);case 6:return t.next=8,[e,n];case 8:t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))}])}();function il(t){var e;return(e=M(tl,this))[t]||(e[t]=g(g({},Promise.withResolvers()),{},{data:Zu}))}var al=new WeakMap,rl=function(){return W((function t(e){z(this,t),x(this,al,null),P(al,this,e),this.onContinue=null}),[{key:"promise",get:function(){return M(al,this).capability.promise}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;M(al,this).cancel(null,t)}},{key:"separateAnnots",get:function(){var t=M(al,this).operatorList.separateAnnots;if(!t)return!1;var e=M(al,this).annotationCanvasMap;return t.form||t.canvas&&(null==e?void 0:e.size)>0}}])}(),sl=new WeakMap,ol=function(){return W((function t(e){var n=e.callback,i=e.params,a=e.objs,r=e.commonObjs,s=e.annotationCanvasMap,o=e.operatorList,u=e.pageIndex,l=e.canvasFactory,h=e.filterFactory,c=e.useRequestAnimationFrame,d=void 0!==c&&c,f=e.pdfBug,v=void 0!==f&&f,p=e.pageColors,g=void 0===p?null:p;z(this,t),x(this,sl,null),this.callback=n,this.params=i,this.objs=a,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=v,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new rl(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}),[{key:"completed",get:function(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function(t){var e,n,i=t.transparency,a=void 0!==i&&i,r=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(ul._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ul._.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var s=this.params,o=s.canvasContext,u=s.viewport,l=s.transform,h=s.background;this.gfx=new Bs(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:u,transparency:a,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}}},{key:"cancel",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),M(sl,this)&&(window.cancelAnimationFrame(M(sl,this)),P(sl,this,null)),ul._.delete(this._canvas),this.callback(e||new bn("Rendering cancelled, page ".concat(this._pageIndex+1),n))}},{key:"operatorListChanged",value:function(){var t;this.graphicsReady?(null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?P(sl,this,window.requestAnimationFrame((function(){P(sl,t,null),t._nextBound().catch(t._cancelBound)}))):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(t=_(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ul._.delete(this._canvas),this.callback()));case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),ul={_:new WeakSet},ll="4.5.136",hl="3a21f03b0";function cl(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function dl(t){return Math.max(0,Math.min(255,255*t))}var fl=function(){return W((function t(){z(this,t)}),null,[{key:"CMYK_G",value:function(t){var e=L(t,4),n=e[0],i=e[1],a=e[2],r=e[3];return["G",1-Math.min(1,.3*n+.59*a+.11*i+r)]}},{key:"G_CMYK",value:function(t){return["CMYK",0,0,0,1-L(t,1)[0]]}},{key:"G_RGB",value:function(t){var e=L(t,1)[0];return["RGB",e,e,e]}},{key:"G_rgb",value:function(t){var e=L(t,1)[0];return[e=dl(e),e,e]}},{key:"G_HTML",value:function(t){var e=cl(L(t,1)[0]);return"#".concat(e).concat(e).concat(e)}},{key:"RGB_G",value:function(t){var e=L(t,3);return["G",.3*e[0]+.59*e[1]+.11*e[2]]}},{key:"RGB_rgb",value:function(t){return t.map(dl)}},{key:"RGB_HTML",value:function(t){return"#".concat(t.map(cl).join(""))}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"T_rgb",value:function(){return[null]}},{key:"CMYK_RGB",value:function(t){var e=L(t,4),n=e[0],i=e[1],a=e[2],r=e[3];return["RGB",1-Math.min(1,n+r),1-Math.min(1,a+r),1-Math.min(1,i+r)]}},{key:"CMYK_rgb",value:function(t){var e=L(t,4),n=e[0],i=e[1],a=e[2],r=e[3];return[dl(1-Math.min(1,n+r)),dl(1-Math.min(1,a+r)),dl(1-Math.min(1,i+r))]}},{key:"CMYK_HTML",value:function(t){var e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}},{key:"RGB_CMYK",value:function(t){var e=L(t,3),n=1-e[0],i=1-e[1],a=1-e[2];return["CMYK",n,i,a,Math.min(n,i,a)]}}])}(),vl=function(){return W((function t(){z(this,t)}),null,[{key:"setupStorage",value:function(t,e,n,i,a){var r=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===a)break;t.addEventListener("input",(function(t){i.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?t.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===a)break;t.addEventListener("change",(function(t){i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===a)break;t.addEventListener("input",(function(t){i.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);var s,o=R(n.children);try{for(o.s();!(s=o.n()).done;){var u=s.value;u.attributes.value===r.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}}catch(t){o.e(t)}finally{o.f()}}t.addEventListener("input",(function(t){var n=t.target.options,a=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:a})}))}}},{key:"setAttributes",value:function(t){var e=t.html,n=t.element,i=t.storage,a=void 0===i?null:i,r=t.intent,s=t.linkService,o=n.attributes,u=e instanceof HTMLAnchorElement;"radio"===o.type&&(o.name="".concat(o.name,"-").concat(r));for(var l=0,h=Object.entries(o);l<h.length;l++){var c=L(h[l],2),d=c[0],f=c[1];if(null!=f)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!u||"href"!==d&&"newWindow"!==d)&&e.setAttribute(d,f)}}u&&s.addLinkAttributes(e,o.href,o.newWindow),a&&o.dataId&&this.setupStorage(e,o.dataId,n,a)}},{key:"render",value:function(t){var e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,a=t.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:a,linkService:n});var s="richText"!==a,o=t.div;if(o.append(r),t.viewport){var u="matrix(".concat(t.viewport.transform.join(","),")");o.style.transform=u}s&&o.setAttribute("class","xfaLayer xfaFont");var l=[];if(0===i.children.length){if(i.value){var h=document.createTextNode(i.value);r.append(h),s&&mu.shouldBuildText(i.name)&&l.push(h)}return{textDivs:l}}for(var c=[[i,-1,r]];c.length>0;){var d,f,v=L(c.at(-1),3),p=v[0],g=v[1],m=v[2];if(g+1!==p.children.length){var D=p.children[++c.at(-1)[1]];if(null!==D){var y=D.name;if("#text"!==y){var A=null!=D&&null!==(d=D.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(D.attributes.xmlns,y):document.createElement(y);if(m.append(A),D.attributes&&this.setAttributes({html:A,element:D,storage:e,intent:a,linkService:n}),(null===(f=D.children)||void 0===f?void 0:f.length)>0)c.push([D,-1,A]);else if(D.value){var b=document.createTextNode(D.value);s&&mu.shouldBuildText(y)&&l.push(b),A.append(b)}}else{var k=document.createTextNode(D.value);l.push(k),m.append(k)}}}else c.pop()}var E,w=R(o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(w.s();!(E=w.n()).done;){E.value.setAttribute("readOnly",!0)}}catch(t){w.e(t)}finally{w.f()}return{textDivs:l}}},{key:"update",value:function(t){var e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}])}(),pl=1e3,gl=new WeakSet;function ml(t){return{width:t[2]-t[0],height:t[3]-t[1]}}var Dl=function(){return W((function t(){z(this,t)}),null,[{key:"create",value:function(t){switch(t.data.annotationType){case xt:return new Fl(t);case _t:return new Ml(t);case Ut:switch(t.data.fieldType){case"Tx":return new Bl(t);case"Btn":return t.data.radioButton?new Il(t):t.data.checkBox?new Tl(t):new Rl(t);case"Ch":return new Nl(t);case"Sig":return new Ll(t)}return new Pl(t);case zt:return new Ol(t);case St:return new ph(t);case Mt:return new mh(t);case Pt:return new yh(t);case Bt:return new bh(t);case Tt:return new Eh(t);case Wt:return new Ch(t);case Ht:return new _h(t);case Lt:return new wh(t);case It:return new xh(t);case Rt:return new Sh(t);case Nt:return new Mh(t);case Ot:return new Ph(t);case jt:return new Bh(t);case Vt:return new Ih(t);default:return new El(t)}}}])}(),yl=new WeakMap,Al=new WeakMap,bl=new WeakMap,kl=new WeakSet,El=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.isRenderable,a=void 0!==i&&i,r=n.ignoreBorder,s=void 0!==r&&r,o=n.createQuadrilaterals,u=void 0!==o&&o;z(this,t),k(this,kl),x(this,yl,null),x(this,Al,!1),x(this,bl,null),this.isRenderable=a,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,a&&(this.container=this._createContainer(s)),u&&this._createQuadrilaterals()}return W(t,[{key:"_isEditable",get:function(){return this.data.isEditable}},{key:"hasPopupData",get:function(){return t._hasPopupData(this.data)}},{key:"updateEdited",value:function(t){var e;if(this.container){M(yl,this)||P(yl,this,{rect:this.data.rect.slice(0)});var n=t.rect;n&&B(kl,this,wl).call(this,n),null===(e=M(bl,this))||void 0===e||e.popup.updateEdited(t)}}},{key:"resetEdited",value:function(){var t;M(yl,this)&&(B(kl,this,wl).call(this,M(yl,this).rect),null===(t=M(bl,this))||void 0===t||t.popup.resetEdited(),P(yl,this,null))}},{key:"_createContainer",value:function(t){var e=this.data,n=this.parent,i=n.page,a=n.viewport,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Pl||(r.tabIndex=pl);var s=r.style;if(s.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Ol){var o=e.rotation;return e.hasOwnCanvas||0===o||this.setRotation(o,r),r}var u=ml(e.rect),l=u.width,h=u.height;if(!t&&e.borderStyle.width>0){s.borderWidth="".concat(e.borderStyle.width,"px");var c=e.borderStyle.horizontalCornerRadius,d=e.borderStyle.verticalCornerRadius;if(c>0||d>0){var f="calc(".concat(c,"px * var(--scale-factor)) / calc(").concat(d,"px * var(--scale-factor))");s.borderRadius=f}else if(this instanceof Il){var v="calc(".concat(l,"px * var(--scale-factor)) / calc(").concat(h,"px * var(--scale-factor))");s.borderRadius=v}switch(e.borderStyle.style){case Gt:s.borderStyle="solid";break;case qt:s.borderStyle="dashed";break;case Xt:ae("Unimplemented border style: beveled");break;case Kt:ae("Unimplemented border style: inset");break;case Yt:s.borderBottomStyle="solid"}var p=e.borderColor||null;p?(P(Al,this,!0),s.borderColor=ke.makeHexColor(0|p[0],0|p[1],0|p[2])):s.borderWidth=0}var g=ke.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),m=a.rawDims,D=m.pageWidth,y=m.pageHeight,A=m.pageX,b=m.pageY;s.left="".concat(100*(g[0]-A)/D,"%"),s.top="".concat(100*(g[1]-b)/y,"%");var k=e.rotation;return e.hasOwnCanvas||0===k?(s.width="".concat(100*l/D,"%"),s.height="".concat(100*h/y,"%")):this.setRotation(k,r),r}},{key:"setRotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(this.data.rect){var n,i,a=this.parent.viewport.rawDims,r=a.pageWidth,s=a.pageHeight,o=ml(this.data.rect),u=o.width,l=o.height;t%180==0?(n=100*u/r,i=100*l/s):(n=100*l/r,i=100*u/s),e.style.width="".concat(n,"%"),e.style.height="".concat(i,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}}},{key:"_commonActions",get:function(){var t=this,e=function(e,n,i){var a=i.detail[e],r=a[0],s=a.slice(1);i.target.style[n]=fl["".concat(r,"_HTML")](s),t.annotationStorage.setValue(t.data.id,w({},n,fl["".concat(r,"_rgb")](s)))};return ue(this,"_commonActions",{display:function(e){var n=e.detail.display,i=n%2==1;t.container.style.visibility=i?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{noView:i,noPrint:1===n||2===n})},print:function(e){t.annotationStorage.setValue(t.data.id,{noPrint:!e.detail.print})},hidden:function(e){var n=e.detail.hidden;t.container.style.visibility=n?"hidden":"visible",t.annotationStorage.setValue(t.data.id,{noPrint:n,noView:n})},focus:function(t){setTimeout((function(){return t.target.focus({preventScroll:!1})}),0)},userName:function(t){t.target.title=t.detail.userName},readonly:function(t){t.target.disabled=t.detail.readonly},required:function(e){t._setRequired(e.target,e.detail.required)},bgColor:function(t){e("bgColor","backgroundColor",t)},fillColor:function(t){e("fillColor","backgroundColor",t)},fgColor:function(t){e("fgColor","color",t)},textColor:function(t){e("textColor","color",t)},borderColor:function(t){e("borderColor","borderColor",t)},strokeColor:function(t){e("strokeColor","borderColor",t)},rotation:function(e){var n=e.detail.rotation;t.setRotation(n),t.annotationStorage.setValue(t.data.id,{rotation:n})}})}},{key:"_dispatchEventFromSandbox",value:function(t,e){for(var n=this._commonActions,i=0,a=Object.keys(e.detail);i<a.length;i++){var r=a[i],s=t[r]||n[r];null==s||s(e)}}},{key:"_setDefaultPropertiesFromJS",value:function(t){if(this.enableScripting){var e=this.annotationStorage.getRawValue(this.data.id);if(e)for(var n=this._commonActions,i=0,a=Object.entries(e);i<a.length;i++){var r=L(a[i],2),s=r[0],o=r[1],u=n[s];if(u)u({detail:w({},s,o),target:t}),delete e[s]}}}},{key:"_createQuadrilaterals",value:function(){if(this.container){var t=this.data.quadPoints;if(t){var e=this.data.rect.map((function(t){return Math.fround(t)})),n=L(e,4),i=n[0],a=n[1],r=n[2],s=n[3];if(8===t.length){var o=L(t.subarray(2,6),4),u=o[0],l=o[1],h=o[2],c=o[3];if(r===u&&s===l&&i===h&&a===c)return}var d,f=this.container.style;if(M(Al,this)){var v=f.borderColor,p=f.borderWidth;f.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(v,'" stroke-width="').concat(p,'">')],this.container.classList.add("hasBorder")}var g=r-i,m=s-a,D=this.svgFactory,y=D.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);var A=D.createElement("defs");y.append(A);var b=D.createElement("clipPath"),k="clippath_".concat(this.data.id);b.setAttribute("id",k),b.setAttribute("clipPathUnits","objectBoundingBox"),A.append(b);for(var E=2,w=t.length;E<w;E+=8){var C,F=t[E],_=t[E+1],x=t[E+2],S=t[E+3],P=D.createElement("rect"),B=(x-i)/g,T=(s-_)/m,I=(F-x)/g,R=(_-S)/m;P.setAttribute("x",B),P.setAttribute("y",T),P.setAttribute("width",I),P.setAttribute("height",R),b.append(P),null===(C=d)||void 0===C||C.push('<rect vector-effect="non-scaling-stroke" x="'.concat(B,'" y="').concat(T,'" width="').concat(I,'" height="').concat(R,'"/>'))}M(Al,this)&&(d.push("</g></svg>')"),f.backgroundImage=d.join("")),this.container.append(y),this.container.style.clipPath="url(#".concat(k,")")}}}},{key:"_createPopup",value:function(){var t=this.container,e=this.data;t.setAttribute("aria-haspopup","dialog");var n=P(bl,this,new Ol({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}},{key:"render",value:function(){re("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];if(this._fieldObjects){var i=this._fieldObjects[t];if(i){var a,r=R(i);try{for(r.s();!(a=r.n()).done;){var s=a.value,o=s.page,u=s.id,l=s.exportValues;if(-1!==o&&u!==e){var h="string"==typeof l?l:null,c=document.querySelector('[data-element-id="'.concat(u,'"]'));!c||gl.has(c)?n.push({id:u,exportValue:h,domElement:c}):ae("_getElementsByName - element not allowed: ".concat(u))}}}catch(t){r.e(t)}finally{r.f()}}return n}var d,f=R(document.getElementsByName(t));try{for(f.s();!(d=f.n()).done;){var v=d.value,p=v.exportValue,g=v.getAttribute("data-element-id");g!==e&&(gl.has(v)&&n.push({id:g,exportValue:p,domElement:v}))}}catch(t){f.e(t)}finally{f.f()}return n}},{key:"show",value:function(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}},{key:"hide",value:function(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}},{key:"getElementsToTriggerPopup",value:function(){return this.container}},{key:"addHighlightArea",value:function(){var t=this.getElementsToTriggerPopup();if(Array.isArray(t)){var e,n=R(t);try{for(n.s();!(e=n.n()).done;){e.value.classList.add("highlightArea")}}catch(t){n.e(t)}finally{n.f()}}else t.classList.add("highlightArea")}},{key:"_editOnDoubleClick",value:function(){var t=this;if(this._isEditable){var e=this.annotationEditorType,n=this.data.id;this.container.addEventListener("dblclick",(function(){var i;null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("switchannotationeditormode",{source:t,mode:e,editId:n})}))}}}],[{key:"_hasPopupData",value:function(t){var e=t.titleObj,n=t.contentsObj,i=t.richText;return!!(null!=e&&e.str||null!=n&&n.str||null!=i&&i.str)}}])}();function wl(t){var e=this.container.style,n=this.data,i=n.rect,a=n.rotation,r=this.parent.viewport.rawDims,s=r.pageWidth,o=r.pageHeight,u=r.pageX,l=r.pageY;null==i||i.splice.apply(i,[0,4].concat(A(t)));var h=ml(t),c=h.width,d=h.height;e.left="".concat(100*(t[0]-u)/s,"%"),e.top="".concat(100*(o-t[3]+l)/o,"%"),0===a?(e.width="".concat(100*c/s,"%"),e.height="".concat(100*d/o,"%")):this.setRotation(a)}var Cl=new WeakSet,Fl=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return z(this,e),k(n=V(this,e,[t,{isRenderable:!0,ignoreBorder:!(null==i||!i.ignoreBorder),createQuadrilaterals:!0}]),Cl),n.isTooltipOnly=t.data.isTooltipOnly,n}return q(e,El),W(e,[{key:"render",value:function(){var t=this.data,e=this.linkService,n=document.createElement("a");n.setAttribute("data-element-id",t.id);var i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(B(Cl,this,xl).call(this,n,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(B(Cl,this,Sl).call(this,n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}},{key:"_bindLink",value:function(t,e){var n=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&n.linkService.goToDestination(e),!1},(e||""===e)&&B(Cl,this,_l).call(this)}},{key:"_bindNamedAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeNamedAction(e),!1},B(Cl,this,_l).call(this)}},{key:"_bindJSAction",value:function(t,e){var n=this;t.href=this.linkService.getAnchorUrl("");for(var i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),a=function(){var a=s[r],o=i.get(a);if(!o)return 1;t[o]=function(){var t;return null===(t=n.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:n,detail:{id:e.id,name:a}}),!1}},r=0,s=Object.keys(e.actions);r<s.length;r++)a();t.onclick||(t.onclick=function(){return!1}),B(Cl,this,_l).call(this)}},{key:"_bindResetFormAction",value:function(t,e){var n=this,i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),B(Cl,this,_l).call(this),!this._fieldObjects)return ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=function(){return!1}));t.onclick=function(){null==i||i();var t=e.fields,a=e.refs,r=e.include,s=[];if(0!==t.length||0!==a.length){var o,u=new Set(a),l=R(t);try{for(l.s();!(o=l.n()).done;){var h,c=o.value,d=R(n._fieldObjects[c]||[]);try{for(d.s();!(h=d.n()).done;){var f=h.value.id;u.add(f)}}catch(t){d.e(t)}finally{d.f()}}}catch(t){l.e(t)}finally{l.f()}for(var v=0,p=Object.values(n._fieldObjects);v<p.length;v++){var g,m=R(p[v]);try{for(m.s();!(g=m.n()).done;){var D=g.value;u.has(D.id)===r&&s.push(D)}}catch(t){m.e(t)}finally{m.f()}}}else for(var y=0,b=Object.values(n._fieldObjects);y<b.length;y++){var k=b[y];s.push.apply(s,A(k))}for(var E,w=n.annotationStorage,C=[],F=0,_=s;F<_.length;F++){var x=_[F],S=x.id;switch(C.push(S),x.type){case"text":var M=x.defaultValue||"";w.setValue(S,{value:M});break;case"checkbox":case"radiobutton":var P=x.defaultValue===x.exportValues;w.setValue(S,{value:P});break;case"combobox":case"listbox":var B=x.defaultValue||"";w.setValue(S,{value:B});break;default:continue}var L=document.querySelector('[data-element-id="'.concat(S,'"]'));L&&(gl.has(L)?L.dispatchEvent(new Event("resetform")):ae("_bindResetFormAction - element not allowed: ".concat(S)))}n.enableScripting&&(null===(E=n.linkService.eventBus)||void 0===E||E.dispatch("dispatcheventinsandbox",{source:n,detail:{id:"app",ids:C,name:"ResetForm"}}));return!1}}}])}();function _l(){this.container.setAttribute("data-internal-link","")}function xl(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=function(){var t;return null===(t=n.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,i),!1},B(Cl,this,_l).call(this)}function Sl(t,e){var n=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return n.linkService.executeSetOCGState(e),!1},B(Cl,this,_l).call(this)}var Ml=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!0}])}return q(e,El),W(e,[{key:"render",value:function(){this.container.classList.add("textAnnotation");var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}])}(),Pl=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,El),W(e,[{key:"render",value:function(){return this.container}},{key:"showElementAndHideCanvas",value:function(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}},{key:"_getKeyModifier",value:function(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}},{key:"_setEventListener",value:function(t,e,n,i,a){var r=this;n.includes("mouse")?t.addEventListener(n,(function(t){var e;null===(e=r.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:r,detail:{id:r.data.id,name:i,value:a(t),shift:t.shiftKey,modifier:r._getKeyModifier(t)}})})):t.addEventListener(n,(function(t){var s;if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}a&&(null===(s=r.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:r,detail:{id:r.data.id,name:i,value:a(t)}}))}))}},{key:"_setEventListeners",value:function(t,e,n,i){var a,r=R(n);try{for(r.s();!(a=r.n()).done;){var s,o,u,l=L(a.value,2),h=l[0],c=l[1];if("Action"===c||null!==(s=this.data.actions)&&void 0!==s&&s[c])"Focus"!==c&&"Blur"!==c||e||(e={focused:!1}),this._setEventListener(t,e,h,c,i),"Focus"!==c||null!==(o=this.data.actions)&&void 0!==o&&o.Blur?"Blur"!==c||null!==(u=this.data.actions)&&void 0!==u&&u.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_setBackgroundColor",value:function(t){var e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":ke.makeHexColor(e[0],e[1],e[2])}},{key:"_setTextStyle",value:function(t){var e,n=this.data.defaultAppearanceData.fontColor,i=this.data.defaultAppearanceData.fontSize||9,a=t.style,r=function(t){return Math.round(10*t)/10};if(this.data.multiLine){var s=Math.abs(this.data.rect[3]-this.data.rect[1]-2),o=s/(Math.round(s/(ot*i))||1);e=Math.min(i,r(o/ot))}else{var u=Math.abs(this.data.rect[3]-this.data.rect[1]-2);e=Math.min(i,r(u/ot))}a.fontSize="calc(".concat(e,"px * var(--scale-factor))"),a.color=ke.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(a.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}])}(),Bl=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue}])}return q(e,Pl),W(e,[{key:"setPropertyOnSiblings",value:function(t,e,n,i){var a,r=this.annotationStorage,s=R(this._getElementsByName(t.name,t.id));try{for(s.s();!(a=s.n()).done;){var o=a.value;o.domElement&&(o.domElement[e]=n),r.setValue(o.id,w({},i,n))}}catch(t){s.e(t)}finally{s.f()}}},{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");var i=null;if(this.renderForms){var a,r=e.getValue(n,{value:this.data.fieldValue}),s=r.value||"",o=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));var u=r.formattedValue||(null===(a=this.data.textContent)||void 0===a?void 0:a.join("\n"))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));var l,h,c={userValue:s,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};if(this.data.multiLine)(i=document.createElement("textarea")).textContent=null!==(l=u)&&void 0!==l?l:s,this.data.doNotScroll&&(i.style.overflowY="hidden");else(i=document.createElement("input")).type="text",i.setAttribute("value",null!==(h=u)&&void 0!==h?h:s),this.data.doNotScroll&&(i.style.overflowX="hidden");this.data.hasOwnCanvas&&(i.hidden=!0),gl.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=pl,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",(function(a){e.setValue(n,{value:a.target.value}),t.setPropertyOnSiblings(i,"value",a.target.value,"value"),c.formattedValue=null})),i.addEventListener("resetform",(function(e){var n,a=null!==(n=t.data.defaultFieldValue)&&void 0!==n?n:"";i.value=c.userValue=a,c.formattedValue=null}));var d=function(t){var e=c.formattedValue;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var f;i.addEventListener("focus",(function(e){var n;if(!c.focused){var i=e.target;c.userValue&&(i.value=c.userValue),c.lastCommittedValue=i.value,c.commitKey=1,null!==(n=t.data.actions)&&void 0!==n&&n.Focus||(c.focused=!0)}})),i.addEventListener("updatefromsandbox",(function(i){t.showElementAndHideCanvas(i.target);var a={value:function(t){var i;c.userValue=null!==(i=t.detail.value)&&void 0!==i?i:"",e.setValue(n,{value:c.userValue.toString()}),t.target.value=c.userValue},formattedValue:function(t){var i=t.detail.formattedValue;c.formattedValue=i,null!=i&&t.target!==document.activeElement&&(t.target.value=i),e.setValue(n,{formattedValue:i})},selRange:function(t){var e;(e=t.target).setSelectionRange.apply(e,A(t.detail.selRange))},charLimit:function(i){var a,r=i.detail.charLimit,s=i.target;if(0!==r){s.setAttribute("maxLength",r);var o=c.userValue;!o||o.length<=r||(o=o.slice(0,r),s.value=c.userValue=o,e.setValue(n,{value:o}),null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:o,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}else s.removeAttribute("maxLength")}};t._dispatchEventFromSandbox(a,i)})),i.addEventListener("keydown",(function(e){var i;c.commitKey=1;var a=-1;if("Escape"===e.key?a=0:"Enter"!==e.key||t.data.multiLine?"Tab"===e.key&&(c.commitKey=3):a=2,-1!==a){var r=e.target.value;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:r,willCommit:!0,commitKey:a,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}}));var v=d;d=null,i.addEventListener("blur",(function(e){var i;if(c.focused&&e.relatedTarget){null!==(i=t.data.actions)&&void 0!==i&&i.Blur||(c.focused=!1);var a,r=e.target.value;if(c.userValue=r,c.lastCommittedValue!==r)null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:r,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}});v(e)}})),null!==(f=this.data.actions)&&void 0!==f&&f.Keystroke&&i.addEventListener("beforeinput",(function(e){var i;c.lastCommittedValue=null;var a=e.data,r=e.target,s=r.value,o=r.selectionStart,u=r.selectionEnd,l=o,h=u;switch(e.inputType){case"deleteWordBackward":var d=s.substring(0,o).match(/\w*[^\w]*$/);d&&(l-=d[0].length);break;case"deleteWordForward":var f=s.substring(o).match(/^[^\w]*\w*/);f&&(h+=f[0].length);break;case"deleteContentBackward":o===u&&(l-=1);break;case"deleteContentForward":o===u&&(h+=1)}e.preventDefault(),null===(i=t.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:s,change:a||"",willCommit:!1,selStart:l,selEnd:h}})})),this._setEventListeners(i,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.value}))}if(d&&i.addEventListener("blur",d),this.data.comb){var p=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing="calc(".concat(p,"px * var(--scale-factor) - 1ch)")}}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}])}(),Ll=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!!t.data.hasOwnCanvas}])}return q(e,Pl),W(e)}(),Tl=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:t.renderForms}])}return q(e,Pl),W(e,[{key:"render",value:function(){var t=this,e=this.annotationStorage,n=this.data,i=n.id,a=e.getValue(i,{value:n.exportValue===n.fieldValue}).value;"string"==typeof a&&(a="Off"!==a,e.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var r=document.createElement("input");return gl.add(r),r.setAttribute("data-element-id",i),r.disabled=n.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=n.fieldName,a&&r.setAttribute("checked",!0),r.setAttribute("exportValue",n.exportValue),r.tabIndex=pl,r.addEventListener("change",(function(a){var r,s=a.target,o=s.name,u=s.checked,l=R(t._getElementsByName(o,i));try{for(l.s();!(r=l.n()).done;){var h=r.value,c=u&&h.exportValue===n.exportValue;h.domElement&&(h.domElement.checked=c),e.setValue(h.id,{value:c})}}catch(t){l.e(t)}finally{l.f()}e.setValue(i,{value:u})})),r.addEventListener("resetform",(function(t){var e=n.defaultFieldValue||"Off";t.target.checked=e===n.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(function(n){var a={value:function(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}};t._dispatchEventFromSandbox(a,n)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}])}(),Il=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:t.renderForms}])}return q(e,Pl),W(e,[{key:"render",value:function(){var t=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var e=this.annotationStorage,n=this.data,i=n.id,a=e.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if("string"==typeof a&&(a=a!==n.buttonValue,e.setValue(i,{value:a})),a){var r,s=R(this._getElementsByName(n.fieldName,i));try{for(s.s();!(r=s.n()).done;){var o=r.value;e.setValue(o.id,{value:!1})}}catch(t){s.e(t)}finally{s.f()}}var u=document.createElement("input");if(gl.add(u),u.setAttribute("data-element-id",i),u.disabled=n.readOnly,this._setRequired(u,this.data.required),u.type="radio",u.name=n.fieldName,a&&u.setAttribute("checked",!0),u.tabIndex=pl,u.addEventListener("change",(function(n){var a,r=n.target,s=r.name,o=r.checked,u=R(t._getElementsByName(s,i));try{for(u.s();!(a=u.n()).done;){var l=a.value;e.setValue(l.id,{value:!1})}}catch(t){u.e(t)}finally{u.f()}e.setValue(i,{value:o})})),u.addEventListener("resetform",(function(t){var e=n.defaultFieldValue;t.target.checked=null!=e&&e===n.buttonValue})),this.enableScripting&&this.hasJSActions){var l=n.buttonValue;u.addEventListener("updatefromsandbox",(function(n){var a={value:function(n){var a,r=l===n.detail.value,s=R(t._getElementsByName(n.target.name));try{for(s.s();!(a=s.n()).done;){var o=a.value,u=r&&o.id===i;o.domElement&&(o.domElement.checked=u),e.setValue(o.id,{value:u})}}catch(t){s.e(t)}finally{s.f()}}};t._dispatchEventFromSandbox(a,n)})),this._setEventListeners(u,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(t){return t.target.checked}))}return this._setBackgroundColor(u),this._setDefaultPropertiesFromJS(u),this.container.append(u),this.container}}])}(),Rl=function(t){function e(t){return z(this,e),V(this,e,[t,{ignoreBorder:t.data.hasAppearance}])}return q(e,Fl),W(e,[{key:"render",value:function(){var t=this,n=D(e,"render",this,3)([]);n.classList.add("buttonWidgetAnnotation","pushButton");var i=n.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",(function(e){t._dispatchEventFromSandbox({},e)}))),n}}])}(),Nl=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:t.renderForms}])}return q(e,Pl),W(e,[{key:"render",value:function(){var t=this;this.container.classList.add("choiceWidgetAnnotation");var e=this.annotationStorage,n=this.data.id,i=e.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");gl.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=pl;var r=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",(function(e){var n,i=t.data.defaultFieldValue,r=R(a.options);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.selected=s.value===i}}catch(t){r.e(t)}finally{r.f()}}));var s,o=R(this.data.options);try{for(o.s();!(s=o.n()).done;){var u=s.value,l=document.createElement("option");l.textContent=u.displayValue,l.value=u.exportValue,i.value.includes(u.exportValue)&&(l.setAttribute("selected",!0),r=!1),a.append(l)}}catch(t){o.e(t)}finally{o.f()}var h=null;if(r){var c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),a.prepend(c),h=function(){c.remove(),a.removeEventListener("input",h),h=null},a.addEventListener("input",h)}var d=function(t){var e=t?"value":"textContent",n=a.options;return a.multiple?Array.prototype.filter.call(n,(function(t){return t.selected})).map((function(t){return t[e]})):-1===n.selectedIndex?null:n[n.selectedIndex][e]},f=d(!1),v=function(t){var e=t.target.options;return Array.prototype.map.call(e,(function(t){return{displayValue:t.textContent,exportValue:t.value}}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",(function(i){var r={value:function(t){var i;null===(i=h)||void 0===i||i();var r,s=t.detail.value,o=new Set(Array.isArray(s)?s:[s]),u=R(a.options);try{for(u.s();!(r=u.n()).done;){var l=r.value;l.selected=o.has(l.value)}}catch(t){u.e(t)}finally{u.f()}e.setValue(n,{value:d(!0)}),f=d(!1)},multipleSelection:function(t){a.multiple=!0},remove:function(t){var i=a.options,r=t.detail.remove;if(i[r].selected=!1,a.remove(r),i.length>0){var s=Array.prototype.findIndex.call(i,(function(t){return t.selected}));-1===s&&(i[0].selected=!0)}e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},clear:function(t){for(;0!==a.length;)a.remove(0);e.setValue(n,{value:null,items:[]}),f=d(!1)},insert:function(t){var i=t.detail.insert,r=i.index,s=i.displayValue,o=i.exportValue,u=a.children[r],l=document.createElement("option");l.textContent=s,l.value=o,u?u.before(l):a.append(l),e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},items:function(t){for(var i=t.detail.items;0!==a.length;)a.remove(0);var r,s=R(i);try{for(s.s();!(r=s.n()).done;){var o=r.value,u=o.displayValue,l=o.exportValue,h=document.createElement("option");h.textContent=u,h.value=l,a.append(h)}}catch(t){s.e(t)}finally{s.f()}a.options.length>0&&(a.options[0].selected=!0),e.setValue(n,{value:d(!0),items:v(t)}),f=d(!1)},indices:function(t){var i,a=new Set(t.detail.indices),r=R(t.target.options);try{for(r.s();!(i=r.n()).done;){var s=i.value;s.selected=a.has(s.index)}}catch(t){r.e(t)}finally{r.f()}e.setValue(n,{value:d(!0)}),f=d(!1)},editable:function(t){t.target.disabled=!t.detail.editable}};t._dispatchEventFromSandbox(r,i)})),a.addEventListener("input",(function(i){var a,r=d(!0),s=d(!1);e.setValue(n,{value:r}),i.preventDefault(),null===(a=t.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:t,detail:{id:n,name:"Keystroke",value:f,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(function(t){return t.target.value}))):a.addEventListener("input",(function(t){e.setValue(n,{value:d(!0)})})),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}])}(),Ol=function(t){function e(t){var n;z(this,e);var i=t.data,a=t.elements;return(n=V(this,e,[t,{isRenderable:El._hasPopupData(i)}])).elements=a,n.popup=null,n}return q(e,El),W(e,[{key:"render",value:function(){this.container.classList.add("popupAnnotation");var t,e=this.popup=new rh({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[],i=R(this.elements);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.popup=e,n.push(a.data.id),a.addHighlightArea()}}catch(t){i.e(t)}finally{i.f()}return this.container.setAttribute("aria-controls",n.map((function(t){return"".concat(xe).concat(t)})).join(",")),this.container}}])}(),jl=new WeakMap,Wl=new WeakMap,Hl=new WeakMap,zl=new WeakMap,Vl=new WeakMap,Ul=new WeakMap,Gl=new WeakMap,ql=new WeakMap,Xl=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,$l=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,th=new WeakMap,eh=new WeakMap,nh=new WeakMap,ih=new WeakMap,ah=new WeakSet,rh=function(){return W((function t(e){var n=e.container,i=e.color,a=e.elements,r=e.titleObj,s=e.modificationDate,o=e.contentsObj,u=e.richText,l=e.parent,h=e.rect,c=e.parentRect,d=e.open;z(this,t),k(this,ah),x(this,jl,B(ah,this,hh).bind(this)),x(this,Wl,B(ah,this,vh).bind(this)),x(this,Hl,B(ah,this,fh).bind(this)),x(this,zl,B(ah,this,dh).bind(this)),x(this,Vl,null),x(this,Ul,null),x(this,Gl,null),x(this,ql,null),x(this,Xl,null),x(this,Kl,null),x(this,Yl,null),x(this,Ql,!1),x(this,$l,null),x(this,Jl,null),x(this,Zl,null),x(this,th,null),x(this,eh,null),x(this,nh,null),x(this,ih,!1),P(Ul,this,n),P(eh,this,r),P(Gl,this,o),P(th,this,u),P(Kl,this,l),P(Vl,this,i),P(Zl,this,h),P(Yl,this,c),P(Xl,this,a),P(ql,this,Mn.toDateObject(s)),this.trigger=a.flatMap((function(t){return t.getElementsToTriggerPopup()}));var f,v=R(this.trigger);try{for(v.s();!(f=v.n()).done;){var p=f.value;p.addEventListener("click",M(zl,this)),p.addEventListener("mouseenter",M(Hl,this)),p.addEventListener("mouseleave",M(Wl,this)),p.classList.add("popupTriggerArea")}}catch(t){v.e(t)}finally{v.f()}var g,m=R(a);try{for(m.s();!(g=m.n()).done;){var D;null===(D=g.value.container)||void 0===D||D.addEventListener("keydown",M(jl,this))}}catch(t){m.e(t)}finally{m.f()}M(Ul,this).hidden=!0,d&&B(ah,this,dh).call(this)}),[{key:"render",value:function(){if(!M($l,this)){var t=P($l,this,document.createElement("div"));if(t.className="popup",M(Vl,this)){var e=t.style.outlineColor=ke.makeHexColor.apply(ke,A(M(Vl,this)));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)");else{t.style.backgroundColor=ke.makeHexColor.apply(ke,A(M(Vl,this).map((function(t){return Math.floor(.7*(255-t)+t)}))))}}var n=document.createElement("span");n.className="header";var i=document.createElement("h1");n.append(i);var a=M(eh,this);if(i.dir=a.dir,i.textContent=a.str,t.append(n),M(ql,this)){var r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:M(ql,this).toLocaleDateString(),time:M(ql,this).toLocaleTimeString()})),n.append(r)}var s=E(ah,this,sh);if(s)vl.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{var o=this._formatContents(M(Gl,this));t.append(o)}M(Ul,this).append(t)}}},{key:"_formatContents",value:function(t){var e=t.str,n=t.dir,i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;for(var a=e.split(/(?:\r\n?|\n)/),r=0,s=a.length;r<s;++r){var o=a[r];i.append(document.createTextNode(o)),r<s-1&&i.append(document.createElement("br"))}return i}},{key:"updateEdited",value:function(t){var e,n=t.rect,i=t.popupContent;M(nh,this)||P(nh,this,{contentsObj:M(Gl,this),richText:M(th,this)}),n&&P(Jl,this,null),i&&(P(th,this,B(ah,this,lh).call(this,i)),P(Gl,this,null)),null===(e=M($l,this))||void 0===e||e.remove(),P($l,this,null)}},{key:"resetEdited",value:function(){var t;if(M(nh,this)){var e=M(nh,this);m(P,[Gl,this])._=e.contentsObj,m(P,[th,this])._=e.richText,P(nh,this,null),null===(t=M($l,this))||void 0===t||t.remove(),P($l,this,null),P(Jl,this,null)}}},{key:"forceHide",value:function(){P(ih,this,this.isVisible),M(ih,this)&&(M(Ul,this).hidden=!0)}},{key:"maybeShow",value:function(){M(ih,this)&&(M($l,this)||B(ah,this,fh).call(this),P(ih,this,!1),M(Ul,this).hidden=!1)}},{key:"isVisible",get:function(){return!1===M(Ul,this).hidden}}])}();function sh(t){var e=M(th,t),n=M(Gl,t);return null==e||!e.str||null!=n&&n.str&&n.str!==e.str?null:M(th,t).html||null}function oh(t){var e;return(null===(e=E(ah,t,sh))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.fontSize)||0}function uh(t){var e;return(null===(e=E(ah,t,sh))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.color)||null}function lh(t){var e,n=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:E(ah,this,uh),fontSize:E(ah,this,oh)?"calc(".concat(E(ah,this,oh),"px * var(--scale-factor))"):""}},r=R(t.split("\n"));try{for(r.s();!(e=r.n()).done;){var s=e.value;n.push({name:"span",value:s,attributes:a})}}catch(t){r.e(t)}finally{r.f()}return i}function hh(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&M(Ql,this))&&B(ah,this,dh).call(this)}function ch(){if(null===M(Jl,this)){var t,e=M(Kl,this),n=e.page.view,i=e.viewport.rawDims,a=i.pageWidth,r=i.pageHeight,s=i.pageX,o=i.pageY,u=!!M(Yl,this),l=M(u?Yl:Zl,this),h=R(M(Xl,this));try{for(h.s();!(t=h.n()).done;){var c=t.value;if(!l||null!==ke.intersect(c.data.rect,l)){l=c.data.rect,u=!0;break}}}catch(t){h.e(t)}finally{h.f()}var d=ke.normalizeRect([l[0],n[3]-l[1]+n[1],l[2],n[3]-l[3]+n[1]]),f=u?l[2]-l[0]+5:0,v=d[0]+f,p=d[1];P(Jl,this,[100*(v-s)/a,100*(p-o)/r]);var g=M(Ul,this).style;g.left="".concat(M(Jl,this)[0],"%"),g.top="".concat(M(Jl,this)[1],"%")}}function dh(){P(Ql,this,!M(Ql,this)),M(Ql,this)?(B(ah,this,fh).call(this),M(Ul,this).addEventListener("click",M(zl,this)),M(Ul,this).addEventListener("keydown",M(jl,this))):(B(ah,this,vh).call(this),M(Ul,this).removeEventListener("click",M(zl,this)),M(Ul,this).removeEventListener("keydown",M(jl,this)))}function fh(){M($l,this)||this.render(),this.isVisible?M(Ql,this)&&M(Ul,this).classList.add("focused"):(B(ah,this,ch).call(this),M(Ul,this).hidden=!1,M(Ul,this).style.zIndex=parseInt(M(Ul,this).style.zIndex)+1e3)}function vh(){M(Ul,this).classList.remove("focused"),!M(Ql,this)&&this.isVisible&&(M(Ul,this).hidden=!0,M(Ul,this).style.zIndex=parseInt(M(Ul,this).style.zIndex)-1e3)}var ph=function(t){function e(t){var n;return z(this,e),(n=V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}])).textContent=t.data.textContent,n.textPosition=t.data.textPosition,n.annotationEditorType=mt.FREETEXT,n}return q(e,El),W(e,[{key:"render",value:function(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");var e,n=R(this.textContent);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=document.createElement("span");a.textContent=i,t.append(a)}}catch(t){n.e(t)}finally{n.f()}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}])}(),gh=new WeakMap,mh=function(t){function e(t){var n;return z(this,e),x(n=V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),gh,null),n}return q(e,El),W(e,[{key:"render",value:function(){this.container.classList.add("lineAnnotation");var t=this.data,e=ml(t.rect),n=e.width,i=e.height,a=this.svgFactory.create(n,i,!0),r=P(gh,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return M(gh,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),Dh=new WeakMap,yh=function(t){function e(t){var n;return z(this,e),x(n=V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),Dh,null),n}return q(e,El),W(e,[{key:"render",value:function(){this.container.classList.add("squareAnnotation");var t=this.data,e=ml(t.rect),n=e.width,i=e.height,a=this.svgFactory.create(n,i,!0),r=t.borderStyle.width,s=P(Dh,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",n-r),s.setAttribute("height",i-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return M(Dh,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),Ah=new WeakMap,bh=function(t){function e(t){var n;return z(this,e),x(n=V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),Ah,null),n}return q(e,El),W(e,[{key:"render",value:function(){this.container.classList.add("circleAnnotation");var t=this.data,e=ml(t.rect),n=e.width,i=e.height,a=this.svgFactory.create(n,i,!0),r=t.borderStyle.width,s=P(Ah,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",n/2),s.setAttribute("cy",i/2),s.setAttribute("rx",n/2-r/2),s.setAttribute("ry",i/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return M(Ah,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),kh=new WeakMap,Eh=function(t){function e(t){var n;return z(this,e),x(n=V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),kh,null),n.containerClassName="polylineAnnotation",n.svgElementName="svg:polyline",n}return q(e,El),W(e,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var t=this.data,e=t.rect,n=t.vertices,i=t.borderStyle,a=t.popupRef;if(!n)return this.container;for(var r=ml(e),s=r.width,o=r.height,u=this.svgFactory.create(s,o,!0),l=[],h=0,c=n.length;h<c;h+=2){var d=n[h]-e[0],f=e[3]-n[h+1];l.push("".concat(d,",").concat(f))}l=l.join(" ");var v=P(kh,this,this.svgFactory.createElement(this.svgElementName));return v.setAttribute("points",l),v.setAttribute("stroke-width",i.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),u.append(v),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}},{key:"getElementsToTriggerPopup",value:function(){return M(kh,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),wh=function(t){function e(t){var n;return z(this,e),(n=V(this,e,[t])).containerClassName="polygonAnnotation",n.svgElementName="svg:polygon",n}return q(e,Eh),W(e)}(),Ch=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}])}return q(e,El),W(e,[{key:"render",value:function(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}])}(),Fh=new WeakMap,_h=function(t){function e(t){var n;return z(this,e),x(n=V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}]),Fh,[]),n.containerClassName="inkAnnotation",n.svgElementName="svg:polyline",n.annotationEditorType=mt.INK,n}return q(e,El),W(e,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var t,e=this.data,n=e.rect,i=e.inkLists,a=e.borderStyle,r=e.popupRef,s=ml(n),o=s.width,u=s.height,l=this.svgFactory.create(o,u,!0),h=R(i);try{for(h.s();!(t=h.n()).done;){for(var c=t.value,d=[],f=0,v=c.length;f<v;f+=2){var p=c[f]-n[0],g=n[3]-c[f+1];d.push("".concat(p,",").concat(g))}d=d.join(" ");var m=this.svgFactory.createElement(this.svgElementName);M(Fh,this).push(m),m.setAttribute("points",d),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),l.append(m)}}catch(t){h.e(t)}finally{h.f()}return this.container.append(l),this.container}},{key:"getElementsToTriggerPopup",value:function(){return M(Fh,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}(),xh=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return q(e,El),W(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}])}(),Sh=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return q(e,El),W(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}])}(),Mh=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return q(e,El),W(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}])}(),Ph=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}])}return q(e,El),W(e,[{key:"render",value:function(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}])}(),Bh=function(t){function e(t){return z(this,e),V(this,e,[t,{isRenderable:!0,ignoreBorder:!0}])}return q(e,El),W(e,[{key:"render",value:function(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}])}(),Lh=new WeakMap,Th=new WeakSet,Ih=function(t){function e(t){var n,i;z(this,e),k(i=V(this,e,[t,{isRenderable:!0}]),Th),x(i,Lh,null);var a=i.data.file;return i.filename=a.filename,i.content=a.content,null===(n=i.linkService.eventBus)||void 0===n||n.dispatch("fileattachmentannotation",g({source:i},a)),i}return q(e,El),W(e,[{key:"render",value:function(){var t=this;this.container.classList.add("fileAttachmentAnnotation");var e,n=this.container,i=this.data;i.hasAppearance||0===i.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(i.name)?"paperclip":"pushpin",".svg"),i.fillAlpha&&i.fillAlpha<1&&(e.style="filter: opacity(".concat(Math.round(100*i.fillAlpha),"%);"))),e.addEventListener("dblclick",B(Th,this,Rh).bind(this)),P(Lh,this,e);var a=Ae.platform.isMac;return n.addEventListener("keydown",(function(e){"Enter"===e.key&&(a?e.metaKey:e.ctrlKey)&&B(Th,t,Rh).call(t)})),!i.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),n.append(e),n}},{key:"getElementsToTriggerPopup",value:function(){return M(Lh,this)}},{key:"addHighlightArea",value:function(){this.container.classList.add("highlightArea")}}])}();function Rh(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}var Nh=new WeakMap,Oh=new WeakMap,jh=new WeakMap,Wh=new WeakSet,Hh=function(){return W((function t(e){var n=e.div,i=e.accessibilityManager,a=e.annotationCanvasMap,r=e.annotationEditorUIManager,s=e.page,o=e.viewport;z(this,t),k(this,Wh),x(this,Nh,null),x(this,Oh,null),x(this,jh,new Map),this.div=n,P(Nh,this,i),P(Oh,this,a),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}),[{key:"hasEditableAnnotations",value:function(){return M(jh,this).size>0}},{key:"render",value:(t=_(C().mark((function t(e){var n,i,a,r,s,o,u,l,h,c,d,f,v,p,g,m;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.annotations,In(i=this.div,this.viewport),a=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new yn,annotationStorage:e.annotationStorage||new zr,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null},s=R(n),t.prev=6,s.s();case 8:if((o=s.n()).done){t.next=34;break}if(!(u=o.value).noHTML){t.next=12;break}return t.abrupt("continue",32);case 12:if(l=u.annotationType===zt){t.next=19;break}if(h=ml(u.rect),c=h.width,d=h.height,!(c<=0||d<=0)){t.next=17;break}return t.abrupt("continue",32);case 17:t.next=23;break;case 19:if(f=a.get(u.id)){t.next=22;break}return t.abrupt("continue",32);case 22:r.elements=f;case 23:if(r.data=u,(v=Dl.create(r)).isRenderable){t.next=27;break}return t.abrupt("continue",32);case 27:!l&&u.popupRef&&((p=a.get(u.popupRef))?p.push(v):a.set(u.popupRef,[v])),g=v.render(),u.hidden&&(g.style.visibility="hidden"),B(Wh,this,zh).call(this,g,u.id),v._isEditable&&(M(jh,this).set(v.data.id,v),null===(m=this._annotationEditorUIManager)||void 0===m||m.renderAnnotationElement(v));case 32:t.next=8;break;case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(6),s.e(t.t0);case 39:return t.prev=39,s.f(),t.finish(39);case 42:B(Wh,this,Vh).call(this);case 43:case"end":return t.stop()}}),t,this,[[6,36,39,42]])}))),function(e){return t.apply(this,arguments)})},{key:"update",value:function(t){var e=t.viewport,n=this.div;this.viewport=e,In(n,{rotation:e.rotation}),B(Wh,this,Vh).call(this),n.hidden=!1}},{key:"getEditableAnnotations",value:function(){return Array.from(M(jh,this).values())}},{key:"getEditableAnnotation",value:function(t){return M(jh,this).get(t)}}]);var t}();function zh(t,e){var n,i=t.firstChild||t;i.id="".concat(xe).concat(e),this.div.append(t),null===(n=M(Nh,this))||void 0===n||n.moveElementInDOM(this.div,t,i,!1)}function Vh(){if(M(Oh,this)){var t,e=this.div,n=R(M(Oh,this));try{for(n.s();!(t=n.n()).done;){var i=L(t.value,2),a=i[0],r=i[1],s=e.querySelector('[data-annotation-id="'.concat(a,'"]'));if(s){r.className="annotationContent";var o=s.firstChild;o?"CANVAS"===o.nodeName?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):s.append(r)}}}catch(t){n.e(t)}finally{n.f()}M(Oh,this).clear()}}var Uh=/\r\n?|\n/g,Gh=new WeakMap,qh=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,Qh=new WeakMap,$h=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,tc=new WeakMap,ec=new WeakSet,nc=function(t){function e(t){var n;return z(this,e),k(n=V(this,e,[g(g({},t),{},{name:"freeTextEditor"})]),ec),x(n,Gh,n.editorDivBlur.bind(n)),x(n,qh,n.editorDivFocus.bind(n)),x(n,Xh,n.editorDivInput.bind(n)),x(n,Kh,n.editorDivKeydown.bind(n)),x(n,Yh,n.editorDivPaste.bind(n)),x(n,Qh,void 0),x(n,$h,""),x(n,Jh,"".concat(n.id,"-editor")),x(n,Zh,void 0),x(n,tc,null),P(Qh,n,t.color||e._defaultColor||mr._defaultLineColor),P(Zh,n,t.fontSize||e._defaultFontSize),n}return q(e,mr),W(e,[{key:"updateParams",value:function(t,e){switch(t){case Dt.FREETEXT_SIZE:B(ec,this,ic).call(this,e);break;case Dt.FREETEXT_COLOR:B(ec,this,ac).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[Dt.FREETEXT_SIZE,M(Zh,this)],[Dt.FREETEXT_COLOR,M(Qh,this)]]}},{key:"_translateEmpty",value:function(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}},{key:"getInitialTranslation",value:function(){var t=this.parentScale;return[-e._internalPadding*t,-(e._internalPadding+M(Zh,this))*t]}},{key:"rebuild",value:function(){this.parent&&(D(e,"rebuild",this,3)([]),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}},{key:"enableEditMode",value:function(){if(!this.isInEditMode()){this.parent.setEditingState(!1),this.parent.updateToolbar(mt.FREETEXT),D(e,"enableEditMode",this,3)([]),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");var t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",M(Kh,this),{signal:t}),this.editorDiv.addEventListener("focus",M(qh,this),{signal:t}),this.editorDiv.addEventListener("blur",M(Gh,this),{signal:t}),this.editorDiv.addEventListener("input",M(Xh,this),{signal:t}),this.editorDiv.addEventListener("paste",M(Yh,this),{signal:t})}}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),D(e,"disableEditMode",this,3)([]),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",M(Jh,this)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",M(Kh,this)),this.editorDiv.removeEventListener("focus",M(qh,this)),this.editorDiv.removeEventListener("blur",M(Gh,this)),this.editorDiv.removeEventListener("input",M(Xh,this)),this.editorDiv.removeEventListener("paste",M(Yh,this)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}},{key:"focusin",value:function(t){this._focusEventsAllowed&&(D(e,"focusin",this,3)([t]),t.target!==this.editorDiv&&this.editorDiv.focus())}},{key:"onceAdded",value:function(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}},{key:"isEmpty",value:function(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}},{key:"remove",value:function(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),D(e,"remove",this,3)([])}},{key:"commit",value:function(){var t=this;if(this.isInEditMode()){D(e,"commit",this,3)([]),this.disableEditMode();var n=M($h,this),i=P($h,this,B(ec,this,rc).call(this).trimEnd());if(n!==i){var a=function(e){P($h,t,e),e?(B(ec,t,uc).call(t),t._uiManager.rebuild(t),B(ec,t,sc).call(t)):t.remove()};this.addCommands({cmd:function(){a(i)},undo:function(){a(n)},mustExec:!1}),B(ec,this,sc).call(this)}}}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"enterInEditMode",value:function(){this.enableEditMode(),this.editorDiv.focus()}},{key:"dblclick",value:function(t){this.enterInEditMode()}},{key:"keydown",value:function(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}},{key:"editorDivKeydown",value:function(t){e._keyboardManager.exec(this,t)}},{key:"editorDivFocus",value:function(t){this.isEditing=!0}},{key:"editorDivBlur",value:function(t){this.isEditing=!1}},{key:"editorDivInput",value:function(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){var t,n,i=this;if(this.div)return this.div;this.width&&(t=this.x,n=this.y),D(e,"render",this,3)([]),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",M(Jh,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),mr._l10nPromise.get("pdfjs-free-text-default-content").then((function(t){var e;return null===(e=i.editorDiv)||void 0===e?void 0:e.setAttribute("default-content",t)})),this.editorDiv.contentEditable=!0;var a=this.editorDiv.style;if(a.fontSize="calc(".concat(M(Zh,this),"px * var(--scale-factor))"),a.color=M(Qh,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),ni(this,this.div,["dblclick","keydown"]),this.width){var r=L(this.parentDimensions,2),s=r[0],o=r[1];if(this.annotationElementId){var u=M(tc,this).position,l=L(this.getInitialTranslation(),2),h=l[0],c=l[1],d=L(this.pageTranslationToScreen(h,c),2);h=d[0],c=d[1];var f,v,p=L(this.pageDimensions,2),g=p[0],m=p[1],y=L(this.pageTranslation,2),A=y[0],b=y[1];switch(this.rotation){case 0:f=t+(u[0]-A)/g,v=n+this.height-(u[1]-b)/m;break;case 90:f=t+(u[0]-A)/g,v=n-(u[1]-b)/m;var k=[c,-h];h=k[0],c=k[1];break;case 180:f=t-this.width+(u[0]-A)/g,v=n-(u[1]-b)/m;var E=[-h,-c];h=E[0],c=E[1];break;case 270:f=t+(u[0]-A-this.height*m)/g,v=n+(u[1]-b-this.width*g)/m;var w=[-c,h];h=w[0],c=w[1]}this.setAt(f*s,v*o,h,c)}else this.setAt(t*s,n*o,this.width*s,this.height*o);B(ec,this,uc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"editorDivPaste",value:function(t){var n=t.clipboardData||window.clipboardData,i=n.types;if(1!==i.length||"text/plain"!==i[0]){t.preventDefault();var a=hc.call(e,n.getData("text")||"").replaceAll(Uh,"\n");if(a){var r=window.getSelection();if(r.rangeCount){this.editorDiv.normalize(),r.deleteFromDocument();var s=r.getRangeAt(0);if(!a.includes("\n"))return s.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),void r.collapseToStart();var o=s.startContainer,u=s.startOffset,l=[],h=[];if(o.nodeType===Node.TEXT_NODE){var c=o.parentElement;if(h.push(o.nodeValue.slice(u).replaceAll(Uh,"")),c!==this.editorDiv){var d,f=l,v=R(this.editorDiv.childNodes);try{for(v.s();!(d=v.n()).done;){var p=d.value;p!==c?f.push(oc.call(e,p)):f=h}}catch(t){v.e(t)}finally{v.f()}}l.push(o.nodeValue.slice(0,u).replaceAll(Uh,""))}else if(o===this.editorDiv){var g,m=l,D=0,y=R(this.editorDiv.childNodes);try{for(y.s();!(g=y.n()).done;){var A=g.value;D++===u&&(m=h),m.push(oc.call(e,A))}}catch(t){y.e(t)}finally{y.f()}}P($h,this,"".concat(l.join("\n")).concat(a).concat(h.join("\n"))),B(ec,this,uc).call(this);var b,k=new Range,E=l.reduce((function(t,e){return t+e.length}),0),w=R(this.editorDiv.childNodes);try{for(w.s();!(b=w.n()).done;){var C=b.value.firstChild;if(C.nodeType===Node.TEXT_NODE){var F=C.nodeValue.length;if(E<=F){k.setStart(C,E),k.setEnd(C,E);break}E-=F}}}catch(t){w.e(t)}finally{w.f()}r.removeAllRanges(),r.addRange(k)}}}}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};var n=e._internalPadding*this.parentScale,i=this.getRect(n,n),a=mr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:M(Qh,this)),r={annotationType:mt.FREETEXT,color:a,fontSize:M(Zh,this),value:B(ec,this,lc).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?r:this.annotationElementId&&!B(ec,this,cc).call(this,r)?null:(r.id=this.annotationElementId,r)}},{key:"renderAnnotationElement",value:function(t){var n=D(e,"renderAnnotationElement",this,3)([t]);if(this.deleted)return n;var i=n.style;i.fontSize="calc(".concat(M(Zh,this),"px * var(--scale-factor))"),i.color=M(Qh,this),n.replaceChildren();var a,r=R(M($h,this).split("\n"));try{for(r.s();!(a=r.n()).done;){var s=a.value,o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),n.append(o)}}catch(t){r.e(t)}finally{r.f()}var u=e._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(u,u),popupContent:M($h,this)}),n}},{key:"resetAnnotationElement",value:function(t){D(e,"resetAnnotationElement",this,3)([t]),t.resetEdited()}}],[{key:"_keyboardManager",get:function(){var t=e.prototype,n=function(t){return t.isEmpty()},i=pa.TRANSLATE_SMALL,a=pa.TRANSLATE_BIG;return ue(this,"_keyboardManager",new Di([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}},{key:"initialize",value:function(t,e){mr.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});var n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(t,n){switch(t){case Dt.FREETEXT_SIZE:e._defaultFontSize=n;break;case Dt.FREETEXT_COLOR:e._defaultColor=n}}},{key:"defaultPropertiesToUpdate",get:function(){return[[Dt.FREETEXT_SIZE,e._defaultFontSize],[Dt.FREETEXT_COLOR,e._defaultColor||mr._defaultLineColor]]}},{key:"deserialize",value:function(t,n,i){var a=null;if(t instanceof ph){var r=t,s=r.data,o=s.defaultAppearanceData,u=o.fontSize,l=o.fontColor,h=s.rect,c=s.rotation,d=s.id,f=r.textContent,v=r.textPosition,p=r.parent.page.pageNumber;if(!f||0===f.length)return null;a=t={annotationType:mt.FREETEXT,color:Array.from(l),fontSize:u,value:f.join("\n"),position:v,pageIndex:p-1,rect:h.slice(0),rotation:c,id:d,deleted:!1}}var g=D(e,"deserialize",this,2)([t,n,i]);return P(Zh,g,t.fontSize),P(Qh,g,ke.makeHexColor.apply(ke,A(t.color))),P($h,g,hc.call(e,t.value)),g.annotationElementId=t.id||null,P(tc,g,a),g}}])}();function ic(t){var e=this,n=function(t){e.editorDiv.style.fontSize="calc(".concat(t,"px * var(--scale-factor))"),e.translate(0,-(t-M(Zh,e))*e.parentScale),P(Zh,e,t),B(ec,e,sc).call(e)},i=M(Zh,this);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function ac(t){var e=this,n=function(t){P(Qh,e,e.editorDiv.style.color=t)},i=M(Qh,this);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function rc(){var t=[];this.editorDiv.normalize();var e,n=R(this.editorDiv.childNodes);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(oc.call(s,i))}}catch(t){n.e(t)}finally{n.f()}return t.join("\n")}function sc(){var t,e=L(this.parentDimensions,2),n=e[0],i=e[1];if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{var a=this.currentLayer,r=this.div,s=r.style.display,o=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",a.div.append(this.div),t=r.getBoundingClientRect(),r.remove(),r.style.display=s,r.classList.toggle("hidden",o)}this.rotation%180==this.parentRotation%180?(this.width=t.width/n,this.height=t.height/i):(this.width=t.height/n,this.height=t.width/i),this.fixAndSetPosition()}function oc(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Uh,"")}function uc(){if(this.editorDiv.replaceChildren(),M($h,this)){var t,e=R(M($h,this).split("\n"));try{for(e.s();!(t=e.n()).done;){var n=t.value,i=document.createElement("div");i.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(i)}}catch(t){e.e(t)}finally{e.f()}}}function lc(){return M($h,this).replaceAll(" "," ")}function hc(t){return t.replaceAll(" "," ")}function cc(t){var e=M(tc,this),n=e.value,i=e.fontSize,a=e.color,r=e.pageIndex;return this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((function(t,e){return t!==a[e]}))||t.pageIndex!==r}s=nc,w(nc,"_freeTextDefaultContent",""),w(nc,"_internalPadding",0),w(nc,"_defaultColor",null),w(nc,"_defaultFontSize",10),w(nc,"_type","freetext"),w(nc,"_editorType",mt.FREETEXT);var dc=new WeakMap,fc=new WeakMap,vc=new WeakMap,pc=new WeakSet,gc=function(){return W((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];z(this,t),k(this,pc),x(this,dc,void 0),x(this,fc,[]),x(this,vc,[]);var r,s=1/0,o=-1/0,u=1/0,l=-1/0,h=Math.pow(10,-4),c=R(e);try{for(c.s();!(r=c.n()).done;){var d=r.value,f=d.x,v=d.y,p=d.width,g=d.height,m=Math.floor((f-n)/h)*h,D=Math.ceil((f+p+n)/h)*h,y=Math.floor((v-n)/h)*h,A=Math.ceil((v+g+n)/h)*h,b=[m,y,A,!0],E=[D,y,A,!1];M(fc,this).push(b,E),s=Math.min(s,m),o=Math.max(o,D),u=Math.min(u,y),l=Math.max(l,A)}}catch(t){c.e(t)}finally{c.f()}var w,C=o-s+2*i,F=l-u+2*i,_=s-i,S=u-i,B=M(fc,this).at(a?-1:-2),T=[B[0],B[2]],I=R(M(fc,this));try{for(I.s();!(w=I.n()).done;){var N=w.value,O=L(N,3),j=O[0],W=O[1],H=O[2];N[0]=(j-_)/C,N[1]=(W-S)/F,N[2]=(H-S)/F}}catch(t){I.e(t)}finally{I.f()}P(dc,this,{x:_,y:S,width:C,height:F,lastPoint:T})}),[{key:"getOutlines",value:function(){M(fc,this).sort((function(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}));var t,e=[],n=R(M(fc,this));try{for(n.s();!(t=n.n()).done;){var i=t.value;i[3]?(e.push.apply(e,A(B(pc,this,bc).call(this,i))),B(pc,this,yc).call(this,i)):(B(pc,this,Ac).call(this,i),e.push.apply(e,A(B(pc,this,bc).call(this,i))))}}catch(t){n.e(t)}finally{n.f()}return B(pc,this,mc).call(this,e)}}])}();function mc(t){var e,n=[],i=new Set,a=R(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,s=L(r,3),o=s[0],u=s[1],l=s[2];n.push([o,u,r],[o,l,r])}}catch(t){a.e(t)}finally{a.f()}n.sort((function(t,e){return t[1]-e[1]||t[0]-e[0]}));for(var h=0,c=n.length;h<c;h+=2){var d=n[h][2],f=n[h+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}for(var v,p=[];i.size>0;){var g=i.values().next().value,m=L(g,5),D=m[0],y=m[1],A=m[2],b=m[3],k=m[4];i.delete(g);var E=D,w=y;for(v=[D,A],p.push(v);;){var C=void 0;if(i.has(b))C=b;else{if(!i.has(k))break;C=k}i.delete(C);var F=L(C,5);D=F[0],y=F[1],A=F[2],b=F[3],k=F[4],E!==D&&(v.push(E,w,D,w===y?y:A),E=D),w=w===y?A:y}v.push(E,w)}return new Cc(p,M(dc,this))}function Dc(t){for(var e=M(vc,this),n=0,i=e.length-1;n<=i;){var a=n+i>>1,r=e[a][0];if(r===t)return a;r<t?n=a+1:i=a-1}return i+1}function yc(t){var e=L(t,3),n=e[1],i=e[2],a=B(pc,this,Dc).call(this,n);M(vc,this).splice(a,0,[n,i])}function Ac(t){for(var e=L(t,3),n=e[1],i=e[2],a=B(pc,this,Dc).call(this,n),r=a;r<M(vc,this).length;r++){var s=L(M(vc,this)[r],2),o=s[0],u=s[1];if(o!==n)break;if(o===n&&u===i)return void M(vc,this).splice(r,1)}for(var l=a-1;l>=0;l--){var h=L(M(vc,this)[l],2),c=h[0],d=h[1];if(c!==n)break;if(c===n&&d===i)return void M(vc,this).splice(l,1)}}function bc(t){for(var e=L(t,3),n=e[0],i=e[1],a=e[2],r=[[n,i,a]],s=B(pc,this,Dc).call(this,a),o=0;o<s;o++)for(var u=L(M(vc,this)[o],2),l=u[0],h=u[1],c=0,d=r.length;c<d;c++){var f=L(r[c],3),v=f[1],p=f[2];if(!(h<=v||p<=l))if(v>=l)if(p>h)r[c][1]=h;else{if(1===d)return[];r.splice(c,1),c--,d--}else r[c][2]=l,p>h&&r.push([n,h,p])}return r}var kc=function(){return W((function t(){z(this,t)}),[{key:"toSVGPath",value:function(){throw new Error("Abstract method `toSVGPath` must be implemented.")}},{key:"box",get:function(){throw new Error("Abstract getter `box` must be implemented.")}},{key:"serialize",value:function(t,e){throw new Error("Abstract method `serialize` must be implemented.")}},{key:"free",get:function(){return this instanceof Jc}}])}(),Ec=new WeakMap,wc=new WeakMap,Cc=function(t){function e(t,n){var i;return z(this,e),x(i=V(this,e),Ec,void 0),x(i,wc,void 0),P(wc,i,t),P(Ec,i,n),i}return q(e,kc),W(e,[{key:"toSVGPath",value:function(){var t,e=[],n=R(M(wc,this));try{for(n.s();!(t=n.n()).done;){var i=t.value,a=L(i,2),r=a[0],s=a[1];e.push("M".concat(r," ").concat(s));for(var o=2;o<i.length;o+=2){var u=i[o],l=i[o+1];u===r?(e.push("V".concat(l)),s=l):l===s&&(e.push("H".concat(u)),r=u)}e.push("Z")}}catch(t){n.e(t)}finally{n.f()}return e.join(" ")}},{key:"serialize",value:function(t,e){var n,i=L(t,4),a=i[0],r=i[1],s=i[2],o=i[3],u=[],l=s-a,h=o-r,c=R(M(wc,this));try{for(c.s();!(n=c.n()).done;){for(var d=n.value,f=new Array(d.length),v=0;v<d.length;v+=2)f[v]=a+d[v]*l,f[v+1]=o-d[v+1]*h;u.push(f)}}catch(t){c.e(t)}finally{c.f()}return u}},{key:"box",get:function(){return M(Ec,this)}}])}(),Fc=new WeakMap,_c=new WeakMap,xc=new WeakMap,Sc=new WeakMap,Mc=new WeakMap,Pc=new WeakMap,Bc=new WeakMap,Lc=new WeakMap,Tc=new WeakMap,Ic=new WeakMap,Rc=new WeakMap,Nc=new WeakMap,Oc=new WeakMap,jc=new WeakSet,Wc=function(){return W((function t(e,n,i,a,r){var s=e.x,o=e.y,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;z(this,t),k(this,jc),x(this,Fc,void 0),x(this,_c,[]),x(this,xc,void 0),x(this,Sc,void 0),x(this,Mc,[]),x(this,Pc,new Float64Array(18)),x(this,Bc,void 0),x(this,Lc,void 0),x(this,Tc,void 0),x(this,Ic,void 0),x(this,Rc,void 0),x(this,Nc,void 0),x(this,Oc,[]),P(Fc,this,n),P(Nc,this,a*i),P(Sc,this,r),M(Pc,this).set([NaN,NaN,NaN,NaN,s,o],6),P(xc,this,u),P(Ic,this,zc._*i),P(Tc,this,Vc._*i),P(Rc,this,i),M(Oc,this).push(s,o)}),[{key:"free",get:function(){return!0}},{key:"isEmpty",value:function(){return isNaN(M(Pc,this)[8])}},{key:"add",value:function(t){var e,n=t.x,i=t.y;P(Bc,this,n),P(Lc,this,i);var a=L(M(Fc,this),4),r=a[0],s=a[1],o=a[2],u=a[3],l=L(M(Pc,this).subarray(8,12),4),h=l[0],c=l[1],d=l[2],f=l[3],v=n-d,p=i-f,g=Math.hypot(v,p);if(g<M(Tc,this))return!1;var m=g-M(Ic,this),D=m/g,y=D*v,A=D*p,b=h,k=c;h=d,c=f,d+=y,f+=A,null===(e=M(Oc,this))||void 0===e||e.push(n,i);var E=y/m,w=-A/m*M(Nc,this),C=E*M(Nc,this);if(M(Pc,this).set(M(Pc,this).subarray(2,8),0),M(Pc,this).set([d+w,f+C],4),M(Pc,this).set(M(Pc,this).subarray(14,18),12),M(Pc,this).set([d-w,f-C],16),isNaN(M(Pc,this)[6]))return 0===M(Mc,this).length&&(M(Pc,this).set([h+w,c+C],2),M(Mc,this).push(NaN,NaN,NaN,NaN,(h+w-r)/o,(c+C-s)/u),M(Pc,this).set([h-w,c-C],14),M(_c,this).push(NaN,NaN,NaN,NaN,(h-w-r)/o,(c-C-s)/u)),M(Pc,this).set([b,k,h,c,d,f],6),!this.isEmpty();if(M(Pc,this).set([b,k,h,c,d,f],6),Math.abs(Math.atan2(k-c,b-h)-Math.atan2(A,y))<Math.PI/2){var F=L(M(Pc,this).subarray(2,6),4);h=F[0],c=F[1],d=F[2],f=F[3],M(Mc,this).push(NaN,NaN,NaN,NaN,((h+d)/2-r)/o,((c+f)/2-s)/u);var _=L(M(Pc,this).subarray(14,18),4);return h=_[0],c=_[1],b=_[2],k=_[3],M(_c,this).push(NaN,NaN,NaN,NaN,((b+h)/2-r)/o,((k+c)/2-s)/u),!0}var x=L(M(Pc,this).subarray(0,6),6);b=x[0],k=x[1],h=x[2],c=x[3],d=x[4],f=x[5],M(Mc,this).push(((b+5*h)/6-r)/o,((k+5*c)/6-s)/u,((5*h+d)/6-r)/o,((5*c+f)/6-s)/u,((h+d)/2-r)/o,((c+f)/2-s)/u);var S=L(M(Pc,this).subarray(12,18),6);return d=S[0],f=S[1],h=S[2],c=S[3],b=S[4],k=S[5],M(_c,this).push(((b+5*h)/6-r)/o,((k+5*c)/6-s)/u,((5*h+d)/6-r)/o,((5*c+f)/6-s)/u,((h+d)/2-r)/o,((c+f)/2-s)/u),!0}},{key:"toSVGPath",value:function(){if(this.isEmpty())return"";var t=M(Mc,this),e=M(_c,this),n=M(Pc,this).subarray(4,6),i=M(Pc,this).subarray(16,18),a=L(M(Fc,this),4),r=a[0],s=a[1],o=a[2],u=a[3],l=L(B(jc,this,Hc).call(this),4),h=l[0],c=l[1],d=l[2],f=l[3];if(isNaN(M(Pc,this)[6])&&!this.isEmpty())return"M".concat((M(Pc,this)[2]-r)/o," ").concat((M(Pc,this)[3]-s)/u," L").concat((M(Pc,this)[4]-r)/o," ").concat((M(Pc,this)[5]-s)/u," L").concat(h," ").concat(c," L").concat(d," ").concat(f," L").concat((M(Pc,this)[16]-r)/o," ").concat((M(Pc,this)[17]-s)/u," L").concat((M(Pc,this)[14]-r)/o," ").concat((M(Pc,this)[15]-s)/u," Z");var v=[];v.push("M".concat(t[4]," ").concat(t[5]));for(var p=6;p<t.length;p+=6)isNaN(t[p])?v.push("L".concat(t[p+4]," ").concat(t[p+5])):v.push("C".concat(t[p]," ").concat(t[p+1]," ").concat(t[p+2]," ").concat(t[p+3]," ").concat(t[p+4]," ").concat(t[p+5]));v.push("L".concat((n[0]-r)/o," ").concat((n[1]-s)/u," L").concat(h," ").concat(c," L").concat(d," ").concat(f," L").concat((i[0]-r)/o," ").concat((i[1]-s)/u));for(var g=e.length-6;g>=6;g-=6)isNaN(e[g])?v.push("L".concat(e[g+4]," ").concat(e[g+5])):v.push("C".concat(e[g]," ").concat(e[g+1]," ").concat(e[g+2]," ").concat(e[g+3]," ").concat(e[g+4]," ").concat(e[g+5]));return v.push("L".concat(e[4]," ").concat(e[5]," Z")),v.join(" ")}},{key:"getOutlines",value:function(){for(var t,e,n=M(Mc,this),i=M(_c,this),a=M(Pc,this),r=a.subarray(4,6),s=a.subarray(16,18),o=L(M(Fc,this),4),u=o[0],l=o[1],h=o[2],c=o[3],d=new Float64Array((null!==(t=null===(e=M(Oc,this))||void 0===e?void 0:e.length)&&void 0!==t?t:0)+2),f=0,v=d.length-2;f<v;f+=2)d[f]=(M(Oc,this)[f]-u)/h,d[f+1]=(M(Oc,this)[f+1]-l)/c;d[d.length-2]=(M(Bc,this)-u)/h,d[d.length-1]=(M(Lc,this)-l)/c;var p=L(B(jc,this,Hc).call(this),4),g=p[0],m=p[1],D=p[2],y=p[3];if(isNaN(a[6])&&!this.isEmpty()){var A=new Float64Array(36);return A.set([NaN,NaN,NaN,NaN,(a[2]-u)/h,(a[3]-l)/c,NaN,NaN,NaN,NaN,(a[4]-u)/h,(a[5]-l)/c,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,D,y,NaN,NaN,NaN,NaN,(a[16]-u)/h,(a[17]-l)/c,NaN,NaN,NaN,NaN,(a[14]-u)/h,(a[15]-l)/c],0),new Jc(A,d,M(Fc,this),M(Rc,this),M(xc,this),M(Sc,this))}for(var b=new Float64Array(M(Mc,this).length+24+M(_c,this).length),k=n.length,E=0;E<k;E+=2)isNaN(n[E])?b[E]=b[E+1]=NaN:(b[E]=n[E],b[E+1]=n[E+1]);b.set([NaN,NaN,NaN,NaN,(r[0]-u)/h,(r[1]-l)/c,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,D,y,NaN,NaN,NaN,NaN,(s[0]-u)/h,(s[1]-l)/c],k),k+=24;for(var w=i.length-6;w>=6;w-=6)for(var C=0;C<6;C+=2)isNaN(i[w+C])?(b[k]=b[k+1]=NaN,k+=2):(b[k]=i[w+C],b[k+1]=i[w+C+1],k+=2);return b.set([NaN,NaN,NaN,NaN,i[4],i[5]],k),new Jc(b,d,M(Fc,this),M(Rc,this),M(xc,this),M(Sc,this))}}])}();function Hc(){var t=M(Pc,this).subarray(4,6),e=M(Pc,this).subarray(16,18),n=L(M(Fc,this),4),i=n[0],a=n[1],r=n[2],s=n[3];return[(M(Bc,this)+(t[0]-e[0])/2-i)/r,(M(Lc,this)+(t[1]-e[1])/2-a)/s,(M(Bc,this)+(e[0]-t[0])/2-i)/r,(M(Lc,this)+(e[1]-t[1])/2-a)/s]}var zc={_:8},Vc={_:zc._+2},Uc=new WeakMap,Gc=new WeakMap,qc=new WeakMap,Xc=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,$c=new WeakSet,Jc=function(t){function e(t,n,i,a,r,s){var o;z(this,e),k(o=V(this,e),$c),x(o,Uc,void 0),x(o,Gc,null),x(o,qc,void 0),x(o,Xc,void 0),x(o,Kc,void 0),x(o,Yc,void 0),x(o,Qc,void 0),P(Qc,o,t),P(Kc,o,n),P(Uc,o,i),P(Yc,o,a),P(qc,o,r),P(Xc,o,s),B($c,o,ed).call(o,s);for(var u=M(Gc,o),l=u.x,h=u.y,c=u.width,d=u.height,f=0,v=t.length;f<v;f+=2)t[f]=(t[f]-l)/c,t[f+1]=(t[f+1]-h)/d;for(var p=0,g=n.length;p<g;p+=2)n[p]=(n[p]-l)/c,n[p+1]=(n[p+1]-h)/d;return o}return q(e,kc),W(e,[{key:"toSVGPath",value:function(){for(var t=["M".concat(M(Qc,this)[4]," ").concat(M(Qc,this)[5])],e=6,n=M(Qc,this).length;e<n;e+=6)isNaN(M(Qc,this)[e])?t.push("L".concat(M(Qc,this)[e+4]," ").concat(M(Qc,this)[e+5])):t.push("C".concat(M(Qc,this)[e]," ").concat(M(Qc,this)[e+1]," ").concat(M(Qc,this)[e+2]," ").concat(M(Qc,this)[e+3]," ").concat(M(Qc,this)[e+4]," ").concat(M(Qc,this)[e+5]));return t.push("Z"),t.join(" ")}},{key:"serialize",value:function(t,e){var n,i,a=L(t,4),r=a[0],s=a[1],o=a[2],u=a[3],l=o-r,h=u-s;switch(e){case 0:n=B($c,this,Zc).call(this,M(Qc,this),r,u,l,-h),i=B($c,this,Zc).call(this,M(Kc,this),r,u,l,-h);break;case 90:n=B($c,this,td).call(this,M(Qc,this),r,s,l,h),i=B($c,this,td).call(this,M(Kc,this),r,s,l,h);break;case 180:n=B($c,this,Zc).call(this,M(Qc,this),o,s,-l,h),i=B($c,this,Zc).call(this,M(Kc,this),o,s,-l,h);break;case 270:n=B($c,this,td).call(this,M(Qc,this),o,u,-l,-h),i=B($c,this,td).call(this,M(Kc,this),o,u,-l,-h)}return{outline:Array.from(n),points:[Array.from(i)]}}},{key:"box",get:function(){return M(Gc,this)}},{key:"getNewOutline",value:function(t,e){for(var n=M(Gc,this),i=n.x,a=n.y,r=n.width,s=n.height,o=L(M(Uc,this),4),u=o[0],l=o[1],h=o[2],c=o[3],d=r*h,f=s*c,v=i*h+u,p=a*c+l,g=new Wc({x:M(Kc,this)[0]*d+v,y:M(Kc,this)[1]*f+p},M(Uc,this),M(Yc,this),t,M(Xc,this),null!=e?e:M(qc,this)),m=2;m<M(Kc,this).length;m+=2)g.add({x:M(Kc,this)[m]*d+v,y:M(Kc,this)[m+1]*f+p});return g.getOutlines()}}])}();function Zc(t,e,n,i,a){for(var r=new Float64Array(t.length),s=0,o=t.length;s<o;s+=2)r[s]=e+t[s]*i,r[s+1]=n+t[s+1]*a;return r}function td(t,e,n,i,a){for(var r=new Float64Array(t.length),s=0,o=t.length;s<o;s+=2)r[s]=e+t[s+1]*i,r[s+1]=n+t[s]*a;return r}function ed(t){for(var e=M(Qc,this),n=e[4],i=e[5],a=n,r=i,s=n,o=i,u=n,l=i,h=t?Math.max:Math.min,c=6,d=e.length;c<d;c+=6){if(isNaN(e[c]))a=Math.min(a,e[c+4]),r=Math.min(r,e[c+5]),s=Math.max(s,e[c+4]),o=Math.max(o,e[c+5]),l<e[c+5]?(u=e[c+4],l=e[c+5]):l===e[c+5]&&(u=h(u,e[c+4]));else{var f=ke.bezierBoundingBox.apply(ke,[n,i].concat(A(e.slice(c,c+6))));a=Math.min(a,f[0]),r=Math.min(r,f[1]),s=Math.max(s,f[2]),o=Math.max(o,f[3]),l<f[3]?(u=f[2],l=f[3]):l===f[3]&&(u=h(u,f[2]))}n=e[c+4],i=e[c+5]}var v=a-M(qc,this),p=r-M(qc,this),g=s-a+2*M(qc,this),m=o-r+2*M(qc,this);P(Gc,this,{x:v,y:p,width:g,height:m,lastPoint:[u,l]})}var nd=new WeakMap,id=new WeakMap,ad=new WeakMap,rd=new WeakMap,sd=new WeakMap,od=new WeakMap,ud=new WeakMap,ld=new WeakMap,hd=new WeakMap,cd=new WeakMap,dd=new WeakMap,fd=new WeakMap,vd=new WeakSet,pd=function(){function t(e){var n,i=e.editor,a=void 0===i?null:i,r=e.uiManager,s=void 0===r?null:r;z(this,t),k(this,vd),x(this,nd,B(vd,this,Dd).bind(this)),x(this,id,B(vd,this,Ad).bind(this)),x(this,ad,null),x(this,rd,null),x(this,sd,void 0),x(this,od,null),x(this,ud,!1),x(this,ld,!1),x(this,hd,null),x(this,cd,void 0),x(this,dd,null),x(this,fd,void 0),a?(P(ld,this,!1),P(fd,this,Dt.HIGHLIGHT_COLOR),P(hd,this,a)):(P(ld,this,!0),P(fd,this,Dt.HIGHLIGHT_DEFAULT_COLOR)),P(dd,this,(null==a?void 0:a._uiManager)||s),P(cd,this,M(dd,this)._eventBus),P(sd,this,(null==a?void 0:a.color)||(null===(n=M(dd,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98")}return W(t,[{key:"renderButton",value:function(){var t=P(ad,this,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);var e=M(dd,this)._signal;t.addEventListener("click",B(vd,this,yd).bind(this),{signal:e}),t.addEventListener("keydown",M(nd,this),{signal:e});var n=P(rd,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=M(sd,this),t.append(n),t}},{key:"renderMainDropdown",value:function(){var t=P(od,this,B(vd,this,gd).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}},{key:"_colorSelectFromKeyboard",value:function(t){if(t.target!==M(ad,this)){var e=t.target.getAttribute("data-color");e&&B(vd,this,md).call(this,e,t)}else B(vd,this,yd).call(this,t)}},{key:"_moveToNext",value:function(t){var e,n;E(vd,this,bd)?t.target!==M(ad,this)?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(n=M(od,this).firstChild)||void 0===n||n.focus():B(vd,this,yd).call(this,t)}},{key:"_moveToPrevious",value:function(t){var e,n;t.target!==(null===(e=M(od,this))||void 0===e?void 0:e.firstChild)&&t.target!==M(ad,this)?(E(vd,this,bd)||B(vd,this,yd).call(this,t),null===(n=t.target.previousSibling)||void 0===n||n.focus()):E(vd,this,bd)&&this._hideDropdownFromKeyboard()}},{key:"_moveToBeginning",value:function(t){var e;E(vd,this,bd)?null===(e=M(od,this).firstChild)||void 0===e||e.focus():B(vd,this,yd).call(this,t)}},{key:"_moveToEnd",value:function(t){var e;E(vd,this,bd)?null===(e=M(od,this).lastChild)||void 0===e||e.focus():B(vd,this,yd).call(this,t)}},{key:"hideDropdown",value:function(){var t;null===(t=M(od,this))||void 0===t||t.classList.add("hidden"),window.removeEventListener("pointerdown",M(id,this))}},{key:"_hideDropdownFromKeyboard",value:function(){var t;M(ld,this)||(E(vd,this,bd)?(this.hideDropdown(),M(ad,this).focus({preventScroll:!0,focusVisible:M(ud,this)})):null===(t=M(hd,this))||void 0===t||t.unselect())}},{key:"updateColor",value:function(t){if(M(rd,this)&&(M(rd,this).style.backgroundColor=t),M(od,this)){var e,n=M(dd,this).highlightColors.values(),i=R(M(od,this).children);try{for(i.s();!(e=i.n()).done;){e.value.setAttribute("aria-selected",n.next().value===t)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"destroy",value:function(){var t,e;null===(t=M(ad,this))||void 0===t||t.remove(),P(ad,this,null),P(rd,this,null),null===(e=M(od,this))||void 0===e||e.remove(),P(od,this,null)}}],[{key:"_keyboardManager",get:function(){return ue(this,"_keyboardManager",new Di([[["Escape","mac+Escape"],t.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],t.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],t.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],t.prototype._moveToPrevious],[["Home","mac+Home"],t.prototype._moveToBeginning],[["End","mac+End"],t.prototype._moveToEnd]]))}}])}();function gd(){var t=document.createElement("div"),e=M(dd,this)._signal;t.addEventListener("contextmenu",Sn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");var n,i=R(M(dd,this).highlightColors);try{for(i.s();!(n=i.n()).done;){var a=L(n.value,2),r=a[0],s=a[1],o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=r,o.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-".concat(r));var u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=s,o.setAttribute("aria-selected",s===M(sd,this)),o.addEventListener("click",B(vd,this,md).bind(this,s),{signal:e}),t.append(o)}}catch(t){i.e(t)}finally{i.f()}return t.addEventListener("keydown",M(nd,this),{signal:e}),t}function md(t,e){e.stopPropagation(),M(cd,this).dispatch("switchannotationeditorparams",{source:this,type:M(fd,this),value:t})}function Dd(t){o._keyboardManager.exec(this,t)}function yd(t){if(E(vd,this,bd))this.hideDropdown();else if(P(ud,this,0===t.detail),window.addEventListener("pointerdown",M(id,this),{signal:M(dd,this)._signal}),M(od,this))M(od,this).classList.remove("hidden");else{var e=P(od,this,B(vd,this,gd).call(this));M(ad,this).append(e)}}function Ad(t){var e;null!==(e=M(od,this))&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}function bd(t){return M(od,t)&&!M(od,t).classList.contains("hidden")}o=pd;var kd=new WeakMap,Ed=new WeakMap,wd=new WeakMap,Cd=new WeakMap,Fd=new WeakMap,_d=new WeakMap,xd=new WeakMap,Sd=new WeakMap,Md=new WeakMap,Pd=new WeakMap,Bd=new WeakMap,Ld=new WeakMap,Td=new WeakMap,Id=new WeakMap,Rd=new WeakMap,Nd=new WeakMap,Od=new WeakMap,jd=new WeakMap,Wd=new WeakMap,Hd=new WeakSet,zd=function(t){function e(t){var n;return z(this,e),k(n=V(this,e,[g(g({},t),{},{name:"highlightEditor"})]),Hd),x(n,kd,null),x(n,Ed,0),x(n,wd,void 0),x(n,Cd,null),x(n,Fd,null),x(n,_d,null),x(n,xd,null),x(n,Sd,0),x(n,Md,null),x(n,Pd,null),x(n,Bd,null),x(n,Ld,!1),x(n,Td,B(Hd,n,$d).bind(n)),x(n,Id,null),x(n,Rd,void 0),x(n,Nd,null),x(n,Od,""),x(n,jd,void 0),x(n,Wd,""),n.color=t.color||e._defaultColor,P(jd,n,t.thickness||e._defaultThickness),P(Rd,n,t.opacity||e._defaultOpacity),P(wd,n,t.boxes||null),P(Wd,n,t.methodOfCreation||""),P(Od,n,t.text||""),n._isDraggable=!1,t.highlightId>-1?(P(Ld,n,!0),B(Hd,n,Ud).call(n,t),B(Hd,n,Yd).call(n)):(P(kd,n,t.anchorNode),P(Ed,n,t.anchorOffset),P(xd,n,t.focusNode),P(Sd,n,t.focusOffset),B(Hd,n,Vd).call(n),B(Hd,n,Yd).call(n),n.rotate(n.rotation)),n}return q(e,mr),W(e,[{key:"telemetryInitialData",get:function(){return{action:"added",type:M(Ld,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:M(jd,this),methodOfCreation:M(Wd,this)}}},{key:"telemetryFinalData",get:function(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}},{key:"translateInPage",value:function(t,e){}},{key:"toolbarPosition",get:function(){return M(Id,this)}},{key:"updateParams",value:function(t,e){switch(t){case Dt.HIGHLIGHT_COLOR:B(Hd,this,Gd).call(this,e);break;case Dt.HIGHLIGHT_THICKNESS:B(Hd,this,qd).call(this,e)}}},{key:"propertiesToUpdate",get:function(){return[[Dt.HIGHLIGHT_COLOR,this.color||e._defaultColor],[Dt.HIGHLIGHT_THICKNESS,M(jd,this)||e._defaultThickness],[Dt.HIGHLIGHT_FREE,M(Ld,this)]]}},{key:"addEditToolbar",value:(n=_(C().mark((function t(){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e,"addEditToolbar",this,3)([]);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return this._uiManager.highlightColors&&(P(Fd,this,new pd({editor:this})),n.addColorPicker(M(Fd,this))),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"disableEditing",value:function(){D(e,"disableEditing",this,3)([]),this.div.classList.toggle("disabled",!0)}},{key:"enableEditing",value:function(){D(e,"enableEditing",this,3)([]),this.div.classList.toggle("disabled",!1)}},{key:"fixAndSetPosition",value:function(){return D(e,"fixAndSetPosition",this,3)([B(Hd,this,Zd).call(this)])}},{key:"getBaseTranslation",value:function(){return[0,0]}},{key:"getRect",value:function(t,n){return D(e,"getRect",this,3)([t,n,B(Hd,this,Zd).call(this)])}},{key:"onceAdded",value:function(){this.parent.addUndoableEditor(this),this.div.focus()}},{key:"remove",value:function(){B(Hd,this,Kd).call(this),this._reportTelemetry({action:"deleted"}),D(e,"remove",this,3)([])}},{key:"rebuild",value:function(){this.parent&&(D(e,"rebuild",this,3)([]),null!==this.div&&(B(Hd,this,Yd).call(this),this.isAttachedToDOM||this.parent.add(this)))}},{key:"setParent",value:function(t){var n=!1;if(this.parent&&!t)B(Hd,this,Kd).call(this);else if(t){var i;B(Hd,this,Yd).call(this,t),n=!this.parent&&(null===(i=this.div)||void 0===i?void 0:i.classList.contains("selectedEditor"))}D(e,"setParent",this,3)([t]),this.show(this._isVisible),n&&this.select()}},{key:"rotate",value:function(t){var n,i=this.parent.drawLayer;M(Ld,this)?(t=(t-this.rotation+360)%360,n=Qd.call(e,M(Pd,this).box,t)):n=Qd.call(e,this,t),i.rotate(M(Bd,this),t),i.rotate(M(Nd,this),t),i.updateBox(M(Bd,this),n),i.updateBox(M(Nd,this),Qd.call(e,M(_d,this).box,t))}},{key:"render",value:function(){if(this.div)return this.div;var t=D(e,"render",this,3)([]);M(Od,this)&&(t.setAttribute("aria-label",M(Od,this)),t.setAttribute("role","mark")),M(Ld,this)?t.classList.add("free"):this.div.addEventListener("keydown",M(Td,this),{signal:this._uiManager._signal});var n=P(Md,this,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=M(Cd,this);var i=L(this.parentDimensions,2),a=i[0],r=i[1];return this.setDims(this.width*a,this.height*r),ni(this,M(Md,this),["pointerover","pointerleave"]),this.enableEditing(),t}},{key:"pointerover",value:function(){this.parent.drawLayer.addClass(M(Nd,this),"hovered")}},{key:"pointerleave",value:function(){this.parent.drawLayer.removeClass(M(Nd,this),"hovered")}},{key:"_moveCaret",value:function(t){switch(this.parent.unselect(this),t){case 0:case 2:B(Hd,this,Jd).call(this,!0);break;case 1:case 3:B(Hd,this,Jd).call(this,!1)}}},{key:"select",value:function(){var t,n;D(e,"select",this,3)([]),M(Nd,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.removeClass(M(Nd,this),"hovered"),null===(n=this.parent)||void 0===n||n.drawLayer.addClass(M(Nd,this),"selected"))}},{key:"unselect",value:function(){var t;D(e,"unselect",this,3)([]),M(Nd,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.removeClass(M(Nd,this),"selected"),M(Ld,this)||B(Hd,this,Jd).call(this,!1))}},{key:"_mustFixPosition",get:function(){return!M(Ld,this)}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;D(e,"show",this,3)([t]),this.parent&&(this.parent.drawLayer.show(M(Bd,this),t),this.parent.drawLayer.show(M(Nd,this),t))}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;var e=this.getRect(0,0),n=mr._colorManager.convert(this.color);return{annotationType:mt.HIGHLIGHT,color:n,opacity:M(Rd,this),thickness:M(jd,this),quadPoints:B(Hd,this,tf).call(this),outlines:B(Hd,this,ef).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:B(Hd,this,Zd).call(this),structTreeParentId:this._structTreeParentId}}}],[{key:"_keyboardManager",get:function(){var t=e.prototype;return ue(this,"_keyboardManager",new Di([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}},{key:"computeTelemetryFinalData",value:function(t){return{numberOfColors:t.get("color").size}}},{key:"initialize",value:function(t,n){var i;mr.initialize(t,n),e._defaultColor||(e._defaultColor=(null===(i=n.highlightColors)||void 0===i?void 0:i.values().next().value)||"#fff066")}},{key:"updateDefaultParams",value:function(t,n){switch(t){case Dt.HIGHLIGHT_DEFAULT_COLOR:e._defaultColor=n;break;case Dt.HIGHLIGHT_THICKNESS:e._defaultThickness=n}}},{key:"defaultPropertiesToUpdate",get:function(){return[[Dt.HIGHLIGHT_DEFAULT_COLOR,e._defaultColor],[Dt.HIGHLIGHT_THICKNESS,e._defaultThickness]]}},{key:"startHighlighting",value:function(t,n,i){var a=this,r=i.target,s=i.x,o=i.y,u=r.getBoundingClientRect(),l=u.x,h=u.y,c=u.width,d=u.height,f=function(n){B(e,a,nf).call(a,t,n)},v=t._signal,p={capture:!0,passive:!1,signal:v},g=function(t){t.preventDefault(),t.stopPropagation()},m=function(n){r.removeEventListener("pointermove",f),window.removeEventListener("blur",m),window.removeEventListener("pointerup",m),window.removeEventListener("pointerdown",g,p),window.removeEventListener("contextmenu",Sn),B(e,a,af).call(a,t,n)};window.addEventListener("blur",m,{signal:v}),window.addEventListener("pointerup",m,{signal:v}),window.addEventListener("pointerdown",g,p),window.addEventListener("contextmenu",Sn,{signal:v}),r.addEventListener("pointermove",f,{signal:v}),this._freeHighlight=new Wc({x:s,y:o},[l,h,c,d],t.scale,this._defaultThickness/2,n,.001);var D=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0);this._freeHighlightId=D.id,this._freeHighlightClipId=D.clipPathId}},{key:"deserialize",value:function(t,n,i){var a=D(e,"deserialize",this,2)([t,n,i]),r=L(t.rect,4),s=r[0],o=r[1],u=r[2],l=r[3],h=t.color,c=t.quadPoints;a.color=ke.makeHexColor.apply(ke,A(h)),P(Rd,a,t.opacity);var d=L(a.pageDimensions,2),f=d[0],v=d[1];a.width=(u-s)/f,a.height=(l-o)/v;for(var p=P(wd,a,[]),g=0;g<c.length;g+=8)p.push({x:(c[4]-u)/f,y:(l-(1-c[g+5]))/v,width:(c[g+2]-c[g])/f,height:(c[g+5]-c[g+1])/v});return B(Hd,a,Vd).call(a),a}},{key:"canCreateNewEmptyEditor",value:function(){return!1}}]);var n}();function Vd(){var t=new gc(M(wd,this),.001);P(Pd,this,t.getOutlines());var e=M(Pd,this).box;this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height;var n=new gc(M(wd,this),.0025,.001,"ltr"===this._uiManager.direction);P(_d,this,n.getOutlines());var i=M(_d,this).box.lastPoint;P(Id,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function Ud(t){var e=t.highlightOutlines,n=t.highlightId,i=t.clipPathId;P(Pd,this,e);if(P(_d,this,e.getNewOutline(M(jd,this)/2+1.5,.0025)),n>=0)P(Bd,this,n),P(Cd,this,i),this.parent.drawLayer.finalizeLine(n,e),P(Nd,this,this.parent.drawLayer.highlightOutline(M(_d,this)));else if(this.parent){var a=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(M(Bd,this),e),this.parent.drawLayer.updateBox(M(Bd,this),Qd.call(u,M(Pd,this).box,(a-this.rotation+360)%360)),this.parent.drawLayer.updateLine(M(Nd,this),M(_d,this)),this.parent.drawLayer.updateBox(M(Nd,this),Qd.call(u,M(_d,this).box,a))}var r=e.box,s=r.x,o=r.y,l=r.width,h=r.height;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=l,this.height=h;break;case 90:var c=L(this.parentDimensions,2),d=c[0],f=c[1];this.x=o,this.y=1-s,this.width=l*f/d,this.height=h*d/f;break;case 180:this.x=1-s,this.y=1-o,this.width=l,this.height=h;break;case 270:var v=L(this.parentDimensions,2),p=v[0],g=v[1];this.x=1-o,this.y=s,this.width=l*g/p,this.height=h*p/g}var m=M(_d,this).box.lastPoint;P(Id,this,[(m[0]-s)/l,(m[1]-o)/h])}function Gd(t){var e=this,n=function(t){var n,i;e.color=t,null===(n=e.parent)||void 0===n||n.drawLayer.changeColor(M(Bd,e),t),null===(i=M(Fd,e))||void 0===i||i.updateColor(t)},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}function qd(t){var e=this,n=M(jd,this),i=function(t){P(jd,e,t),B(Hd,e,Xd).call(e,t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}function Xd(t){if(M(Ld,this)){B(Hd,this,Ud).call(this,{highlightOutlines:M(Pd,this).getNewOutline(t/2)}),this.fixAndSetPosition();var e=L(this.parentDimensions,2),n=e[0],i=e[1];this.setDims(this.width*n,this.height*i)}}function Kd(){null!==M(Bd,this)&&this.parent&&(this.parent.drawLayer.remove(M(Bd,this)),P(Bd,this,null),this.parent.drawLayer.remove(M(Nd,this)),P(Nd,this,null))}function Yd(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;if(null===M(Bd,this)){var e=t.drawLayer.highlight(M(Pd,this),this.color,M(Rd,this));m(P,[Bd,this])._=e.id,m(P,[Cd,this])._=e.clipPathId,P(Nd,this,t.drawLayer.highlightOutline(M(_d,this))),M(Md,this)&&(M(Md,this).style.clipPath=M(Cd,this))}}function Qd(t,e){var n=t.x,i=t.y,a=t.width,r=t.height;switch(e){case 90:return{x:1-i-r,y:n,width:r,height:a};case 180:return{x:1-n-a,y:1-i-r,width:a,height:r};case 270:return{x:i,y:1-n-a,width:r,height:a}}return{x:n,y:i,width:a,height:r}}function $d(t){u._keyboardManager.exec(this,t)}function Jd(t){if(M(kd,this)){var e=window.getSelection();t?e.setPosition(M(kd,this),M(Ed,this)):e.setPosition(M(xd,this),M(Sd,this))}}function Zd(){return M(Ld,this)?this.rotation:0}function tf(){if(M(Ld,this))return null;var t,e=L(this.pageDimensions,2),n=e[0],i=e[1],a=L(this.pageTranslation,2),r=a[0],s=a[1],o=M(wd,this),u=new Float32Array(8*o.length),l=0,h=R(o);try{for(h.s();!(t=h.n()).done;){var c=t.value,d=c.x,f=c.y,v=c.width,p=c.height,g=d*n+r,m=(1-f-p)*i+s;u[l]=u[l+4]=g,u[l+1]=u[l+3]=m,u[l+2]=u[l+6]=g+v*n,u[l+5]=u[l+7]=m+p*i,l+=8}}catch(t){h.e(t)}finally{h.f()}return u}function ef(t){return M(Pd,this).serialize(t,B(Hd,this,Zd).call(this))}function nf(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}function af(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}u=zd,w(zd,"_defaultColor",null),w(zd,"_defaultOpacity",1),w(zd,"_defaultThickness",12),w(zd,"_l10nPromise",void 0),w(zd,"_type","highlight"),w(zd,"_editorType",mt.HIGHLIGHT),w(zd,"_freeHighlightId",-1),w(zd,"_freeHighlight",null),w(zd,"_freeHighlightClipId","");var rf=new WeakMap,sf=new WeakMap,of=new WeakMap,uf=new WeakMap,lf=new WeakMap,hf=new WeakMap,cf=new WeakMap,df=new WeakMap,ff=new WeakMap,vf=new WeakMap,pf=new WeakMap,gf=new WeakMap,mf=new WeakMap,Df=new WeakMap,yf=new WeakMap,Af=new WeakSet,bf=function(t){function e(t){var n;return z(this,e),k(n=V(this,e,[g(g({},t),{},{name:"inkEditor"})]),Af),x(n,rf,0),x(n,sf,0),x(n,of,n.canvasPointermove.bind(n)),x(n,uf,n.canvasPointerleave.bind(n)),x(n,lf,n.canvasPointerup.bind(n)),x(n,hf,n.canvasPointerdown.bind(n)),x(n,cf,null),x(n,df,new Path2D),x(n,ff,!1),x(n,vf,!1),x(n,pf,!1),x(n,gf,null),x(n,mf,0),x(n,Df,0),x(n,yf,null),n.color=t.color||null,n.thickness=t.thickness||null,n.opacity=t.opacity||null,n.paths=[],n.bezierPath2D=[],n.allRawPaths=[],n.currentPath=[],n.scaleFactor=1,n.translationX=n.translationY=0,n.x=0,n.y=0,n._willKeepAspectRatio=!0,n}return q(e,mr),W(e,[{key:"updateParams",value:function(t,e){switch(t){case Dt.INK_THICKNESS:B(Af,this,kf).call(this,e);break;case Dt.INK_COLOR:B(Af,this,Ef).call(this,e);break;case Dt.INK_OPACITY:B(Af,this,wf).call(this,e)}}},{key:"propertiesToUpdate",get:function(){var t;return[[Dt.INK_THICKNESS,this.thickness||e._defaultThickness],[Dt.INK_COLOR,this.color||e._defaultColor||mr._defaultLineColor],[Dt.INK_OPACITY,Math.round(100*(null!==(t=this.opacity)&&void 0!==t?t:e._defaultOpacity))]]}},{key:"rebuild",value:function(){this.parent&&(D(e,"rebuild",this,3)([]),null!==this.div&&(this.canvas||(B(Af,this,Rf).call(this),B(Af,this,Nf).call(this)),this.isAttachedToDOM||(this.parent.add(this),B(Af,this,Of).call(this)),B(Af,this,Xf).call(this)))}},{key:"remove",value:function(){var t;null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,M(cf,this)&&(clearTimeout(M(cf,this)),P(cf,this,null)),null===(t=M(gf,this))||void 0===t||t.disconnect(),P(gf,this,null),D(e,"remove",this,3)([]))}},{key:"setParent",value:function(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),D(e,"setParent",this,3)([t])}},{key:"onScaleChanging",value:function(){var t=L(this.parentDimensions,2),e=t[0],n=t[1],i=this.width*e,a=this.height*n;this.setDimensions(i,a)}},{key:"enableEditMode",value:function(){M(ff,this)||null===this.canvas||(D(e,"enableEditMode",this,3)([]),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",M(hf,this),{signal:this._uiManager._signal}))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&null!==this.canvas&&(D(e,"disableEditMode",this,3)([]),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",M(hf,this)))}},{key:"onceAdded",value:function(){this._isDraggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}},{key:"commit",value:function(){M(ff,this)||(D(e,"commit",this,3)([]),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),P(ff,this,!0),this.div.classList.add("disabled"),B(Af,this,Xf).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}},{key:"focusin",value:function(t){this._focusEventsAllowed&&(D(e,"focusin",this,3)([t]),this.enableEditMode())}},{key:"canvasPointerdown",value:function(t){0===t.button&&this.isInEditMode()&&!M(ff,this)&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),B(Af,this,_f).call(this,t.offsetX,t.offsetY))}},{key:"canvasPointermove",value:function(t){t.preventDefault(),B(Af,this,xf).call(this,t.offsetX,t.offsetY)}},{key:"canvasPointerup",value:function(t){t.preventDefault(),B(Af,this,If).call(this,t)}},{key:"canvasPointerleave",value:function(t){B(Af,this,If).call(this,t)}},{key:"isResizable",get:function(){return!this.isEmpty()&&M(ff,this)}},{key:"render",value:function(){if(this.div)return this.div;var t,n;this.width&&(t=this.x,n=this.y),D(e,"render",this,3)([]),this.div.setAttribute("data-l10n-id","pdfjs-ink");var i=L(B(Af,this,Cf).call(this),4),a=i[0],r=i[1],s=i[2],o=i[3];if(this.setAt(a,r,0,0),this.setDims(s,o),B(Af,this,Rf).call(this),this.width){var u=L(this.parentDimensions,2),l=u[0],h=u[1];this.setAspectRatio(this.width*l,this.height*h),this.setAt(t*l,n*h,this.width*l,this.height*h),P(pf,this,!0),B(Af,this,Of).call(this),this.setDims(this.width*l,this.height*h),B(Af,this,Tf).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return B(Af,this,Nf).call(this),this.div}},{key:"setDimensions",value:function(t,e){var n=Math.round(t),i=Math.round(e);if(M(mf,this)!==n||M(Df,this)!==i){P(mf,this,n),P(Df,this,i),this.canvas.style.visibility="hidden";var a=L(this.parentDimensions,2),r=a[0],s=a[1];this.width=t/r,this.height=e/s,this.fixAndSetPosition(),M(ff,this)&&B(Af,this,jf).call(this,t,e),B(Af,this,Of).call(this),B(Af,this,Tf).call(this),this.canvas.style.visibility="visible",this.fixDims()}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var t=this.getRect(0,0),e=mr._colorManager.convert(this.ctx.strokeStyle);return{annotationType:mt.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:B(Af,this,Uf).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}],[{key:"initialize",value:function(t,e){mr.initialize(t,e)}},{key:"updateDefaultParams",value:function(t,n){switch(t){case Dt.INK_THICKNESS:e._defaultThickness=n;break;case Dt.INK_COLOR:e._defaultColor=n;break;case Dt.INK_OPACITY:e._defaultOpacity=n/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[Dt.INK_THICKNESS,e._defaultThickness],[Dt.INK_COLOR,e._defaultColor||mr._defaultLineColor],[Dt.INK_OPACITY,Math.round(100*e._defaultOpacity)]]}},{key:"deserialize",value:function(t,n,i){if(t instanceof _h)return null;var a=D(e,"deserialize",this,2)([t,n,i]);a.thickness=t.thickness,a.color=ke.makeHexColor.apply(ke,A(t.color)),a.opacity=t.opacity;var r=L(a.pageDimensions,2),s=r[0],o=r[1],u=a.width*s,l=a.height*o,h=a.parentScale,c=t.thickness/2;P(ff,a,!0),P(mf,a,Math.round(u)),P(Df,a,Math.round(l));var d,f=t.paths,v=t.rect,p=t.rotation,g=R(f);try{for(g.s();!(d=g.n()).done;){var m=d.value.bezier;m=Vf.call(e,m,v,p);var y=[];a.paths.push(y);for(var b=h*(m[0]-c),k=h*(m[1]-c),E=2,w=m.length;E<w;E+=6){var C=h*(m[E]-c),F=h*(m[E+1]-c),_=h*(m[E+2]-c),x=h*(m[E+3]-c),S=h*(m[E+4]-c),M=h*(m[E+5]-c);y.push([[b,k],[C,F],[_,x],[S,M]]),b=S,k=M}var T=B(e,this,Hf).call(this,y);a.bezierPath2D.push(T)}}catch(t){g.e(t)}finally{g.f()}var I=B(Af,a,Gf).call(a);return P(sf,a,Math.max(mr.MIN_SIZE,I[2]-I[0])),P(rf,a,Math.max(mr.MIN_SIZE,I[3]-I[1])),B(Af,a,jf).call(a,u,l),a}}])}();function kf(t){var e=this,n=function(t){e.thickness=t,B(Af,e,Xf).call(e)},i=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Ef(t){var e=this,n=function(t){e.color=t,B(Af,e,Tf).call(e)},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function wf(t){var e=this,n=function(t){e.opacity=t,B(Af,e,Tf).call(e)};t/=100;var i=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Dt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Cf(){var t=this.parentRotation,e=L(this.parentDimensions,2),n=e[0],i=e[1];switch(t){case 90:return[0,i,i,n];case 180:return[n,i,n,i];case 270:return[n,0,i,n];default:return[0,0,n,i]}}function Ff(){var t=this.ctx,e=this.color,n=this.opacity,i=this.thickness,a=this.parentScale,r=this.scaleFactor;t.lineWidth=i*a/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle="".concat(e).concat(function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}(n))}function _f(t,e){var n,i=this,a=this._uiManager._signal;(this.canvas.addEventListener("contextmenu",Sn,{signal:a}),this.canvas.addEventListener("pointerleave",M(uf,this),{signal:a}),this.canvas.addEventListener("pointermove",M(of,this),{signal:a}),this.canvas.addEventListener("pointerup",M(lf,this),{signal:a}),this.canvas.removeEventListener("pointerdown",M(hf,this)),this.isEditing=!0,M(pf,this))||(P(pf,this,!0),B(Af,this,Of).call(this),this.thickness||(this.thickness=l._defaultThickness),this.color||(this.color=l._defaultColor||mr._defaultLineColor),null!==(n=this.opacity)&&void 0!==n||(this.opacity=l._defaultOpacity));this.currentPath.push([t,e]),P(vf,this,!1),B(Af,this,Ff).call(this),P(yf,this,(function(){B(Af,i,Pf).call(i),M(yf,i)&&window.requestAnimationFrame(M(yf,i))})),window.requestAnimationFrame(M(yf,this))}function xf(t,e){var n,i=L(this.currentPath.at(-1),2),a=i[0],r=i[1];if(!(this.currentPath.length>1&&t===a&&e===r)){var s,o,u=this.currentPath,l=M(df,this);if(u.push([t,e]),P(vf,this,!0),u.length<=2)return(s=l).moveTo.apply(s,A(u[0])),void l.lineTo(t,e);if(3===u.length)P(df,this,l=new Path2D),(o=l).moveTo.apply(o,A(u[0]));(n=B(Af,this,Bf)).call.apply(n,[this,l].concat(A(u.at(-3)),A(u.at(-2)),[t,e]))}}function Sf(){var t;if(0!==this.currentPath.length){var e=this.currentPath.at(-1);(t=M(df,this)).lineTo.apply(t,A(e))}}function Mf(t,e){var n,i=this;if(P(yf,this,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),B(Af,this,xf).call(this,t,e),B(Af,this,Sf).call(this),1!==this.currentPath.length)n=B(Af,this,Lf).call(this);else{var a=[t,e];n=[[a,a.slice(),a.slice(),a]]}var r=M(df,this),s=this.currentPath;this.currentPath=[],P(df,this,new Path2D);this.addCommands({cmd:function(){i.allRawPaths.push(s),i.paths.push(n),i.bezierPath2D.push(r),i._uiManager.rebuild(i)},undo:function(){i.allRawPaths.pop(),i.paths.pop(),i.bezierPath2D.pop(),0===i.paths.length?i.remove():(i.canvas||(B(Af,i,Rf).call(i),B(Af,i,Nf).call(i)),B(Af,i,Xf).call(i))},mustExec:!0})}function Pf(){if(M(vf,this)){P(vf,this,!1);Math.ceil(this.thickness*this.parentScale);var t=this.currentPath.slice(-3),e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));Math.min.apply(Math,A(e)),Math.max.apply(Math,A(e)),Math.min.apply(Math,A(n)),Math.max.apply(Math,A(n));var i=this.ctx;i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);var a,r=R(this.bezierPath2D);try{for(r.s();!(a=r.n()).done;){var s=a.value;i.stroke(s)}}catch(t){r.e(t)}finally{r.f()}i.stroke(M(df,this)),i.restore()}}function Bf(t,e,n,i,a,r,s){var o=(e+i)/2,u=(n+a)/2,l=(i+r)/2,h=(a+s)/2;t.bezierCurveTo(o+2*(i-o)/3,u+2*(a-u)/3,l+2*(i-l)/3,h+2*(a-h)/3,l,h)}function Lf(){var t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];var e,n=[],i=L(t[0],2),a=i[0],r=i[1];for(e=1;e<t.length-2;e++){var s=L(t[e],2),o=s[0],u=s[1],l=L(t[e+1],2),h=(o+l[0])/2,c=(u+l[1])/2,d=[a+2*(o-a)/3,r+2*(u-r)/3],f=[h+2*(o-h)/3,c+2*(u-c)/3];n.push([[a,r],d,f,[h,c]]),a=h,r=c}var v=L(t[e],2),p=v[0],g=v[1],m=L(t[e+1],2),D=m[0],y=m[1],A=[a+2*(p-a)/3,r+2*(g-r)/3],b=[D+2*(p-D)/3,y+2*(g-y)/3];return n.push([[a,r],A,b,[D,y]]),n}function Tf(){if(this.isEmpty())B(Af,this,Wf).call(this);else{B(Af,this,Ff).call(this);var t=this.canvas,e=this.ctx;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),B(Af,this,Wf).call(this);var n,i=R(this.bezierPath2D);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.stroke(a)}}catch(t){i.e(t)}finally{i.f()}}}function If(t){var e=this;this.canvas.removeEventListener("pointerleave",M(uf,this)),this.canvas.removeEventListener("pointermove",M(of,this)),this.canvas.removeEventListener("pointerup",M(lf,this)),this.canvas.addEventListener("pointerdown",M(hf,this),{signal:this._uiManager._signal}),M(cf,this)&&clearTimeout(M(cf,this)),P(cf,this,setTimeout((function(){P(cf,e,null),e.canvas.removeEventListener("contextmenu",Sn)}),10)),B(Af,this,Mf).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function Rf(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function Nf(){var t=this;P(gf,this,new ResizeObserver((function(e){var n=e[0].contentRect;n.width&&n.height&&t.setDimensions(n.width,n.height)}))),M(gf,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(function(){var e;null===(e=M(gf,t))||void 0===e||e.disconnect(),P(gf,t,null)}),{once:!0})}function Of(){if(M(pf,this)){var t=L(this.parentDimensions,2),e=t[0],n=t[1];this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),B(Af,this,Wf).call(this)}}function jf(t,e){var n=B(Af,this,qf).call(this),i=(t-n)/M(sf,this),a=(e-n)/M(rf,this);this.scaleFactor=Math.min(i,a)}function Wf(){var t=B(Af,this,qf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}function Hf(t){for(var e=new Path2D,n=0,i=t.length;n<i;n++){var a=L(t[n],4),r=a[0],s=a[1],o=a[2],u=a[3];0===n&&e.moveTo.apply(e,A(r)),e.bezierCurveTo(s[0],s[1],o[0],o[1],u[0],u[1])}return e}function zf(t,e,n){var i=L(e,4),a=i[0],r=i[1],s=i[2],o=i[3];switch(n){case 0:for(var u=0,l=t.length;u<l;u+=2)t[u]+=a,t[u+1]=o-t[u+1];break;case 90:for(var h=0,c=t.length;h<c;h+=2){var d=t[h];t[h]=t[h+1]+a,t[h+1]=d+r}break;case 180:for(var f=0,v=t.length;f<v;f+=2)t[f]=s-t[f],t[f+1]+=r;break;case 270:for(var p=0,g=t.length;p<g;p+=2){var m=t[p];t[p]=s-t[p+1],t[p+1]=o-m}break;default:throw new Error("Invalid rotation")}return t}function Vf(t,e,n){var i=L(e,4),a=i[0],r=i[1],s=i[2],o=i[3];switch(n){case 0:for(var u=0,l=t.length;u<l;u+=2)t[u]-=a,t[u+1]=o-t[u+1];break;case 90:for(var h=0,c=t.length;h<c;h+=2){var d=t[h];t[h]=t[h+1]-r,t[h+1]=d-a}break;case 180:for(var f=0,v=t.length;f<v;f+=2)t[f]=s-t[f],t[f+1]-=r;break;case 270:for(var p=0,g=t.length;p<g;p+=2){var m=t[p];t[p]=o-t[p+1],t[p+1]=s-m}break;default:throw new Error("Invalid rotation")}return t}function Uf(t,e,n,i){var a,r=[],s=this.thickness/2,o=t*e+s,u=t*n+s,h=R(this.paths);try{for(h.s();!(a=h.n()).done;){for(var c=a.value,d=[],f=[],v=0,p=c.length;v<p;v++){var g=L(c[v],4),m=g[0],D=g[1],y=g[2],A=g[3];if(m[0]===A[0]&&m[1]===A[1]&&1===p){var b=t*m[0]+o,k=t*m[1]+u;d.push(b,k),f.push(b,k);break}var E=t*m[0]+o,w=t*m[1]+u,C=t*D[0]+o,F=t*D[1]+u,_=t*y[0]+o,x=t*y[1]+u,S=t*A[0]+o,M=t*A[1]+u;0===v&&(d.push(E,w),f.push(E,w)),d.push(C,F,_,x,S,M),f.push(C,F),v===p-1&&f.push(S,M)}r.push({bezier:zf.call(l,d,i,this.rotation),points:zf.call(l,f,i,this.rotation)})}}catch(t){h.e(t)}finally{h.f()}return r}function Gf(){var t,e=1/0,n=-1/0,i=1/0,a=-1/0,r=R(this.paths);try{for(r.s();!(t=r.n()).done;){var s,o=R(t.value);try{for(o.s();!(s=o.n()).done;){var u=L(s.value,4),l=u[0],h=u[1],c=u[2],d=u[3],f=ke.bezierBoundingBox.apply(ke,A(l).concat(A(h),A(c),A(d)));e=Math.min(e,f[0]),i=Math.min(i,f[1]),n=Math.max(n,f[2]),a=Math.max(a,f[3])}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}return[e,i,n,a]}function qf(){return M(ff,this)?Math.ceil(this.thickness*this.parentScale):0}function Xf(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isEmpty())if(M(ff,this)){var e=B(Af,this,Gf).call(this),n=B(Af,this,qf).call(this);P(sf,this,Math.max(mr.MIN_SIZE,e[2]-e[0])),P(rf,this,Math.max(mr.MIN_SIZE,e[3]-e[1]));var i=Math.ceil(n+M(sf,this)*this.scaleFactor),a=Math.ceil(n+M(rf,this)*this.scaleFactor),r=L(this.parentDimensions,2),s=r[0],o=r[1];this.width=i/s,this.height=a/o,this.setAspectRatio(i,a);var u=this.translationX,l=this.translationY;this.translationX=-e[0],this.translationY=-e[1],B(Af,this,Of).call(this),B(Af,this,Tf).call(this),P(mf,this,i),P(Df,this,a),this.setDims(i,a);var h=t?n/this.scaleFactor/2:0;this.translate(u-this.translationX-h,l-this.translationY-h)}else B(Af,this,Tf).call(this)}l=bf,w(bf,"_defaultColor",null),w(bf,"_defaultOpacity",1),w(bf,"_defaultThickness",1),w(bf,"_type","ink"),w(bf,"_editorType",mt.INK);var Kf=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,$f=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,tv=new WeakMap,ev=new WeakMap,nv=new WeakMap,iv=new WeakMap,av=new WeakMap,rv=new WeakMap,sv=new WeakSet,ov=function(t){function e(t){var n;return z(this,e),k(n=V(this,e,[g(g({},t),{},{name:"stampEditor"})]),sv),x(n,Kf,null),x(n,Yf,null),x(n,Qf,null),x(n,$f,null),x(n,Jf,null),x(n,Zf,""),x(n,tv,null),x(n,ev,!1),x(n,nv,null),x(n,iv,null),x(n,av,!1),x(n,rv,!1),P($f,n,t.bitmapUrl),P(Jf,n,t.bitmapFile),n}return q(e,mr),W(e,[{key:"remove",value:function(){var t,n;M(Yf,this)&&(P(Kf,this,null),this._uiManager.imageManager.deleteId(M(Yf,this)),null===(t=M(tv,this))||void 0===t||t.remove(),P(tv,this,null),null===(n=M(nv,this))||void 0===n||n.disconnect(),P(nv,this,null),M(iv,this)&&(clearTimeout(M(iv,this)),P(iv,this,null)));D(e,"remove",this,3)([])}},{key:"rebuild",value:function(){this.parent?(D(e,"rebuild",this,3)([]),null!==this.div&&(M(Yf,this)&&null===M(tv,this)&&B(sv,this,hv).call(this),this.isAttachedToDOM||this.parent.add(this))):M(Yf,this)&&B(sv,this,hv).call(this)}},{key:"onceAdded",value:function(){this._isDraggable=!0,this.div.focus()}},{key:"isEmpty",value:function(){return!(M(Qf,this)||M(Kf,this)||M($f,this)||M(Jf,this)||M(Yf,this))}},{key:"isResizable",get:function(){return!0}},{key:"render",value:function(){if(this.div)return this.div;var t,n;if(this.width&&(t=this.x,n=this.y),D(e,"render",this,3)([]),this.div.hidden=!0,this.addAltTextButton(),M(Kf,this)?B(sv,this,cv).call(this):B(sv,this,hv).call(this),this.width){var i=L(this.parentDimensions,2),a=i[0],r=i[1];this.setAt(t*a,n*r,this.width*a,this.height*r)}return this.div}},{key:"getImageForAltText",value:function(){return M(tv,this)}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;var n={annotationType:mt.STAMP,bitmapId:M(Yf,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:M(av,this),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=B(sv,this,mv).call(this,!0),n.accessibilityData=this.altTextData,n;var i=this.altTextData,a=i.decorative,r=i.altText;if(!a&&r&&(n.accessibilityData={type:"Figure",alt:r}),null===e)return n;e.stamps||(e.stamps=new Map);var s=M(av,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(M(Yf,this))){if(M(av,this)){var o=e.stamps.get(M(Yf,this));s>o.area&&(o.area=s,o.serialized.bitmap.close(),o.serialized.bitmap=B(sv,this,mv).call(this,!1))}}else e.stamps.set(M(Yf,this),{area:s,serialized:n}),n.bitmap=B(sv,this,mv).call(this,!1);return n}}],[{key:"initialize",value:function(t,e){mr.initialize(t,e)}},{key:"supportedTypes",get:function(){return ue(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((function(t){return"image/".concat(t)})))}},{key:"supportedTypesStr",get:function(){return ue(this,"supportedTypesStr",this.supportedTypes.join(","))}},{key:"isHandlingMimeForPasting",value:function(t){return this.supportedTypes.includes(t)}},{key:"paste",value:function(t,e){e.pasteEditor(mt.STAMP,{bitmapFile:t.getAsFile()})}},{key:"deserialize",value:function(t,n,i){if(t instanceof Bh)return null;var a=D(e,"deserialize",this,2)([t,n,i]),r=t.rect,s=t.bitmapUrl,o=t.bitmapId,u=t.isSvg,l=t.accessibilityData;o&&i.imageManager.isValidId(o)?P(Yf,a,o):P($f,a,s),P(av,a,u);var h=L(a.pageDimensions,2),c=h[0],d=h[1];return a.width=(r[2]-r[0])/c,a.height=(r[3]-r[1])/d,l&&(a.altTextData=l),a}}])}();function uv(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(P(Kf,this,t.bitmap),e||(P(Yf,this,t.id),P(av,this,t.isSvg)),t.file&&P(Zf,this,t.file.name),B(sv,this,cv).call(this)):this.remove()}function lv(){P(Qf,this,null),this._uiManager.enableWaiting(!1),M(tv,this)&&this.div.focus()}function hv(){var t=this;if(M(Yf,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(M(Yf,this)).then((function(e){return B(sv,t,uv).call(t,e,!0)})).finally((function(){return B(sv,t,lv).call(t)}));if(M($f,this)){var e=M($f,this);return P($f,this,null),this._uiManager.enableWaiting(!0),void P(Qf,this,this._uiManager.imageManager.getFromUrl(e).then((function(e){return B(sv,t,uv).call(t,e)})).finally((function(){return B(sv,t,lv).call(t)})))}if(M(Jf,this)){var n=M(Jf,this);return P(Jf,this,null),this._uiManager.enableWaiting(!0),void P(Qf,this,this._uiManager.imageManager.getFromFile(n).then((function(e){return B(sv,t,uv).call(t,e)})).finally((function(){return B(sv,t,lv).call(t)})))}var i=document.createElement("input");i.type="file",i.accept=h.supportedTypesStr;var a=this._uiManager._signal;P(Qf,this,new Promise((function(e){i.addEventListener("change",_(C().mark((function n(){var a;return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.files&&0!==i.files.length){n.next=4;break}t.remove(),n.next=9;break;case 4:return t._uiManager.enableWaiting(!0),n.next=7,t._uiManager.imageManager.getFromFile(i.files[0]);case 7:a=n.sent,B(sv,t,uv).call(t,a);case 9:e();case 10:case"end":return n.stop()}}),n)}))),{signal:a}),i.addEventListener("cancel",(function(){t.remove(),e()}),{signal:a})})).finally((function(){return B(sv,t,lv).call(t)}))),i.click()}function cv(){var t=this.div,e=M(Kf,this),n=e.width,i=e.height,a=L(this.pageDimensions,2),r=a[0],s=a[1],o=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>o*r||i>o*s){var u=Math.min(o*r/n,o*s/i);n*=u,i*=u}var l=L(this.parentDimensions,2),h=l[0],c=l[1];this.setDims(n*h/r,i*c/s),this._uiManager.enableWaiting(!1);var d=P(tv,this,document.createElement("canvas"));t.append(d),t.hidden=!1,B(sv,this,gv).call(this,n,i),B(sv,this,Dv).call(this),M(rv,this)||(this.parent.addUndoableEditor(this),P(rv,this,!0)),this._reportTelemetry({action:"inserted_image"}),M(Zf,this)&&d.setAttribute("aria-label",M(Zf,this))}function dv(t,e){var n,i=this,a=L(this.parentDimensions,2),r=a[0],s=a[1];this.width=t/r,this.height=e/s,this.setDims(t,e),null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==M(iv,this)&&clearTimeout(M(iv,this));P(iv,this,setTimeout((function(){P(iv,i,null),B(sv,i,gv).call(i,t,e)}),200))}function fv(t,e){for(var n=M(Kf,this),i=n.width,a=n.height,r=M(Kf,this);i>2*t||a>2*e;){var s=i,o=a;i>2*t&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));var u=new OffscreenCanvas(i,a);u.getContext("2d").drawImage(r,0,0,s,o,0,0,i,a),r=u.transferToImageBitmap()}return r}function vv(t,e,n){return pv.apply(this,arguments)}function pv(){return(pv=_(C().mark((function t(e,n,i){var a,r,s,o;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M(ev,this)){t.next=2;break}return t.abrupt("return");case 2:return P(ev,this,!0),t.next=5,this._uiManager.isMLEnabledFor("altText");case 5:if(t.sent&&!this.hasAltText()){t.next=8;break}return t.abrupt("return");case 8:return a=new OffscreenCanvas(n,i),(r=a.getContext("2d",{willReadFrequently:!0})).drawImage(e,0,0,e.width,e.height,0,0,n,i),t.next=13,this._uiManager.mlGuess({service:"moz-image-to-text",request:{data:r.getImageData(0,0,n,i).data,width:n,height:i,channels:4}});case 13:s=t.sent,o=(null==s?void 0:s.output)||"",this.parent&&o&&!this.hasAltText()&&(this.altTextData={altText:o,decorative:!1});case 16:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function gv(t,e){t=Math.ceil(t),e=Math.ceil(e);var n=M(tv,this);if(n&&(n.width!==t||n.height!==e)){n.width=t,n.height=e;var i=M(av,this)?M(Kf,this):B(sv,this,fv).call(this,t,e);B(sv,this,vv).call(this,i,t,e);var a=n.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(i,0,0,i.width,i.height,0,0,t,e)}}function mv(t){if(t){if(M(av,this)){var e=this._uiManager.imageManager.getSvgUrl(M(Yf,this));if(e)return e}var n=document.createElement("canvas"),i=M(Kf,this);return n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(M(Kf,this),0,0),n.toDataURL()}if(M(av,this)){var a=L(this.pageDimensions,2),r=a[0],s=a[1],o=Math.round(this.width*r*Ge.PDF_TO_CSS_UNITS),u=Math.round(this.height*s*Ge.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(o,u);return l.getContext("2d").drawImage(M(Kf,this),0,0,M(Kf,this).width,M(Kf,this).height,0,0,o,u),l.transferToImageBitmap()}return structuredClone(M(Kf,this))}function Dv(){var t=this;this._uiManager._signal&&(P(nv,this,new ResizeObserver((function(e){var n=e[0].contentRect;n.width&&n.height&&B(sv,t,dv).call(t,n.width,n.height)}))),M(nv,this).observe(this.div),this._uiManager._signal.addEventListener("abort",(function(){var e;null===(e=M(nv,t))||void 0===e||e.disconnect(),P(nv,t,null)}),{once:!0}))}h=ov,w(ov,"_type","stamp"),w(ov,"_editorType",mt.STAMP);var yv=new WeakMap,Av=new WeakMap,bv=new WeakMap,kv=new WeakMap,Ev=new WeakMap,wv=new WeakMap,Cv=new WeakMap,Fv=new WeakMap,_v=new WeakMap,xv=new WeakMap,Sv=new WeakMap,Mv=new WeakMap,Pv=new WeakMap,Bv=new WeakSet,Lv=function(){return W((function t(e){var n=e.uiManager,i=e.pageIndex,a=e.div,r=e.accessibilityManager,s=e.annotationLayer,o=e.drawLayer,u=e.textLayer,l=e.viewport,h=e.l10n;z(this,t),k(this,Bv),x(this,yv,void 0),x(this,Av,!1),x(this,bv,null),x(this,kv,null),x(this,Ev,null),x(this,wv,null),x(this,Cv,null),x(this,Fv,new Map),x(this,_v,!1),x(this,xv,!1),x(this,Sv,!1),x(this,Mv,null),x(this,Pv,void 0);var c=A(jv._.values());if(!t._initialized){t._initialized=!0;var d,f=R(c);try{for(f.s();!(d=f.n()).done;){d.value.initialize(h,n)}}catch(t){f.e(t)}finally{f.f()}}n.registerEditorTypes(c),P(Pv,this,n),this.pageIndex=i,this.div=a,P(yv,this,r),P(bv,this,s),this.viewport=l,P(Mv,this,u),this.drawLayer=o,M(Pv,this).addLayer(this)}),[{key:"isEmpty",get:function(){return 0===M(Fv,this).size}},{key:"isInvisible",get:function(){return this.isEmpty&&M(Pv,this).getMode()===mt.NONE}},{key:"updateToolbar",value:function(t){M(Pv,this).updateToolbar(t)}},{key:"updateMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M(Pv,this).getMode();switch(B(Bv,this,Ov).call(this),t){case mt.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case mt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);var e,n=this.div.classList,i=R(jv._.values());try{for(i.s();!(e=i.n()).done;){var a=e.value;n.toggle("".concat(a._type,"Editing"),t===a._editorType)}}catch(t){i.e(t)}finally{i.f()}this.div.hidden=!1}},{key:"hasTextLayer",value:function(t){var e;return t===(null===(e=M(Mv,this))||void 0===e?void 0:e.div)}},{key:"addInkEditorIfNeeded",value:function(t){if(M(Pv,this).getMode()===mt.INK){if(!t){var e,n=R(M(Fv,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.isEmpty())return void i.setInBackground()}}catch(t){n.e(t)}finally{n.f()}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}},{key:"setEditingState",value:function(t){M(Pv,this).setEditingState(t)}},{key:"addCommands",value:function(t){M(Pv,this).addCommands(t)}},{key:"toggleDrawing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!t)}},{key:"togglePointerEvents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}},{key:"toggleAnnotationLayerPointerEvents",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=M(bv,this))||void 0===t||t.div.classList.toggle("disabled",!e)}},{key:"enable",value:function(){this.div.tabIndex=0,this.togglePointerEvents(!0);var t,e=new Set,n=R(M(Fv,this).values());try{for(n.s();!(t=n.n()).done;){var i=t.value;i.enableEditing(),i.show(!0),i.annotationElementId&&(M(Pv,this).removeChangedExistingAnnotation(i),e.add(i.annotationElementId))}}catch(t){n.e(t)}finally{n.f()}if(M(bv,this)){var a,r=R(M(bv,this).getEditableAnnotations());try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.hide(),!M(Pv,this).isDeletedAnnotationElement(s.data.id)&&!e.has(s.data.id)){var o=this.deserialize(s);o&&(this.addOrRebuild(o),o.enableEditing())}}}catch(t){r.e(t)}finally{r.f()}}}},{key:"disable",value:function(){P(Sv,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);var t,e=new Map,n=new Map,i=R(M(Fv,this).values());try{for(i.s();!(t=i.n()).done;){var a,r=t.value;r.disableEditing(),r.annotationElementId&&(null===r.serialize()?(n.set(r.annotationElementId,r),null===(a=this.getEditableAnnotation(r.annotationElementId))||void 0===a||a.show(),r.remove()):e.set(r.annotationElementId,r))}}catch(t){i.e(t)}finally{i.f()}if(M(bv,this)){var s,o=R(M(bv,this).getEditableAnnotations());try{for(o.s();!(s=o.n()).done;){var u=s.value,l=u.data.id;if(!M(Pv,this).isDeletedAnnotationElement(l)){var h=n.get(l);h?(h.resetAnnotationElement(u),h.show(!1),u.show()):((h=e.get(l))&&(M(Pv,this).addChangedExistingAnnotation(h),h.renderAnnotationElement(u),h.show(!1)),u.show())}}}catch(t){o.e(t)}finally{o.f()}}B(Bv,this,Ov).call(this),this.isEmpty&&(this.div.hidden=!0);var c,d=this.div.classList,f=R(jv._.values());try{for(f.s();!(c=f.n()).done;){var v=c.value;d.remove("".concat(v._type,"Editing"))}}catch(t){f.e(t)}finally{f.f()}this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),P(Sv,this,!1)}},{key:"getEditableAnnotation",value:function(t){var e;return(null===(e=M(bv,this))||void 0===e?void 0:e.getEditableAnnotation(t))||null}},{key:"setActiveEditor",value:function(t){M(Pv,this).getActive()!==t&&M(Pv,this).setActiveEditor(t)}},{key:"enableTextSelection",value:function(){var t;this.div.tabIndex=-1,null!==(t=M(Mv,this))&&void 0!==t&&t.div&&!M(wv,this)&&(P(wv,this,B(Bv,this,Tv).bind(this)),M(Mv,this).div.addEventListener("pointerdown",M(wv,this),{signal:M(Pv,this)._signal}),M(Mv,this).div.classList.add("highlighting"))}},{key:"disableTextSelection",value:function(){var t;this.div.tabIndex=0,null!==(t=M(Mv,this))&&void 0!==t&&t.div&&M(wv,this)&&(M(Mv,this).div.removeEventListener("pointerdown",M(wv,this)),P(wv,this,null),M(Mv,this).div.classList.remove("highlighting"))}},{key:"enableClick",value:function(){if(!M(Ev,this)){var t=M(Pv,this)._signal;P(Ev,this,this.pointerdown.bind(this)),P(kv,this,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",M(Ev,this),{signal:t}),this.div.addEventListener("pointerup",M(kv,this),{signal:t})}}},{key:"disableClick",value:function(){M(Ev,this)&&(this.div.removeEventListener("pointerdown",M(Ev,this)),this.div.removeEventListener("pointerup",M(kv,this)),P(Ev,this,null),P(kv,this,null))}},{key:"attach",value:function(t){M(Fv,this).set(t.id,t);var e=t.annotationElementId;e&&M(Pv,this).isDeletedAnnotationElement(e)&&M(Pv,this).removeDeletedAnnotationElement(t)}},{key:"detach",value:function(t){var e;M(Fv,this).delete(t.id),null===(e=M(yv,this))||void 0===e||e.removePointerInTextLayer(t.contentDiv),!M(Sv,this)&&t.annotationElementId&&M(Pv,this).addDeletedAnnotationElement(t)}},{key:"remove",value:function(t){this.detach(t),M(Pv,this).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,M(xv,this)||this.addInkEditorIfNeeded(!1)}},{key:"changeParent",value:function(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(M(Pv,this).addDeletedAnnotationElement(t.annotationElementId),mr.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}},{key:"add",value:function(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),M(Pv,this).addEditor(t),this.attach(t),!t.isAttachedToDOM){var e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),M(Pv,this).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}},{key:"moveEditorInDOM",value:function(t){var e,n=this;if(t.isAttachedToDOM){var i=document.activeElement;t.div.contains(i)&&!M(Cv,this)&&(t._focusEventsAllowed=!1,P(Cv,this,setTimeout((function(){P(Cv,n,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(function(){t._focusEventsAllowed=!0}),{once:!0,signal:M(Pv,n)._signal}),i.focus())}),0))),t._structTreeParentId=null===(e=M(yv,this))||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}}},{key:"addOrRebuild",value:function(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}},{key:"addUndoableEditor",value:function(t){this.addCommands({cmd:function(){return t._uiManager.rebuild(t)},undo:function(){t.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return M(Pv,this).getId()}},{key:"_signal",get:function(){return M(Pv,this)._signal}},{key:"canCreateNewEmptyEditor",value:function(){var t;return null===(t=E(Bv,this,Iv))||void 0===t?void 0:t.canCreateNewEmptyEditor()}},{key:"pasteEditor",value:function(t,e){M(Pv,this).updateToolbar(t),M(Pv,this).updateMode(t);var n=B(Bv,this,Nv).call(this),i=n.offsetX,a=n.offsetY,r=this.getNextId(),s=B(Bv,this,Rv).call(this,g({parent:this,id:r,x:i,y:a,uiManager:M(Pv,this),isCentered:!0},e));s&&this.add(s)}},{key:"deserialize",value:function(t){var e,n;return(null===(e=jv._.get(null!==(n=t.annotationType)&&void 0!==n?n:t.annotationEditorType))||void 0===e?void 0:e.deserialize(t,this,M(Pv,this)))||null}},{key:"createAndAddNewEditor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getNextId(),a=B(Bv,this,Rv).call(this,g({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:M(Pv,this),isCentered:e},n));return a&&this.add(a),a}},{key:"addNewEditor",value:function(){this.createAndAddNewEditor(B(Bv,this,Nv).call(this),!0)}},{key:"setSelected",value:function(t){M(Pv,this).setSelected(t)}},{key:"toggleSelected",value:function(t){M(Pv,this).toggleSelected(t)}},{key:"isSelected",value:function(t){return M(Pv,this).isSelected(t)}},{key:"unselect",value:function(t){M(Pv,this).unselect(t)}},{key:"pointerup",value:function(t){var e=Ae.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&M(_v,this)&&(P(_v,this,!1),M(Av,this)?M(Pv,this).getMode()!==mt.STAMP?this.createAndAddNewEditor(t,!1):M(Pv,this).unselectAll():P(Av,this,!0))}},{key:"pointerdown",value:function(t){if(M(Pv,this).getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),M(_v,this))P(_v,this,!1);else{var e=Ae.platform.isMac;if(!(0!==t.button||t.ctrlKey&&e)&&t.target===this.div){P(_v,this,!0);var n=M(Pv,this).getActive();P(Av,this,!n||n.isEmpty())}}}},{key:"findNewParent",value:function(t,e,n){var i=M(Pv,this).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}},{key:"destroy",value:function(){var t;(null===(t=M(Pv,this).getActive())||void 0===t?void 0:t.parent)===this&&(M(Pv,this).commitOrRemove(),M(Pv,this).setActiveEditor(null)),M(Cv,this)&&(clearTimeout(M(Cv,this)),P(Cv,this,null));var e,n=R(M(Fv,this).values());try{for(n.s();!(e=n.n()).done;){var i,a=e.value;null===(i=M(yv,this))||void 0===i||i.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove()}}catch(t){n.e(t)}finally{n.f()}this.div=null,M(Fv,this).clear(),M(Pv,this).removeLayer(this)}},{key:"render",value:function(t){var e=t.viewport;this.viewport=e,In(this.div,e);var n,i=R(M(Pv,this).getEditors(this.pageIndex));try{for(i.s();!(n=i.n()).done;){var a=n.value;this.add(a),a.rebuild()}}catch(t){i.e(t)}finally{i.f()}this.updateMode()}},{key:"update",value:function(t){var e=t.viewport;M(Pv,this).commitOrRemove(),B(Bv,this,Ov).call(this);var n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,In(this.div,{rotation:i}),n!==i){var a,r=R(M(Fv,this).values());try{for(r.s();!(a=r.n()).done;){a.value.rotate(i)}}catch(t){r.e(t)}finally{r.f()}}this.addInkEditorIfNeeded(!1)}},{key:"pageDimensions",get:function(){var t=this.viewport.rawDims;return[t.pageWidth,t.pageHeight]}},{key:"scale",get:function(){return M(Pv,this).viewParameters.realScale}}])}();function Tv(t){var e=this;M(Pv,this).unselectAll();var n=t.target;if(n===M(Mv,this).div||n.classList.contains("endOfContent")&&M(Mv,this).div.contains(n)){var i=Ae.platform.isMac;if(0!==t.button||t.ctrlKey&&i)return;M(Pv,this).showAllEditors("highlight",!0,!0),M(Mv,this).div.classList.add("free"),this.toggleDrawing(),zd.startHighlighting(this,"ltr"===M(Pv,this).direction,t),M(Mv,this).div.addEventListener("pointerup",(function(){M(Mv,e).div.classList.remove("free"),e.toggleDrawing(!0)}),{once:!0,signal:M(Pv,this)._signal}),t.preventDefault()}}function Iv(t){return jv._.get(M(Pv,t).getMode())}function Rv(t){var e=E(Bv,this,Iv);return e?new e.prototype.constructor(t):null}function Nv(){var t=this.div.getBoundingClientRect(),e=t.x,n=t.y,i=t.width,a=t.height,r=Math.max(0,e),s=Math.max(0,n),o=(r+Math.min(window.innerWidth,e+i))/2-e,u=(s+Math.min(window.innerHeight,n+a))/2-n,l=L(this.viewport.rotation%180==0?[o,u]:[u,o],2);return{offsetX:l[0],offsetY:l[1]}}function Ov(){P(xv,this,!0);var t,e=R(M(Fv,this).values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isEmpty()&&n.remove()}}catch(t){e.e(t)}finally{e.f()}P(xv,this,!1)}w(Lv,"_initialized",!1);var jv={_:new Map([nc,bf,ov,zd].map((function(t){return[t._editorType,t]})))},Wv=new WeakMap,Hv=new WeakMap,zv=new WeakMap,Vv=new WeakMap,Uv=new WeakSet,Gv=function(){function t(e){var n=e.pageIndex;z(this,t),k(this,Uv),x(this,Wv,null),x(this,Hv,0),x(this,zv,new Map),x(this,Vv,new Map),this.pageIndex=n}return W(t,[{key:"setParent",value:function(t){if(M(Wv,this)){if(M(Wv,this)!==t){if(M(zv,this).size>0){var e,n=R(M(zv,this).values());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.remove(),t.append(i)}}catch(t){n.e(t)}finally{n.f()}}P(Wv,this,t)}}else P(Wv,this,t)}},{key:"highlight",value:function(e,n,i){var a,r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(P(Hv,this,(a=M(Hv,this),r=a++,a)),r),u=B(Uv,this,Xv).call(this,e.box);u.classList.add("highlight"),e.free&&u.classList.add("free");var l=t._svgFactory.createElement("defs");u.append(l);var h=t._svgFactory.createElement("path");l.append(h);var c="path_p".concat(this.pageIndex,"_").concat(o);h.setAttribute("id",c),h.setAttribute("d",e.toSVGPath()),s&&M(Vv,this).set(o,h);var d=B(Uv,this,Kv).call(this,l,c),f=t._svgFactory.createElement("use");return u.append(f),u.setAttribute("fill",n),u.setAttribute("fill-opacity",i),f.setAttribute("href","#".concat(c)),M(zv,this).set(o,u),{id:o,clipPathId:"url(#".concat(d,")")}}},{key:"highlightOutline",value:function(e){var n,i,a=(P(Hv,this,(n=M(Hv,this),i=n++,n)),i),r=B(Uv,this,Xv).call(this,e.box);r.classList.add("highlightOutline");var s=t._svgFactory.createElement("defs");r.append(s);var o=t._svgFactory.createElement("path");s.append(o);var u,l="path_p".concat(this.pageIndex,"_").concat(a);if(o.setAttribute("id",l),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke"),e.free){r.classList.add("free");var h=t._svgFactory.createElement("mask");s.append(h),u="mask_p".concat(this.pageIndex,"_").concat(a),h.setAttribute("id",u),h.setAttribute("maskUnits","objectBoundingBox");var c=t._svgFactory.createElement("rect");h.append(c),c.setAttribute("width","1"),c.setAttribute("height","1"),c.setAttribute("fill","white");var d=t._svgFactory.createElement("use");h.append(d),d.setAttribute("href","#".concat(l)),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}var f=t._svgFactory.createElement("use");r.append(f),f.setAttribute("href","#".concat(l)),u&&f.setAttribute("mask","url(#".concat(u,")"));var v=f.cloneNode();return r.append(v),f.classList.add("mainOutline"),v.classList.add("secondaryOutline"),M(zv,this).set(a,r),a}},{key:"finalizeLine",value:function(t,e){var n=M(Vv,this).get(t);M(Vv,this).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}},{key:"updateLine",value:function(t,e){M(zv,this).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}},{key:"removeFreeHighlight",value:function(t){this.remove(t),M(Vv,this).delete(t)}},{key:"updatePath",value:function(t,e){M(Vv,this).get(t).setAttribute("d",e.toSVGPath())}},{key:"updateBox",value:function(e,n){qv.call(t,M(zv,this).get(e),n)}},{key:"show",value:function(t,e){M(zv,this).get(t).classList.toggle("hidden",!e)}},{key:"rotate",value:function(t,e){M(zv,this).get(t).setAttribute("data-main-rotation",e)}},{key:"changeColor",value:function(t,e){M(zv,this).get(t).setAttribute("fill",e)}},{key:"changeOpacity",value:function(t,e){M(zv,this).get(t).setAttribute("fill-opacity",e)}},{key:"addClass",value:function(t,e){M(zv,this).get(t).classList.add(e)}},{key:"removeClass",value:function(t,e){M(zv,this).get(t).classList.remove(e)}},{key:"remove",value:function(t){null!==M(Wv,this)&&(M(zv,this).get(t).remove(),M(zv,this).delete(t))}},{key:"destroy",value:function(){P(Wv,this,null);var t,e=R(M(zv,this).values());try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}M(zv,this).clear()}}],[{key:"_svgFactory",get:function(){return ue(this,"_svgFactory",new yn)}}])}();function qv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.x,i=void 0===n?0:n,a=e.y,r=void 0===a?0:a,s=e.width,o=void 0===s?1:s,u=e.height,l=void 0===u?1:u,h=t.style;h.top="".concat(100*r,"%"),h.left="".concat(100*i,"%"),h.width="".concat(100*o,"%"),h.height="".concat(100*l,"%")}function Xv(t){var e=c._svgFactory.create(1,1,!0);return M(Wv,this).append(e),e.setAttribute("aria-hidden",!0),qv.call(c,e,t),e}function Kv(t,e){var n=c._svgFactory.createElement("clipPath");t.append(n);var i="clip_".concat(e);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");var a=c._svgFactory.createElement("use");return n.append(a),a.setAttribute("href","#".concat(e)),a.classList.add("clip"),i}c=Gv;var Yv=it.GlobalWorkerOptions,Qv=it.InvalidPDFException,$v=it.MissingPDFException,Jv=it.UnexpectedResponseException,Zv=it.build,tp=it.getDocument,ep=it.version,np={d:function(t,e){for(var n in e)np.o(e,n)&&!np.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},ip=globalThis.pdfjsViewer={};np.d(ip,{AnnotationLayerBuilder:function(){return Yg},DownloadManager:function(){return Zg},EventBus:function(){return im},FindState:function(){return Tp},GenericL10n:function(){return _D},LinkTarget:function(){return bg},PDFFindController:function(){return tg},PDFHistory:function(){return zD},PDFLinkService:function(){return kg},PDFPageView:function(){return yA},PDFScriptingManager:function(){return lb},PDFSinglePageViewer:function(){return lk},PDFViewer:function(){return Ub},ProgressBar:function(){return xp},RenderingStates:function(){return op},ScrollMode:function(){return hp},SimpleLinkService:function(){return wg},SpreadMode:function(){return cp},StructTreeLayerBuilder:function(){return By},TextLayerBuilder:function(){return Qy},XfaLayerBuilder:function(){return nA},parseQueryString:function(){return vp}});var ap=1.25,rp=40,sp=5,op={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},up={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},lp={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},hp={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},cp={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},dp=function(){return W((function t(){z(this,t);var e=window.devicePixelRatio||1;this.sx=e,this.sy=e}),[{key:"scaled",get:function(){return 1!==this.sx||1!==this.sy}}])}();function fp(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.offsetParent;if(i){for(var a=t.offsetTop+t.clientTop,r=t.offsetLeft+t.clientLeft;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||n&&(i.classList.contains("markedContent")||"hidden"===getComputedStyle(i).overflow);)if(a+=i.offsetTop,r+=i.offsetLeft,!(i=i.offsetParent))return;e&&(void 0!==e.top&&(a+=e.top),void 0!==e.left&&(r+=e.left,i.scrollLeft=r)),i.scrollTop=a}else console.error("offsetParent is not set -- cannot scroll")}function vp(t){var e,n=new Map,i=R(new URLSearchParams(t));try{for(i.s();!(e=i.n()).done;){var a=L(e.value,2),r=a[0],s=a[1];n.set(r.toLowerCase(),s)}}catch(t){i.e(t)}finally{i.f()}return n}var pp=/[\x00-\x1F]/g;function gp(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pp.test(t)?e?t.replaceAll(pp,(function(t){return"\0"===t?"":" "})):t.replaceAll("\0",""):t}function mp(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.length-1;if(i<0||!e(t[i]))return t.length;if(e(t[n]))return n;for(;n<i;){var a=n+i>>1;e(t[a])?i=a:n=a+1}return n}function Dp(t){if(Math.floor(t)===t)return[t,1];var e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];for(var n=t>1?e:t,i=0,a=1,r=1,s=1;;){var o=i+r,u=a+s;if(u>8)break;n<=o/u?(r=o,s=u):(i=o,a=u)}return n-i/a<r/s-n?n===t?[i,a]:[a,i]:n===t?[r,s]:[s,r]}function yp(t,e){return t-t%e}function Ap(t){return Number.isInteger(t)&&t%90==0}function bp(t){return t.width<=t.height}new Promise((function(t){window.requestAnimationFrame(t)}));var kp=document.documentElement.style;var Ep=new WeakMap,wp=new WeakMap,Cp=new WeakMap,Fp=new WeakMap,_p=new WeakMap,xp=function(){return W((function t(e){z(this,t),x(this,Ep,null),x(this,wp,null),x(this,Cp,0),x(this,Fp,null),x(this,_p,!0),P(Ep,this,e.classList),P(Fp,this,e.style)}),[{key:"percent",get:function(){return M(Cp,this)},set:function(t){var e,n,i;P(Cp,this,(e=t,n=0,i=100,Math.min(Math.max(e,n),i))),isNaN(t)?M(Ep,this).add("indeterminate"):(M(Ep,this).remove("indeterminate"),M(Fp,this).setProperty("--progressBar-percent","".concat(M(Cp,this),"%")))}},{key:"setWidth",value:function(t){if(t){var e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&M(Fp,this).setProperty("--progressBar-end-offset","".concat(e,"px"))}}},{key:"setDisableAutoFetch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;100===M(Cp,this)||isNaN(M(Cp,this))||(M(wp,this)&&clearTimeout(M(wp,this)),this.show(),P(wp,this,setTimeout((function(){P(wp,t,null),t.hide()}),e)))}},{key:"hide",value:function(){M(_p,this)&&(P(_p,this,!1),M(Ep,this).add("hidden"))}},{key:"show",value:function(){M(_p,this)||(P(_p,this,!0),M(Ep,this).remove("hidden"))}}])}();function Sp(t){var e=hp.VERTICAL,n=cp.NONE;switch(t){case"SinglePage":e=hp.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=hp.PAGE;case"TwoColumnLeft":n=cp.ODD;break;case"TwoPageRight":e=hp.PAGE;case"TwoColumnRight":n=cp.EVEN}return{scrollMode:e,spreadMode:n}}var Mp,Pp={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function Bp(t){return function(t){return t<11904}(t)?function(t){return 0==(65408&t)}(t)?function(t){return 32===t||9===t||13===t||10===t}(t)?Pp.SPACE:function(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function(t){return t>=48&&t<=57}(t)||95===t?Pp.ALPHA_LETTER:Pp.PUNCT:function(t){return 3584==(65408&t)}(t)?Pp.THAI_LETTER:160===t?Pp.SPACE:Pp.ALPHA_LETTER:function(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t)?Pp.HAN_LETTER:function(t){return t>=12448&&t<=12543}(t)?Pp.KATAKANA_LETTER:function(t){return t>=12352&&t<=12447}(t)?Pp.HIRAGANA_LETTER:function(t){return t>=65376&&t<=65439}(t)?Pp.HALFWIDTH_KATAKANA_LETTER:Pp.ALPHA_LETTER}var Lp,Tp={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},Ip=250,Rp={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},Np=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),Op=/(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])+/g,jp=/([\$\(-\+\.\?\[-\^\{-\}])|((?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]))|([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|((?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]))|((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]))/g,Wp=/((?:[\0-\u02FF\u0370-\u0482\u048A-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u060F\u061B-\u064A\u0660-\u066F\u0671-\u06D5\u06DD\u06DE\u06E5\u06E6\u06E9\u06EE-\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4-\u07FC\u07FE-\u0815\u081A\u0824\u0828\u082E-\u0858\u085C-\u0897\u08A0-\u08C9\u08E2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0964-\u0980\u0984-\u09BB\u09BD\u09C5\u09C6\u09C9\u09CA\u09CE-\u09D6\u09D8-\u09E1\u09E4-\u09FD\u09FF\u0A00\u0A04-\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A6F\u0A72-\u0A74\u0A76-\u0A80\u0A84-\u0ABB\u0ABD\u0AC6\u0ACA\u0ACE-\u0AE1\u0AE4-\u0AF9\u0B00\u0B04-\u0B3B\u0B3D\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B61\u0B64-\u0B81\u0B83-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE-\u0BD6\u0BD8-\u0BFF\u0C05-\u0C3B\u0C3D\u0C45\u0C49\u0C4E-\u0C54\u0C57-\u0C61\u0C64-\u0C80\u0C84-\u0CBB\u0CBD\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CE1\u0CE4-\u0CF2\u0CF4-\u0CFF\u0D04-\u0D3A\u0D3D\u0D45\u0D49\u0D4E-\u0D56\u0D58-\u0D61\u0D64-\u0D80\u0D84-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF4-\u0E30\u0E32\u0E33\u0E3B-\u0E46\u0E4F-\u0EB0\u0EB2\u0EB3\u0EBD-\u0EC7\u0ECF-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F40-\u0F70\u0F85\u0F88-\u0F8C\u0F98\u0FBD-\u0FC5\u0FC7-\u102A\u103F-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u109E-\u135C\u1360-\u1711\u1716-\u1731\u1735-\u1751\u1754-\u1771\u1774-\u17B3\u17D4-\u17DC\u17DE-\u180A\u180E\u1810-\u1884\u1887-\u18A8\u18AA-\u191F\u192C-\u192F\u193C-\u1A16\u1A1C-\u1A54\u1A5F\u1A7D\u1A7E\u1A80-\u1AAF\u1ACF-\u1AFF\u1B05-\u1B33\u1B45-\u1B6A\u1B74-\u1B7F\u1B83-\u1BA0\u1BAE-\u1BE5\u1BF4-\u1C23\u1C38-\u1CCF\u1CD3\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA-\u1DBF\u1E00-\u20CF\u20F1-\u2CEE\u2CF2-\u2D7E\u2D80-\u2DDF\u2E00-\u3029\u3030-\u3098\u309B-\uA66E\uA673\uA67E-\uA69D\uA6A0-\uA6EF\uA6F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA82D-\uA87F\uA882-\uA8B3\uA8C6-\uA8DF\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA954-\uA97F\uA984-\uA9B2\uA9C1-\uA9E4\uA9E6-\uAA28\uAA37-\uAA42\uAA44-\uAA4B\uAA4E-\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2-\uAAEA\uAAF0-\uAAF4\uAAF7-\uABE2\uABEB\uABEE-\uD7FF\uE000-\uFB1D\uFB1F-\uFDFF\uFE10-\uFE1F\uFE30-\uFFFF]|\uD800[\uDC00-\uDDFC\uDDFE-\uDEDF\uDEE1-\uDF75\uDF7B-\uDFFF]|[\uD801\uD808-\uD80C\uD80E-\uD819\uD81C-\uD82E\uD830-\uD832\uD835\uD837\uD83B-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD802[\uDC00-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDEE4\uDEE7-\uDFFF]|\uD803[\uDC00-\uDD23\uDD28-\uDEAA\uDEAD-\uDEFC\uDF00-\uDF45\uDF51-\uDF81\uDF86-\uDFFF]|\uD804[\uDC03-\uDC37\uDC47-\uDC6F\uDC71\uDC72\uDC75-\uDC7E\uDC83-\uDCAF\uDCBB-\uDCC1\uDCC3-\uDCFF\uDD03-\uDD26\uDD35-\uDD44\uDD47-\uDD72\uDD74-\uDD7F\uDD83-\uDDB2\uDDC1-\uDDC8\uDDCD\uDDD0-\uDE2B\uDE38-\uDE3D\uDE3F\uDE40\uDE42-\uDEDE\uDEEB-\uDEFF\uDF04-\uDF3A\uDF3D\uDF45\uDF46\uDF49\uDF4A\uDF4E-\uDF56\uDF58-\uDF61\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC00-\uDC34\uDC47-\uDC5D\uDC5F-\uDCAF\uDCC4-\uDDAE\uDDB6\uDDB7\uDDC1-\uDDDB\uDDDE-\uDE2F\uDE41-\uDEAA\uDEB8-\uDF1C\uDF2C-\uDFFF]|\uD806[\uDC00-\uDC2B\uDC3B-\uDD2F\uDD36\uDD39\uDD3A\uDD3F\uDD41\uDD44-\uDDD0\uDDD8\uDDD9\uDDE1-\uDDE3\uDDE5-\uDE00\uDE0B-\uDE32\uDE3A\uDE3F-\uDE46\uDE48-\uDE50\uDE5C-\uDE89\uDE9A-\uDFFF]|\uD807[\uDC00-\uDC2E\uDC37\uDC40-\uDC91\uDCA8\uDCB7-\uDD30\uDD37-\uDD39\uDD3B\uDD3E\uDD46\uDD48-\uDD89\uDD8F\uDD92\uDD98-\uDEF2\uDEF7-\uDEFF\uDF02\uDF04-\uDF33\uDF3B-\uDF3D\uDF43-\uDFFF]|\uD80D[\uDC00-\uDC3F\uDC41-\uDC46\uDC56-\uDFFF]|\uD81A[\uDC00-\uDEEF\uDEF5-\uDF2F\uDF37-\uDFFF]|\uD81B[\uDC00-\uDF4E\uDF50\uDF88-\uDF8E\uDF93-\uDFE3\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD82F[\uDC00-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC8E\uDC90-\uDD2F\uDD37-\uDEAD\uDEAF-\uDEEB\uDEF0-\uDFFF]|\uD839[\uDC00-\uDCEB\uDCF0-\uDFFF]|\uD83A[\uDC00-\uDCCF\uDCD7-\uDD43\uDD4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*$/,Hp=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC82\uDCB0-\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDE2C-\uDE37\uDE3E\uDE41\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDD30-\uDD35\uDD37\uDD38\uDD3B-\uDD3E\uDD40\uDD42\uDD43\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6\uDF00\uDF01\uDF03\uDF34-\uDF3A\uDF3E-\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87\uDF8F-\uDF92\uDFE4\uDFF0\uDFF1]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*((?:[\0-\u02FF\u0370-\u0482\u048A-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u060F\u061B-\u064A\u0660-\u066F\u0671-\u06D5\u06DD\u06DE\u06E5\u06E6\u06E9\u06EE-\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4-\u07FC\u07FE-\u0815\u081A\u0824\u0828\u082E-\u0858\u085C-\u0897\u08A0-\u08C9\u08E2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0964-\u0980\u0984-\u09BB\u09BD\u09C5\u09C6\u09C9\u09CA\u09CE-\u09D6\u09D8-\u09E1\u09E4-\u09FD\u09FF\u0A00\u0A04-\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A6F\u0A72-\u0A74\u0A76-\u0A80\u0A84-\u0ABB\u0ABD\u0AC6\u0ACA\u0ACE-\u0AE1\u0AE4-\u0AF9\u0B00\u0B04-\u0B3B\u0B3D\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B61\u0B64-\u0B81\u0B83-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE-\u0BD6\u0BD8-\u0BFF\u0C05-\u0C3B\u0C3D\u0C45\u0C49\u0C4E-\u0C54\u0C57-\u0C61\u0C64-\u0C80\u0C84-\u0CBB\u0CBD\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CE1\u0CE4-\u0CF2\u0CF4-\u0CFF\u0D04-\u0D3A\u0D3D\u0D45\u0D49\u0D4E-\u0D56\u0D58-\u0D61\u0D64-\u0D80\u0D84-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF4-\u0E30\u0E32\u0E33\u0E3B-\u0E46\u0E4F-\u0EB0\u0EB2\u0EB3\u0EBD-\u0EC7\u0ECF-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F40-\u0F70\u0F85\u0F88-\u0F8C\u0F98\u0FBD-\u0FC5\u0FC7-\u102A\u103F-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u109E-\u135C\u1360-\u1711\u1716-\u1731\u1735-\u1751\u1754-\u1771\u1774-\u17B3\u17D4-\u17DC\u17DE-\u180A\u180E\u1810-\u1884\u1887-\u18A8\u18AA-\u191F\u192C-\u192F\u193C-\u1A16\u1A1C-\u1A54\u1A5F\u1A7D\u1A7E\u1A80-\u1AAF\u1ACF-\u1AFF\u1B05-\u1B33\u1B45-\u1B6A\u1B74-\u1B7F\u1B83-\u1BA0\u1BAE-\u1BE5\u1BF4-\u1C23\u1C38-\u1CCF\u1CD3\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA-\u1DBF\u1E00-\u20CF\u20F1-\u2CEE\u2CF2-\u2D7E\u2D80-\u2DDF\u2E00-\u3029\u3030-\u3098\u309B-\uA66E\uA673\uA67E-\uA69D\uA6A0-\uA6EF\uA6F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA828-\uA82B\uA82D-\uA87F\uA882-\uA8B3\uA8C6-\uA8DF\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA954-\uA97F\uA984-\uA9B2\uA9C1-\uA9E4\uA9E6-\uAA28\uAA37-\uAA42\uAA44-\uAA4B\uAA4E-\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2-\uAAEA\uAAF0-\uAAF4\uAAF7-\uABE2\uABEB\uABEE-\uD7FF\uE000-\uFB1D\uFB1F-\uFDFF\uFE10-\uFE1F\uFE30-\uFFFF]|\uD800[\uDC00-\uDDFC\uDDFE-\uDEDF\uDEE1-\uDF75\uDF7B-\uDFFF]|[\uD801\uD808-\uD80C\uD80E-\uD819\uD81C-\uD82E\uD830-\uD832\uD835\uD837\uD83B-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD802[\uDC00-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDEE4\uDEE7-\uDFFF]|\uD803[\uDC00-\uDD23\uDD28-\uDEAA\uDEAD-\uDEFC\uDF00-\uDF45\uDF51-\uDF81\uDF86-\uDFFF]|\uD804[\uDC03-\uDC37\uDC47-\uDC6F\uDC71\uDC72\uDC75-\uDC7E\uDC83-\uDCAF\uDCBB-\uDCC1\uDCC3-\uDCFF\uDD03-\uDD26\uDD35-\uDD44\uDD47-\uDD72\uDD74-\uDD7F\uDD83-\uDDB2\uDDC1-\uDDC8\uDDCD\uDDD0-\uDE2B\uDE38-\uDE3D\uDE3F\uDE40\uDE42-\uDEDE\uDEEB-\uDEFF\uDF04-\uDF3A\uDF3D\uDF45\uDF46\uDF49\uDF4A\uDF4E-\uDF56\uDF58-\uDF61\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC00-\uDC34\uDC47-\uDC5D\uDC5F-\uDCAF\uDCC4-\uDDAE\uDDB6\uDDB7\uDDC1-\uDDDB\uDDDE-\uDE2F\uDE41-\uDEAA\uDEB8-\uDF1C\uDF2C-\uDFFF]|\uD806[\uDC00-\uDC2B\uDC3B-\uDD2F\uDD36\uDD39\uDD3A\uDD3F\uDD41\uDD44-\uDDD0\uDDD8\uDDD9\uDDE1-\uDDE3\uDDE5-\uDE00\uDE0B-\uDE32\uDE3A\uDE3F-\uDE46\uDE48-\uDE50\uDE5C-\uDE89\uDE9A-\uDFFF]|\uD807[\uDC00-\uDC2E\uDC37\uDC40-\uDC91\uDCA8\uDCB7-\uDD30\uDD37-\uDD39\uDD3B\uDD3E\uDD46\uDD48-\uDD89\uDD8F\uDD92\uDD98-\uDEF2\uDEF7-\uDEFF\uDF02\uDF04-\uDF33\uDF3B-\uDF3D\uDF43-\uDFFF]|\uD80D[\uDC00-\uDC3F\uDC41-\uDC46\uDC56-\uDFFF]|\uD81A[\uDC00-\uDEEF\uDEF5-\uDF2F\uDF37-\uDFFF]|\uD81B[\uDC00-\uDF4E\uDF50\uDF88-\uDF8E\uDF93-\uDFE3\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD82F[\uDC00-\uDC9C\uDC9F-\uDFFF]|\uD833[\uDC00-\uDEFF\uDF2E\uDF2F\uDF47-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDC8E\uDC90-\uDD2F\uDD37-\uDEAD\uDEAF-\uDEEB\uDEF0-\uDFFF]|\uD839[\uDC00-\uDCEB\uDCF0-\uDFFF]|\uD83A[\uDC00-\uDCCF\uDCD7-\uDD43\uDD4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,zp=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,Vp=new Map,Up="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",Gp=new Map,qp=null,Xp=null;function Kp(t){for(var e,n,i=[];null!==(e=zp.exec(t));){var a,r=e.index,s=R(e[0]);try{for(s.s();!(a=s.n()).done;){var o=a.value,u=Vp.get(o);u||(u=o.normalize("NFD").length,Vp.set(o,u)),i.push([u,r++])}}catch(t){s.e(t)}finally{s.f()}}if(0===i.length&&qp)n=qp;else if(i.length>0&&Xp)n=Xp;else{var l=Object.keys(Rp).join(""),h=(Mp||(Mp=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),Mp),c="([".concat(l,"])|([").concat(h,"])|(").concat("(?:゙|゚)","\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(").concat("(?:\\p{Ideographic}|[぀-ヿ])","\\n)|(\\n)");n=0===i.length?qp=new RegExp(c+"|(\\u0000)","gum"):Xp=new RegExp(c+"|(".concat(Up,")"),"gum")}for(var d=[];null!==(e=Op.exec(t));)d.push([e[0].length,e.index]);var f=t.normalize("NFD"),v=[[0,0]],p=0,g=0,m=0,D=0,y=0,A=!1;return f=f.replace(n,(function(t,e,n,a,r,s,o,u,l,h){var c,f;if(h-=D,e){for(var b=Rp[e],k=b.length,E=1;E<k;E++)v.push([h-m+E,m-E]);return m-=k-1,b}if(n){var w=Gp.get(n);w||(w=n.normalize("NFKC"),Gp.set(n,w));for(var C=w.length,F=1;F<C;F++)v.push([h-m+F,m-F]);return m-=C-1,w}if(a)return A=!0,h+y===(null===(f=d[p])||void 0===f?void 0:f[1])?++p:(v.push([h-1-m+1,m-1]),m-=1,D+=1),v.push([h-m+1,m]),D+=1,y+=1,a.charAt(0);if(r){var _,x=r.endsWith("\n"),S=x?r.length-2:r.length;A=!0;var M=S;h+y===(null===(_=d[p])||void 0===_?void 0:_[1])&&(M-=d[p][0],++p);for(var P=1;P<=M;P++)v.push([h-1-m+P,m-P]);return m-=M,D+=M,x?(h+=S-1,v.push([h-m+1,1+m]),m+=1,D+=1,y+=1,r.slice(0,S)):r}if(s){var B=s.length-2;return v.push([h-m+B,1+m]),m+=1,D+=1,y+=1,s.slice(0,-2)}if(o){var L=o.length-1;return v.push([h-m+L,m]),D+=1,y+=1,o.slice(0,-1)}if(u)return v.push([h-m+1,m-1]),m-=1,D+=1,y+=1," ";if(h+y===(null===(c=i[g])||void 0===c?void 0:c[1])){var T=i[g][0]-1;++g;for(var I=1;I<=T;I++)v.push([h-(m-I),m-I]);m-=T,D+=T}return l})),v.push([f.length,m]),[f,v,A]}function Yp(t,e,n){if(!t)return[e,n];var i=e,a=e+n-1,r=mp(t,(function(t){return t[0]>=i}));t[r][0]>i&&--r;var s=mp(t,(function(t){return t[0]>=a}),r);t[s][0]>a&&--s;var o=i+t[r][1];return[o,a+t[s][1]+1-o]}var Qp=new WeakMap,$p=new WeakMap,Jp=new WeakMap,Zp=new WeakSet,tg=function(){return W((function t(e){var n=e.linkService,i=e.eventBus,a=e.updateMatchesCountOnProgress,r=void 0===a||a;z(this,t),k(this,Zp),x(this,Qp,null),x(this,$p,!0),x(this,Jp,0),this._linkService=n,this._eventBus=i,P($p,this,r),this.onIsPageVisible=null,B(Zp,this,ng).call(this),i._on("find",B(Zp,this,eg).bind(this)),i._on("findbarclose",B(Zp,this,mg).bind(this))}),[{key:"highlightMatches",get:function(){return this._highlightMatches}},{key:"pageMatches",get:function(){return this._pageMatches}},{key:"pageMatchesLength",get:function(){return this._pageMatchesLength}},{key:"selected",get:function(){return this._selected}},{key:"state",get:function(){return M(Qp,this)}},{key:"setDocument",value:function(t){this._pdfDocument&&B(Zp,this,ng).call(this),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}},{key:"scrollMatchIntoView",value:function(t){var e=t.element,n=void 0===e?null:e,i=t.selectedLeft,a=void 0===i?0:i,r=t.pageIndex,s=void 0===r?-1:r,o=t.matchIndex,u=void 0===o?-1:o;this._scrollMatches&&n&&(-1!==u&&u===this._selected.matchIdx&&-1!==s&&s===this._selected.pageIdx&&(this._scrollMatches=!1,fp(n,{top:-50,left:a+-400},!0)))}}])}();function eg(t){var e=this;if(t){var n=this._pdfDocument,i=t.type;(null===M(Qp,this)||B(Zp,this,ag).call(this,t))&&(this._dirtyMatch=!0),P(Qp,this,t),"highlightallchange"!==i&&B(Zp,this,Ag).call(this,Tp.PENDING),this._firstPageCapability.promise.then((function(){if(e._pdfDocument&&(!n||e._pdfDocument===n)){B(Zp,e,lg).call(e);var t=!e._highlightMatches,a=!!e._findTimeout;e._findTimeout&&(clearTimeout(e._findTimeout),e._findTimeout=null),i?e._dirtyMatch?B(Zp,e,dg).call(e):"again"===i?(B(Zp,e,dg).call(e),t&&M(Qp,e).highlightAll&&B(Zp,e,cg).call(e)):"highlightallchange"===i?(a?B(Zp,e,dg).call(e):e._highlightMatches=!0,B(Zp,e,cg).call(e)):B(Zp,e,dg).call(e):e._findTimeout=setTimeout((function(){B(Zp,e,dg).call(e),e._findTimeout=null}),Ip)}}))}}function ng(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],P(Jp,this,0),P(Qp,this,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}function ig(t){var e=M(Qp,t).query;if("string"==typeof e){if(e!==t._rawQuery){t._rawQuery=e;var n=L(Kp(e),1);t._normalizedQuery=n[0]}return t._normalizedQuery}return(e||[]).filter((function(t){return!!t})).map((function(t){return Kp(t)[0]}))}function ag(t){var e,n,i=t.query,a=M(Qp,this).query,r=K(i);if(r!==K(a))return!0;if("string"===r){if(i!==a)return!0}else if(JSON.stringify(i)!==JSON.stringify(a))return!0;switch(t.type){case"again":var s=this._selected.pageIdx+1,o=this._linkService;return s>=1&&s<=o.pagesCount&&s!==o.page&&!(null===(e=null===(n=this.onIsPageVisible)||void 0===n?void 0:n.call(this,s))||void 0===e||e);case"highlightallchange":return!1}return!0}function rg(t,e,n){var i=t.slice(0,e).match(Wp);if(i){var a=t.charCodeAt(e),r=i[1].charCodeAt(0);if(Bp(a)===Bp(r))return!1}if(i=t.slice(e+n).match(Hp)){var s=t.charCodeAt(e+n-1),o=i[1].charCodeAt(0);if(Bp(s)===Bp(o))return!1}return!0}function sg(t,e,n,i){var a=this._pageMatches[n]=[],r=this._pageMatchesLength[n]=[];if(t)for(var s,o=this._pageDiffs[n];null!==(s=t.exec(i));)if(!e||B(Zp,this,rg).call(this,i,s.index,s[0].length)){var u=L(Yp(o,s.index,s[0].length),2),l=u[0],h=u[1];h&&(a.push(l),r.push(h))}}function og(t,e){var n=M(Qp,this).matchDiacritics,i=!1,a="[ ]*";return(t=t.replaceAll(jp,(function(t,a,r,s,o,u){return a?"[ ]*\\".concat(a,"[ ]*"):r?"[ ]*".concat(r,"[ ]*"):s?"[ ]+":n?o||u:o?Np.has(o.charCodeAt(0))?o:"":e?(i=!0,"".concat(u,"\\p{M}*")):u}))).endsWith(a)&&(t=t.slice(0,t.length-a.length)),n&&e&&(Lp||(Lp=String.fromCharCode.apply(String,A(Np))),i=!0,t="".concat(t,"(?=[").concat(Lp,"]|[^\\p{M}]|$)")),[i,t]}function ug(t){var e,n=this,i=E(Zp,this,ig);if(0!==i.length){var a=M(Qp,this),r=a.caseSensitive,s=a.entireWord,o=this._pageContents[t],u=this._hasDiacritics[t],l=!1;if("string"==typeof i){var h=L(B(Zp,this,og).call(this,i,u),2);l=h[0],i=h[1]}else i=i.sort().reverse().map((function(t){var e=L(B(Zp,n,og).call(n,t,u),2),i=e[0],a=e[1];return l||(l=i),"(".concat(a,")")})).join("|");var c="g".concat(l?"u":"").concat(r?"":"i");i=i?new RegExp(i,c):null,B(Zp,this,sg).call(this,i,s,t,o),M(Qp,this).highlightAll&&B(Zp,this,hg).call(this,t),this._resumePageIdx===t&&(this._resumePageIdx=null,B(Zp,this,vg).call(this));var d=this._pageMatches[t].length;this._matchesCountTotal+=d,M($p,this)?d>0&&B(Zp,this,yg).call(this):P(Jp,this,(e=M(Jp,this),++e))===this._linkService.pagesCount&&B(Zp,this,yg).call(this)}}function lg(){var t=this;if(!(this._extractTextPromises.length>0))for(var e=Promise.resolve(),n={disableNormalization:!0},i=function(i){var a=Promise.withResolvers(),r=a.promise,s=a.resolve;t._extractTextPromises[i]=r,e=e.then((function(){return t._pdfDocument.getPage(i+1).then((function(t){return t.getTextContent(n)})).then((function(e){var n,a=[],r=R(e.items);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.push(o.str),o.hasEOL&&a.push("\n")}}catch(t){r.e(t)}finally{r.f()}var u=L(Kp(a.join("")),3);t._pageContents[i]=u[0],t._pageDiffs[i]=u[1],t._hasDiacritics[i]=u[2],s()}),(function(e){console.error("Unable to get text content for page ".concat(i+1),e),t._pageContents[i]="",t._pageDiffs[i]=null,t._hasDiacritics[i]=!1,s()}))}))},a=0,r=this._linkService.pagesCount;a<r;a++)i(a)}function hg(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}function cg(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function dg(){var t=this,e=M(Qp,this).findPrevious,n=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=n,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,P(Jp,this,0),this._matchesCountTotal=0,B(Zp,this,cg).call(this);for(var a=function(e){if(t._pendingFindMatches.has(e))return 1;t._pendingFindMatches.add(e),t._extractTextPromises[e].then((function(){t._pendingFindMatches.delete(e),B(Zp,t,ug).call(t,e)}))},r=0;r<i;r++)a(r)}if(0!==E(Zp,this,ig).length){if(!this._resumePageIdx){var s=this._offset;if(this._pagesToSearch=i,null!==s.matchIdx){var o=this._pageMatches[s.pageIdx].length;if(!e&&s.matchIdx+1<o||e&&s.matchIdx>0)return s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,void B(Zp,this,gg).call(this,!0);B(Zp,this,pg).call(this,e)}B(Zp,this,vg).call(this)}}else B(Zp,this,Ag).call(this,Tp.FOUND)}function fg(t){var e=this._offset,n=t.length,i=M(Qp,this).findPrevious;return n?(e.matchIdx=i?n-1:0,B(Zp,this,gg).call(this,!0),!0):(B(Zp,this,pg).call(this,i),!!(e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0))&&(B(Zp,this,gg).call(this,!1),!0))}function vg(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var t=null;do{var e=this._offset.pageIdx;if(!(t=this._pageMatches[e])){this._resumePageIdx=e;break}}while(!B(Zp,this,fg).call(this,t))}function pg(t){var e=this._offset,n=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=n||e.pageIdx<0)&&(e.pageIdx=t?n-1:0,e.wrapped=!0)}function gg(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Tp.NOT_FOUND,n=this._offset.wrapped;if(this._offset.wrapped=!1,t){var i=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=n?Tp.WRAPPED:Tp.FOUND,-1!==i&&i!==this._selected.pageIdx&&B(Zp,this,hg).call(this,i)}B(Zp,this,Ag).call(this,e,M(Qp,this).findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,B(Zp,this,hg).call(this,this._selected.pageIdx))}function mg(t){var e=this,n=this._pdfDocument;this._firstPageCapability.promise.then((function(){!e._pdfDocument||n&&e._pdfDocument!==n||(e._findTimeout&&(clearTimeout(e._findTimeout),e._findTimeout=null),e._resumePageIdx&&(e._resumePageIdx=null,e._dirtyMatch=!0),B(Zp,e,Ag).call(e,Tp.FOUND),e._highlightMatches=!1,B(Zp,e,cg).call(e))}))}function Dg(){var t=this._selected,e=t.pageIdx,n=t.matchIdx,i=0,a=this._matchesCountTotal;if(-1!==n){for(var r=0;r<e;r++){var s;i+=(null===(s=this._pageMatches[r])||void 0===s?void 0:s.length)||0}i+=n+1}return(i<1||i>a)&&(i=a=0),{current:i,total:a}}function yg(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:B(Zp,this,Dg).call(this)})}function Ag(t){var e,n,i,a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(M($p,this)||M(Jp,this)===this._linkService.pagesCount&&t!==Tp.PENDING)&&this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:r,entireWord:null!==(e=null===(n=M(Qp,this))||void 0===n?void 0:n.entireWord)&&void 0!==e?e:null,matchesCount:B(Zp,this,Dg).call(this),rawQuery:null!==(i=null===(a=M(Qp,this))||void 0===a?void 0:a.query)&&void 0!==i?i:null})}var bg={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},kg=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.eventBus,i=e.externalLinkTarget,a=void 0===i?null:i,r=e.externalLinkRel,s=void 0===r?null:r,o=e.ignoreDestinationZoom,u=void 0!==o&&o;z(this,t),w(this,"externalLinkEnabled",!0),this.eventBus=n,this.externalLinkTarget=a,this.externalLinkRel=s,this._ignoreDestinationZoom=u,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}return W(t,[{key:"setDocument",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=e,this.pdfDocument=t}},{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setHistory",value:function(t){this.pdfHistory=t}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1},set:function(t){this.pdfDocument&&(this.pdfViewer.currentPageNumber=t)}},{key:"rotation",get:function(){return this.pdfDocument?this.pdfViewer.pagesRotation:0},set:function(t){this.pdfDocument&&(this.pdfViewer.pagesRotation=t)}},{key:"isInPresentationMode",get:function(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}},{key:"goToDestination",value:(n=_(C().mark((function t(e){var n,i,a,r,s;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pdfDocument){t.next=2;break}return t.abrupt("return");case 2:if("string"!=typeof e){t.next=9;break}return n=e,t.next=6,this.pdfDocument.getDestination(e);case 6:i=t.sent,t.next=13;break;case 9:return n=null,t.next=12,e;case 12:i=t.sent;case 13:if(Array.isArray(i)){t.next=16;break}return console.error('goToDestination: "'.concat(i,'" is not a valid destination array, for dest="').concat(e,'".')),t.abrupt("return");case 16:if(r=L(i,1),!(s=r[0])||"object"!==K(s)){t.next=33;break}if(a=this.pdfDocument.cachedPageNumber(s)){t.next=31;break}return t.prev=20,t.next=23,this.pdfDocument.getPageIndex(s);case 23:t.t0=t.sent,a=t.t0+1,t.next=31;break;case 27:return t.prev=27,t.t1=t.catch(20),console.error('goToDestination: "'.concat(s,'" is not a valid page reference, for dest="').concat(e,'".')),t.abrupt("return");case 31:t.next=34;break;case 33:Number.isInteger(s)&&(a=s+1);case 34:if(!(!a||a<1||a>this.pagesCount)){t.next=37;break}return console.error('goToDestination: "'.concat(a,'" is not a valid page number, for dest="').concat(e,'".')),t.abrupt("return");case 37:this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:n,explicitDest:i,pageNumber:a})),this.pdfViewer.scrollPageIntoView({pageNumber:a,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom});case 39:case"end":return t.stop()}}),t,this,[[20,27]])}))),function(t){return n.apply(this,arguments)})},{key:"goToPage",value:function(t){if(this.pdfDocument){var e="string"==typeof t&&this.pdfViewer.pageLabelToPageNumber(t)||0|t;Number.isInteger(e)&&e>0&&e<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(e)),this.pdfViewer.scrollPageIntoView({pageNumber:e})):console.error('PDFLinkService.goToPage: "'.concat(t,'" is not a valid page.'))}}},{key:"addLinkAttributes",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||"string"!=typeof e)throw new Error('A valid "url" parameter must provided.');var i=n?bg.BLANK:this.externalLinkTarget,a=this.externalLinkRel;this.externalLinkEnabled?t.href=t.title=e:(t.href="",t.title="Disabled: ".concat(e),t.onclick=function(){return!1});var r="";switch(i){case bg.NONE:break;case bg.SELF:r="_self";break;case bg.BLANK:r="_blank";break;case bg.PARENT:r="_parent";break;case bg.TOP:r="_top"}t.target=r,t.rel="string"==typeof a?a:"noopener noreferrer nofollow"}},{key:"getDestinationHash",value:function(t){if("string"==typeof t){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){var e=JSON.stringify(t);if(e.length>0)return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(t){return this.baseUrl?this.baseUrl+t:t}},{key:"setHash",value:function(e){if(this.pdfDocument){var n,i;if(e.includes("=")){var a=vp(e);if(a.has("search")){var r=a.get("search").replaceAll('"',""),s="true"===a.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:s?r:r.match(/\S+/g)})}if(a.has("page")&&(n=0|a.get("page")||1),a.has("zoom")){var o=a.get("zoom").split(","),u=o[0],l=parseFloat(u);u.includes("Fit")?"Fit"===u||"FitB"===u?i=[null,{name:u}]:"FitH"===u||"FitBH"===u||"FitV"===u||"FitBV"===u?i=[null,{name:u},o.length>1?0|o[1]:null]:"FitR"===u?5!==o.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:u},0|o[1],0|o[2],0|o[3],0|o[4]]:console.error('PDFLinkService.setHash: "'.concat(u,'" is not a valid zoom value.')):i=[null,{name:"XYZ"},o.length>1?0|o[1]:null,o.length>2?0|o[2]:null,l?l/100:u]}return i?this.pdfViewer.scrollPageIntoView({pageNumber:n||this.page,destArray:i,allowNegativeOffset:!0}):n&&(this.page=n),a.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:a.get("pagemode")}),void(a.has("nameddest")&&this.goToDestination(a.get("nameddest")))}i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch(t){}"string"==typeof i||Eg.call(t,i)?this.goToDestination(i):console.error('PDFLinkService.setHash: "'.concat(unescape(e),'" is not a valid destination.'))}}},{key:"executeNamedAction",value:function(t){var e,n;if(this.pdfDocument){switch(t){case"GoBack":null===(e=this.pdfHistory)||void 0===e||e.back();break;case"GoForward":null===(n=this.pdfHistory)||void 0===n||n.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}}},{key:"executeSetOCGState",value:(e=_(C().mark((function t(e){var n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pdfDocument){t.next=2;break}return t.abrupt("return");case 2:return n=this.pdfDocument,t.next=5,this.pdfViewer.optionalContentConfigPromise;case 5:if(i=t.sent,n===this.pdfDocument){t.next=8;break}return t.abrupt("return");case 8:i.setOCGState(e),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e,n}();function Eg(t){if(!Array.isArray(t)||t.length<2)return!1;var e,n=I(e=t)||b(e)||N(e)||T(),i=n[0],a=n[1],r=n.slice(2);if(!("object"===K(i)&&Number.isInteger(null==i?void 0:i.num)&&Number.isInteger(null==i?void 0:i.gen)||Number.isInteger(i)))return!1;if("object"!==K(a)||"string"!=typeof(null==a?void 0:a.name))return!1;var s=r.length,o=!0;switch(a.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return 0===s;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(4!==s)return!1;o=!1;break;default:return!1}var u,l=R(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(!("number"==typeof h||o&&null===h))return!1}}catch(t){l.e(t)}finally{l.f()}return!0}var wg=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,kg),W(e,[{key:"setDocument",value:function(t){}}])}(),Cg=globalThis.pdfjsLib,Fg=Cg.AbortException,_g=Cg.AnnotationEditorLayer,xg=(Cg.AnnotationEditorParamsType,Cg.AnnotationEditorType),Sg=Cg.AnnotationEditorUIManager,Mg=Cg.AnnotationLayer,Pg=Cg.AnnotationMode,Bg=(Cg.build,Cg.CMapCompressionType,Cg.ColorPicker,Cg.createValidAbsoluteUrl),Lg=(Cg.DOMSVGFactory,Cg.DrawLayer),Tg=(Cg.FeatureTest,Cg.fetchData),Ig=(Cg.getDocument,Cg.getFilenameFromUrl,Cg.getPdfFilenameFromUrl),Rg=(Cg.getXfaPageViewport,Cg.GlobalWorkerOptions,Cg.ImageKind,Cg.InvalidPDFException,Cg.isDataScheme,Cg.isPdfFile),Ng=(Cg.MissingPDFException,Cg.noContextMenu,Cg.normalizeUnicode),Og=(Cg.OPS,Cg.PasswordResponses,Cg.PDFDataRangeTransport,Cg.PDFDateString,Cg.PDFWorker,Cg.PermissionFlag),jg=Cg.PixelsPerInch,Wg=Cg.RenderingCancelledException,Hg=Cg.setLayerDimensions,zg=Cg.shadow,Vg=Cg.TextLayer,Ug=(Cg.UnexpectedResponseException,Cg.Util,Cg.VerbosityLevel,Cg.version),Gg=Cg.XfaLayer,qg=new WeakMap,Xg=new WeakMap,Kg=new WeakSet,Yg=function(){return W((function t(e){var n=e.pdfPage,i=e.linkService,a=e.downloadManager,r=e.annotationStorage,s=void 0===r?null:r,o=e.imageResourcesPath,u=void 0===o?"":o,l=e.renderForms,h=void 0===l||l,c=e.enableScripting,d=void 0!==c&&c,f=e.hasJSActionsPromise,v=void 0===f?null:f,p=e.fieldObjectsPromise,g=void 0===p?null:p,m=e.annotationCanvasMap,D=void 0===m?null:m,y=e.accessibilityManager,A=void 0===y?null:y,b=e.annotationEditorUIManager,E=void 0===b?null:b,w=e.onAppend,C=void 0===w?null:w;z(this,t),k(this,Kg),x(this,qg,null),x(this,Xg,null),this.pdfPage=n,this.linkService=i,this.downloadManager=a,this.imageResourcesPath=u,this.renderForms=h,this.annotationStorage=s,this.enableScripting=d,this._hasJSActionsPromise=v||Promise.resolve(!1),this._fieldObjectsPromise=g||Promise.resolve(null),this._annotationCanvasMap=D,this._accessibilityManager=A,this._annotationEditorUIManager=E,P(qg,this,C),this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=i.eventBus}),[{key:"render",value:(t=_(C().mark((function t(e){var n,i,a,r,s,o,u,l,h,c=this,d=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=d.length>1&&void 0!==d[1]?d[1]:"display",!this.div){t.next=6;break}if(!this._cancelled&&this.annotationLayer){t.next=4;break}return t.abrupt("return");case 4:return this.annotationLayer.update({viewport:e.clone({dontFlip:!0})}),t.abrupt("return");case 6:return t.next=8,Promise.all([this.pdfPage.getAnnotations({intent:i}),this._hasJSActionsPromise,this._fieldObjectsPromise]);case 8:if(a=t.sent,r=L(a,3),s=r[0],o=r[1],u=r[2],!this._cancelled){t.next=15;break}return t.abrupt("return");case 15:if((l=this.div=document.createElement("div")).className="annotationLayer",null===(n=M(qg,this))||void 0===n||n.call(this,l),0!==s.length){t.next=21;break}return this.hide(),t.abrupt("return");case 21:return this.annotationLayer=new Mg({div:l,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:e.clone({dontFlip:!0})}),t.next=24,this.annotationLayer.render({annotations:s,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:o,fieldObjects:u});case 24:this.linkService.isInPresentationMode&&B(Kg,this,Qg).call(this,up.FULLSCREEN),M(Xg,this)||(P(Xg,this,new AbortController),null===(h=this._eventBus)||void 0===h||h._on("presentationmodechanged",(function(t){B(Kg,c,Qg).call(c,t.state)}),{signal:M(Xg,this).signal}));case 26:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"cancel",value:function(){var t;this._cancelled=!0,null===(t=M(Xg,this))||void 0===t||t.abort(),P(Xg,this,null)}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}},{key:"hasEditableAnnotations",value:function(){var t;return!(null===(t=this.annotationLayer)||void 0===t||!t.hasEditableAnnotations())}}]);var t}();function Qg(t){if(this.div){var e=!1;switch(t){case up.FULLSCREEN:e=!0;break;case up.NORMAL:break;default:return}var n,i=R(this.div.childNodes);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.hasAttribute("data-internal-link")||(a.inert=e)}}catch(t){i.e(t)}finally{i.f()}}}function $g(t,e){var n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=t,n.target="_parent","download"in n&&(n.download=e),(document.body||document.documentElement).append(n),n.click(),n.remove()}var Jg=new WeakMap,Zg=function(){return W((function t(){z(this,t),x(this,Jg,new WeakMap)}),[{key:"downloadData",value:function(t,e,n){$g(URL.createObjectURL(new Blob([t],{type:n})),e)}},{key:"openOrDownloadData",value:function(t,e){var n=Rg(e)?"application/pdf":"";return this.downloadData(t,e,n),!1}},{key:"download",value:function(t,e,n,i){var a;if(t)a=URL.createObjectURL(new Blob([t],{type:"application/pdf"}));else{if(!Bg(e,"http://example.com"))return void console.error("download - not a valid URL: ".concat(e));a=e+"#pdfjs.action=download"}$g(a,n)}}])}(),tm={EVENT:"event",TIMEOUT:"timeout"};function em(){return em=_(C().mark((function t(e){var n,i,a,r,s,o,u,l,h,c;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=function(t){l.abort(),clearTimeout(c),u(t)},n=e.target,i=e.name,a=e.delay,r=void 0===a?0:a,"object"===K(n)&&i&&"string"==typeof i&&(Number.isInteger(r)&&r>=0)){t.next=4;break}throw new Error("waitOnEventOrTimeout - invalid parameters.");case 4:return s=Promise.withResolvers(),o=s.promise,u=s.resolve,l=new AbortController,n[n instanceof im?"_on":"addEventListener"](i,h.bind(null,tm.EVENT),{signal:l.signal}),c=setTimeout(h.bind(null,tm.TIMEOUT),r),t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)}))),em.apply(this,arguments)}var nm=new WeakMap,im=function(){return W((function t(){z(this,t),x(this,nm,Object.create(null))}),[{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(t,e,{external:!0,once:null==n?void 0:n.once,signal:null==n?void 0:n.signal})}},{key:"off",value:function(t,e){this._off(t,e)}},{key:"dispatch",value:function(t,e){var n=M(nm,this)[t];if(n&&0!==n.length){var i,a,r=R(n.slice(0));try{for(r.s();!(a=r.n()).done;){var s=a.value,o=s.listener,u=s.external;s.once&&this._off(t,o),u?(i||(i=[])).push(o):o(e)}}catch(t){r.e(t)}finally{r.f()}if(i){var l,h=R(i);try{for(h.s();!(l=h.n()).done;){(0,l.value)(e)}}catch(t){h.e(t)}finally{h.f()}i=null}}}},{key:"_on",value:function(t,e){var n,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if((null==a?void 0:a.signal)instanceof AbortSignal){var s=a.signal;if(s.aborted)return void console.error("Cannot use an `aborted` signal.");var o=function(){return i._off(t,e)};r=function(){return s.removeEventListener("abort",o)},s.addEventListener("abort",o)}((n=M(nm,this))[t]||(n[t]=[])).push({listener:e,external:!0===(null==a?void 0:a.external),once:!0===(null==a?void 0:a.once),rmAbort:r})}},{key:"_off",value:function(t,e){var n=M(nm,this)[t];if(n)for(var i=0,a=n.length;i<a;i++){var r,s=n[i];if(s.listener===e)return null===(r=s.rmAbort)||void 0===r||r.call(s),void n.splice(i,1)}}}])}(),am=function(){return W((function t(e){z(this,t),this.value=e}),[{key:"valueOf",value:function(){return this.value}}])}(),rm=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"???";return z(this,e),V(this,e,[t])}return q(e,am),W(e,[{key:"toString",value:function(t){return"{".concat(this.value,"}")}}])}(),sm=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z(this,e),(n=V(this,e,[t])).opts=i,n}return q(e,am),W(e,[{key:"toString",value:function(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}}])}(),om=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z(this,e),(n=V(this,e,[t])).opts=i,n}return q(e,am),W(e,[{key:"toString",value:function(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}}])}(),um=100,lm="⁨",hm="⁩";function cm(t,e,n){if(n===e)return!0;if(n instanceof sm&&e instanceof sm&&n.value===e.value)return!0;if(e instanceof sm&&"string"==typeof n&&n===t.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value))return!0;return!1}function dm(t,e,n){return e[n]?gm(t,e[n].value):(t.reportError(new RangeError("No default")),new rm)}function fm(t,e){var n,i=[],a=Object.create(null),r=R(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;"narg"===s.type?a[s.name]=vm(t,s.value):i.push(vm(t,s))}}catch(t){r.e(t)}finally{r.f()}return{positional:i,named:a}}function vm(t,e){switch(e.type){case"str":return e.value;case"num":return new sm(e.value,{minimumFractionDigits:e.precision});case"var":return function(t,e){var n,i=e.name;if(t.params){if(!Object.prototype.hasOwnProperty.call(t.params,i))return new rm("$".concat(i));n=t.params[i]}else{if(!t.args||!Object.prototype.hasOwnProperty.call(t.args,i))return t.reportError(new ReferenceError("Unknown variable: $".concat(i))),new rm("$".concat(i));n=t.args[i]}if(n instanceof am)return n;switch(K(n)){case"string":return n;case"number":return new sm(n);case"object":if(n instanceof Date)return new om(n.getTime());default:return t.reportError(new TypeError("Variable type not supported: $".concat(i,", ").concat(K(n)))),new rm("$".concat(i))}}(t,e);case"mesg":return function(t,e){var n=e.name,i=e.attr,a=t.bundle._messages.get(n);if(!a)return t.reportError(new ReferenceError("Unknown message: ".concat(n))),new rm(n);if(i){var r=a.attributes[i];return r?gm(t,r):(t.reportError(new ReferenceError("Unknown attribute: ".concat(i))),new rm("".concat(n,".").concat(i)))}if(a.value)return gm(t,a.value);return t.reportError(new ReferenceError("No value: ".concat(n))),new rm(n)}(t,e);case"term":return function(t,e){var n=e.name,i=e.attr,a=e.args,r="-".concat(n),s=t.bundle._terms.get(r);if(!s)return t.reportError(new ReferenceError("Unknown term: ".concat(r))),new rm(r);if(i){var o=s.attributes[i];if(o){t.params=fm(t,a).named;var u=gm(t,o);return t.params=null,u}return t.reportError(new ReferenceError("Unknown attribute: ".concat(i))),new rm("".concat(r,".").concat(i))}t.params=fm(t,a).named;var l=gm(t,s.value);return t.params=null,l}(t,e);case"func":return function(t,e){var n=e.name,i=e.args,a=t.bundle._functions[n];if(!a)return t.reportError(new ReferenceError("Unknown function: ".concat(n,"()"))),new rm("".concat(n,"()"));if("function"!=typeof a)return t.reportError(new TypeError("Function ".concat(n,"() is not callable"))),new rm("".concat(n,"()"));try{var r=fm(t,i);return a(r.positional,r.named)}catch(e){return t.reportError(e),new rm("".concat(n,"()"))}}(t,e);case"select":return function(t,e){var n=e.selector,i=e.variants,a=e.star,r=vm(t,n);if(r instanceof rm)return dm(t,i,a);var s,o=R(i);try{for(o.s();!(s=o.n()).done;){var u=s.value;if(cm(t,r,vm(t,u.key)))return gm(t,u.value)}}catch(t){o.e(t)}finally{o.f()}return dm(t,i,a)}(t,e);default:return new rm}}function pm(t,e){if(t.dirty.has(e))return t.reportError(new RangeError("Cyclic reference")),new rm;t.dirty.add(e);var n,i=[],a=t.bundle._useIsolating&&e.length>1,r=R(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;if("string"!=typeof s){if(t.placeables++,t.placeables>um)throw t.dirty.delete(e),new RangeError("Too many placeables expanded: ".concat(t.placeables,", ")+"max allowed is ".concat(um));a&&i.push(lm),i.push(vm(t,s).toString(t)),a&&i.push(hm)}else i.push(t.bundle._transform(s))}}catch(t){r.e(t)}finally{r.f()}return t.dirty.delete(e),i.join("")}function gm(t,e){return"string"==typeof e?t.bundle._transform(e):pm(t,e)}var mm=function(){return W((function t(e,n,i){z(this,t),this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=n,this.args=i}),[{key:"reportError",value:function(t){if(!(this.errors&&t instanceof Error))throw t;this.errors.push(t)}},{key:"memoizeIntlObject",value:function(t,e){var n=this.bundle._intls.get(t);n||(n={},this.bundle._intls.set(t,n));var i=JSON.stringify(e);return n[i]||(n[i]=new t(this.bundle.locales,e)),n[i]}}])}();function Dm(t,e){for(var n=Object.create(null),i=0,a=Object.entries(t);i<a.length;i++){var r=L(a[i],2),s=r[0],o=r[1];e.includes(s)&&(n[s]=o.valueOf())}return n}var ym=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Am(t,e){var n=t[0];if(n instanceof rm)return new rm("NUMBER(".concat(n.valueOf(),")"));if(n instanceof sm)return new sm(n.valueOf(),g(g({},n.opts),Dm(e,ym)));if(n instanceof om)return new sm(n.valueOf(),g({},Dm(e,ym)));throw new TypeError("Invalid argument to NUMBER")}var bm=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function km(t,e){var n=t[0];if(n instanceof rm)return new rm("DATETIME(".concat(n.valueOf(),")"));if(n instanceof om)return new om(n.valueOf(),g(g({},n.opts),Dm(e,bm)));if(n instanceof sm)return new om(n.valueOf(),g({},Dm(e,bm)));throw new TypeError("Invalid argument to DATETIME")}var Em=new Map;var wm=function(){return W((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.functions,a=n.useIsolating,r=void 0===a||a,s=n.transform,o=void 0===s?function(t){return t}:s;z(this,t),this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions=g({NUMBER:Am,DATETIME:km},i),this._useIsolating=r,this._transform=o,this._intls=function(t){var e=Array.isArray(t)?t.join(" "):t,n=Em.get(e);return void 0===n&&(n=new Map,Em.set(e,n)),n}(e)}),[{key:"hasMessage",value:function(t){return this._messages.has(t)}},{key:"getMessage",value:function(t){return this._messages.get(t)}},{key:"addResource",value:function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowOverrides,n=void 0!==e&&e,i=[],a=0;a<t.body.length;a++){var r=t.body[a];if(r.id.startsWith("-")){if(!1===n&&this._terms.has(r.id)){i.push(new Error('Attempt to override an existing term: "'.concat(r.id,'"')));continue}this._terms.set(r.id,r)}else{if(!1===n&&this._messages.has(r.id)){i.push(new Error('Attempt to override an existing message: "'.concat(r.id,'"')));continue}this._messages.set(r.id,r)}}return i}},{key:"formatPattern",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof t)return this._transform(t);var i=new mm(this,n,e);try{return pm(i,t).toString(i)}catch(t){if(i.errors&&t instanceof Error)return i.errors.push(t),(new rm).toString(i);throw t}}}])}(),Cm=/^(-?[a-zA-Z][\w-]*) *= */gm,Fm=new RegExp("\\.([a-zA-Z][\\w-]*) *= *","y"),_m=new RegExp("\\*?\\[","y"),xm=new RegExp("(-?[0-9]+(?:\\.([0-9]+))?)","y"),Sm=new RegExp("([a-zA-Z][\\w-]*)","y"),Mm=new RegExp("([$-])?([a-zA-Z][\\w-]*)(?:\\.([a-zA-Z][\\w-]*))?","y"),Pm=/^[A-Z][A-Z0-9_-]*$/,Bm=new RegExp("([^{}\\n\\r]+)","y"),Lm=new RegExp('([^\\\\"\\n\\r]*)',"y"),Tm=new RegExp('\\\\([\\\\"])',"y"),Im=new RegExp("\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{6})","y"),Rm=/^\n+/,Nm=/ +$/,Om=/ *\r?\n/g,jm=/( *)$/,Wm=new RegExp("{\\s*","y"),Hm=new RegExp("\\s*}","y"),zm=new RegExp("\\[\\s*","y"),Vm=new RegExp("\\s*] *","y"),Um=new RegExp("\\s*\\(\\s*","y"),Gm=new RegExp("\\s*->\\s*","y"),qm=new RegExp("\\s*:\\s*","y"),Xm=new RegExp("\\s*,?\\s*","y"),Km=new RegExp("\\s+","y"),Ym=W((function t(e){z(this,t),this.body=[],Cm.lastIndex=0;for(var n=0;;){var i=Cm.exec(e);if(null===i)break;n=Cm.lastIndex;try{this.body.push(l(i[1]))}catch(t){if(t instanceof SyntaxError)continue;throw t}}function a(t){return t.lastIndex=n,t.test(e)}function r(t,i){if(e[n]===t)return n++,!0;if(i)throw new i("Expected ".concat(t));return!1}function s(t,e){if(a(t))return n=t.lastIndex,!0;if(e)throw new e("Expected ".concat(t.toString()));return!1}function o(t){t.lastIndex=n;var i=t.exec(e);if(null===i)throw new SyntaxError("Expected ".concat(t.toString()));return n=t.lastIndex,i}function u(t){return o(t)[1]}function l(t){var e=h(),n=function(){var t=Object.create(null);for(;a(Fm);){var e=u(Fm),n=h();if(null===n)throw new SyntaxError("Expected attribute value");t[e]=n}return t}();if(null===e&&0===Object.keys(n).length)throw new SyntaxError("Expected message value or attributes");return{id:t,value:e,attributes:n}}function h(){var t;if(a(Bm)&&(t=u(Bm)),"{"===e[n]||"}"===e[n])return c(t?[t]:[],1/0);var i=A();return i?t?c([t,i],i.length):(i.value=b(i.value,Rm),c([i],i.length)):t?b(t,Nm):null}function c(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;;)if(a(Bm))t.push(u(Bm));else if("{"!==e[n]){if("}"===e[n])throw new SyntaxError("Unbalanced closing brace");var r=A();if(!r)break;t.push(r),i=Math.min(i,r.length)}else t.push(d());var s=t.length-1,o=t[s];"string"==typeof o&&(t[s]=b(o,Nm));var l,h=[],c=R(t);try{for(c.s();!(l=c.n()).done;){var f=l.value;f instanceof Qm&&(f=f.value.slice(0,f.value.length-i)),f&&h.push(f)}}catch(t){c.e(t)}finally{c.f()}return h}function d(){s(Wm,SyntaxError);var t=f();if(s(Hm))return t;if(s(Gm)){var e=function(){var t,e=[],n=0;for(;a(_m);){r("*")&&(t=n);var i=p(),s=h();if(null===s)throw new SyntaxError("Expected variant value");e[n++]={key:i,value:s}}if(0===n)return null;if(void 0===t)throw new SyntaxError("Expected default variant");return{variants:e,star:t}}();return s(Hm,SyntaxError),g({type:"select",selector:t},e)}throw new SyntaxError("Unclosed placeable")}function f(){if("{"===e[n])return d();if(a(Mm)){var t=L(o(Mm),4),i=t[1],r=t[2],u=t[3],l=void 0===u?null:u;if("$"===i)return{type:"var",name:r};if(s(Um)){var h=function(){var t=[];for(;;){switch(e[n]){case")":return n++,t;case void 0:throw new SyntaxError("Unclosed argument list")}t.push(v()),s(Xm)}}();if("-"===i)return{type:"term",name:r,attr:l,args:h};if(Pm.test(r))return{type:"func",name:r,args:h};throw new SyntaxError("Function names must be all upper-case")}return"-"===i?{type:"term",name:r,attr:l,args:[]}:{type:"mesg",name:r,attr:l}}return m()}function v(){var t=f();return"mesg"!==t.type?t:s(qm)?{type:"narg",name:t.name,value:m()}:t}function p(){var t;return s(zm,SyntaxError),t=a(xm)?D():{type:"str",value:u(Sm)},s(Vm,SyntaxError),t}function m(){if(a(xm))return D();if('"'===e[n])return function(){r('"',SyntaxError);var t="";for(;;){if(t+=u(Lm),"\\"!==e[n]){if(r('"'))return{type:"str",value:t};throw new SyntaxError("Unclosed string literal")}t+=y()}}();throw new SyntaxError("Invalid expression")}function D(){var t=L(o(xm),3),e=t[1],n=t[2],i=(void 0===n?"":n).length;return{type:"num",value:parseFloat(e),precision:i}}function y(){if(a(Tm))return u(Tm);if(a(Im)){var t=L(o(Im),3),e=t[1],n=t[2],i=parseInt(e||n,16);return i<=55295||57344<=i?String.fromCodePoint(i):"�"}throw new SyntaxError("Unknown escape sequence")}function A(){var t=n;switch(s(Km),e[n]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return k(e.slice(t,n))}return" "===e[n-1]&&k(e.slice(t,n))}function b(t,e){return t.replace(e,"")}function k(t){var e=t.replace(Om,"\n"),n=jm.exec(t)[1].length;return new Qm(e,n)}})),Qm=W((function t(e,n){z(this,t),this.value=e,this.length=n})),$m=/<|&#?\w+;/,Jm={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},Zm={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function tD(t,e){var n=e.value;if("string"==typeof n)if("title"===t.localName&&"http://www.w3.org/1999/xhtml"===t.namespaceURI)t.textContent=n;else if($m.test(n)){var i=t.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=n,function(t,e){var n,i=R(t.childNodes);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.nodeType!==a.TEXT_NODE)if(a.hasAttribute("data-l10n-name")){var r=iD(e,a);t.replaceChild(r,a)}else if(sD(a)){var s=aD(a);t.replaceChild(s,a)}else console.warn('An element of forbidden type "'.concat(a.localName,'" was found in ')+"the translation. Only safe text-level elements and elements with data-l10n-name are allowed."),t.replaceChild(rD(a),a)}}catch(t){i.e(t)}finally{i.f()}e.textContent="",e.appendChild(t)}(i.content,t)}else t.textContent=n;nD(e,t)}function eD(t,e){if(!t)return!1;var n,i=R(t);try{for(i.s();!(n=i.n()).done;){if(n.value.name===e)return!0}}catch(t){i.e(t)}finally{i.f()}return!1}function nD(t,e){for(var n=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map((function(t){return t.trim()})):null,i=0,a=Array.from(e.attributes);i<a.length;i++){var r=a[i];oD(r.name,e,n)&&!eD(t.attributes,r.name)&&e.removeAttribute(r.name)}if(t.attributes)for(var s=0,o=Array.from(t.attributes);s<o.length;s++){var u=o[s];oD(u.name,e,n)&&e.getAttribute(u.name)!==u.value&&e.setAttribute(u.name,u.value)}}function iD(t,e){var n=e.getAttribute("data-l10n-name"),i=t.querySelector('[data-l10n-name="'.concat(n,'"]'));return i?i.localName!==e.localName?(console.warn('An element named "'.concat(n,'" was found in the translation ')+"but its type ".concat(e.localName," didn't match the ")+"element found in the source (".concat(i.localName,").")),rD(e)):(t.removeChild(i),uD(e,i.cloneNode(!1))):(console.warn('An element named "'.concat(n,"\" wasn't found in the source.")),rD(e))}function aD(t){var e=t.ownerDocument.createElement(t.localName);return uD(t,e)}function rD(t){return t.ownerDocument.createTextNode(t.textContent)}function sD(t){var e=Jm[t.namespaceURI];return e&&e.includes(t.localName)}function oD(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&n.includes(t))return!0;var i=Zm[e.namespaceURI];if(!i)return!1;var a=t.toLowerCase(),r=e.localName;if(i.global.includes(a))return!0;if(!i[r])return!1;if(i[r].includes(a))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===r&&"value"===a){var s=e.type.toLowerCase();if("submit"===s||"button"===s||"reset"===s)return!0}return!1}function uD(t,e){return e.textContent=t.textContent,nD(t,e),e}var lD=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,v(Array)),W(e,null,[{key:"from",value:function(t){return t instanceof this?t:new this(t)}}])}(),hD=function(t){function e(t){var n;if(z(this,e),n=V(this,e),Symbol.asyncIterator in Object(t))n.iterator=t[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(t)))throw new TypeError("Argument must implement the iteration protocol.");n.iterator=t[Symbol.iterator]()}return n}return q(e,lD),W(e,[{key:Symbol.asyncIterator,value:function(){var t=this,e=0;return{next:function(){return _(C().mark((function n(){return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.length<=e&&t.push(t.iterator.next()),n.abrupt("return",t[e++]);case 2:case"end":return n.stop()}}),n)})))()}}}},{key:"touchNext",value:(n=_(C().mark((function t(){var e,n,i,a=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:1,n=0;case 2:if(!(n++<e)){t.next=14;break}if(i=this[this.length-1],t.t0=i,!t.t0){t.next=9;break}return t.next=8,i;case 8:t.t0=t.sent.done;case 9:if(!t.t0){t.next=11;break}return t.abrupt("break",14);case 11:this.push(this.iterator.next()),t.next=2;break;case 14:return t.abrupt("return",this[this.length-1]);case 15:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]);var n}(),cD=function(){return W((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;z(this,t),this.resourceIds=e,this.generateBundles=n,this.onChange(!0)}),[{key:"addResourceIds",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e=this.resourceIds).push.apply(e,A(t)),this.onChange(n),this.resourceIds.length}},{key:"removeResourceIds",value:function(t){return this.resourceIds=this.resourceIds.filter((function(e){return!t.includes(e)})),this.onChange(),this.resourceIds.length}},{key:"formatWithFallback",value:(e=_(C().mark((function t(e,n){var i,a,r,s,o,u,l,h,c,d,f;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],a=!1,r=!1,s=!1,t.prev=4,u=Z(this.bundles);case 6:return t.next=8,u.next();case 8:if(!(r=!(l=t.sent).done)){t.next=18;break}if(h=l.value,a=!0,0!==(c=vD(n,h,e,i)).size){t.next=14;break}return t.abrupt("break",18);case 14:"undefined"!=typeof console&&(d=h.locales[0],f=Array.from(c).join(", "),console.warn("[fluent] Missing translations in ".concat(d,": ").concat(f)));case 15:r=!1,t.next=6;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),s=!0,o=t.t0;case 24:if(t.prev=24,t.prev=25,!r||null==u.return){t.next=29;break}return t.next=29,u.return();case 29:if(t.prev=29,!s){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(24);case 34:return a||"undefined"==typeof console||console.warn("[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ".concat(JSON.stringify(e),".\n  resourceIds: ").concat(JSON.stringify(this.resourceIds),".")),t.abrupt("return",i);case 36:case"end":return t.stop()}}),t,this,[[4,20,24,34],[25,,29,33]])}))),function(t,n){return e.apply(this,arguments)})},{key:"formatMessages",value:function(t){return this.formatWithFallback(t,fD)}},{key:"formatValues",value:function(t){return this.formatWithFallback(t,dD)}},{key:"formatValue",value:(t=_(C().mark((function t(e,n){var i,a,r;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.formatValues([{id:e,args:n}]);case 2:return i=t.sent,a=L(i,1),r=a[0],t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"handleEvent",value:function(){this.onChange()}},{key:"onChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.bundles=hD.from(this.generateBundles(this.resourceIds)),t&&this.bundles.touchNext(2)}}]);var t,e}();function dD(t,e,n,i){return n.value?t.formatPattern(n.value,i,e):null}function fD(t,e,n,i){var a={value:null,attributes:null};n.value&&(a.value=t.formatPattern(n.value,i,e));var r=Object.keys(n.attributes);if(r.length>0){a.attributes=new Array(r.length);var s,o=R(r.entries());try{for(o.s();!(s=o.n()).done;){var u=L(s.value,2),l=u[0],h=u[1],c=t.formatPattern(n.attributes[h],i,e);a.attributes[l]={name:h,value:c}}}catch(t){o.e(t)}finally{o.f()}}return a}function vD(t,e,n,i){var a=[],r=new Set;return n.forEach((function(n,s){var o=n.id,u=n.args;if(void 0===i[s]){var l=e.getMessage(o);if(l){if(a.length=0,i[s]=t(e,a,l,u),a.length>0&&"undefined"!=typeof console){var h=e.locales[0],c=a.join(", ");console.warn("[fluent][resolver] errors in ".concat(h,"/").concat(o,": ").concat(c,"."))}}else r.add(o)}})),r}var pD="data-l10n-id",gD="data-l10n-args",mD="[".concat(pD,"]"),DD=function(t){function e(t,n){var i;return z(this,e),(i=V(this,e,[t,n])).roots=new Set,i.pendingrAF=null,i.pendingElements=new Set,i.windowElement=null,i.mutationObserver=null,i.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[pD,gD]},i}return q(e,cD),W(e,[{key:"onChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];D(e,"onChange",this,3)([t]),this.roots&&this.translateRoots()}},{key:"setAttributes",value:function(t,e,n){return t.setAttribute(pD,e),n?t.setAttribute(gD,JSON.stringify(n)):t.removeAttribute(gD),t}},{key:"getAttributes",value:function(t){return{id:t.getAttribute(pD),args:JSON.parse(t.getAttribute(gD)||null)}}},{key:"connectRoot",value:function(t){var e,n=this,i=R(this.roots);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(a===t||a.contains(t)||t.contains(a))throw new Error("Cannot add a root that overlaps with existing root.")}}catch(t){i.e(t)}finally{i.f()}if(this.windowElement){if(this.windowElement!==t.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=t.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver((function(t){return n.translateMutations(t)}));this.roots.add(t),this.mutationObserver.observe(t,this.observerConfig)}},{key:"disconnectRoot",value:function(t){return this.roots.delete(t),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}},{key:"translateRoots",value:function(){var t=this,e=Array.from(this.roots);return Promise.all(e.map((function(e){return t.translateFragment(e)})))}},{key:"pauseObserving",value:function(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}},{key:"resumeObserving",value:function(){if(this.mutationObserver){var t,e=R(this.roots);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.mutationObserver.observe(n,this.observerConfig)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"translateMutations",value:function(t){var e,n=this,i=R(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;switch(a.type){case"attributes":a.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(a.target);break;case"childList":var r,s=R(a.addedNodes);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.nodeType===o.ELEMENT_NODE)if(o.childElementCount){var u,l=R(this.getTranslatables(o));try{for(l.s();!(u=l.n()).done;){var h=u.value;this.pendingElements.add(h)}}catch(t){l.e(t)}finally{l.f()}}else o.hasAttribute(pD)&&this.pendingElements.add(o)}}catch(t){s.e(t)}finally{s.f()}}}}catch(t){i.e(t)}finally{i.f()}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame((function(){n.translateElements(Array.from(n.pendingElements)),n.pendingElements.clear(),n.pendingrAF=null})))}},{key:"translateFragment",value:function(t){return this.translateElements(this.getTranslatables(t))}},{key:"translateElements",value:(n=_(C().mark((function t(e){var n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return",void 0);case 2:return n=e.map(this.getKeysForElement),t.next=5,this.formatMessages(n);case 5:return i=t.sent,t.abrupt("return",this.applyTranslations(e,i));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"applyTranslations",value:function(t,e){this.pauseObserving();for(var n=0;n<t.length;n++)void 0!==e[n]&&tD(t[n],e[n]);this.resumeObserving()}},{key:"getTranslatables",value:function(t){var e=Array.from(t.querySelectorAll(mD));return"function"==typeof t.hasAttribute&&t.hasAttribute(pD)&&e.push(t),e}},{key:"getKeysForElement",value:function(t){return{id:t.getAttribute(pD),args:JSON.parse(t.getAttribute(gD)||null)}}}]);var n}(),yD=new WeakMap,AD=new WeakMap,bD=new WeakMap,kD=new WeakMap,ED=function(){return W((function t(e){var n=e.lang,i=e.isRTL,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;z(this,t),x(this,yD,void 0),x(this,AD,new Set),x(this,bD,void 0),x(this,kD,void 0),P(bD,this,wD.call(t,n)),P(kD,this,a),P(yD,this,(null!=i?i:CD.call(t,M(bD,this)))?"rtl":"ltr")}),[{key:"_setL10n",value:function(t){P(kD,this,t)}},{key:"getLanguage",value:function(){return M(bD,this)}},{key:"getDirection",value:function(){return M(yD,this)}},{key:"get",value:(n=_(C().mark((function t(e){var n,i,a,r,s=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:null,i=s.length>2?s[2]:void 0,!Array.isArray(e)){t.next=8;break}return e=e.map((function(t){return{id:t}})),t.next=6,M(kD,this).formatMessages(e);case 6:return a=t.sent,t.abrupt("return",a.map((function(t){return t.value})));case 8:return t.next=10,M(kD,this).formatMessages([{id:e,args:n}]);case 10:return r=t.sent,t.abrupt("return",(null==r?void 0:r[0].value)||i);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"translate",value:(e=_(C().mark((function t(e){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M(AD,this).add(e),t.prev=1,M(kD,this).connectRoot(e),t.next=5,M(kD,this).translateRoots();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(t){return e.apply(this,arguments)})},{key:"destroy",value:(t=_(C().mark((function t(){var e,n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=R(M(AD,this));try{for(e.s();!(n=e.n()).done;)i=n.value,M(kD,this).disconnectRoot(i)}catch(t){e.e(t)}finally{e.f()}M(AD,this).clear(),M(kD,this).pauseObserving();case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"pause",value:function(){M(kD,this).pauseObserving()}},{key:"resume",value:function(){M(kD,this).resumeObserving()}}]);var t,e,n}();function wD(t){var e;return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[t=(null===(e=t)||void 0===e?void 0:e.toLowerCase())||"en-us"]||t}function CD(t){var e=t.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(e)}function FD(t,e){var n=new Ym(e),i=new wm(t),a=i.addResource(n);return a.length&&console.error("L10n errors",a),i}var _D=function(t){function e(t){var n;z(this,e),n=V(this,e,[{lang:t}]);var i=t?xD.bind(e,"en-us",n.getLanguage()):LD.bind(e,n.getLanguage());return n._setL10n(new DD([],i)),n}return q(e,ED),W(e)}();function xD(t,e){var n=this;return Q(C().mark((function i(){var a,r,s,o,u,l,h,c,f;return C().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Y(B(d,n,PD).call(n));case 2:a=i.sent,r=a.baseURL,s=a.paths,o=[e],t!==e&&((u=e.split("-",1)[0])!==e&&o.push(u),o.push(t)),l=0,h=o;case 8:if(!(l<h.length)){i.next=24;break}return c=h[l],i.next=12,Y(B(d,n,SD).call(n,c,r,s));case 12:if(!(f=i.sent)){i.next=18;break}return i.next=16,f;case 16:i.next=21;break;case 18:if("en-us"!==c){i.next=21;break}return i.next=21,B(d,n,TD).call(n,c);case 21:l++,i.next=8;break;case 24:case"end":return i.stop()}}),i)})))()}function SD(t,e,n){return MD.apply(this,arguments)}function MD(){return(MD=_(C().mark((function t(e,n,i){var a,r,s;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i[e]){t.next=3;break}return t.abrupt("return",null);case 3:return r=new URL(a,n),t.next=6,Tg(r,"text");case 6:return s=t.sent,t.abrupt("return",FD(e,s));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function PD(){return BD.apply(this,arguments)}function BD(){return(BD=_(C().mark((function t(){var e,n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=document.querySelector('link[type="application/l10n"]'),n=e.href,t.next=4,Tg(n,"json");case 4:return i=t.sent,t.abrupt("return",{baseURL:n.replace(/[^/]*$/,"")||"./",paths:i});case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",{baseURL:"./",paths:Object.create(null)});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function LD(t){var e=this;return Q(C().mark((function n(){return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B(d,e,TD).call(e,t);case 2:case"end":return n.stop()}}),n)})))()}function TD(t){return ID.apply(this,arguments)}function ID(){return(ID=_(C().mark((function t(e){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties…\npdfjs-document-properties-button-label = Document Properties…\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-kb = { $size_kb } KB ({ $size_b } bytes)\npdfjs-document-properties-mb = { $size_mb } MB ({ $size_b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-string = { $date }, { $time }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing…\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document…\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-string = { $date }, { $time }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text =\n    .aria-label = Text Editor\npdfjs-free-text-default-content = Start typing…\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, “A young man sits down at a table to eat a meal”\npdfjs-editor-resizer-label-top-left = Top left corner — resize\npdfjs-editor-resizer-label-top-middle = Top middle — resize\npdfjs-editor-resizer-label-top-right = Top right corner — resize\npdfjs-editor-resizer-label-middle-right = Middle right — resize\npdfjs-editor-resizer-label-bottom-right = Bottom right corner — resize\npdfjs-editor-resizer-label-bottom-middle = Bottom middle — resize\npdfjs-editor-resizer-label-bottom-left = Bottom left corner — resize\npdfjs-editor-resizer-label-middle-left = Middle left — resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all",t.abrupt("return",FD(e,"pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties…\npdfjs-document-properties-button-label = Document Properties…\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-kb = { $size_kb } KB ({ $size_b } bytes)\npdfjs-document-properties-mb = { $size_mb } MB ({ $size_b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-string = { $date }, { $time }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } × { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } × { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing…\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document…\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-string = { $date }, { $time }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text =\n    .aria-label = Text Editor\npdfjs-free-text-default-content = Start typing…\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can’t see the image or when it doesn’t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, “A young man sits down at a table to eat a meal”\npdfjs-editor-resizer-label-top-left = Top left corner — resize\npdfjs-editor-resizer-label-top-middle = Top middle — resize\npdfjs-editor-resizer-label-top-right = Top right corner — resize\npdfjs-editor-resizer-label-middle-right = Middle right — resize\npdfjs-editor-resizer-label-bottom-right = Bottom right corner — resize\npdfjs-editor-resizer-label-bottom-middle = Bottom middle — resize\npdfjs-editor-resizer-label-bottom-left = Bottom left corner — resize\npdfjs-editor-resizer-label-middle-left = Middle left — resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all"));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}d=_D;var RD=1e3,ND=50,OD=1e3;function jD(){return document.location.hash}var WD=new WeakMap,HD=new WeakSet,zD=function(){return W((function t(e){var n=this,i=e.linkService,a=e.eventBus;z(this,t),k(this,HD),x(this,WD,null),this.linkService=i,this.eventBus=a,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",(function(){n._isPagesLoaded=!1,n.eventBus._on("pagesloaded",(function(t){n._isPagesLoaded=!!t.pagesCount}),{once:!0})}))}),[{key:"initialize",value:function(t){var e=t.fingerprint,n=t.resetHistory,i=void 0!==n&&n,a=t.updateUrl,r=void 0!==a&&a;if(e&&"string"==typeof e){this._initialized&&this.reset();var s=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===r,this._initialized=!0,B(HD,this,JD).call(this);var o=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=jD(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!B(HD,this,qD).call(this,o,!0)||i){var u=B(HD,this,KD).call(this,!0),l=u.hash,h=u.page,c=u.rotation;return!l||s||i?void B(HD,this,VD).call(this,null,!0):void B(HD,this,VD).call(this,{hash:l,page:h,rotation:c},!0)}var d=o.destination;B(HD,this,XD).call(this,d,o.uid,!0),void 0!==d.rotation&&(this._initialRotation=d.rotation),d.dest?(this._initialBookmark=JSON.stringify(d.dest),this._destination.page=null):d.hash?this._initialBookmark=d.hash:d.page&&(this._initialBookmark="page=".concat(d.page))}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function(){this._initialized&&(B(HD,this,$D).call(this),this._initialized=!1,B(HD,this,ZD).call(this)),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}},{key:"push",value:function(t){var e=this,n=t.namedDest,i=void 0===n?null:n,a=t.explicitDest,r=t.pageNumber;if(this._initialized)if(i&&"string"!=typeof i)console.error("PDFHistory.push: "+'"'.concat(i,'" is not a valid namedDest parameter.'));else if(Array.isArray(a))if(B(HD,this,GD).call(this,r)||null===r&&!this._destination){var s=i||JSON.stringify(a);if(s){var o=!1;if(this._destination&&(function(t,e){if("string"!=typeof t||"string"!=typeof e)return!1;if(t===e)return!0;if(vp(t).get("nameddest")===e)return!0;return!1}(this._destination.hash,s)||function(t,e){function n(t,e){if(K(t)!==K(e))return!1;if(Array.isArray(t)||Array.isArray(e))return!1;if(null!==t&&"object"===K(t)&&null!==e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!n(t[i],e[i]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0,a=t.length;i<a;i++)if(!n(t[i],e[i]))return!1;return!0}(this._destination.dest,a))){if(this._destination.page)return;o=!0}this._popStateInProgress&&!o||(B(HD,this,VD).call(this,{dest:a,hash:s,page:r,rotation:this.linkService.rotation},o),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){e._popStateInProgress=!1}))))}}else console.error("PDFHistory.push: "+'"'.concat(r,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(a,'" is not a valid explicitDest parameter.'))}},{key:"pushPage",value:function(t){var e,n=this;this._initialized&&(B(HD,this,GD).call(this,t)?(null===(e=this._destination)||void 0===e?void 0:e.page)!==t&&(this._popStateInProgress||(B(HD,this,VD).call(this,{dest:null,hash:"page=".concat(t),page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((function(){n._popStateInProgress=!1}))))):console.error('PDFHistory.pushPage: "'.concat(t,'" is not a valid page number.')))}},{key:"pushCurrentPosition",value:function(){this._initialized&&!this._popStateInProgress&&B(HD,this,UD).call(this)}},{key:"back",value:function(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;B(HD,this,qD).call(this,t)&&t.uid>0&&window.history.back()}}},{key:"forward",value:function(){if(this._initialized&&!this._popStateInProgress){var t=window.history.state;B(HD,this,qD).call(this,t)&&t.uid<this._maxUid&&window.history.forward()}}},{key:"popStateInProgress",get:function(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function(){return this._initialized?this._initialRotation:null}}])}();function VD(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,i={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:t};if(B(HD,this,XD).call(this,t,i.uid),this._updateUrl&&null!=t&&t.hash){var a=document.location.href.split("#",1)[0];a.startsWith("file://")||(e="".concat(a,"#").concat(t.hash))}n?window.history.replaceState(i,"",e):window.history.pushState(i,"",e)}function UD(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var e=this._position;if(t&&((e=Object.assign(Object.create(null),this._position)).temporary=!0),this._destination){if(this._destination.temporary)B(HD,this,VD).call(this,e,!0);else if(this._destination.hash!==e.hash&&(this._destination.page||!(this._numPositionUpdates<=ND))){var n=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(void 0!==this._destination.dest||!this._destination.first)return;n=!0}B(HD,this,VD).call(this,e,n)}}else B(HD,this,VD).call(this,e)}}function GD(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}function qD(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!e)return!1;if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;var n=L(performance.getEntriesByType("navigation"),1)[0];if("reload"!==(null==n?void 0:n.type))return!1}return!(!Number.isInteger(t.uid)||t.uid<0)&&(null!==t.destination&&"object"===K(t.destination))}function XD(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&null!=t&&t.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._maxUid=Math.max(this._maxUid,e),this._numPositionUpdates=0}function KD(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=unescape(jD()).substring(1),n=vp(e),i=n.get("nameddest")||"",a=0|n.get("page");return(!B(HD,this,GD).call(this,a)||t&&i.length>0)&&(a=null),{hash:e,page:a,rotation:this.linkService.rotation}}function YD(t){var e=this,n=t.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:n.pdfOpenParams.substring(1),page:this.linkService.page,first:n.pageNumber,rotation:n.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((function(){e._popStateInProgress||B(HD,e,UD).call(e,!0),e._updateViewareaTimeout=null}),OD))}function QD(t){var e=this,n=t.state,i=jD(),a=this._currentHash!==i;if(this._currentHash=i,n){if(B(HD,this,qD).call(this,n)){this._popStateInProgress=!0,a&&(this._blockHashChange++,function(t){return em.apply(this,arguments)}({target:window,name:"hashchange",delay:RD}).then((function(){e._blockHashChange--})));var r=n.destination;B(HD,this,XD).call(this,r,n.uid,!0),Ap(r.rotation)&&(this.linkService.rotation=r.rotation),r.dest?this.linkService.goToDestination(r.dest):r.hash?this.linkService.setHash(r.hash):r.page&&(this.linkService.page=r.page),Promise.resolve().then((function(){e._popStateInProgress=!1}))}}else{this._uid++;var s=B(HD,this,KD).call(this),o=s.hash,u=s.page,l=s.rotation;B(HD,this,VD).call(this,{hash:o,page:u,rotation:l},!0)}}function $D(){this._destination&&!this._destination.temporary||B(HD,this,UD).call(this)}function JD(){if(!M(WD,this)){P(WD,this,new AbortController);var t=M(WD,this).signal;this.eventBus._on("updateviewarea",B(HD,this,YD).bind(this),{signal:t}),window.addEventListener("popstate",B(HD,this,QD).bind(this),{signal:t}),window.addEventListener("pagehide",B(HD,this,$D).bind(this),{signal:t})}}function ZD(){var t;null===(t=M(WD,this))||void 0===t||t.abort(),P(WD,this,null)}var ty=new WeakMap,ey=new WeakMap,ny=new WeakMap,iy=new WeakMap,ay=new WeakMap,ry=function(){return W((function t(e){z(this,t),x(this,ty,null),x(this,ey,null),x(this,ny,null),x(this,iy,null),x(this,ay,void 0),this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||(this.l10n=new _D),this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,P(ay,this,e.uiManager),P(ty,this,e.annotationLayer||null),P(iy,this,e.textLayer||null),P(ey,this,e.drawLayer||null),P(ny,this,e.onAppend||null)}),[{key:"render",value:(t=_(C().mark((function t(e){var n,i,a,r,s,o=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("display"===(i=o.length>1&&void 0!==o[1]?o[1]:"display")){t.next=3;break}return t.abrupt("return");case 3:if(!this._cancelled){t.next=5;break}return t.abrupt("return");case 5:if(a=e.clone({dontFlip:!0}),!this.div){t.next=10;break}return this.annotationEditorLayer.update({viewport:a}),this.show(),t.abrupt("return");case 10:(r=this.div=document.createElement("div")).className="annotationEditorLayer",r.hidden=!0,r.dir=M(ay,this).direction,null===(n=M(ny,this))||void 0===n||n.call(this,r),this.annotationEditorLayer=new _g({uiManager:M(ay,this),div:r,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:a,annotationLayer:M(ty,this),textLayer:M(iy,this),drawLayer:M(ey,this)}),s={viewport:a,div:r,annotations:null,intent:i},this.annotationEditorLayer.render(s),this.show();case 19:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}},{key:"show",value:function(){this.div&&!this.annotationEditorLayer.isInvisible&&(this.div.hidden=!1)}}]);var t}(),sy=new Map,oy=navigator.userAgent||"",uy=navigator.platform||"",ly=navigator.maxTouchPoints||1,hy=/Android/.test(oy);(/\b(iPad|iPhone|iPod)(?=;)/.test(oy)||"MacIntel"===uy&&ly>1||hy)&&sy.set("maxCanvasPixels",5242880),hy&&sy.set("useSystemFonts",!1);var cy=1,dy=2,fy=4,vy=8,py=16,gy=128,my={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Dy={allowedGlobalEvents:{value:null,kind:cy},canvasMaxAreaInBytes:{value:-1,kind:cy+fy},isInAutomation:{value:!1,kind:cy},localeProperties:{value:{lang:navigator.language||"en-US"},kind:cy},nimbusDataStr:{value:"",kind:cy},supportsCaretBrowsingMode:{value:!1,kind:cy},supportsDocumentFonts:{value:!0,kind:cy},supportsIntegratedFind:{value:!1,kind:cy},supportsMouseWheelZoomCtrlKey:{value:!0,kind:cy},supportsMouseWheelZoomMetaKey:{value:!0,kind:cy},supportsPinchToZoom:{value:!0,kind:cy},toolbarDensity:{value:0,kind:cy+py},altTextLearnMoreUrl:{value:"",kind:dy+gy},annotationEditorMode:{value:0,kind:dy+gy},annotationMode:{value:2,kind:dy+gy},cursorToolOnLoad:{value:0,kind:dy+gy},debuggerSrc:{value:"./debugger.mjs",kind:dy},defaultZoomDelay:{value:400,kind:dy+gy},defaultZoomValue:{value:"",kind:dy+gy},disableHistory:{value:!1,kind:dy},disablePageLabels:{value:!1,kind:dy+gy},enableAltText:{value:!1,kind:dy+gy},enableGuessAltText:{value:!0,kind:dy+gy},enableHighlightEditor:{value:!1,kind:dy+gy},enableHighlightFloatingButton:{value:!1,kind:dy+gy},enablePermissions:{value:!1,kind:dy+gy},enablePrintAutoRotate:{value:!0,kind:dy+gy},enableScripting:{value:!0,kind:dy+gy},enableUpdatedAddImage:{value:!1,kind:dy+gy},externalLinkRel:{value:"noopener noreferrer nofollow",kind:dy},externalLinkTarget:{value:0,kind:dy+gy},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:dy+gy},historyUpdateUrl:{value:!1,kind:dy+gy},ignoreDestinationZoom:{value:!1,kind:dy+gy},imageResourcesPath:{value:"./images/",kind:dy},maxCanvasPixels:{value:Math.pow(2,25),kind:dy},forcePageColors:{value:!1,kind:dy+gy},pageColorsBackground:{value:"Canvas",kind:dy+gy},pageColorsForeground:{value:"CanvasText",kind:dy+gy},pdfBugEnabled:{value:!1,kind:dy+gy},printResolution:{value:150,kind:dy},sidebarViewOnLoad:{value:-1,kind:dy+gy},scrollModeOnLoad:{value:-1,kind:dy+gy},spreadModeOnLoad:{value:-1,kind:dy+gy},textLayerMode:{value:1,kind:dy+gy},viewOnLoad:{value:0,kind:dy+gy},cMapPacked:{value:!0,kind:fy},cMapUrl:{value:"../web/cmaps/",kind:fy},disableAutoFetch:{value:!1,kind:fy+gy},disableFontFace:{value:!1,kind:fy+gy},disableRange:{value:!1,kind:fy+gy},disableStream:{value:!1,kind:fy+gy},docBaseUrl:{value:"",kind:fy},enableHWA:{value:!0,kind:fy+dy+gy},enableXfa:{value:!0,kind:fy+gy},fontExtraProperties:{value:!1,kind:fy},isEvalSupported:{value:!0,kind:fy},isOffscreenCanvasSupported:{value:!0,kind:fy},maxImageSize:{value:-1,kind:fy},pdfBug:{value:!1,kind:fy},standardFontDataUrl:{value:"../web/standard_fonts/",kind:fy},useSystemFonts:{value:void 0,kind:fy,type:my.BOOLEAN+my.UNDEFINED},verbosity:{value:1,kind:fy},workerPort:{value:null,kind:vy},workerSrc:{value:"../build/pdf.worker.mjs",kind:vy}};Dy.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:dy},Dy.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:dy},Dy.viewerCssTheme={value:0,kind:dy+gy},Dy.disablePreferences={value:!1,kind:dy};var yy,Ay=new Map,by=R(sy);try{for(by.s();!(yy=by.n()).done;){var ky=L(yy.value,2),Ey=ky[0],wy=ky[1];Ay.set(Ey,wy)}}catch(t){by.e(t)}finally{by.f()}var Cy=function(){return W((function t(){throw z(this,t),new Error("Cannot initialize AppOptions.")}),null,[{key:"get",value:function(t){var e;return Ay.has(t)?Ay.get(t):null===(e=Dy[t])||void 0===e?void 0:e.value}},{key:"getAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.create(null);for(var i in Dy){var a=Dy[i];(!t||t&a.kind)&&(n[i]=!e&&Ay.has(i)?Ay.get(i):a.value)}return n}},{key:"set",value:function(t,e){this.setAll(w({},t,e))}},{key:"setAll",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in t){var a=Dy[i],r=t[i];if(a&&(K(r)===K(a.value)||my[K(r).toUpperCase()]&a.type)){var s=a.kind;(!n||s&cy||s&gy)&&(this.eventBus&&s&py&&(e||(e=new Map)).set(i,r),Ay.set(i,r))}}if(e){var o,u=R(e);try{for(u.s();!(o=u.n()).done;){var l=L(o.value,2),h=l[0],c=l[1];this.eventBus.dispatch(h.toLowerCase(),{source:this,value:c})}}catch(t){u.e(t)}finally{u.f()}}}}])}();w(Cy,"eventBus",void 0),Cy._checkDisablePreferences=function(){if(Cy.get("disablePreferences"))return!0;var t,e=R(Ay);try{for(e.s();!(t=e.n()).done;){var n=L(t.value,1)[0];if(!sy.has(n)){console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.');break}}}catch(t){e.e(t)}finally{e.f()}return!1};var Fy=new WeakMap,_y=function(){return W((function t(e){z(this,t),x(this,Fy,null),this.pageIndex=e.pageIndex}),[{key:"render",value:(t=_(C().mark((function t(){var e=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("display"===(e.length>0&&void 0!==e[0]?e[0]:"display")&&!M(Fy,this)&&!this._cancelled){t.next=3;break}return t.abrupt("return");case 3:P(Fy,this,new Lg({pageIndex:this.pageIndex}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._cancelled=!0,M(Fy,this)&&(M(Fy,this).destroy(),P(Fy,this,null))}},{key:"setParent",value:function(t){var e;null===(e=M(Fy,this))||void 0===e||e.setParent(t)}},{key:"getDrawLayer",value:function(){return M(Fy,this)}}]);var t}(),xy={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Sy=/^H(\d+)$/,My=new WeakMap,Py=new WeakSet,By=function(){return W((function t(){z(this,t),k(this,Py),x(this,My,void 0)}),[{key:"renderingDone",get:function(){return void 0!==M(My,this)}},{key:"render",value:function(t){if(void 0!==M(My,this))return M(My,this);var e=B(Py,this,Ty).call(this,t);return null==e||e.classList.add("structTree"),P(My,this,e)}},{key:"hide",value:function(){M(My,this)&&!M(My,this).hidden&&(M(My,this).hidden=!0)}},{key:"show",value:function(){var t;null!==(t=M(My,this))&&void 0!==t&&t.hidden&&(M(My,this).hidden=!1)}}])}();function Ly(t,e){var n=t.alt,i=t.id,a=t.lang;void 0!==n&&e.setAttribute("aria-label",gp(n)),void 0!==i&&e.setAttribute("aria-owns",i),void 0!==a&&e.setAttribute("lang",gp(a,!0))}function Ty(t){if(!t)return null;var e=document.createElement("span");if("role"in t){var n=t.role,i=n.match(Sy);i?(e.setAttribute("role","heading"),e.setAttribute("aria-level",i[1])):xy[n]&&e.setAttribute("role",xy[n])}if(B(Py,this,Ly).call(this,t,e),t.children)if(1===t.children.length&&"id"in t.children[0])B(Py,this,Ly).call(this,t.children[0],e);else{var a,r=R(t.children);try{for(r.s();!(a=r.n()).done;){var s=a.value;e.append(B(Py,this,Ty).call(this,s))}}catch(t){r.e(t)}finally{r.f()}}return e}var Iy=new WeakMap,Ry=new WeakMap,Ny=new WeakMap,Oy=new WeakMap,jy=new WeakSet,Wy=function(){function t(){z(this,t),k(this,jy),x(this,Iy,!1),x(this,Ry,null),x(this,Ny,new Map),x(this,Oy,new Map)}return W(t,[{key:"setTextMapping",value:function(t){P(Ry,this,t)}},{key:"enable",value:function(){if(M(Iy,this))throw new Error("TextAccessibilityManager is already enabled.");if(!M(Ry,this))throw new Error("Text divs and strings have not been set.");if(P(Iy,this,!0),P(Ry,this,M(Ry,this).slice()),M(Ry,this).sort(Hy),M(Ny,this).size>0){var t,e=M(Ry,this),n=R(M(Ny,this));try{for(n.s();!(t=n.n()).done;){var i=L(t.value,2),a=i[0],r=i[1];document.getElementById(a)?B(jy,this,zy).call(this,a,e[r]):M(Ny,this).delete(a)}}catch(t){n.e(t)}finally{n.f()}}var s,o=R(M(Oy,this));try{for(o.s();!(s=o.n()).done;){var u=L(s.value,2),l=u[0],h=u[1];this.addPointerInTextLayer(l,h)}}catch(t){o.e(t)}finally{o.f()}M(Oy,this).clear()}},{key:"disable",value:function(){M(Iy,this)&&(M(Oy,this).clear(),P(Ry,this,null),P(Iy,this,!1))}},{key:"removePointerInTextLayer",value:function(t){var e;if(M(Iy,this)){var n=M(Ry,this);if(n&&0!==n.length){var i=t.id,a=M(Ny,this).get(i);if(void 0!==a){var r=n[a];M(Ny,this).delete(i);var s=r.getAttribute("aria-owns");null!==(e=s)&&void 0!==e&&e.includes(i)&&((s=s.split(" ").filter((function(t){return t!==i})).join(" "))?r.setAttribute("aria-owns",s):(r.removeAttribute("aria-owns"),r.setAttribute("role","presentation")))}}}else M(Oy,this).delete(t)}},{key:"addPointerInTextLayer",value:function(e,n){var i=e.id;if(!i)return null;if(!M(Iy,this))return M(Oy,this).set(e,n),null;n&&this.removePointerInTextLayer(e);var a=M(Ry,this);if(!a||0===a.length)return null;var r=mp(a,(function(n){return Hy.call(t,e,n)<0})),s=Math.max(0,r-1),o=a[s];B(jy,this,zy).call(this,i,o),M(Ny,this).set(i,s);var u=o.parentNode;return null!=u&&u.classList.contains("markedContent")?u.id:null}},{key:"moveElementInDOM",value:function(e,n,i,a){var r=this.addPointerInTextLayer(i,a);if(!e.hasChildNodes())return e.append(n),r;var s=Array.from(e.childNodes).filter((function(t){return t!==n}));if(0===s.length)return r;var o=i||n,u=mp(s,(function(e){return Hy.call(t,o,e)<0}));return 0===u?s[0].before(n):s[u-1].after(n),r}}])}();function Hy(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect();if(0===n.width&&0===n.height)return 1;if(0===i.width&&0===i.height)return-1;var a=n.y,r=n.y+n.height,s=n.y+n.height/2,o=i.y,u=i.y+i.height,l=i.y+i.height/2;return s<=o&&l>=r?-1:l<=a&&s>=u?1:n.x+n.width/2-(i.x+i.width/2)}function zy(t,e){var n=e.getAttribute("aria-owns");null!=n&&n.includes(t)||e.setAttribute("aria-owns",n?"".concat(n," ").concat(t):t),e.removeAttribute("role")}var Vy=new WeakMap,Uy=function(){return W((function t(e){var n=e.findController,i=e.eventBus,a=e.pageIndex;z(this,t),x(this,Vy,null),this.findController=n,this.matches=[],this.eventBus=i,this.pageIdx=a,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}),[{key:"setTextMapping",value:function(t,e){this.textDivs=t,this.textContentItemsStr=e}},{key:"enable",value:function(){var t=this;if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,M(Vy,this)||(P(Vy,this,new AbortController),this.eventBus._on("updatetextlayermatches",(function(e){e.pageIndex!==t.pageIdx&&-1!==e.pageIndex||t._updateMatches()}),{signal:M(Vy,this).signal})),this._updateMatches()}},{key:"disable",value:function(){var t;this.enabled&&(this.enabled=!1,null===(t=M(Vy,this))||void 0===t||t.abort(),P(Vy,this,null),this._updateMatches(!0))}},{key:"_convertMatches",value:function(t,e){if(!t)return[];for(var n=this.textContentItemsStr,i=0,a=0,r=n.length-1,s=[],o=0,u=t.length;o<u;o++){for(var l=t[o];i!==r&&l>=a+n[i].length;)a+=n[i].length,i++;i===n.length&&console.error("Could not find a matching mapping");var h={begin:{divIdx:i,offset:l-a}};for(l+=e[o];i!==r&&l>a+n[i].length;)a+=n[i].length,i++;h.end={divIdx:i,offset:l-a},s.push(h)}return s}},{key:"_renderMatches",value:function(t){if(0!==t.length){var e=this.findController,n=this.pageIdx,i=this.textContentItemsStr,a=this.textDivs,r=n===e.selected.pageIdx,s=e.selected.matchIdx,o=null,u={divIdx:-1,offset:void 0},l=s,h=l+1;if(e.state.highlightAll)l=0,h=t.length;else if(!r)return;for(var c=-1,d=-1,f=l;f<h;f++){var v=t[f],p=v.begin;if(p.divIdx!==c||p.offset!==d){c=p.divIdx,d=p.offset;var g=v.end,m=r&&f===s,D=m?" selected":"",y=0;if(o&&p.divIdx===o.divIdx?E(o.divIdx,o.offset,p.offset):(null!==o&&E(o.divIdx,o.offset,u.offset),k(p)),p.divIdx===g.divIdx)y=E(p.divIdx,p.offset,g.offset,"highlight"+D);else{y=E(p.divIdx,p.offset,u.offset,"highlight begin"+D);for(var A=p.divIdx+1,b=g.divIdx;A<b;A++)a[A].className="highlight middle"+D;k(g,"highlight end"+D)}o=g,m&&e.scrollMatchIntoView({element:a[p.divIdx],selectedLeft:y,pageIndex:n,matchIndex:s})}}o&&E(o.divIdx,o.offset,u.offset)}function k(t,e){var n=t.divIdx;return a[n].textContent="",E(n,0,t.offset,e)}function E(t,e,n,r){var s=a[t];if(s.nodeType===Node.TEXT_NODE){var o=document.createElement("span");s.before(o),o.append(s),a[t]=o,s=o}var u=i[t].substring(e,n),l=document.createTextNode(u);if(r){var h=document.createElement("span");return h.className="".concat(r," appended"),h.append(l),s.append(h),r.includes("selected")?h.offsetLeft:0}return s.append(l),0}}},{key:"_updateMatches",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.enabled||t){var e,n=this.findController,i=this.matches,a=this.pageIdx,r=this.textContentItemsStr,s=this.textDivs,o=-1,u=R(i);try{for(u.s();!(e=u.n()).done;){for(var l=e.value,h=Math.max(o,l.begin.divIdx),c=l.end.divIdx;h<=c;h++){var d=s[h];d.textContent=r[h],d.className=""}o=l.end.divIdx+1}}catch(t){u.e(t)}finally{u.f()}if(null!=n&&n.highlightMatches&&!t){var f=n.pageMatches[a]||null,v=n.pageMatchesLength[a]||null;this.matches=this._convertMatches(f,v),this._renderMatches(this.matches)}}}}])}(),Gy=new WeakMap,qy=new WeakMap,Xy=new WeakMap,Ky=new WeakMap,Yy=new WeakSet,Qy=function(){function t(e){var n=e.pdfPage,i=e.highlighter,a=void 0===i?null:i,r=e.accessibilityManager,s=void 0===r?null:r,o=e.enablePermissions,u=void 0!==o&&o,l=e.onAppend,h=void 0===l?null:l;z(this,t),k(this,Yy),x(this,Gy,!1),x(this,qy,null),x(this,Xy,!1),x(this,Ky,null),this.pdfPage=n,this.highlighter=a,this.accessibilityManager=s,P(Gy,this,!0===u),P(qy,this,h),this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}return W(t,[{key:"render",value:(e=_(C().mark((function t(e){var n,i,a,r,s,o,u,l,h,c,d=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=d.length>1&&void 0!==d[1]?d[1]:null,!M(Xy,this)||!M(Ky,this)){t.next=5;break}return M(Ky,this).update({viewport:e,onBefore:this.hide.bind(this)}),this.show(),t.abrupt("return");case 5:return this.cancel(),P(Ky,this,new Vg({textContentSource:this.pdfPage.streamTextContent(o||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:e})),u=M(Ky,this),l=u.textDivs,h=u.textContentItemsStr,null===(n=this.highlighter)||void 0===n||n.setTextMapping(l,h),null===(i=this.accessibilityManager)||void 0===i||i.setTextMapping(l),t.next=12,M(Ky,this).render();case 12:P(Xy,this,!0),(c=document.createElement("div")).className="endOfContent",this.div.append(c),B(Yy,this,$y).call(this,c),null===(a=M(qy,this))||void 0===a||a.call(this,this.div),null===(r=this.highlighter)||void 0===r||r.enable(),null===(s=this.accessibilityManager)||void 0===s||s.enable();case 20:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"hide",value:function(){var t;!this.div.hidden&&M(Xy,this)&&(null===(t=this.highlighter)||void 0===t||t.disable(),this.div.hidden=!0)}},{key:"show",value:function(){var t;this.div.hidden&&M(Xy,this)&&(this.div.hidden=!1,null===(t=this.highlighter)||void 0===t||t.enable())}},{key:"cancel",value:function(){var e,n,i;null===(e=M(Ky,this))||void 0===e||e.cancel(),P(Ky,this,null),null===(n=this.highlighter)||void 0===n||n.disable(),null===(i=this.accessibilityManager)||void 0===i||i.disable(),Jy.call(t,this.div)}}]);var e}();function $y(t){var e=this,n=this.div;n.addEventListener("mousedown",(function(e){t.classList.add("active")})),n.addEventListener("copy",(function(t){if(!M(Gy,e)){var n=document.getSelection();t.clipboardData.setData("text/plain",gp(Ng(n.toString())))}t.preventDefault(),t.stopPropagation()})),tA._.set(n,t),Zy.call(f)}function Jy(t){var e;(B(f,this,tA)._.delete(t),0===B(f,this,tA)._.size)&&(null===(e=B(f,this,eA)._)||void 0===e||e.abort(),eA._=B(f,this,null))}function Zy(){var t=this;if(!B(f,this,eA)._){eA._=B(f,this,new AbortController);var e,n,i=B(f,this,eA)._.signal,a=function(t,e){e.append(t),t.style.width="",t.style.height="",t.classList.remove("active")};document.addEventListener("pointerup",(function(){B(f,t,tA)._.forEach(a)}),{signal:i}),document.addEventListener("selectionchange",(function(){var i,r=document.getSelection();if(0!==r.rangeCount){for(var s=new Set,o=0;o<r.rangeCount;o++){var u,l=r.getRangeAt(o),h=R(B(f,t,tA)._.keys());try{for(h.s();!(u=h.n()).done;){var c=u.value;!s.has(c)&&l.intersectsNode(c)&&s.add(c)}}catch(t){h.e(t)}finally{h.f()}}var d,v=R(B(f,t,tA)._);try{for(v.s();!(d=v.n()).done;){var p=L(d.value,2),g=p[0],m=p[1];s.has(g)?m.classList.add("active"):a(m,g)}}catch(t){v.e(t)}finally{v.f()}if(null!==(i=e)&&void 0!==i||(e="none"===getComputedStyle(B(f,t,tA)._.values().next().value).getPropertyValue("-moz-user-select")),!e){var D=r.getRangeAt(0),y=n&&(0===D.compareBoundaryPoints(Range.END_TO_END,n)||0===D.compareBoundaryPoints(Range.START_TO_END,n)),A=y?D.startContainer:D.endContainer;A.nodeType===Node.TEXT_NODE&&(A=A.parentNode);var b=A.parentElement.closest(".textLayer"),k=B(f,t,tA)._.get(b);k&&(k.style.width=b.style.width,k.style.height=b.style.height,A.parentElement.insertBefore(k,y?A:A.nextSibling)),n=D.cloneRange()}}else B(f,t,tA)._.forEach(a)}),{signal:i})}}f=Qy;var tA={_:new Map},eA={_:null},nA=function(){return W((function t(e){var n=e.pdfPage,i=e.annotationStorage,a=void 0===i?null:i,r=e.linkService,s=e.xfaHtml,o=void 0===s?null:s;z(this,t),this.pdfPage=n,this.annotationStorage=a,this.linkService=r,this.xfaHtml=o,this.div=null,this._cancelled=!1}),[{key:"render",value:(t=_(C().mark((function t(e){var n,i,a,r,s=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("print"!==(n=s.length>1&&void 0!==s[1]?s[1]:"display")){t.next=6;break}return i={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},this.div=document.createElement("div"),i.div=this.div,t.abrupt("return",Gg.render(i));case 6:return t.next=8,this.pdfPage.getXfa();case 8:if(a=t.sent,!this._cancelled&&a){t.next=11;break}return t.abrupt("return",{textDivs:[]});case 11:if(r={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:a,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},!this.div){t.next=14;break}return t.abrupt("return",Gg.update(r));case 14:return this.div=document.createElement("div"),r.div=this.div,t.abrupt("return",Gg.render(r));case 17:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}}]);var t}(),iA={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new wg}},aA=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]),rA=new WeakMap,sA=new WeakMap,oA=new WeakMap,uA=new WeakMap,lA=new WeakMap,hA=new WeakMap,cA=new WeakMap,dA=new WeakMap,fA=new WeakMap,vA=new WeakMap,pA=new WeakMap,gA=new WeakMap,mA=new WeakMap,DA=new WeakSet,yA=function(){return W((function t(e){var n,i,a,r,s=this;z(this,t),k(this,DA),x(this,rA,Pg.ENABLE_FORMS),x(this,sA,!1),x(this,oA,!1),x(this,uA,!1),x(this,lA,null),x(this,hA,null),x(this,cA,null),x(this,dA,null),x(this,fA,op.INITIAL),x(this,vA,lp.ENABLE),x(this,pA,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0}),x(this,gA,new WeakMap),x(this,mA,[null,null,null,null]);var o=e.container,u=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,P(lA,this,e.layerProperties||iA),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||1,this.viewport=u,this.pdfPageRotate=u.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,P(vA,this,null!==(n=e.textLayerMode)&&void 0!==n?n:lp.ENABLE),P(rA,this,null!==(i=e.annotationMode)&&void 0!==i?i:Pg.ENABLE_FORMS),this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=null!==(a=e.maxCanvasPixels)&&void 0!==a?a:Cy.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,P(sA,this,e.enableHWA||!1),this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||(this.l10n=new _D),this.renderTask=null,this.resume=null,this._isStandalone=!(null!==(r=this.renderingQueue)&&void 0!==r&&r.hasViewer()),this._container=o,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;var l=document.createElement("div");if(l.className="page",l.setAttribute("data-page-number",this.id),l.setAttribute("role","region"),l.setAttribute("data-l10n-id","pdfjs-page-landmark"),l.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=l,B(DA,this,bA).call(this),null==o||o.append(l),this._isStandalone){null==o||o.style.setProperty("--scale-factor",this.scale*jg.PDF_TO_CSS_UNITS);var h=e.optionalContentConfigPromise;h&&h.then((function(t){h===s._optionalContentConfigPromise&&(M(pA,s).initialOptionalContent=t.hasInitialVisibility)})),e.l10n||this.l10n.translate(this.div)}}),[{key:"renderingState",get:function(){return M(fA,this)},set:function(t){var e=this;if(t!==M(fA,this))switch(P(fA,this,t),M(hA,this)&&(clearTimeout(M(hA,this)),P(hA,this,null)),t){case op.PAUSED:this.div.classList.remove("loading");break;case op.RUNNING:this.div.classList.add("loadingIcon"),P(hA,this,setTimeout((function(){e.div.classList.add("loading"),P(hA,e,null)}),0));break;case op.INITIAL:case op.FINISHED:this.div.classList.remove("loadingIcon","loading")}}},{key:"setPdfPage",value:function(t){var e,n,i,a;!this._isStandalone||"CanvasText"!==(null===(e=this.pageColors)||void 0===e?void 0:e.foreground)&&"Canvas"!==(null===(n=this.pageColors)||void 0===n?void 0:n.background)||(null===(i=this._container)||void 0===i||i.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),null===(a=this._container)||void 0===a||a.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight")));this.pdfPage=t,this.pdfPageRotate=t.rotate;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*jg.PDF_TO_CSS_UNITS,rotation:r}),B(DA,this,bA).call(this),this.reset()}},{key:"destroy",value:function(){var t;this.reset(),null===(t=this.pdfPage)||void 0===t||t.cleanup()}},{key:"hasEditableAnnotations",value:function(){var t;return!(null===(t=this.annotationLayer)||void 0===t||!t.hasEditableAnnotations())}},{key:"_textHighlighter",get:function(){return zg(this,"_textHighlighter",new Uy({pageIndex:this.id-1,eventBus:this.eventBus,findController:M(lA,this).findController}))}},{key:"_resetZoomLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var e=this.zoomLayer.firstChild;M(gA,this).delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var t,e,n,i,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.keepZoomLayer,o=void 0!==s&&s,u=r.keepAnnotationLayer,l=void 0!==u&&u,h=r.keepAnnotationEditorLayer,c=void 0!==h&&h,d=r.keepXfaLayer,f=void 0!==d&&d,v=r.keepTextLayer,p=void 0!==v&&v;this.cancelRendering({keepAnnotationLayer:l,keepAnnotationEditorLayer:c,keepXfaLayer:f,keepTextLayer:p}),this.renderingState=op.INITIAL;for(var g=this.div,m=g.childNodes,D=o&&this.zoomLayer||null,y=l&&(null===(t=this.annotationLayer)||void 0===t?void 0:t.div)||null,A=c&&(null===(e=this.annotationEditorLayer)||void 0===e?void 0:e.div)||null,b=f&&(null===(n=this.xfaLayer)||void 0===n?void 0:n.div)||null,k=p&&(null===(i=this.textLayer)||void 0===i?void 0:i.div)||null,E=m.length-1;E>=0;E--){var w=m[E];switch(w){case D:case y:case A:case b:case k:continue}w.remove();var C=M(mA,this).indexOf(w);C>=0&&(M(mA,this)[C]=null)}g.removeAttribute("data-loaded"),y&&this.annotationLayer.hide(),A&&this.annotationEditorLayer.hide(),b&&this.xfaLayer.hide(),k&&this.textLayer.hide(),null===(a=this.structTreeLayer)||void 0===a||a.hide(),D||(this.canvas&&(M(gA,this).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}},{key:"toggleEditingMode",value:function(t){this.hasEditableAnnotations()&&(P(uA,this,t),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}},{key:"update",value:function(t){var e=this,n=t.scale,i=void 0===n?0:n,a=t.rotation,r=void 0===a?null:a,s=t.optionalContentConfigPromise,o=void 0===s?null:s,u=t.drawingDelay,l=void 0===u?-1:u;this.scale=i||this.scale,"number"==typeof r&&(this.rotation=r),o instanceof Promise&&(this._optionalContentConfigPromise=o,o.then((function(t){o===e._optionalContentConfigPromise&&(M(pA,e).initialOptionalContent=t.hasInitialVisibility)}))),M(pA,this).directDrawing=!0;var h,c=(this.rotation+this.pdfPageRotate)%360;(this.viewport=this.viewport.clone({scale:this.scale*jg.PDF_TO_CSS_UNITS,rotation:c}),B(DA,this,bA).call(this),this._isStandalone)&&(null===(h=this._container)||void 0===h||h.style.setProperty("--scale-factor",this.viewport.scale));if(this.canvas){var d=!1;if(M(oA,this))if(0===this.maxCanvasPixels)d=!0;else if(this.maxCanvasPixels>0){var f=this.viewport,v=f.width,p=f.height,g=this.outputScale,m=g.sx,D=g.sy;d=(Math.floor(v)*m|0)*(Math.floor(p)*D|0)>this.maxCanvasPixels}var y=l>=0&&l<1e3;if(y||d){if(y&&!d&&this.renderingState!==op.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:l}),this.renderingState=op.FINISHED,M(pA,this).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!y,hideTextLayer:y}),y)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:M(dA,this)})}this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}},{key:"cancelRendering",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.keepAnnotationLayer,i=void 0!==n&&n,a=e.keepAnnotationEditorLayer,r=void 0!==a&&a,s=e.keepXfaLayer,o=void 0!==s&&s,u=e.keepTextLayer,l=void 0!==u&&u,h=e.cancelExtraDelay,c=void 0===h?0:h;(this.renderTask&&(this.renderTask.cancel(c),this.renderTask=null),this.resume=null,!this.textLayer||l&&this.textLayer.div||(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationLayer||i&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.annotationEditorLayer||r&&this.annotationEditorLayer.div||(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||o&&this.xfaLayer.div)||(this.xfaLayer.cancel(),this.xfaLayer=null,null===(t=this._textHighlighter)||void 0===t||t.disable())}},{key:"cssTransform",value:function(t){var e=t.target,n=t.redrawAnnotationLayer,i=void 0!==n&&n,a=t.redrawAnnotationEditorLayer,r=void 0!==a&&a,s=t.redrawXfaLayer,o=void 0!==s&&s,u=t.redrawTextLayer,l=void 0!==u&&u,h=t.hideTextLayer,c=void 0!==h&&h;if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);var d=e.style;d.width=d.height=""}var f,v=M(gA,this).get(e);if(this.viewport!==v){var p=this.viewport.rotation-v.rotation,g=Math.abs(p),m=1,D=1;if(90===g||270===g){var y=this.viewport,A=y.width,b=y.height;m=b/A,D=A/b}e.style.transform="rotate(".concat(p,"deg) scale(").concat(m,", ").concat(D,")")}(i&&this.annotationLayer&&B(DA,this,EA).call(this),r&&this.annotationEditorLayer&&(this.drawLayer&&B(DA,this,_A).call(this),B(DA,this,CA).call(this)),o&&this.xfaLayer&&B(DA,this,SA).call(this),this.textLayer)&&(c?(this.textLayer.hide(),null===(f=this.structTreeLayer)||void 0===f||f.hide()):l&&B(DA,this,PA).call(this))}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}},{key:"getPagePoint",value:function(t,e){return this.viewport.convertToPdfPoint(t,e)}},{key:"draw",value:(t=_(C().mark((function t(){var e,n,i,a,r,s,o,u,l,h,c,d,f,v,p,g,m,D,y,A,b,k,E,w,F,x,S,L,T,I,R,N,O,j,W,H=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.renderingState!==op.INITIAL&&(console.error("Must be in new state before drawing"),this.reset()),e=this.div,n=this.l10n,i=this.pageColors,a=this.pdfPage,r=this.viewport,a){t.next=5;break}throw this.renderingState=op.FINISHED,new Error("pdfPage is not loaded");case 5:return this.renderingState=op.RUNNING,(s=document.createElement("div")).classList.add("canvasWrapper"),B(DA,this,AA).call(this,s,"canvasWrapper"),this.textLayer||M(vA,this)===lp.DISABLE||a.isPureXfa||(this._accessibilityManager||(this._accessibilityManager=new Wy),this.textLayer=new Qy({pdfPage:a,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:M(vA,this)===lp.ENABLE_PERMISSIONS,onAppend:function(t){H.l10n.pause(),B(DA,H,AA).call(H,t,"textLayer"),H.l10n.resume()}})),this.annotationLayer||M(rA,this)===Pg.DISABLE||(o=M(lA,this),u=o.annotationStorage,l=o.annotationEditorUIManager,h=o.downloadManager,c=o.enableScripting,d=o.fieldObjectsPromise,f=o.hasJSActionsPromise,v=o.linkService,this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new Yg({pdfPage:a,annotationStorage:u,imageResourcesPath:this.imageResourcesPath,renderForms:M(rA,this)===Pg.ENABLE_FORMS,linkService:v,downloadManager:h,enableScripting:c,hasJSActionsPromise:f,fieldObjectsPromise:d,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:l,onAppend:function(t){B(DA,H,AA).call(H,t,"annotationLayer")}})),p=function(t){var e;if(null===(e=A)||void 0===e||e(!1),H.renderingQueue&&!H.renderingQueue.isHighestPriority(H))return H.renderingState=op.PAUSED,void(H.resume=function(){H.renderingState=op.RUNNING,t()});t()},g=r.width,m=r.height,(D=document.createElement("canvas")).setAttribute("role","presentation"),D.hidden=!0,y=!(null==i||!i.background||null==i||!i.foreground),A=function(t){y&&!t||(D.hidden=!1,A=null)},s.append(D),this.canvas=D,b=D.getContext("2d",{alpha:!1,willReadFrequently:!M(sA,this)}),k=this.outputScale=new dp,0===this.maxCanvasPixels?(E=1/this.scale,k.sx*=E,k.sy*=E,P(oA,this,!0)):this.maxCanvasPixels>0&&(w=g*m,F=Math.sqrt(this.maxCanvasPixels/w),k.sx>F||k.sy>F?(k.sx=F,k.sy=F,P(oA,this,!0)):P(oA,this,!1)),x=Dp(k.sx),S=Dp(k.sy),D.width=yp(g*k.sx,x[0]),D.height=yp(m*k.sy,S[0]),(L=D.style).width=yp(g,x[1])+"px",L.height=yp(m,S[1])+"px",M(gA,this).set(D,r),T=k.scaled?[k.sx,0,0,k.sy,0,0]:null,I={canvasContext:b,transform:T,viewport:r,annotationMode:M(rA,this),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:i,isEditing:M(uA,this)},(R=this.renderTask=a.render(I)).onContinue=p,N=R.promise.then(_(C().mark((function t(){var e,i,r,o;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=A)||void 0===e||e(!0),t.next=3,B(DA,H,NA).call(H,R);case 3:if(B(DA,H,PA).call(H),!H.annotationLayer){t.next=7;break}return t.next=7,B(DA,H,EA).call(H);case 7:if(i=M(lA,H),r=i.annotationEditorUIManager){t.next=10;break}return t.abrupt("return");case 10:return H.drawLayer||(H.drawLayer=new _y({pageIndex:H.id})),t.next=13,B(DA,H,_A).call(H);case 13:H.drawLayer.setParent(s),H.annotationEditorLayer||(H.annotationEditorLayer=new ry({uiManager:r,pdfPage:a,l10n:n,accessibilityManager:H._accessibilityManager,annotationLayer:null===(o=H.annotationLayer)||void 0===o?void 0:o.annotationLayer,textLayer:H.textLayer,drawLayer:H.drawLayer.getDrawLayer(),onAppend:function(t){B(DA,H,AA).call(H,t,"annotationEditorLayer")}})),B(DA,H,CA).call(H);case 16:case"end":return t.stop()}}),t)}))),(function(t){var e;return t instanceof Wg||null===(e=A)||void 0===e||e(!0),B(DA,H,NA).call(H,R,t)})),a.isPureXfa&&(this.xfaLayer||(O=M(lA,this),j=O.annotationStorage,W=O.linkService,this.xfaLayer=new nA({pdfPage:a,annotationStorage:j,linkService:W})),B(DA,this,SA).call(this)),e.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),t.abrupt("return",N);case 40:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"setPageLabel",value:function(t){var e;this.pageLabel="string"==typeof t?t:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:null!==(e=this.pageLabel)&&void 0!==e?e:this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"thumbnailCanvas",get:function(){var t=M(pA,this),e=t.directDrawing,n=t.initialOptionalContent,i=t.regularAnnotations;return e&&n&&i?this.canvas:null}}]);var t}();function AA(t,e){var n=aA.get(e),i=M(mA,this)[n];if(M(mA,this)[n]=t,i)i.replaceWith(t);else{for(var a=n-1;a>=0;a--){var r=M(mA,this)[a];if(r)return void r.after(t)}this.div.prepend(t)}}function bA(){var t=this.viewport;if(this.pdfPage){if(M(cA,this)===t.rotation)return;P(cA,this,t.rotation)}Hg(this.div,t,!0,!1)}function kA(t,e){this.eventBus.dispatch(t,{source:this,pageNumber:this.id,error:e})}function EA(){return wA.apply(this,arguments)}function wA(){return(wA=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.annotationLayer.render(this.viewport,"display");case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error('#renderAnnotationLayer: "'.concat(t.t0,'".')),e=t.t0;case 10:return t.prev=10,B(DA,this,kA).call(this,"annotationlayerrendered",e),t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,6,10,13]])})))).apply(this,arguments)}function CA(){return FA.apply(this,arguments)}function FA(){return(FA=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.annotationEditorLayer.render(this.viewport,"display");case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error('#renderAnnotationEditorLayer: "'.concat(t.t0,'".')),e=t.t0;case 10:return t.prev=10,B(DA,this,kA).call(this,"annotationeditorlayerrendered",e),t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[1,6,10,13]])})))).apply(this,arguments)}function _A(){return xA.apply(this,arguments)}function xA(){return(xA=_(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.drawLayer.render("display");case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error('#renderDrawLayer: "'.concat(t.t0,'".'));case 8:case"end":return t.stop()}}),t,this,[[0,5]])})))).apply(this,arguments)}function SA(){return MA.apply(this,arguments)}function MA(){return(MA=_(C().mark((function t(){var e,n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.xfaLayer.render(this.viewport,"display");case 4:null!=(n=t.sent)&&n.textDivs&&this._textHighlighter&&B(DA,this,IA).call(this,n.textDivs),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error('#renderXfaLayer: "'.concat(t.t0,'".')),e=t.t0;case 12:return t.prev=12,null!==(i=this.xfaLayer)&&void 0!==i&&i.div&&(this.l10n.pause(),B(DA,this,AA).call(this,this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),B(DA,this,kA).call(this,"xfalayerrendered",e),t.finish(12);case 16:case"end":return t.stop()}}),t,this,[[1,8,12,16]])})))).apply(this,arguments)}function PA(){return BA.apply(this,arguments)}function BA(){return(BA=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.textLayer){t.next=2;break}return t.abrupt("return");case 2:return e=null,t.prev=3,t.next=6,this.textLayer.render(this.viewport);case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(3),!(t.t0 instanceof Fg)){t.next=12;break}return t.abrupt("return");case 12:console.error('#renderTextLayer: "'.concat(t.t0,'".')),e=t.t0;case 14:B(DA,this,kA).call(this,"textlayerrendered",e),B(DA,this,LA).call(this);case 16:case"end":return t.stop()}}),t,this,[[3,8]])})))).apply(this,arguments)}function LA(){return TA.apply(this,arguments)}function TA(){return(TA=_(C().mark((function t(){var e,n,i,a,r;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.textLayer){t.next=2;break}return t.abrupt("return");case 2:return this.structTreeLayer||(this.structTreeLayer=new By),t.next=5,this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree();case 5:i=t.sent,(a=null===(e=this.structTreeLayer)||void 0===e?void 0:e.render(i))&&(this.l10n.pause(),null===(r=this.canvas)||void 0===r||r.append(a),this.l10n.resume()),null===(n=this.structTreeLayer)||void 0===n||n.show();case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function IA(t){return RA.apply(this,arguments)}function RA(){return(RA=_(C().mark((function t(e){var n,i,a,r,s;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pdfPage.getTextContent();case 2:n=t.sent,i=[],a=R(n.items);try{for(a.s();!(r=a.n()).done;)s=r.value,i.push(s.str)}catch(t){a.e(t)}finally{a.f()}this._textHighlighter.setTextMapping(e,i),this._textHighlighter.enable();case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function NA(t){return OA.apply(this,arguments)}function OA(){return OA=_(C().mark((function t(e){var n,i=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:null,e===this.renderTask&&(this.renderTask=null),!(n instanceof Wg)){t.next=5;break}return P(dA,this,null),t.abrupt("return");case 5:if(P(dA,this,n),this.renderingState=op.FINISHED,this._resetZoomLayer(!0),M(pA,this).regularAnnotations=!e.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:M(dA,this)}),!n){t.next=12;break}throw n;case 12:case"end":return t.stop()}}),t,this)}))),OA.apply(this,arguments)}function jA(){return jA=_(C().mark((function t(e){var n,i,a,r,s,o,u,l,h;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(n="").split("#",1)[0],t.next=3,e.getMetadata();case 3:if(a=t.sent,r=a.info,s=a.metadata,o=a.contentDispositionFilename,u=a.contentLength){t.next=14;break}return t.next=11,e.getDownloadInfo();case 11:l=t.sent,h=l.length,u=h;case 14:return t.abrupt("return",g(g({},r),{},{baseURL:i,filesize:u,filename:o||Ig(n),metadata:null==s?void 0:s.getRaw(),authors:null==s?void 0:s.get("dc:creator"),numPages:e.numPages,URL:n}));case 15:case"end":return t.stop()}}),t)}))),jA.apply(this,arguments)}var WA=function(){return W((function t(e){z(this,t),this._ready=new Promise((function(t,n){import(e).then((function(e){t(e.QuickJSSandbox())})).catch(n)}))}),[{key:"createSandbox",value:(n=_(C().mark((function t(e){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready;case 2:t.sent.create(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"dispatchEventInSandbox",value:(e=_(C().mark((function t(e){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready;case 2:n=t.sent,setTimeout((function(){return n.dispatchEvent(e)}),0);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"destroySandbox",value:(t=_(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready;case 2:t.sent.nukeSandbox();case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,n}(),HA=new WeakMap,zA=new WeakMap,VA=new WeakMap,UA=new WeakMap,GA=new WeakMap,qA=new WeakMap,XA=new WeakMap,KA=new WeakMap,YA=new WeakMap,QA=new WeakMap,$A=new WeakMap,JA=new WeakSet,ZA=function(){return W((function t(e){var n=e.eventBus,i=e.externalServices,a=void 0===i?null:i,r=e.docProperties,s=void 0===r?null:r;z(this,t),k(this,JA),x(this,HA,null),x(this,zA,null),x(this,VA,null),x(this,UA,null),x(this,GA,null),x(this,qA,null),x(this,XA,null),x(this,KA,null),x(this,YA,!1),x(this,QA,null),x(this,$A,null),P(GA,this,n),P(qA,this,a),P(VA,this,s)}),[{key:"setViewer",value:function(t){P(KA,this,t)}},{key:"setDocument",value:(a=_(C().mark((function t(e){var n,i,a,r,s,o,u,l,h,c,d=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M(XA,this)){t.next=3;break}return t.next=3,B(JA,this,ob).call(this);case 3:if(P(XA,this,e),e){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);case 8:if(i=t.sent,a=L(i,3),r=a[0],s=a[1],o=a[2],r||o){t.next=17;break}return t.next=16,B(JA,this,ob).call(this);case 16:return t.abrupt("return");case 17:if(e===M(XA,this)){t.next=19;break}return t.abrupt("return");case 19:t.prev=19,P(QA,this,B(JA,this,sb).call(this)),t.next=29;break;case 23:return t.prev=23,t.t0=t.catch(19),console.error('setDocument: "'.concat(t.t0.message,'".')),t.next=28,B(JA,this,ob).call(this);case 28:return t.abrupt("return");case 29:return u=M(GA,this),P(UA,this,new AbortController),l=M(UA,this),h=l.signal,u._on("updatefromsandbox",(function(t){(null==t?void 0:t.source)===window&&B(JA,d,tb).call(d,t.detail)}),{signal:h}),u._on("dispatcheventinsandbox",(function(t){var e;null===(e=M(QA,d))||void 0===e||e.dispatchEventInSandbox(t.detail)}),{signal:h}),u._on("pagechanging",(function(t){var e=t.pageNumber,n=t.previous;e!==n&&(B(JA,d,ab).call(d,n),B(JA,d,nb).call(d,e))}),{signal:h}),u._on("pagerendered",(function(t){var e=t.pageNumber;d._pageOpenPending.has(e)&&e===M(KA,d).currentPageNumber&&B(JA,d,nb).call(d,e)}),{signal:h}),u._on("pagesdestroy",_(C().mark((function t(){var e,n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(JA,d,ab).call(d,M(KA,d).currentPageNumber);case 2:return t.next=4,null===(e=M(QA,d))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"WillClose"});case 4:null===(n=M(HA,d))||void 0===n||n.resolve();case 5:case"end":return t.stop()}}),t)}))),{signal:h}),t.prev=37,t.next=40,M(VA,this).call(this,e);case 40:if(c=t.sent,e===M(XA,this)){t.next=43;break}return t.abrupt("return");case 43:return t.next=45,M(QA,this).createSandbox({objects:r,calculationOrder:s,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:g(g({},c),{},{actions:o})});case 45:u.dispatch("sandboxcreated",{source:this}),t.next=54;break;case 48:return t.prev=48,t.t1=t.catch(37),console.error('setDocument: "'.concat(t.t1.message,'".')),t.next=53,B(JA,this,ob).call(this);case 53:return t.abrupt("return");case 54:return t.next=56,null===(n=M(QA,this))||void 0===n?void 0:n.dispatchEventInSandbox({id:"doc",name:"Open"});case 56:return t.next=58,B(JA,this,nb).call(this,M(KA,this).currentPageNumber,!0);case 58:Promise.resolve().then((function(){e===M(XA,d)&&P(YA,d,!0)}));case 59:case"end":return t.stop()}}),t,this,[[19,23],[37,48]])}))),function(t){return a.apply(this,arguments)})},{key:"dispatchWillSave",value:(i=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(e=M(QA,this))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"WillSave"}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"dispatchDidSave",value:(n=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(e=M(QA,this))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"DidSave"}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"dispatchWillPrint",value:(e=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M(QA,this)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,null===(e=M($A,this))||void 0===e?void 0:e.promise;case 4:return P($A,this,Promise.withResolvers()),t.prev=5,t.next=8,M(QA,this).dispatchEventInSandbox({id:"doc",name:"WillPrint"});case 8:t.next=15;break;case 10:throw t.prev=10,t.t0=t.catch(5),M($A,this).resolve(),P($A,this,null),t.t0;case 15:return t.next=17,M($A,this).promise;case 17:case"end":return t.stop()}}),t,this,[[5,10]])}))),function(){return e.apply(this,arguments)})},{key:"dispatchDidPrint",value:(t=_(C().mark((function t(){var e;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(e=M(QA,this))||void 0===e?void 0:e.dispatchEventInSandbox({id:"doc",name:"DidPrint"}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"destroyPromise",get:function(){var t;return(null===(t=M(zA,this))||void 0===t?void 0:t.promise)||null}},{key:"ready",get:function(){return M(YA,this)}},{key:"_pageOpenPending",get:function(){return zg(this,"_pageOpenPending",new Set)}},{key:"_visitedPages",get:function(){return zg(this,"_visitedPages",new Map)}}]);var t,e,n,i,a}();function tb(t){return eb.apply(this,arguments)}function eb(){return eb=_(C().mark((function t(e){var n,i,a,r,s,o,u,l,h,c,d,f,v,p;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=M(KA,this),a=i.isInPresentationMode||i.isChangingPresentationMode,r=e.id,s=e.siblings,o=e.command,u=e.value,r){t.next=41;break}t.t0=o,t.next="clear"===t.t0?7:"error"===t.t0?9:"layout"===t.t0?11:"page-num"===t.t0?13:"print"===t.t0?15:"println"===t.t0?19:"zoom"===t.t0?21:"SaveAs"===t.t0?23:"FirstPage"===t.t0?25:"LastPage"===t.t0?27:"NextPage"===t.t0?29:"PrevPage"===t.t0?31:"ZoomViewIn"===t.t0?33:"ZoomViewOut"===t.t0?35:"WillPrintFinished"===t.t0?37:40;break;case 7:return console.clear(),t.abrupt("break",40);case 9:return console.error(u),t.abrupt("break",40);case 11:return a||(l=Sp(u),i.spreadMode=l.spreadMode),t.abrupt("break",40);case 13:return i.currentPageNumber=u+1,t.abrupt("break",40);case 15:return t.next=17,i.pagesPromise;case 17:return M(GA,this).dispatch("print",{source:this}),t.abrupt("break",40);case 19:return console.log(u),t.abrupt("break",40);case 21:return a||(i.currentScaleValue=u),t.abrupt("break",40);case 23:return M(GA,this).dispatch("download",{source:this}),t.abrupt("break",40);case 25:return i.currentPageNumber=1,t.abrupt("break",40);case 27:return i.currentPageNumber=i.pagesCount,t.abrupt("break",40);case 29:return i.nextPage(),t.abrupt("break",40);case 31:return i.previousPage(),t.abrupt("break",40);case 33:return a||i.increaseScale(),t.abrupt("break",40);case 35:return a||i.decreaseScale(),t.abrupt("break",40);case 37:return null===(n=M($A,this))||void 0===n||n.resolve(),P($A,this,null),t.abrupt("break",40);case 40:return t.abrupt("return");case 41:if(!a||!e.focus){t.next=43;break}return t.abrupt("return");case 43:delete e.id,delete e.siblings,h=s?[r].concat(A(s)):[r],c=R(h);try{for(c.s();!(d=c.n()).done;)f=d.value,(v=document.querySelector('[data-element-id="'.concat(f,'"]')))?v.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):null===(p=M(XA,this))||void 0===p||p.annotationStorage.setValue(f,e)}catch(t){c.e(t)}finally{c.f()}case 48:case"end":return t.stop()}}),t,this)}))),eb.apply(this,arguments)}function nb(t){return ib.apply(this,arguments)}function ib(){return ib=_(C().mark((function t(e){var n,i,a,r,s,o=this,u=arguments;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],i=M(XA,this),a=this._visitedPages,n&&P(HA,this,Promise.withResolvers()),M(HA,this)){t.next=5;break}return t.abrupt("return");case 5:if((null==(r=M(KA,this).getPageView(e-1))?void 0:r.renderingState)===op.FINISHED){t.next=9;break}return this._pageOpenPending.add(e),t.abrupt("return");case 9:this._pageOpenPending.delete(e),s=_(C().mark((function t(){var n,s,u;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.has(e)?null:null===(n=r.pdfPage)||void 0===n?void 0:n.getJSActions();case 2:if(u=t.sent,i===M(XA,o)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,null===(s=M(QA,o))||void 0===s?void 0:s.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:u});case 7:case"end":return t.stop()}}),t)})))(),a.set(e,s);case 12:case"end":return t.stop()}}),t,this)}))),ib.apply(this,arguments)}function ab(t){return rb.apply(this,arguments)}function rb(){return(rb=_(C().mark((function t(e){var n,i,a,r;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=M(XA,this),a=this._visitedPages,M(HA,this)){t.next=3;break}return t.abrupt("return");case 3:if(!this._pageOpenPending.has(e)){t.next=5;break}return t.abrupt("return");case 5:if(r=a.get(e)){t.next=8;break}return t.abrupt("return");case 8:return a.set(e,null),t.next=11,r;case 11:if(i===M(XA,this)){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,null===(n=M(QA,this))||void 0===n?void 0:n.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e});case 15:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function sb(){if(P(zA,this,Promise.withResolvers()),M(QA,this))throw new Error("#initScripting: Scripting already exists.");return M(qA,this).createScripting()}function ob(){return ub.apply(this,arguments)}function ub(){return(ub=_(C().mark((function t(){var e,n,i,a;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(M(QA,this)){t.next=4;break}return P(XA,this,null),null===(a=M(zA,this))||void 0===a||a.resolve(),t.abrupt("return");case 4:if(!M(HA,this)){t.next=8;break}return t.next=7,Promise.race([M(HA,this).promise,new Promise((function(t){setTimeout(t,1e3)}))]).catch((function(){}));case 7:P(HA,this,null);case 8:return P(XA,this,null),t.prev=9,t.next=12,M(QA,this).destroySandbox();case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:null===(e=M($A,this))||void 0===e||e.reject(new Error("Scripting destroyed.")),P($A,this,null),null===(n=M(UA,this))||void 0===n||n.abort(),P(UA,this,null),this._pageOpenPending.clear(),this._visitedPages.clear(),P(QA,this,null),P(YA,this,!1),null===(i=M(zA,this))||void 0===i||i.resolve();case 25:case"end":return t.stop()}}),t,this,[[9,14]])})))).apply(this,arguments)}var lb=function(t){function e(t){return z(this,e),t.externalServices||window.addEventListener("updatefromsandbox",(function(e){t.eventBus.dispatch("updatefromsandbox",{source:window,detail:e.detail})})),t.externalServices||(t.externalServices={createScripting:function(){return new WA(t.sandboxBundleSrc)}}),t.docProperties||(t.docProperties=function(t){return function(t){return jA.apply(this,arguments)}(t)}),V(this,e,[t])}return q(e,ZA),W(e)}(),hb=function(){return W((function t(){var e=this;z(this,t),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:function(){return!!e.pdfViewer}})}),[{key:"setViewer",value:function(t){this.pdfViewer=t}},{key:"setThumbnailViewer",value:function(t){this.pdfThumbnailViewer=t}},{key:"isHighestPriority",value:function(t){return this.highestPriorityPage===t.renderingId}},{key:"renderHighestPriority",value:function(t){var e;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.isThumbnailViewEnabled&&null!==(e=this.pdfThumbnailViewer)&&void 0!==e&&e.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.views,r=a.length;if(0===r)return null;for(var s=0;s<r;s++){var o=a[s].view;if(!this.isViewFinished(o))return o}var u=t.first.id,l=t.last.id;if(l-u+1>r)for(var h=t.ids,c=1,d=l-u;c<d;c++){var f=n?u+c:l-c;if(!h.has(f)){var v=e[f-1];if(!this.isViewFinished(v))return v}}var p=n?l:u-2,g=e[p];return g&&!this.isViewFinished(g)||i&&(g=e[p+=n?1:-1])&&!this.isViewFinished(g)?g:null}},{key:"isViewFinished",value:function(t){return t.renderingState===op.FINISHED}},{key:"renderView",value:function(t){var e=this;switch(t.renderingState){case op.FINISHED:return!1;case op.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case op.RUNNING:this.highestPriorityPage=t.renderingId;break;case op.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally((function(){e.renderHighestPriority()})).catch((function(t){t instanceof Wg||console.error('renderView: "'.concat(t,'"'))}))}return!0}}])}(),cb=1e4,db=5e3,fb=250;function vb(t){return Object.values(xg).includes(t)&&t!==xg.DISABLE}var pb=new WeakMap,gb=new WeakMap,mb=new WeakSet,Db=function(){return W((function t(e){z(this,t),k(this,mb),x(this,pb,new Set),x(this,gb,0),P(gb,this,e)}),[{key:"push",value:function(t){var e=M(pb,this);e.has(t)&&e.delete(t),e.add(t),e.size>M(gb,this)&&B(mb,this,yb).call(this)}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;P(gb,this,t);var n=M(pb,this);if(e){var i,a=n.size,r=1,s=R(n);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(e.has(o.id)&&(n.delete(o),n.add(o)),++r>a)break}}catch(t){s.e(t)}finally{s.f()}}for(;n.size>M(gb,this);)B(mb,this,yb).call(this)}},{key:"has",value:function(t){return M(pb,this).has(t)}},{key:Symbol.iterator,value:function(){return M(pb,this).keys()}}])}();function yb(){var t=M(pb,this).keys().next().value;null==t||t.destroy(),M(pb,this).delete(t)}var Ab=new WeakMap,bb=new WeakMap,kb=new WeakMap,Eb=new WeakMap,wb=new WeakMap,Cb=new WeakMap,Fb=new WeakMap,_b=new WeakMap,xb=new WeakMap,Sb=new WeakMap,Mb=new WeakMap,Pb=new WeakMap,Bb=new WeakMap,Lb=new WeakMap,Tb=new WeakMap,Ib=new WeakMap,Rb=new WeakMap,Nb=new WeakMap,Ob=new WeakMap,jb=new WeakMap,Wb=new WeakMap,Hb=new WeakMap,zb=new WeakMap,Vb=new WeakSet,Ub=function(){return W((function t(e){var n,i,a,r,s,o=this;z(this,t),k(this,Vb),x(this,Ab,null),x(this,bb,null),x(this,kb,null),x(this,Eb,xg.NONE),x(this,wb,null),x(this,Cb,Pg.ENABLE_FORMS),x(this,Fb,null),x(this,_b,!1),x(this,xb,!1),x(this,Sb,!1),x(this,Mb,!1),x(this,Pb,null),x(this,Bb,null),x(this,Lb,null),x(this,Tb,null),x(this,Ib,!1),x(this,Rb,null),x(this,Nb,!1),x(this,Ob,0),x(this,jb,new ResizeObserver(B(Vb,this,ok).bind(this))),x(this,Wb,null),x(this,Hb,null),x(this,zb,lp.ENABLE);var u="4.5.136";if(Ug!==u)throw new Error('The API version "'.concat(Ug,'" does not match the Viewer version "').concat(u,'".'));if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==(null===(n=this.container)||void 0===n?void 0:n.tagName)||"DIV"!==(null===(i=this.viewer)||void 0===i?void 0:i.tagName))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");M(jb,this).observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new wg,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,P(bb,this,e.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=function(t){return o._getVisiblePages().ids.has(t)}),this._scriptingManager=e.scriptingManager||null,P(zb,this,null!==(a=e.textLayerMode)&&void 0!==a?a:lp.ENABLE),P(Cb,this,null!==(r=e.annotationMode)&&void 0!==r?r:Pg.ENABLE_FORMS),P(Eb,this,null!==(s=e.annotationEditorMode)&&void 0!==s?s:xg.NONE),P(kb,this,e.annotationEditorHighlightColors||null),P(xb,this,!0===e.enableHighlightFloatingButton),P(Mb,this,!0===e.enableUpdatedAddImage),this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||(this.l10n=new _D),P(Sb,this,e.enablePermissions||!1),this.pageColors=e.pageColors||null,P(Bb,this,e.mlManager||null),P(_b,this,e.enableHWA||!1),this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new hb,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;var l=e.abortSignal;null==l||l.addEventListener("abort",(function(){M(jb,o).disconnect(),P(jb,o,null)}),{once:!0}),this.scroll=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=function(n){r||(r=window.requestAnimationFrame((function(){r=null;var n=t.scrollLeft,i=a.lastX;n!==i&&(a.right=n>i),a.lastX=n;var s=t.scrollTop,o=a.lastY;s!==o&&(a.down=s>o),a.lastY=s,e(a)})))},a={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:i},r=null;return t.addEventListener("scroll",i,{useCapture:!0,signal:n}),null==n||n.addEventListener("abort",(function(){return window.cancelAnimationFrame(r)}),{once:!0}),a}(this.container,this._scrollUpdate.bind(this),l),this.presentationModeState=up.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),B(Vb,this,sk).call(this),this.eventBus._on("thumbnailrendered",(function(t){var e=t.pageNumber,n=t.pdfPage,i=o._pages[e-1];M(Ab,o).has(i)||null==n||n.cleanup()})),e.l10n||this.l10n.translate(this.container)}),[{key:"pagesCount",get:function(){return this._pages.length}},{key:"getPageView",value:function(t){return this._pages[t]}},{key:"getCachedPageViews",value:function(){return new Set(M(Ab,this))}},{key:"pageViewsReady",get:function(){return this._pages.every((function(t){return null==t?void 0:t.pdfPage}))}},{key:"renderForms",get:function(){return M(Cb,this)===Pg.ENABLE_FORMS}},{key:"enableScripting",get:function(){return!!this._scriptingManager}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error('currentPageNumber: "'.concat(t,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===t)return i&&B(Vb,this,ek).call(this),!0;if(!(0<t&&t<=this.pagesCount))return!1;var a=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:null!==(e=null===(n=this._pageLabels)||void 0===n?void 0:n[t-1])&&void 0!==e?e:null,previous:a}),i&&B(Vb,this,ek).call(this),!0}},{key:"currentPageLabel",get:function(){var t,e;return null!==(t=null===(e=this._pageLabels)||void 0===e?void 0:e[this._currentPageNumber-1])&&void 0!==t?t:null},set:function(t){if(this.pdfDocument){var e=0|t;if(this._pageLabels){var n=this._pageLabels.indexOf(t);n>=0&&(e=n+1)}this._setCurrentPageNumber(e,!0)||console.error('currentPageLabel: "'.concat(t,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return 0!==this._currentScale?this._currentScale:1},set:function(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&B(Vb,this,tk).call(this,t,{noScroll:!1})}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(t){this.pdfDocument&&B(Vb,this,tk).call(this,t,{noScroll:!1})}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(t){if(!Ap(t))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&((t%=360)<0&&(t+=360),this._pagesRotation!==t)){this._pagesRotation=t;var e=this._currentPageNumber;this.refresh(!0,{rotation:t}),this._currentScaleValue&&B(Vb,this,tk).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"_layerProperties",get:function(){var t=this;return zg(this,"_layerProperties",{get annotationEditorUIManager(){return M(wb,t)},get annotationStorage(){var e;return null===(e=t.pdfDocument)||void 0===e?void 0:e.annotationStorage},get downloadManager(){return t.downloadManager},get enableScripting(){return!!t._scriptingManager},get fieldObjectsPromise(){var e;return null===(e=t.pdfDocument)||void 0===e?void 0:e.getFieldObjects()},get findController(){return t.findController},get hasJSActionsPromise(){var e;return null===(e=t.pdfDocument)||void 0===e?void 0:e.hasJSActions()},get linkService(){return t.linkService}})}},{key:"getAllText",value:(t=_(C().mark((function t(){var e,n,i,a,r,s,o,u,l,h;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=[],i=1,a=this.pdfDocument.numPages;case 3:if(!(i<=a)){t.next=20;break}if(!M(Nb,this)){t.next=6;break}return t.abrupt("return",null);case 6:return n.length=0,t.next=9,this.pdfDocument.getPage(i);case 9:return r=t.sent,t.next=12,r.getTextContent();case 12:s=t.sent,o=s.items,u=R(o);try{for(u.s();!(l=u.n()).done;)(h=l.value).str&&n.push(h.str),h.hasEOL&&n.push("\n")}catch(t){u.e(t)}finally{u.f()}e.push(gp(n.join("")));case 17:++i,t.next=3;break;case 20:return t.abrupt("return",e.join("\n"));case 21:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"setDocument",value:function(t){var e,n,i=this;this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),null===(e=this.findController)||void 0===e||e.setDocument(null),null===(n=this._scriptingManager)||void 0===n||n.setDocument(null),M(wb,this)&&(M(wb,this).destroy(),P(wb,this,null)));if(this.pdfDocument=t,t){var a=t.numPages,r=t.getPage(1),s=t.getOptionalContentConfig({intent:"display"}),o=M(Sb,this)?t.getPermissions():Promise.resolve(),u=this.eventBus,l=this.pageColors,h=this.viewer;P(Pb,this,new AbortController);var c=M(Pb,this).signal;if(a>cb){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var d=this._scrollMode=hp.PAGE;u.dispatch("scrollmodechanged",{source:this,mode:d})}this._pagesCapability.promise.then((function(){u.dispatch("pagesloaded",{source:i,pagesCount:a})}),(function(){}));u._on("pagerender",(function(t){var e=i._pages[t.pageNumber-1];e&&M(Ab,i).push(e)}),{signal:c});var f=function(t){t.cssTransform||(i._onePageRenderedCapability.resolve({timestamp:t.timestamp}),u._off("pagerendered",f))};u._on("pagerendered",f,{signal:c}),Promise.all([r,o]).then((function(e){var n,r=L(e,2),o=r[0],d=r[1];if(t===i.pdfDocument){i._firstPageCapability.resolve(o),i._optionalContentConfigPromise=s;var f=B(Vb,i,Gb).call(i,d),v=f.annotationEditorMode,p=f.annotationMode,g=f.textLayerMode;if(g!==lp.DISABLE){var m=P(Rb,i,document.createElement("div"));m.id="hiddenCopyElement",h.before(m)}if(v!==xg.DISABLE){var D=v;t.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):vb(D)?(P(wb,i,new Sg(i.container,h,M(bb,i),u,t,l,M(kb,i),M(xb,i),M(Mb,i),M(Bb,i))),u.dispatch("annotationeditoruimanager",{source:i,uiManager:M(wb,i)}),D!==xg.NONE&&M(wb,i).updateMode(D)):console.error("Invalid AnnotationEditor mode: ".concat(D))}var y=i._scrollMode===hp.PAGE?null:h,A=i.currentScale,b=o.getViewport({scale:A*jg.PDF_TO_CSS_UNITS});h.style.setProperty("--scale-factor",b.scale),"CanvasText"!==(null==l?void 0:l.foreground)&&"Canvas"!==(null==l?void 0:l.background)||(h.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),h.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(var k=1;k<=a;++k){var E=new yA({container:y,eventBus:u,id:k,scale:A,defaultViewport:b.clone(),optionalContentConfigPromise:s,renderingQueue:i.renderingQueue,textLayerMode:g,annotationMode:p,imageResourcesPath:i.imageResourcesPath,maxCanvasPixels:i.maxCanvasPixels,pageColors:l,l10n:i.l10n,layerProperties:i._layerProperties,enableHWA:M(_b,i)});i._pages.push(E)}null===(n=i._pages[0])||void 0===n||n.setPdfPage(o),i._scrollMode===hp.PAGE?B(Vb,i,Yb).call(i):i._spreadMode!==cp.NONE&&i._updateSpreadMode(),B(Vb,i,qb).call(i,c).then(_(C().mark((function e(){var n,r,s,o,l;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===i.pdfDocument){e.next=2;break}return e.abrupt("return");case 2:if(null===(n=i.findController)||void 0===n||n.setDocument(t),null===(r=i._scriptingManager)||void 0===r||r.setDocument(t),M(Rb,i)&&document.addEventListener("copy",B(Vb,i,Kb).bind(i,g),{signal:c}),M(wb,i)&&u.dispatch("annotationeditormodechanged",{source:i,mode:M(Eb,i)}),!(t.loadingParams.disableAutoFetch||a>db)){e.next=9;break}return i._pagesCapability.resolve(),e.abrupt("return");case 9:if(!((s=a-1)<=0)){e.next=13;break}return i._pagesCapability.resolve(),e.abrupt("return");case 13:o=C().mark((function e(n){var a;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getPage(n).then((function(t){var e=i._pages[n-1];e.pdfPage||e.setPdfPage(t),0==--s&&i._pagesCapability.resolve()}),(function(t){console.error("Unable to get page ".concat(n," to initialize viewer"),t),0==--s&&i._pagesCapability.resolve()})),n%fb!=0){e.next=4;break}return e.next=4,a;case 4:case"end":return e.stop()}}),e)})),l=2;case 15:if(!(l<=a)){e.next=20;break}return e.delegateYield(o(l),"t0",17);case 17:++l,e.next=15;break;case 20:case"end":return e.stop()}}),e)})))),u.dispatch("pagesinit",{source:i}),t.getMetadata().then((function(e){var n=e.info;t===i.pdfDocument&&n.Language&&(h.lang=n.Language)})),i.defaultRenderingQueue&&i.update()}})).catch((function(t){console.error("Unable to initialize viewer",t),i._pagesCapability.reject(t)}))}}},{key:"setPageLabels",value:function(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var e=0,n=this._pages.length;e<n;e++){var i,a;this._pages[e].setPageLabel(null!==(i=null===(a=this._pageLabels)||void 0===a?void 0:a[e])&&void 0!==i?i:null)}}}},{key:"_resetView",value:function(){var t,e;this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,P(Ab,this,new Db(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=hp.VERTICAL,this._previousScrollMode=hp.UNKNOWN,this._spreadMode=cp.NONE,P(Wb,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),null===(t=M(Pb,this))||void 0===t||t.abort(),P(Pb,this,null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),null===(e=M(Rb,this))||void 0===e||e.remove(),P(Rb,this,null),B(Vb,this,uk).call(this)}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"pageLabelToPageNumber",value:function(t){if(!this._pageLabels)return null;var e=this._pageLabels.indexOf(t);return e<0?null:e+1}},{key:"scrollPageIntoView",value:function(t){var e=t.pageNumber,n=t.destArray,i=void 0===n?null:n,a=t.allowNegativeOffset,r=void 0!==a&&a,s=t.ignoreDestinationZoom,o=void 0!==s&&s;if(this.pdfDocument){var u=Number.isInteger(e)&&this._pages[e-1];if(u)if(!this.isInPresentationMode&&i){var l,h,c=0,d=0,f=0,v=0,p=u.rotation%180!=0,g=(p?u.height:u.width)/u.scale/jg.PDF_TO_CSS_UNITS,m=(p?u.width:u.height)/u.scale/jg.PDF_TO_CSS_UNITS,D=0;switch(i[1].name){case"XYZ":c=i[2],d=i[3],D=i[4],c=null!==c?c:0,d=null!==d?d:m;break;case"Fit":case"FitB":D="page-fit";break;case"FitH":case"FitBH":D="page-width",null===(d=i[2])&&this._location?(c=this._location.left,d=this._location.top):("number"!=typeof d||d<0)&&(d=m);break;case"FitV":case"FitBV":c=i[2],f=g,v=m,D="page-height";break;case"FitR":c=i[2],d=i[3],f=i[4]-c,v=i[5]-d;var y=rp,A=sp;this.removePageBorders&&(y=A=0),l=(this.container.clientWidth-y)/f/jg.PDF_TO_CSS_UNITS,h=(this.container.clientHeight-A)/v/jg.PDF_TO_CSS_UNITS,D=Math.min(Math.abs(l),Math.abs(h));break;default:return void console.error('scrollPageIntoView: "'.concat(i[1].name,'" is not a valid destination type.'))}if(o||(D&&D!==this._currentScale?this.currentScaleValue=D:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"!==D||i[4]){var b=[u.viewport.convertToViewportPoint(c,d),u.viewport.convertToViewportPoint(c+f,d+v)],k=Math.min(b[0][0],b[1][0]),E=Math.min(b[0][1],b[1][1]);r||(k=Math.max(k,0),E=Math.max(E,0)),B(Vb,this,Qb).call(this,u,{left:k,top:E})}else B(Vb,this,Qb).call(this,u)}else this._setCurrentPageNumber(e,!0);else console.error('scrollPageIntoView: "'.concat(e,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(t){var e=this._currentScale,n=this._currentScaleValue,i=parseFloat(n)===e?Math.round(1e4*e)/100:n,a=t.id,r=this._pages[a-1],s=this.container,o=r.getPagePoint(s.scrollLeft-t.x,s.scrollTop-t.y),u=Math.round(o[0]),l=Math.round(o[1]),h="#page=".concat(a);this.isInPresentationMode||(h+="&zoom=".concat(i,",").concat(u,",").concat(l)),this._location={pageNumber:a,scale:i,top:l,left:u,rotation:this._pagesRotation,pdfOpenParams:h}}},{key:"update",value:function(){var t=this._getVisiblePages(),e=t.views,n=e.length;if(0!==n){var i=Math.max(10,2*n+1);M(Ab,this).resize(i,t.ids),this.renderingQueue.renderHighestPriority(t);var a,r=this._spreadMode===cp.NONE&&(this._scrollMode===hp.PAGE||this._scrollMode===hp.VERTICAL),s=this._currentPageNumber,o=!1,u=R(e);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(l.percent<100)break;if(l.id===s&&r){o=!0;break}}}catch(t){u.e(t)}finally{u.f()}this._setCurrentPageNumber(o?s:e[0].id),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function(t){return this.container.contains(t)}},{key:"focus",value:function(){this.container.focus()}},{key:"_isContainerRtl",get:function(){return"rtl"===getComputedStyle(this.container).direction}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===up.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===up.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getVisiblePages",value:function(){var t=this._scrollMode===hp.PAGE?M(Wb,this).pages:this._pages,e=this._scrollMode===hp.HORIZONTAL,n=e&&this._isContainerRtl;return function(t){var e=t.scrollEl,n=t.views,i=t.sortByVisibility,a=void 0!==i&&i,r=t.horizontal,s=void 0!==r&&r,o=t.rtl,u=void 0!==o&&o,l=e.scrollTop,h=l+e.clientHeight,c=e.scrollLeft,d=c+e.clientWidth,f=[],v=new Set,p=n.length,g=mp(n,s?function(t){var e=t.div,n=e.offsetLeft+e.clientLeft,i=n+e.clientWidth;return u?n<d:i>c}:function(t){var e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>l});g>0&&g<p&&!s&&(g=function(t,e,n){if(t<2)return t;var i=e[t].div,a=i.offsetTop+i.clientTop;a>=n&&(a=(i=e[t-1].div).offsetTop+i.clientTop);for(var r=t-2;r>=0&&!((i=e[r].div).offsetTop+i.clientTop+i.clientHeight<=a);--r)t=r;return t}(g,n,l));for(var m=s?d:-1,D=g;D<p;D++){var y=n[D],A=y.div,b=A.offsetLeft+A.clientLeft,k=A.offsetTop+A.clientTop,E=A.clientWidth,w=A.clientHeight,C=b+E,F=k+w;if(-1===m)F>=h&&(m=F);else if((s?b:k)>m)break;if(!(F<=l||k>=h||C<=c||b>=d)){var _=Math.max(0,l-k)+Math.max(0,F-h),x=(E-(Math.max(0,c-b)+Math.max(0,C-d)))/E,S=(w-_)/w*x*100|0;f.push({id:y.id,x:b,y:k,view:y,percent:S,widthPercent:100*x|0}),v.add(y.id)}}var M=f[0],P=f.at(-1);return a&&f.sort((function(t,e){var n=t.percent-e.percent;return Math.abs(n)>.001?-n:t.id-e.id})),{first:M,last:P,views:f,ids:v}}({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:e,rtl:n})}},{key:"cleanup",value:function(){var t,e=R(this._pages);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.renderingState!==op.FINISHED&&n.reset()}}catch(t){e.e(t)}finally{e.f()}}},{key:"_cancelRendering",value:function(){var t,e=R(this._pages);try{for(e.s();!(t=e.n()).done;){t.value.cancelRendering()}}catch(t){e.e(t)}finally{e.f()}}},{key:"forceRendering",value:function(t){var e=this,n=t||this._getVisiblePages(),i=B(Vb,this,rk).call(this,n),a=this._spreadMode!==cp.NONE&&this._scrollMode!==hp.HORIZONTAL,r=this.renderingQueue.getHighestPriority(n,this._pages,i,a);return!!r&&(B(Vb,this,ik).call(this,r).then((function(){e.renderingQueue.renderView(r)})),!0)}},{key:"hasEqualPageSizes",get:function(){for(var t=this._pages[0],e=1,n=this._pages.length;e<n;++e){var i=this._pages[e];if(i.width!==t.width||i.height!==t.height)return!1}return!0}},{key:"getPagesOverview",value:function(){var t,e=this;return this._pages.map((function(n){var i=n.pdfPage.getViewport({scale:1}),a=bp(i);if(void 0===t)t=a;else if(e.enablePrintAutoRotate&&a!==t)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}}))}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)},set:function(t){if(!(t instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(t));this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=t,this.refresh(!1,{optionalContentConfigPromise:t}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t}))}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(t){if(this._scrollMode!==t){if(!function(t){return Number.isInteger(t)&&Object.values(hp).includes(t)&&t!==hp.UNKNOWN}(t))throw new Error("Invalid scroll mode: ".concat(t));this.pagesCount>cb||(this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber))}}},{key:"_updateScrollMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._scrollMode,n=this.viewer;n.classList.toggle("scrollHorizontal",e===hp.HORIZONTAL),n.classList.toggle("scrollWrapped",e===hp.WRAPPED),this.pdfDocument&&t&&(e===hp.PAGE?B(Vb,this,Yb).call(this):this._previousScrollMode===hp.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&B(Vb,this,tk).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(t){if(this._spreadMode!==t){if(!function(t){return Number.isInteger(t)&&Object.values(cp).includes(t)&&t!==cp.UNKNOWN}(t))throw new Error("Invalid spread mode: ".concat(t));this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var e=this.viewer,n=this._pages;if(this._scrollMode===hp.PAGE)B(Vb,this,Yb).call(this);else if(e.textContent="",this._spreadMode===cp.NONE){var i,a=R(this._pages);try{for(a.s();!(i=a.n()).done;){var r=i.value;e.append(r.div)}}catch(t){a.e(t)}finally{a.f()}}else for(var s=this._spreadMode-1,o=null,u=0,l=n.length;u<l;++u)null===o?((o=document.createElement("div")).className="spread",e.append(o)):u%2===s&&(o=o.cloneNode(!1),e.append(o)),o.append(n[u].div);t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&B(Vb,this,tk).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}}},{key:"_getPageAdvance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case hp.WRAPPED:var n,i=this._getVisiblePages().views,a=new Map,r=R(i);try{for(r.s();!(n=r.n()).done;){var s=n.value,o=s.id,u=s.y,l=s.percent,h=s.widthPercent;if(!(0===l||h<100)){var c=a.get(u);c||a.set(u,c||(c=[])),c.push(o)}}}catch(t){r.e(t)}finally{r.f()}var d,f=R(a.values());try{for(f.s();!(d=f.n()).done;){var v=d.value,p=v.indexOf(t);if(-1!==p){var g=v.length;if(1===g)break;if(e)for(var m=p-1;m>=0;m--){var D=v[m],y=v[m+1]-1;if(D<y)return t-y}else for(var A=p+1,b=g;A<b;A++){var k=v[A],E=v[A-1]+1;if(k>E)return E-t}if(e){var w=v[0];if(w<t)return t-w+1}else{var C=v[g-1];if(C>t)return C-t+1}break}}}catch(t){f.e(t)}finally{f.f()}break;case hp.HORIZONTAL:break;case hp.PAGE:case hp.VERTICAL:if(this._spreadMode===cp.NONE)break;var F=this._spreadMode-1;if(e&&t%2!==F)break;if(!e&&t%2===F)break;var _,x=e?t-1:t+1,S=R(this._getVisiblePages().views);try{for(S.s();!(_=S.n()).done;){var M=_.value,P=M.id,B=M.percent,L=M.widthPercent;if(P===x){if(B>0&&100===L)return 2;break}}}catch(t){S.e(t)}finally{S.f()}}return 1}},{key:"nextPage",value:function(){var t=this._currentPageNumber,e=this.pagesCount;if(t>=e)return!1;var n=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+n,e),!0}},{key:"previousPage",value:function(){var t=this._currentPageNumber;if(t<=1)return!1;var e=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-e,1),!0}},{key:"updateScale",value:function(t){var e=t.drawingDelay,n=t.scaleFactor,i=void 0===n?null:n,a=t.steps,r=void 0===a?null:a,s=t.origin;if(null===r&&null===i)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(this.pdfDocument){var o=this._currentScale;if(i>0&&1!==i)o=Math.round(o*i*100)/100;else if(r){var u=r>0?1.1:1/1.1,l=r>0?Math.ceil:Math.floor;r=Math.abs(r);do{o=l(10*(o*u).toFixed(2))/10}while(--r>0)}o=Math.max(.1,Math.min(10,o)),B(Vb,this,tk).call(this,o,{noScroll:!1,drawingDelay:e,origin:s})}}},{key:"increaseScale",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.updateScale(g(g({},e),{},{steps:null!==(t=e.steps)&&void 0!==t?t:1}))}},{key:"decreaseScale",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.updateScale(g(g({},e),{},{steps:-(null!==(t=e.steps)&&void 0!==t?t:1)}))}},{key:"containerTopLeft",get:function(){return M(Fb,this)||P(Fb,this,[this.container.offsetTop,this.container.offsetLeft])}},{key:"annotationEditorMode",get:function(){return M(wb,this)?M(Eb,this):xg.DISABLE},set:function(t){var e=this,n=t.mode,i=t.editId,a=void 0===i?null:i,r=t.isFromKeyboard,s=void 0!==r&&r;if(!M(wb,this))throw new Error("The AnnotationEditor is not enabled.");if(M(Eb,this)!==n){if(!vb(n))throw new Error("Invalid AnnotationEditor mode: ".concat(n));if(this.pdfDocument){var o=this.eventBus,u=function(){B(Vb,e,uk).call(e),P(Eb,e,n),M(wb,e).updateMode(n,a,s),o.dispatch("annotationeditormodechanged",{source:e,mode:n})};if(n===xg.NONE||M(Eb,this)===xg.NONE){var l=n!==xg.NONE;l||this.pdfDocument.annotationStorage.resetModifiedIds();var h,c=R(this._pages);try{for(c.s();!(h=c.n()).done;){h.value.toggleEditingMode(l)}}catch(t){c.e(t)}finally{c.f()}var d=B(Vb,this,nk).call(this);if(l&&d){B(Vb,this,uk).call(this),P(Lb,this,(function(t){var n=t.pageNumber;d.delete(n),0===d.size&&P(Tb,e,setTimeout(u,0))}));var f=M(Pb,this).signal;return void o._on("pagerendered",M(Lb,this),{signal:f})}}u()}}}},{key:"annotationEditorParams",set:function(t){var e=t.type,n=t.value;if(!M(wb,this))throw new Error("The AnnotationEditor is not enabled.");M(wb,this).updateParams(e,n)}},{key:"refresh",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null);if(this.pdfDocument){var n,i=R(this._pages);try{for(i.s();!(n=i.n()).done;){n.value.update(e)}}catch(t){i.e(t)}finally{i.f()}null!==M(Hb,this)&&(clearTimeout(M(Hb,this)),P(Hb,this,null)),t||this.update()}}}]);var t}();function Gb(t){var e={annotationEditorMode:M(Eb,this),annotationMode:M(Cb,this),textLayerMode:M(zb,this)};return t?(t.includes(Og.COPY)||M(zb,this)!==lp.ENABLE||(e.textLayerMode=lp.ENABLE_PERMISSIONS),t.includes(Og.MODIFY_CONTENTS)||(e.annotationEditorMode=xg.DISABLE),t.includes(Og.MODIFY_ANNOTATIONS)||t.includes(Og.FILL_INTERACTIVE_FORMS)||M(Cb,this)!==Pg.ENABLE_FORMS||(e.annotationMode=Pg.ENABLE),e):e}function qb(t){return Xb.apply(this,arguments)}function Xb(){return(Xb=_(C().mark((function t(e){var n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(){"hidden"===document.visibilityState&&n.resolve()},"hidden"!==document.visibilityState&&this.container.offsetParent&&0!==this._getVisiblePages().views.length){t.next=3;break}return t.abrupt("return");case 3:return n=Promise.withResolvers(),document.addEventListener("visibilitychange",i,{signal:e}),t.next=7,Promise.race([this._onePageRenderedCapability.promise,n.promise]);case 7:document.removeEventListener("visibilitychange",i);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Kb(t,e){var n=this,i=document.getSelection(),a=i.focusNode;if(i.anchorNode&&a&&i.containsNode(M(Rb,this))){if(M(Ib,this)||t===lp.ENABLE_PERMISSIONS)return e.preventDefault(),void e.stopPropagation();P(Ib,this,!0);var r=this.viewer.classList;r.add("copyAll");var s=new AbortController;window.addEventListener("keydown",(function(t){return P(Nb,n,"Escape"===t.key)}),{signal:s.signal}),this.getAllText().then(function(){var t=_(C().mark((function t(e){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e){t.next=3;break}return t.next=3,navigator.clipboard.writeText(e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.warn("Something goes wrong when extracting the text: ".concat(t.message))})).finally((function(){P(Ib,n,!1),P(Nb,n,!1),s.abort(),r.remove("copyAll")})),e.preventDefault(),e.stopPropagation()}}function Yb(){if(this._scrollMode!==hp.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var t=this._currentPageNumber,e=M(Wb,this),n=this.viewer;if(n.textContent="",e.pages.length=0,this._spreadMode!==cp.NONE||this.isInPresentationMode){var i=new Set,a=this._spreadMode-1;-1===a?i.add(t-1):t%2!==a?(i.add(t-1),i.add(t)):(i.add(t-2),i.add(t-1));var r=document.createElement("div");if(r.className="spread",this.isInPresentationMode){var s=document.createElement("div");s.className="dummyPage",r.append(s)}var o,u=R(i);try{for(u.s();!(o=u.n()).done;){var l=o.value,h=this._pages[l];h&&(r.append(h.div),e.pages.push(h))}}catch(t){u.e(t)}finally{u.f()}n.append(r)}else{var c=this._pages[t-1];n.append(c.div),e.pages.push(c)}e.scrollDown=t>=e.previousPageNumber,e.previousPageNumber=t}function Qb(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.div,i=t.id;if(this._currentPageNumber!==i&&this._setCurrentPageNumber(i),this._scrollMode===hp.PAGE&&(B(Vb,this,Yb).call(this),this.update()),!e&&!this.isInPresentationMode){var a=n.offsetLeft+n.clientLeft,r=a+n.clientWidth,s=this.container,o=s.scrollLeft,u=s.clientWidth;(this._scrollMode===hp.HORIZONTAL||a<o||r>o+u)&&(e={left:0,top:0})}fp(n,e),!this._currentScaleValue&&this._location&&(this._location=null)}function $b(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}function Jb(t,e,n){var i=this,a=n.noScroll,r=void 0!==a&&a,s=n.preset,o=void 0!==s&&s,u=n.drawingDelay,l=void 0===u?-1:u,h=n.origin,c=void 0===h?null:h;if(this._currentScaleValue=e.toString(),B(Vb,this,$b).call(this,t))o&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e});else{this.viewer.style.setProperty("--scale-factor",t*jg.PDF_TO_CSS_UNITS);var d=l>=0&&l<1e3;this.refresh(!0,{scale:t,drawingDelay:d?l:-1}),d&&P(Hb,this,setTimeout((function(){P(Hb,i,null),i.refresh()}),l));var f=this._currentScale;if(this._currentScale=t,!r){var v,p=this._currentPageNumber;if(!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(p=this._location.pageNumber,v=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:p,destArray:v,allowNegativeOffset:!0}),Array.isArray(c)){var g=t/f-1,m=L(this.containerTopLeft,2),D=m[0],y=m[1];this.container.scrollLeft+=(c[0]-y)*g,this.container.scrollTop+=(c[1]-D)*g}}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:o?e:void 0}),this.defaultRenderingQueue&&this.update()}}function Zb(t){return t._spreadMode!==cp.NONE&&t._scrollMode!==hp.HORIZONTAL?2:1}function tk(t,e){var n=parseFloat(t);if(n>0)e.preset=!1,B(Vb,this,Jb).call(this,n,t,e);else{var i=this._pages[this._currentPageNumber-1];if(!i)return;var a=rp,r=sp;if(this.isInPresentationMode)a=r=4,this._spreadMode!==cp.NONE&&(a*=2);else if(this.removePageBorders)a=r=0;else if(this._scrollMode===hp.HORIZONTAL){var s=[r,a];a=s[0],r=s[1]}var o=(this.container.clientWidth-a)/i.width*i.scale/E(Vb,this,Zb),u=(this.container.clientHeight-r)/i.height*i.scale;switch(t){case"page-actual":n=1;break;case"page-width":n=o;break;case"page-height":n=u;break;case"page-fit":n=Math.min(o,u);break;case"auto":var l=bp(i)?o:Math.min(u,o);n=Math.min(ap,l);break;default:return void console.error('#setScale: "'.concat(t,'" is an unknown zoom value.'))}e.preset=!0,B(Vb,this,Jb).call(this,n,t,e)}}function ek(){var t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&B(Vb,this,tk).call(this,this._currentScaleValue,{noScroll:!0}),B(Vb,this,Qb).call(this,t)}function nk(){var t,e=this._getVisiblePages(),n=[],i=e.ids,a=R(e.views);try{for(a.s();!(t=a.n()).done;){var r=t.value,s=r.view;s.hasEditableAnnotations()?n.push(r):i.delete(s.id)}}catch(t){a.e(t)}finally{a.f()}return 0===n.length?null:(this.renderingQueue.renderHighestPriority({first:n[0],last:n.at(-1),views:n,ids:i}),i)}function ik(t){return ak.apply(this,arguments)}function ak(){return(ak=_(C().mark((function t(e){var n;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pdfPage){t.next=2;break}return t.abrupt("return",e.pdfPage);case 2:return t.prev=2,t.next=5,this.pdfDocument.getPage(e.id);case 5:return n=t.sent,e.pdfPage||e.setPdfPage(n),t.abrupt("return",n);case 10:return t.prev=10,t.t0=t.catch(2),console.error("Unable to get page for page view",t.t0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[2,10]])})))).apply(this,arguments)}function rk(t){var e,n;if(1===(null===(e=t.first)||void 0===e?void 0:e.id))return!0;if((null===(n=t.last)||void 0===n?void 0:n.id)===this.pagesCount)return!1;switch(this._scrollMode){case hp.PAGE:return M(Wb,this).scrollDown;case hp.HORIZONTAL:return this.scroll.right}return this.scroll.down}function sk(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container.clientHeight;t!==M(Ob,this)&&(P(Ob,this,t),kp.setProperty("--viewer-container-height","".concat(t,"px")))}function ok(t){var e,n=R(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.target===this.container){B(Vb,this,sk).call(this,Math.floor(i.borderBoxSize[0].blockSize)),P(Fb,this,null);break}}}catch(t){n.e(t)}finally{n.f()}}function uk(){M(Lb,this)&&(this.eventBus._off("pagerendered",M(Lb,this)),P(Lb,this,null)),null!==M(Tb,this)&&(clearTimeout(M(Tb,this)),P(Tb,this,null))}var lk=function(t){function e(){return z(this,e),V(this,e,arguments)}return q(e,Ub),W(e,[{key:"_resetView",value:function(){D(e,"_resetView",this,3)([]),this._scrollMode=hp.PAGE,this._spreadMode=cp.NONE}},{key:"scrollMode",set:function(t){}},{key:"_updateScrollMode",value:function(){}},{key:"spreadMode",set:function(t){}},{key:"_updateSpreadMode",value:function(){}}])}(),hk=ip.EventBus,ck=ip.GenericL10n,dk=ip.PDFHistory,fk=ip.PDFLinkService,vk=ip.PDFViewer,pk=function(){return W((function t(e,n){var i=this;z(this,t),this.startDistance=0,this._zoomIn=function(){return i.zoomIn()},this._zoomOut=function(){return i.zoomOut()},this._previousClick=function(){return i.page--},this._nextClick=function(){return i.page++},this._touchstart=function(t){2===t.touches.length&&(i.startDistance=gk(t.touches),console.log("touchstart startDistance",i.startDistance),t.preventDefault())},this._touchmove=function(t){if(2===t.touches.length){var e=gk(t.touches);if(Math.abs(e-i.startDistance)>10){var n=e/i.startDistance;i.startDistance=e;var a=(r=t.touches,s=(r[0].clientX+r[1].clientX)/2,o=(r[0].clientY+r[1].clientY)/2,[s,o]);n>1?i.zoomIn(a):i.zoomOut(a)}t.preventDefault()}var r,s,o},this._wheel=function(t){if(t.ctrlKey){t.preventDefault();var e=[t.clientX,t.clientY];t.deltaY<0?i.zoomIn(e):i.zoomOut(e)}},this.container=e,this.maxCanvasPixels=n,this.previous=e.querySelector(".previous"),this.next=e.querySelector(".next"),this.zoomInBtn=e.querySelector(".zoomIn"),this.zoomOutBtn=e.querySelector(".zoomOut"),this.viewerDiv=this.container.firstElementChild,this.pagination=e.querySelector(".pagination"),this.pdfLoadingTask=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this.pdfLinkService=null,this.eventBus=null,this.value=0}),[{key:"open",value:function(t){return et(this,void 0,void 0,C().mark((function e(){var n,i,a,r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pdfLoadingTask){e.next=2;break}return e.abrupt("return",this.close().then(function(){return this.open(t)}.bind(this)));case 2:return n=this,i=tp({url:t,maxImageSize:1048576}),this.pdfLoadingTask=i,i.onProgress=function(t){n.progress(t.loaded/t.total)},e.prev=6,e.next=9,i.promise;case 9:a=e.sent,this.pdfDocument=a,this.pdfViewer.setDocument(a),this.pdfLinkService.setDocument(a),this.pdfHistory.initialize({fingerprint:a.fingerprints[0]}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(6),r="pdfjs-loading-error",e.t0 instanceof Qv?r="pdfjs-invalid-file-error":e.t0 instanceof $v?r="pdfjs-missing-file-error":e.t0 instanceof Jv&&(r="pdfjs-unexpected-response-error"),n.l10n.get(r,null,null).then((function(t){n.error(t,{message:null===e.t0||void 0===e.t0?void 0:e.t0.message})}));case 21:case"end":return e.stop()}}),e,this,[[6,16]])})))}},{key:"close",value:function(){return et(this,void 0,void 0,C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pdfLoadingTask){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.pdfLoadingTask.destroy();case 4:this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfHistory&&this.pdfHistory.reset());case 6:case"end":return t.stop()}}),t,this)})))}},{key:"error",value:function(t,e){var n=["PDF.js v".concat(ep||"?"," (build: ").concat(Zv||"?",")")];e&&(n.push("Message: ".concat(e.message)),e.stack?n.push("Stack: ".concat(e.stack)):(e.filename&&n.push("File: ".concat(e.filename)),e.lineNumber&&n.push("Line: ".concat(e.lineNumber)))),console.error("".concat(t,"\n\n").concat(n.join("\n")))}},{key:"progress",value:function(t){}},{key:"pagesCount",get:function(){return this.pdfDocument.numPages}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(t){this.pdfViewer.currentPageNumber=t}},{key:"zoomIn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.pdfViewer.updateScale({scaleFactor:1.1,origin:t})}},{key:"zoomOut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.pdfViewer.updateScale({scaleFactor:.9,origin:t})}},{key:"initUI",value:function(){var t=this,e=new hk;this.eventBus=e;var n=new fk({eventBus:e});this.pdfLinkService=n,this.l10n=new ck(null);var i=new vk({container:this.container,eventBus:e,linkService:n,l10n:this.l10n,maxCanvasPixels:this.maxCanvasPixels,textLayerMode:0});this.pdfViewer=i,n.setViewer(i),this.pdfHistory=new dk({eventBus:e,linkService:n}),n.setHistory(this.pdfHistory),e.on("pagesinit",(function(){i.currentScaleValue="auto",t.pagination&&(t.pagination.textContent="".concat(i.currentPageNumber," / ").concat(t.pagesCount))})),e.on("pagechanging",(function(e){var n=e.pageNumber,i=t.pagesCount;t.pagination&&(t.pagination.textContent="".concat(n," / ").concat(i))}),!0),this.container.addEventListener("touchstart",this._touchstart,{passive:!1}),this.container.addEventListener("touchmove",this._touchmove,{passive:!1}),this.viewerDiv.addEventListener("wheel",this._wheel),this.previous&&this.previous.addEventListener("click",this._previousClick),this.next&&this.next.addEventListener("click",this._nextClick),this.zoomInBtn&&this.zoomInBtn.addEventListener("click",this._zoomIn),this.zoomOutBtn&&this.zoomOutBtn.addEventListener("click",this._zoomOut)}},{key:"destroy",value:function(){this.container.removeEventListener("touchstart",this._touchstart),this.container.removeEventListener("touchmove",this._touchstart),this.viewerDiv.removeEventListener("wheel",this._wheel),this.previous&&this.previous.removeEventListener("click",this._previousClick),this.next&&this.next.removeEventListener("click",this._nextClick),this.zoomInBtn&&this.zoomInBtn.removeEventListener("click",this._zoomIn),this.zoomOutBtn&&this.zoomOutBtn.removeEventListener("click",this._zoomOut)}}])}();function gk(t){var e=t[0].pageX-t[1].pageX,n=t[0].pageY-t[1].pageY;return Math.sqrt(e*e+n*n)}function mk(t,e){var n=new pk(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Yv.workerSrc=new URL("./pdf.worker.js",import.meta.url).toString(),n.initUI(),n.open(e),n}export{mk as init};
//# sourceMappingURL=mobile-viewer.js.map
