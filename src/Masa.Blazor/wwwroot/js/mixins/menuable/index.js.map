{"version":3,"file":"index.js","sources":["../../../../../Masa.Blazor.JS/src/mixins/menuable.ts"],"sourcesContent":["import { convertToUnit, getActivator } from \"utils/helper\";\n\ntype Options = {\n  absolute: boolean;\n  auto: boolean;\n  offsetY: boolean;\n  nudgeWidth: number | string;\n  nudgeTop: string;\n  nudgeBottom: string;\n  offsetOverflow: boolean;\n  allowOverflow: boolean;\n  minWidth: number | string;\n  maxWidth: number | string;\n  isRtl: boolean;\n  maxHeight: number | string;\n  contentStyle: string;\n  origin: string;\n};\n\nexport function useMenuable(\n  activatorSelector: string,\n  contentElement: HTMLElement,\n  hasActivator: boolean,\n  options: Options\n) {\n  console.log(\"activatorSelector\", activatorSelector);\n  console.log(\"contentElement\", contentElement);\n  console.log(\"hasActivator\", hasActivator);\n  console.log(\"options\", options);\n\n  let hasWindow,\n    attach,\n    activatorFixed,\n    pageYOffset,\n    pageWidth,\n    positionY,\n    positionX,\n    absoluteY,\n    absoluteX,\n    relativeYOffset,\n    offsetX,\n    nudgeLeft,\n    nudgeRight,\n    right,\n    selectedIndex,\n    tiles: HTMLElement[] = [];\n\n  const defaultOffset = 8;\n\n  let dimensions = {\n    activator: {\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      width: 0,\n      height: 0,\n      offsetTop: 0,\n      scrollHeight: 0,\n      offsetLeft: 0,\n    },\n    content: {\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      width: 0,\n      height: 0,\n      offsetTop: 0,\n      scrollHeight: 0,\n    },\n  };\n\n  updateDimensions();\n  // requestAnimationFrame(updateDimensions);\n  // setTimeout(() => {\n  //   updateDimensions();\n  // }, 300);\n\n  return {\n    updateDimensions,\n  };\n\n  function updateDimensions() {\n    hasWindow = typeof window !== \"undefined\";\n    checkActivatorFixed();\n    checkForPageYOffset();\n    pageWidth = document.documentElement.clientWidth;\n\n    const dimensions2: any = {\n      activator: { ...dimensions.activator },\n      content: { ...dimensions.content },\n    };\n\n    // Activator should already be shown\n    if (!hasActivator || options.absolute) {\n      dimensions2.activator = absolutePosition();\n    } else {\n      const activator = getActivator(activatorSelector);\n      if (!activator) return;\n\n      dimensions2.activator = measure(activator);\n      dimensions2.activator.offsetLeft = activator.offsetLeft;\n      if (attach !== false) {\n        // account for css padding causing things to not line up\n        // this is mostly for v-autocomplete, hopefully it won't break anything\n        dimensions2.activator.offsetTop = activator.offsetTop;\n      } else {\n        dimensions2.activator.offsetTop = 0;\n      }\n    }\n\n    // Display and hide to get dimensions\n    sneakPeek(() => {\n      console.log(\"sneakPeek\");\n      if (contentElement) {\n        if (contentElement.offsetParent) {\n          const offsetRect = getRoundedBoundedClientRect(\n            contentElement.offsetParent\n          );\n\n          relativeYOffset = window.pageYOffset + offsetRect.top;\n          dimensions2.activator.top -= relativeYOffset;\n          dimensions2.activator.left -= window.pageXOffset + offsetRect.left;\n        }\n\n        dimensions2.content = measure(contentElement);\n      }\n\n      dimensions = dimensions2;\n      console.log(\"sneakPeek updateDimensions\", dimensions2);\n\n      setStyles();\n    });\n  }\n\n  function setStyles() {\n    contentElement.style.cssText = options.contentStyle;\n\n    //TODO: 要判断已存在就不更新吗？\n    contentElement.style.maxHeight = calculatedMaxHeight();\n    contentElement.style.minWidth = calculatedMinWidth();\n    contentElement.style.maxWidth = calculatedMaxWidth();\n    contentElement.style.top = calculatedTop();\n    console.log(\"top\", calculatedTop());\n    contentElement.style.left = calculatedLeft();\n    console.log(\"Left\", calculatedLeft());\n    contentElement.style.transformOrigin = options.origin;\n\n  }\n\n  function calculatedTop() {\n    return !options.auto\n      ? calcTop()\n      : convertToUnit(calcYOverflow(calcTopAuto())); // TODO: 这里与vueitfy不一致\n  }\n\n  function calculatedLeft(): string {\n    const menuWidth = Math.max(\n      dimensions.content.width,\n      parseFloat(calculatedMinWidth())\n    );\n\n    if (!options.auto) return calcLeft(menuWidth) || \"0\";\n\n    return convertToUnit(calcXOverflow(calcLeftAuto(), menuWidth)) || \"0\";\n  }\n\n  function calcLeftAuto() {\n    return parseInt(dimensions.activator.left - defaultOffset * 2);\n  }\n\n  function calculatedMaxHeight(): string {\n    const height = options.auto ? \"200px\" : convertToUnit(options.maxHeight);\n\n    return height || \"0\";\n  }\n\n  function calculatedMinWidth(): string {\n    if (options.minWidth) {\n      return convertToUnit(options.minWidth) || \"0\";\n    }\n\n    const minWidth = Math.min(\n      dimensions.activator.width +\n        Number(options.nudgeWidth) +\n        (options.auto ? 16 : 0),\n      Math.max(pageWidth - 24, 0)\n    );\n\n    const calculatedMaxWidth2 = isNaN(parseInt(calculatedMaxWidth()))\n      ? minWidth\n      : parseInt(calculatedMaxWidth());\n\n    return convertToUnit(Math.min(calculatedMaxWidth2, minWidth)) || \"0\";\n  }\n\n  function calculatedMaxWidth(): string {\n    return convertToUnit(options.maxWidth) || \"0\";\n  }\n\n  function calcLeft(menuWidth: number) {\n    const left = computedLeft();\n    return convertToUnit(\n      attach !== false ? left : calcXOverflow(left, menuWidth)\n    );\n  }\n  function calcTop() {\n    const top = computedTop();\n    return convertToUnit(attach !== false ? top : calcYOverflow(top));\n  }\n\n  function calcTopAuto() {\n    const activeTile = contentElement.querySelector(\n      \".m-list-item--active\"\n    ) as HTMLElement | null;\n\n    if (!activeTile) {\n      selectedIndex = null;\n    }\n\n    if (options.offsetY || !activeTile) {\n      return computedTop();\n    }\n\n    selectedIndex = Array.from(tiles).indexOf(activeTile);\n\n    const tileDistanceFromMenuTop = activeTile.offsetTop - calcScrollPosition();\n    const firstTileOffsetTop = (\n      contentElement.querySelector(\".m-list-item\") as HTMLElement\n    ).offsetTop;\n\n    return computedTop() - tileDistanceFromMenuTop - firstTileOffsetTop - 1;\n  }\n\n  function calcScrollPosition() {\n    const $el = contentElement;\n    const activeTile = $el.querySelector(\".m-list-item--active\") as HTMLElement;\n    const maxScrollTop = $el.scrollHeight - $el.offsetHeight;\n\n    return activeTile\n      ? Math.min(\n          maxScrollTop,\n          Math.max(\n            0,\n            activeTile.offsetTop -\n              $el.offsetHeight / 2 +\n              activeTile.offsetHeight / 2\n          )\n        )\n      : $el.scrollTop;\n  }\n\n  function computedLeft() {\n    const a = dimensions.activator;\n    const c = dimensions.content;\n    const activatorLeft = (attach !== false ? a.offsetLeft : a.left) || 0;\n    const minWidth = Math.max(a.width, c.width);\n    let left = 0;\n    left += activatorLeft;\n    if (left || (options.isRtl && !right)) left -= minWidth - a.width;\n    if (offsetX) {\n      const maxWidth = isNaN(Number(options.maxWidth))\n        ? a.width\n        : Math.min(a.width, Number(options.maxWidth));\n\n      left += left ? -maxWidth : a.width;\n    }\n    if (nudgeLeft) left -= parseInt(nudgeLeft);\n    if (nudgeRight) left += parseInt(nudgeRight);\n\n    return left;\n  }\n\n  function computedTop() {\n    const a = dimensions.activator;\n    const c = dimensions.content;\n    let top = 0;\n\n    if (top) top += a.height - c.height;\n    if (attach !== false) top += a.offsetTop;\n    else top += a.top + pageYOffset;\n    if (options.offsetY) top += top ? -a.height : a.height;\n    if (options.nudgeTop) top -= parseInt(options.nudgeTop);\n    if (options.nudgeBottom) top += parseInt(options.nudgeBottom);\n\n    return top;\n  }\n\n  function calcXOverflow(left: number, menuWidth: number) {\n    const xOverflow = left + menuWidth - pageWidth + 12;\n\n    if ((!left || right) && xOverflow > 0) {\n      left = Math.max(left - xOverflow, 0);\n    } else {\n      left = Math.max(left, 12);\n    }\n\n    return left + getOffsetLeft();\n  }\n\n  function getOffsetLeft() {\n    if (!hasWindow) return 0;\n\n    return window.pageXOffset || document.documentElement.scrollLeft;\n  }\n\n  function calcYOverflow(top: number) {\n    const documentHeight = getInnerHeight();\n    const toTop = absoluteYOffset() + documentHeight;\n    const activator = dimensions.activator;\n    const contentHeight = dimensions.content.height;\n    const totalHeight = top + contentHeight;\n    const isOverflowing = toTop < totalHeight;\n\n    // If overflowing bottom and offset\n    // TODO: set 'bottom' position instead of 'top'\n    if (\n      isOverflowing &&\n      options.offsetOverflow &&\n      // If we don't have enough room to offset\n      // the overflow, don't offset\n      activator.top > contentHeight\n    ) {\n      top = pageYOffset + (activator.top - contentHeight);\n      // If overflowing bottom\n    } else if (isOverflowing && !options.allowOverflow) {\n      top = toTop - contentHeight - 12;\n      // If overflowing top\n    } else if (top < absoluteYOffset() && !options.allowOverflow) {\n      top = absoluteYOffset() + 12;\n    }\n\n    return top < 12 ? 12 : top;\n  }\n\n  function getInnerHeight() {\n    if (!hasWindow) return 0;\n\n    return window.innerHeight || document.documentElement.clientHeight;\n  }\n\n  function absoluteYOffset(): number {\n    return pageYOffset - relativeYOffset;\n  }\n\n  function checkActivatorFixed() {\n    if (attach !== false) {\n      activatorFixed = false;\n      return;\n    }\n    let el = getActivator(activatorSelector);\n    while (el) {\n      if (window.getComputedStyle(el).position === \"fixed\") {\n        activatorFixed = true;\n        return;\n      }\n      el = el.offsetParent as HTMLElement;\n    }\n    activatorFixed = false;\n  }\n\n  function checkForPageYOffset() {\n    if (hasWindow) {\n      pageYOffset = activatorFixed ? 0 : getOffsetTop();\n    }\n  }\n\n  function getOffsetTop() {\n    if (!hasWindow) return 0;\n\n    return window.pageYOffset || document.documentElement.scrollTop;\n  }\n\n  function absolutePosition() {\n    return {\n      offsetTop: positionY || absoluteY,\n      offsetLeft: positionX || absoluteX,\n      scrollHeight: 0,\n      top: positionY || absoluteY,\n      bottom: positionY || absoluteY,\n      left: positionX || absoluteX,\n      right: positionX || absoluteX,\n      height: 0,\n      width: 0,\n    };\n  }\n\n  function measure(el: HTMLElement) {\n    if (!el || !hasWindow) return null;\n\n    const rect = getRoundedBoundedClientRect(el);\n\n    // Account for activator margin\n    if (attach !== false) {\n      const style = window.getComputedStyle(el);\n\n      rect.left = parseInt(style.marginLeft!);\n      rect.top = parseInt(style.marginTop!);\n    }\n\n    return rect;\n  }\n\n  function getRoundedBoundedClientRect(el: Element) {\n    const rect = el.getBoundingClientRect();\n    return {\n      top: Math.round(rect.top),\n      left: Math.round(rect.left),\n      bottom: Math.round(rect.bottom),\n      right: Math.round(rect.right),\n      width: Math.round(rect.width),\n      height: Math.round(rect.height),\n    };\n  }\n\n  function sneakPeek(cb: () => void) {\n    requestAnimationFrame(() => {\n      const el = contentElement;\n\n      if (!el || el.style.display !== \"none\") {\n        cb();\n        return;\n      }\n\n      el.style.display = \"inline-block\";\n      cb();\n      el.style.display = \"none\";\n    });\n  }\n}\n"],"names":[],"mappings":"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"}