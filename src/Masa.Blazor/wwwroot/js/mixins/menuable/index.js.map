{"version":3,"file":"index.js","sources":["../../../../../Masa.Blazor.JS/src/mixins/stackable.ts","../../../../../Masa.Blazor.JS/src/mixins/menuable.ts"],"sourcesContent":["import { getZIndex } from \"utils/helper\";\n\nexport function getActiveZIndex(\n  el: Element,\n  content: Element,\n  isActive: boolean,\n  stackExclude: Element[] = [],\n  stackMinZIndex = 0\n) {\n  if (typeof window === \"undefined\") return 0;\n\n  // Return current zindex if not active\n\n  const index = !isActive\n    ? getZIndex(content)\n    : getMaxZIndex(el, stackExclude || [content], stackMinZIndex) + 2;\n\n  if (index == null) return index;\n\n  // Return max current z-index (excluding self) + 2\n  // (2 to leave room for an overlay below, if needed)\n  return parseInt(index);\n}\n\nfunction getMaxZIndex(\n  el: Element,\n  exclude: Element[] = [],\n  stackMinZIndex = 0\n) {\n  const base = el;\n  // Start with lowest allowed z-index or z-index of\n  // base component's element, whichever is greater\n  const zis = [stackMinZIndex, getZIndex(base)];\n  // Convert the NodeList to an array to\n  // prevent an Edge bug with Symbol.iterator\n  // https://github.com/vuetifyjs/vuetify/issues/2146\n  const activeElements = [\n    ...document.getElementsByClassName(\"m-menu__content--active\"),\n    ...document.getElementsByClassName(\"m-dialog__content--active\"),\n  ];\n\n  // Get z-index for all active dialogs\n  for (let index = 0; index < activeElements.length; index++) {\n    if (!exclude.includes(activeElements[index])) {\n      zis.push(getZIndex(activeElements[index]));\n    }\n  }\n\n  return Math.max(...zis);\n}\n","import { convertToUnit, getActivator } from \"utils/helper\";\r\n\r\nimport { getActiveZIndex } from \"./stackable\";\r\n\r\ntype Options = {\r\n  top: boolean;\r\n  right: boolean;\r\n  bottom: boolean;\r\n  left: boolean;\r\n  absolute: boolean;\r\n  auto: boolean;\r\n  offsetY: boolean;\r\n  nudgeWidth: number | string;\r\n  nudgeTop: string;\r\n  nudgeBottom: string;\r\n  offsetOverflow: boolean;\r\n  allowOverflow: boolean;\r\n  minWidth: number | string;\r\n  maxWidth: number | string;\r\n  isRtl: boolean;\r\n  maxHeight: number | string;\r\n  contentStyle: string;\r\n  origin: string;\r\n  zIndex: string | number;\r\n  isDefaultAttach: boolean;\r\n};\r\n\r\nexport function useMenuable(\r\n  rootElement: HTMLElement,\r\n  activatorSelector: string,\r\n  contentElement: HTMLElement,\r\n  hasActivator: boolean,\r\n  options: Options\r\n) {\r\n  console.log(\"activatorSelector\", activatorSelector);\r\n  console.log(\"contentElement\", contentElement);\r\n  console.log(\"hasActivator\", hasActivator);\r\n  console.log(\"options\", options);\r\n\r\n  let hasWindow,\r\n    activatorFixed,\r\n    pageYOffset,\r\n    pageWidth,\r\n    positionY,\r\n    positionX,\r\n    absoluteY,\r\n    absoluteX,\r\n    relativeYOffset,\r\n    offsetX,\r\n    nudgeLeft,\r\n    nudgeRight,\r\n    right,\r\n    selectedIndex,\r\n    tiles: HTMLElement[] = [];\r\n\r\n  const defaultOffset = 8;\r\n\r\n  let dimensions = {\r\n    activator: {\r\n      top: 0,\r\n      left: 0,\r\n      bottom: 0,\r\n      right: 0,\r\n      width: 0,\r\n      height: 0,\r\n      offsetTop: 0,\r\n      scrollHeight: 0,\r\n      offsetLeft: 0,\r\n    },\r\n    content: {\r\n      top: 0,\r\n      left: 0,\r\n      bottom: 0,\r\n      right: 0,\r\n      width: 0,\r\n      height: 0,\r\n      offsetTop: 0,\r\n      scrollHeight: 0,\r\n    },\r\n  };\r\n\r\n  return {\r\n    updateDimensions,\r\n  };\r\n\r\n  function updateDimensions() {\r\n    hasWindow = typeof window !== \"undefined\";\r\n    checkActivatorFixed();\r\n    checkForPageYOffset();\r\n    pageWidth = document.documentElement.clientWidth;\r\n\r\n    const dimensions2: any = {\r\n      activator: { ...dimensions.activator },\r\n      content: { ...dimensions.content },\r\n    };\r\n\r\n    // Activator should already be shown\r\n    if (!hasActivator || options.absolute) {\r\n      dimensions2.activator = absolutePosition();\r\n    } else {\r\n      const activator = getActivator(activatorSelector);\r\n      if (!activator) return;\r\n\r\n      dimensions2.activator = measure(activator);\r\n      dimensions2.activator.offsetLeft = activator.offsetLeft;\r\n      if (!options.isDefaultAttach) {\r\n        // account for css padding causing things to not line up\r\n        // this is mostly for v-autocomplete, hopefully it won't break anything\r\n        dimensions2.activator.offsetTop = activator.offsetTop;\r\n      } else {\r\n        dimensions2.activator.offsetTop = 0;\r\n      }\r\n    }\r\n\r\n    // Display and hide to get dimensions\r\n    sneakPeek(() => {\r\n      console.log(\"sneakPeek\");\r\n      if (contentElement) {\r\n        if (contentElement.offsetParent) {\r\n          const offsetRect = getRoundedBoundedClientRect(\r\n            contentElement.offsetParent\r\n          );\r\n\r\n          relativeYOffset = window.pageYOffset + offsetRect.top;\r\n          dimensions2.activator.top -= relativeYOffset;\r\n          dimensions2.activator.left -= window.pageXOffset + offsetRect.left;\r\n        }\r\n\r\n        dimensions2.content = measure(contentElement);\r\n      }\r\n\r\n      dimensions = dimensions2;\r\n      console.log(\"sneakPeek updateDimensions\", dimensions2);\r\n\r\n      setStyles();\r\n    });\r\n  }\r\n\r\n  function setStyles() {\r\n    console.log('setStyles 1', contentElement.style.display)\r\n    contentElement.style.cssText = options.contentStyle;\r\n\r\n    //TODO: 要判断已存在就不更新吗？\r\n    contentElement.style.maxHeight = calculatedMaxHeight();\r\n    contentElement.style.minWidth = calculatedMinWidth();\r\n    contentElement.style.maxWidth = calculatedMaxWidth();\r\n    contentElement.style.top = calculatedTop();\r\n    contentElement.style.left = calculatedLeft();\r\n    contentElement.style.transformOrigin = options.origin;\r\n    contentElement.style.zIndex = (\r\n      options.zIndex ||\r\n      getActiveZIndex(rootElement, contentElement, true, undefined, 6)\r\n    ).toString();\r\n    console.log('setStyles 2', contentElement.style.display)\r\n  }\r\n\r\n  function calculatedTop() {\r\n    return !options.auto\r\n      ? calcTop()\r\n      : convertToUnit(calcYOverflow(calcTopAuto())); // TODO: 这里与vueitfy不一致\r\n  }\r\n\r\n  function calculatedLeft(): string {\r\n    const menuWidth = Math.max(\r\n      dimensions.content.width,\r\n      parseFloat(calculatedMinWidth())\r\n    );\r\n\r\n    if (!options.auto) return calcLeft(menuWidth) || \"0\";\r\n\r\n    return convertToUnit(calcXOverflow(calcLeftAuto(), menuWidth)) || \"0\";\r\n  }\r\n\r\n  function calcLeftAuto() {\r\n    return parseInt(dimensions.activator.left - defaultOffset * 2);\r\n  }\r\n\r\n  function calculatedMaxHeight(): string {\r\n    const height = options.auto ? \"200px\" : convertToUnit(options.maxHeight);\r\n\r\n    return height || \"0\";\r\n  }\r\n\r\n  function calculatedMinWidth(): string {\r\n    if (options.minWidth) {\r\n      return convertToUnit(options.minWidth) || \"0\";\r\n    }\r\n\r\n    const minWidth = Math.min(\r\n      dimensions.activator.width +\r\n      Number(options.nudgeWidth) +\r\n      (options.auto ? 16 : 0),\r\n      Math.max(pageWidth - 24, 0)\r\n    );\r\n\r\n    const calculatedMaxWidth2 = isNaN(parseInt(calculatedMaxWidth()))\r\n    ? minWidth\r\n    : parseInt(calculatedMaxWidth());\r\n\r\n    return convertToUnit(Math.min(calculatedMaxWidth2, minWidth)) || \"0\";\r\n  }\r\n\r\n  function calculatedMaxWidth(): string {\r\n    return convertToUnit(options.maxWidth) || \"0\";\r\n  }\r\n\r\n  function calcLeft(menuWidth: number) {\r\n    const left = computedLeft();\r\n    return convertToUnit(\r\n      !options.isDefaultAttach ? left : calcXOverflow(left, menuWidth)\r\n    );\r\n  }\r\n  function calcTop() {\r\n    const top = computedTop();\r\n    return convertToUnit(!options.isDefaultAttach ? top : calcYOverflow(top));\r\n  }\r\n\r\n  function calcTopAuto() {\r\n    const activeTile = contentElement.querySelector(\r\n      \".m-list-item--active\"\r\n    ) as HTMLElement | null;\r\n\r\n    if (!activeTile) {\r\n      selectedIndex = null;\r\n    }\r\n\r\n    if (options.offsetY || !activeTile) {\r\n      return computedTop();\r\n    }\r\n\r\n    selectedIndex = Array.from(tiles).indexOf(activeTile);\r\n\r\n    const tileDistanceFromMenuTop = activeTile.offsetTop - calcScrollPosition();\r\n    const firstTileOffsetTop = (\r\n      contentElement.querySelector(\".m-list-item\") as HTMLElement\r\n    ).offsetTop;\r\n\r\n    return computedTop() - tileDistanceFromMenuTop - firstTileOffsetTop - 1;\r\n  }\r\n\r\n  function calcScrollPosition() {\r\n    const $el = contentElement;\r\n    const activeTile = $el.querySelector(\".m-list-item--active\") as HTMLElement;\r\n    const maxScrollTop = $el.scrollHeight - $el.offsetHeight;\r\n\r\n    return activeTile\r\n      ? Math.min(\r\n          maxScrollTop,\r\n          Math.max(\r\n            0,\r\n            activeTile.offsetTop -\r\n              $el.offsetHeight / 2 +\r\n              activeTile.offsetHeight / 2\r\n          )\r\n        )\r\n      : $el.scrollTop;\r\n  }\r\n\r\n  function computedLeft() {\r\n    const a = dimensions.activator;\r\n    const c = dimensions.content;\r\n    const activatorLeft = (!options.isDefaultAttach ? a.offsetLeft : a.left) || 0;\r\n    const minWidth = Math.max(a.width, c.width);\r\n    let left = 0;\r\n    left += activatorLeft;\r\n    if (left || (options.isRtl && !right)) left -= minWidth - a.width;\r\n    if (offsetX) {\r\n      const maxWidth = isNaN(Number(options.maxWidth))\r\n        ? a.width\r\n        : Math.min(a.width, Number(options.maxWidth));\r\n\r\n      left += left ? -maxWidth : a.width;\r\n    }\r\n    if (nudgeLeft) left -= parseInt(nudgeLeft);\r\n    if (nudgeRight) left += parseInt(nudgeRight);\r\n\r\n    return left;\r\n  }\r\n\r\n  function computedTop() {\r\n    const a = dimensions.activator;\r\n    const c = dimensions.content;\r\n    let top = 0;\r\n\r\n    if (options.top) top += a.height - c.height;\r\n    if (!options.isDefaultAttach) top += a.offsetTop;\r\n    else top += a.top + pageYOffset;\r\n    if (options.offsetY) top += options.top ? -a.height : a.height;\r\n    if (options.nudgeTop) top -= parseInt(options.nudgeTop);\r\n    if (options.nudgeBottom) top += parseInt(options.nudgeBottom);\r\n\r\n    return top;\r\n  }\r\n\r\n  function calcXOverflow(left: number, menuWidth: number) {\r\n    const xOverflow = left + menuWidth - pageWidth + 12;\r\n\r\n    if ((!left || right) && xOverflow > 0) {\r\n      left = Math.max(left - xOverflow, 0);\r\n    } else {\r\n      left = Math.max(left, 12);\r\n    }\r\n\r\n    return left + getOffsetLeft();\r\n  }\r\n\r\n  function getOffsetLeft() {\r\n    if (!hasWindow) return 0;\r\n\r\n    return window.pageXOffset || document.documentElement.scrollLeft;\r\n  }\r\n\r\n  function calcYOverflow(top: number) {\r\n    const documentHeight = getInnerHeight();\r\n    const toTop = absoluteYOffset() + documentHeight;\r\n    const activator = dimensions.activator;\r\n    const contentHeight = dimensions.content.height;\r\n    const totalHeight = top + contentHeight;\r\n    const isOverflowing = toTop < totalHeight;\r\n\r\n    // If overflowing bottom and offset\r\n    // TODO: set 'bottom' position instead of 'top'\r\n    if (\r\n      isOverflowing &&\r\n      options.offsetOverflow &&\r\n      // If we don't have enough room to offset\r\n      // the overflow, don't offset\r\n      activator.top > contentHeight\r\n    ) {\r\n      top = pageYOffset + (activator.top - contentHeight);\r\n      // If overflowing bottom\r\n    } else if (isOverflowing && !options.allowOverflow) {\r\n      top = toTop - contentHeight - 12;\r\n      // If overflowing top\r\n    } else if (top < absoluteYOffset() && !options.allowOverflow) {\r\n      top = absoluteYOffset() + 12;\r\n    }\r\n\r\n    return top < 12 ? 12 : top;\r\n  }\r\n\r\n  function getInnerHeight() {\r\n    if (!hasWindow) return 0;\r\n\r\n    return window.innerHeight || document.documentElement.clientHeight;\r\n  }\r\n\r\n  function absoluteYOffset(): number {\r\n    return pageYOffset - relativeYOffset;\r\n  }\r\n\r\n  function checkActivatorFixed() {\r\n    if (!options.isDefaultAttach) {\r\n      activatorFixed = false;\r\n      return;\r\n    }\r\n    let el = getActivator(activatorSelector);\r\n    while (el) {\r\n      if (window.getComputedStyle(el).position === \"fixed\") {\r\n        activatorFixed = true;\r\n        return;\r\n      }\r\n      el = el.offsetParent as HTMLElement;\r\n    }\r\n    activatorFixed = false;\r\n  }\r\n\r\n  function checkForPageYOffset() {\r\n    if (hasWindow) {\r\n      pageYOffset = activatorFixed ? 0 : getOffsetTop();\r\n    }\r\n  }\r\n\r\n  function getOffsetTop() {\r\n    if (!hasWindow) return 0;\r\n\r\n    return window.pageYOffset || document.documentElement.scrollTop;\r\n  }\r\n\r\n  function absolutePosition() {\r\n    return {\r\n      offsetTop: positionY || absoluteY,\r\n      offsetLeft: positionX || absoluteX,\r\n      scrollHeight: 0,\r\n      top: positionY || absoluteY,\r\n      bottom: positionY || absoluteY,\r\n      left: positionX || absoluteX,\r\n      right: positionX || absoluteX,\r\n      height: 0,\r\n      width: 0,\r\n    };\r\n  }\r\n\r\n  function measure(el: HTMLElement) {\r\n    if (!el || !hasWindow) return null;\r\n\r\n    const rect = getRoundedBoundedClientRect(el);\r\n\r\n    // Account for activator margin\r\n    if (!options.isDefaultAttach) {\r\n      const style = window.getComputedStyle(el);\r\n\r\n      rect.left = parseInt(style.marginLeft!);\r\n      rect.top = parseInt(style.marginTop!);\r\n    }\r\n\r\n    return rect;\r\n  }\r\n\r\n  function getRoundedBoundedClientRect(el: Element) {\r\n    const rect = el.getBoundingClientRect();\r\n    return {\r\n      top: Math.round(rect.top),\r\n      left: Math.round(rect.left),\r\n      bottom: Math.round(rect.bottom),\r\n      right: Math.round(rect.right),\r\n      width: Math.round(rect.width),\r\n      height: Math.round(rect.height),\r\n    };\r\n  }\r\n\r\n  function sneakPeek(cb: () => void) {\r\n    requestAnimationFrame(() => {\r\n      const el = contentElement;\r\n\r\n      if (!el || el.style.display !== \"none\") {\r\n        cb();\r\n        return;\r\n      }\r\n\r\n      console.log(\"display to inline-block\", el.style.display);\r\n\r\n      el.style.display = \"inline-block\";\r\n      cb();\r\n      console.log(\"display to none\", el.style.display);\r\n      el.style.display = \"none\";\r\n      console.log(\"display to none 2\", el.style.display);\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}