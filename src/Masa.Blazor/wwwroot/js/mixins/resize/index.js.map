{"version":3,"file":"index.js","sources":["../../../../../Masa.Blazor.JS/node_modules/.pnpm/just-throttle@4.2.0/node_modules/just-throttle/index.mjs","../../../../../Masa.Blazor.JS/src/mixins/resize.ts"],"sourcesContent":["var functionThrottle = throttle;\n\nfunction throttle(fn, interval, options) {\n  var timeoutId = null;\n  var throttledFn = null;\n  var leading = (options && options.leading);\n  var trailing = (options && options.trailing);\n\n  if (leading == null) {\n    leading = true; // default\n  }\n\n  if (trailing == null) {\n    trailing = !leading; //default\n  }\n\n  if (leading == true) {\n    trailing = false; // forced because there should be invocation per call\n  }\n\n  var cancel = function() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  var flush = function() {\n    var call = throttledFn;\n    cancel();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var throttleWrapper = function() {\n    var callNow = leading && !timeoutId;\n    var context = this;\n    var args = arguments;\n\n    throttledFn = function() {\n      return fn.apply(context, args);\n    };\n\n    if (!timeoutId) {\n      timeoutId = setTimeout(function() {\n        timeoutId = null;\n\n        if (trailing) {\n          return throttledFn();\n        }\n      }, interval);\n    }\n\n    if (callNow) {\n      callNow = false;\n      return throttledFn();\n    }\n  };\n\n  throttleWrapper.cancel = cancel;\n  throttleWrapper.flush = flush;\n\n  return throttleWrapper;\n}\n\nexport {functionThrottle as default};\n","import throttle from \"just-throttle\";\r\n\r\nfunction observe(el: HTMLElement, handle: DotNet.DotNetObject) {\r\n  if (!handle) {\r\n    throw new Error(\"the handle from .NET cannot be null\");\r\n  }\r\n\r\n  if (!el) {\r\n    handle.dispose();\r\n    return;\r\n  }\r\n\r\n  const throttled = throttle(\r\n    () => {\r\n      if (!handle) return;\r\n      handle.invokeMethodAsync(\"Invoke\");\r\n    },\r\n    300,\r\n    { trailing: true }\r\n  );\r\n\r\n  const observer = new ResizeObserver(\r\n    async (entries: ResizeObserverEntry[] = []) => {\r\n      if (!entries.length) return;\r\n      throttled();\r\n    }\r\n  );\r\n\r\n  el._resizeObserver = Object(el._resizeObserver);\r\n  el._resizeObserver = { handle, observer };\r\n\r\n    observer.observe(el);\r\n}\r\n\r\nfunction unobserve(el: HTMLElement) {\r\n  if (!el) return;\r\n\r\n  if (!el._resizeObserver) return;\r\n\r\n  el._resizeObserver.observer.unobserve(el);\r\n  el._resizeObserver.handle.dispose();\r\n  delete el._resizeObserver;\r\n}\r\n\r\nfunction observeSelector(\r\n  selector: string,\r\n  handle: DotNet.DotNetObject\r\n) {\r\n  if (selector) {\r\n    const el = document.querySelector(selector) as HTMLElement;\r\n    el && observe(el, handle);\r\n  }\r\n}\r\n\r\nfunction unobserveSelector(selector: string) {\r\n  if (selector) {\r\n    const el = document.querySelector(selector) as HTMLElement;\r\n    el && unobserve(el);\r\n  }\r\n}\r\n\r\nexport { observe, unobserve, observeSelector, unobserveSelector };\r\n"],"names":["functionThrottle","fn","interval","options","timeoutId","throttledFn","leading","trailing","cancel","clearTimeout","throttleWrapper","callNow","context","this","args","arguments","apply","setTimeout","flush","call","observe","el","handle","Error","dispose","throttled","throttle","invokeMethodAsync","observer","ResizeObserver","entries","__awaiter","length","_resizeObserver","Object","unobserve","observeSelector","selector","document","querySelector","unobserveSelector"],"mappings":"8CAAA,IAAIA,EAEJ,SAAkBC,EAAIC,EAAUC,GAC9B,IAAIC,EAAY,KACZC,EAAc,KACdC,EAAWH,GAAWA,EAAQG,QAC9BC,EAAYJ,GAAWA,EAAQI,SAEpB,MAAXD,IACFA,GAAU,GAGI,MAAZC,IACFA,GAAYD,GAGC,GAAXA,IACFC,GAAW,GAGb,IAAIC,EAAS,WACPJ,IACFK,aAAaL,GACbA,EAAY,KAElB,EAWMM,EAAkB,WACpB,IAAIC,EAAUL,IAAYF,EACtBQ,EAAUC,KACVC,EAAOC,UAgBX,GAdAV,EAAc,WACZ,OAAOJ,EAAGe,MAAMJ,EAASE,EAC/B,EAESV,IACHA,EAAYa,YAAW,WAGrB,GAFAb,EAAY,KAERG,EACF,OAAOF,GAEV,GAAEH,IAGDS,EAEF,OADAA,GAAU,EACHN,GAEb,EAKE,OAHAK,EAAgBF,OAASA,EACzBE,EAAgBQ,MAnCJ,WACV,IAAIC,EAAOd,EACXG,IAEIW,GACFA,GAEN,EA8BST,CACT,EC/DA,SAASU,EAAQC,EAAiBC,GAChC,IAAKA,EACH,MAAM,IAAIC,MAAM,uCAGlB,IAAKF,EAEH,YADAC,EAAOE,UAIT,MAAMC,EAAYC,GAChB,KACOJ,GACLA,EAAOK,kBAAkB,SAAS,GAEpC,IACA,CAAEpB,UAAU,IAGRqB,EAAW,IAAIC,gBACnB,CAAOC,EAAiC,KAAMC,EAAAlB,UAAA,OAAA,GAAA,YACvCiB,EAAQE,QACbP,GACD,MAGHJ,EAAGY,gBAAkBC,OAAOb,EAAGY,iBAC/BZ,EAAGY,gBAAkB,CAAEX,SAAQM,YAE7BA,EAASR,QAAQC,EACrB,CAEA,SAASc,EAAUd,GACZA,GAEAA,EAAGY,kBAERZ,EAAGY,gBAAgBL,SAASO,UAAUd,GACtCA,EAAGY,gBAAgBX,OAAOE,iBACnBH,EAAGY,gBACZ,CAEA,SAASG,EACPC,EACAf,GAEA,GAAIe,EAAU,CACZ,MAAMhB,EAAKiB,SAASC,cAAcF,GAClChB,GAAMD,EAAQC,EAAIC,EACnB,CACH,CAEA,SAASkB,EAAkBH,GACzB,GAAIA,EAAU,CACZ,MAAMhB,EAAKiB,SAASC,cAAcF,GAClChB,GAAMc,EAAUd,EACjB,CACH"}