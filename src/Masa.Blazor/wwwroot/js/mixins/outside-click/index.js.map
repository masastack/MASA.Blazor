{"version":3,"file":"index.js","sources":["../../../../../Masa.Blazor.JS/src/mixins/outside-click.ts"],"sourcesContent":["class OutsideClick {\r\n  dotNetHelper: DotNet.DotNetObject;\r\n  listener: (e: MouseEvent & KeyboardEvent & FocusEvent) => void;\r\n  mousedownListener: (e: MouseEvent) => void;\r\n  excludedSelectors: string[];\r\n  lastMousedownWasOutside: boolean = true;\r\n\r\n  constructor(dotNetHelper: DotNet.DotNetObject, excludedSelectors: string[]) {\r\n    this.dotNetHelper = dotNetHelper;\r\n    this.excludedSelectors = excludedSelectors;\r\n  }\r\n\r\n  genListeners() {\r\n    this.listener = (e) => {\r\n      if (this.checkEvent(e)) return;\r\n\r\n      if (this.lastMousedownWasOutside) {\r\n        this.dotNetHelper.invokeMethodAsync(\"OnOutsideClick\");\r\n      }\r\n    };\r\n\r\n    this.mousedownListener = (e) => {\r\n      this.lastMousedownWasOutside = !this.checkEvent(e);\r\n    };\r\n  }\r\n\r\n  addListeners() {\r\n    this.genListeners();\r\n    document.addEventListener(\"click\", this.listener, true);\r\n    document.addEventListener(\"mousedown\", this.mousedownListener, true);\r\n  }\r\n\r\n  removeListeners() {\r\n    document.removeEventListener(\"click\", this.listener, true);\r\n    document.removeEventListener(\"mousedown\", this.mousedownListener, true);\r\n  }\r\n\r\n  resetListener() {\r\n    this.removeListeners();\r\n    this.addListeners();\r\n  }\r\n\r\n  updateExcludeSelectors(selectors: string[]) {\r\n    this.excludedSelectors = selectors;\r\n  }\r\n\r\n  checkEvent(e: MouseEvent) {\r\n    return this.excludedSelectors.some((selector) => {\r\n      const elements = Array.from(document.querySelectorAll(selector));\r\n      return elements.some(el => el.contains(e.target as HTMLElement));\r\n    });\r\n  }\r\n\r\n  unbind() {\r\n    this.removeListeners();\r\n  }\r\n}\r\n\r\nfunction init(dotNetHelper: DotNet.DotNetObject, excludeSelectors: string[]) {\r\n  var instance = new OutsideClick(dotNetHelper, excludeSelectors);\r\n\r\n  instance.addListeners();\r\n\r\n  return instance;\r\n}\r\n\r\nexport { init };\r\n"],"names":["OutsideClick","constructor","dotNetHelper","excludedSelectors","this","lastMousedownWasOutside","genListeners","listener","e","checkEvent","invokeMethodAsync","mousedownListener","addListeners","document","addEventListener","removeListeners","removeEventListener","resetListener","updateExcludeSelectors","selectors","some","selector","Array","from","querySelectorAll","el","contains","target","unbind","init","excludeSelectors","instance"],"mappings":"AAAA,MAAMA,EAOJ,WAAAC,CAAYC,EAAmCC,GAF/CC,KAAuBC,yBAAY,EAGjCD,KAAKF,aAAeA,EACpBE,KAAKD,kBAAoBA,CAC1B,CAED,YAAAG,GACEF,KAAKG,SAAYC,IACXJ,KAAKK,WAAWD,IAEhBJ,KAAKC,yBACPD,KAAKF,aAAaQ,kBAAkB,iBACrC,EAGHN,KAAKO,kBAAqBH,IACxBJ,KAAKC,yBAA2BD,KAAKK,WAAWD,EAAE,CAErD,CAED,YAAAI,GACER,KAAKE,eACLO,SAASC,iBAAiB,QAASV,KAAKG,UAAU,GAClDM,SAASC,iBAAiB,YAAaV,KAAKO,mBAAmB,EAChE,CAED,eAAAI,GACEF,SAASG,oBAAoB,QAASZ,KAAKG,UAAU,GACrDM,SAASG,oBAAoB,YAAaZ,KAAKO,mBAAmB,EACnE,CAED,aAAAM,GACEb,KAAKW,kBACLX,KAAKQ,cACN,CAED,sBAAAM,CAAuBC,GACrBf,KAAKD,kBAAoBgB,CAC1B,CAED,UAAAV,CAAWD,GACT,OAAOJ,KAAKD,kBAAkBiB,MAAMC,GACjBC,MAAMC,KAAKV,SAASW,iBAAiBH,IACtCD,MAAKK,GAAMA,EAAGC,SAASlB,EAAEmB,WAE5C,CAED,MAAAC,GACExB,KAAKW,iBACN,EAGH,SAASc,EAAK3B,EAAmC4B,GAC/C,IAAIC,EAAW,IAAI/B,EAAaE,EAAc4B,GAI9C,OAFAC,EAASnB,eAEFmB,CACT"}