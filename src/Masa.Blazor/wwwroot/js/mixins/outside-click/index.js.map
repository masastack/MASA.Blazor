{"version":3,"file":"index.js","sources":["../../../../../Masa.Blazor.JS/src/mixins/outside-click.ts"],"sourcesContent":["class OutsideClick {\r\n  dotNetHelper: DotNet.DotNetObject;\r\n  listener: (e: MouseEvent & KeyboardEvent & FocusEvent) => void;\r\n  mousedownListener: (e: MouseEvent) => void;\r\n  excludedSelectors: string[];\r\n  lastMousedownWasOutside: boolean = true;\r\n\r\n  constructor(dotNetHelper: DotNet.DotNetObject, excludedSelectors: string[]) {\r\n    this.dotNetHelper = dotNetHelper;\r\n    this.excludedSelectors = excludedSelectors;\r\n  }\r\n\r\n  genListeners() {\r\n    this.listener = (e) => {\r\n      if (this.checkEvent(e)) return;\r\n\r\n      if (this.lastMousedownWasOutside) {\r\n        this.dotNetHelper.invokeMethodAsync(\"OnOutsideClick\");\r\n      }\r\n    };\r\n\r\n    this.mousedownListener = (e) => {\r\n      this.lastMousedownWasOutside = !this.checkEvent(e);\r\n    };\r\n  }\r\n\r\n  addListeners() {\r\n    this.genListeners();\r\n    document.addEventListener(\"click\", this.listener, true);\r\n    document.addEventListener(\"mousedown\", this.mousedownListener, true);\r\n  }\r\n\r\n  removeListeners() {\r\n    document.removeEventListener(\"click\", this.listener, true);\r\n    document.removeEventListener(\"mousedown\", this.mousedownListener, true);\r\n  }\r\n\r\n  resetListener() {\r\n    this.removeListeners();\r\n    this.addListeners();\r\n  }\r\n\r\n  updateExcludeSelectors(selectors: string[]) {\r\n    this.excludedSelectors = selectors;\r\n  }\r\n\r\n  checkEvent(e: MouseEvent) {\r\n    return this.excludedSelectors.some((selector) => {\r\n      const elements = Array.from(document.querySelectorAll(selector));\r\n      return elements.some(el => el.contains(e.target as HTMLElement));\r\n    });\r\n  }\r\n\r\n  unbind() {\r\n    this.removeListeners();\r\n  }\r\n}\r\n\r\nfunction init(dotNetHelper: DotNet.DotNetObject, excludeSelectors: string[]) {\r\n  var instance = new OutsideClick(dotNetHelper, excludeSelectors);\r\n\r\n  instance.addListeners();\r\n\r\n  return instance;\r\n}\r\n\r\nexport { init };\r\n"],"names":[],"mappings":"AAAA,MAAM,YAAY,CAAA;IAOhB,WAAY,CAAA,YAAiC,EAAE,iBAA2B,EAAA;QAF1E,IAAuB,CAAA,uBAAA,GAAY,IAAI,CAAC;AAGtC,QAAA,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;AACjC,QAAA,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;KAC5C;IAED,YAAY,GAAA;AACV,QAAA,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,KAAI;AACpB,YAAA,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBAAE,OAAO;YAE/B,IAAI,IAAI,CAAC,uBAAuB,EAAE;AAChC,gBAAA,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;AACvD,aAAA;AACH,SAAC,CAAC;AAEF,QAAA,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,KAAI;YAC7B,IAAI,CAAC,uBAAuB,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AACrD,SAAC,CAAC;KACH;IAED,YAAY,GAAA;QACV,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACxD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;KACtE;IAED,eAAe,GAAA;QACb,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC3D,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;KACzE;IAED,aAAa,GAAA;QACX,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,YAAY,EAAE,CAAC;KACrB;AAED,IAAA,sBAAsB,CAAC,SAAmB,EAAA;AACxC,QAAA,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;KACpC;AAED,IAAA,UAAU,CAAC,CAAa,EAAA;QACtB,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAI;AAC9C,YAAA,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC;AACjE,YAAA,OAAO,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAqB,CAAC,CAAC,CAAC;AACnE,SAAC,CAAC,CAAC;KACJ;IAED,MAAM,GAAA;QACJ,IAAI,CAAC,eAAe,EAAE,CAAC;KACxB;AACF,CAAA;AAED,SAAS,IAAI,CAAC,YAAiC,EAAE,gBAA0B,EAAA;IACzE,IAAI,QAAQ,GAAG,IAAI,YAAY,CAAC,YAAY,EAAE,gBAAgB,CAAC,CAAC;IAEhE,QAAQ,CAAC,YAAY,EAAE,CAAC;AAExB,IAAA,OAAO,QAAQ,CAAC;AAClB;;;;"}