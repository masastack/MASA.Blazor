@namespace Masa.Blazor
@inherits MasaComponentBase
@using Masa.Blazor.Extensions
@typeparam TItem

<div class="@GetClass()"
     style="@GetStyle()"
     @ref="Ref">
    @foreach (var item in Items)
    {
        var position = ItemPosition?.Invoke(item);
        var w = position?.W.ToString() ?? "undefined";
        var h = position?.H.ToString() ?? "undefined";
        var x = position?.X is null ? "undefined" : position.X.ToString();
        var y = position?.Y is null ? "undefined" : position.Y.ToString();
        var key = ItemKey(item);

        <div class="grid-stack-item"
             gs-w="@w"
             gs-h="@h"
             gs-x="@x"
             gs-y="@y"
             gs-id="@key"
             @key="@key">
            <div class="@_itemBlock.AppendClasses("grid-stack-item-content", ItemClass)"
                 style="@ItemStyle">
                @ItemContent(item)
            </div>
        </div>
    }
</div>
